var firebaseConfig={apiKey:"AIzaSyCBQv9XnMYZc_YS0ZWwOsjTtDqhajtFYuE",authDomain:"library-cca31.firebaseapp.com",databaseURL:"https://library-cca31.firebaseio.com",projectId:"library-cca31",storageBucket:"library-cca31.appspot.com",messagingSenderId:"360985935498",appId:"1:360985935498:web:79e94ad38e67805cddf773"};function date_format(){var t=new Date,e=(t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()).split("-");return d=["January","February","March","April","May","June","July","August","September","October","November","December"][e[1]-1]+" "+e[2]+","+e[0],d}function add_item(t,e,n,r,i,o,s,a,u){var c=o.split("-"),l=["January","February","March","April","May","June","July","August","September","October","November","December"][c[1]-1]+" "+c[2]+","+c[0];if(""==t||""==n||""==r||null==e||""==i||""==l||""==s||""==a||""==u||null==s||null==n)alert_field("please enter all the required fields!");else{firebase.initializeApp(firebaseConfig);var h=firebase.database();h.ref("Items/"+n+"/"+r).once("value").then((function(o){o.exists()?alert_field("Item already exist!"):(h.ref("Items/"+n+"/"+r).set({Audience:u,Category:s,Description:a,Author:i,Release_date:l}),h.ref("Items/"+n+"/"+r+"/eva").set({ev:"3"}),h.ref("Items/"+n+"/"+r+"/eva/score").set({score:"3"})),firebase.storage().ref(n+"_"+r+".jpg").putString(e,"data_url"),sleep(4e3).then(()=>{Swal.fire({title:"Congratulation!",text:"New item has been added",confirmButtonText:"ok",preConfirm:()=>{window.location.href="/item/"+t}})})}))}}function savy(t){firebase.initializeApp(firebaseConfig),swal.fire({title:"tap Your password",icon:"warning",html:'<input type="password" id="ii">',showCancelButton:!0,confirmButtonText:"Yes, save it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{if(e.value){var n=document.getElementById("ii");firebase.database().ref("user/"+t+"/info/password").once("value",(function(e){n.value==e.val()?sleep(2e3).then(()=>{confirm_field(t)}):alert_field("password incorrect")}))}})}function alert_field(t){Swal.fire({icon:"error",title:"Oops...",text:t})}function confirm_field(t){swal.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, save it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&save_db(t)})}function connect_db(t,e){firebase.initializeApp(firebaseConfig);var n=firebase.database();n.ref("user/"+t).once("value").then((function(r){r.exists()?n.ref("user/"+t+"/info/password").on("value",(function(n){e==n.val()?window.location.href="/item/"+t:alert_field("password incorrect")})):alert_field("username incorrect")}))}function create_db(t,e,n,r,i){firebase.initializeApp(firebaseConfig);var o=firebase.database();o.ref("user/"+t).once("value").then((function(s){s.exists()?alert_field("user already exists!"):(o.ref("user/"+t+"/info").set({password:e,username:t,email:i,fname:r,lname:n}),Swal.fire({title:"Welcome "+t+" !",text:"You are now a member",confirmButtonText:"ok",preConfirm:()=>{window.location.href="/item/"+t}}))}))}function set_data(t){firebase.initializeApp(firebaseConfig);var e=firebase.database(),n=document.getElementById("email"),r=document.getElementById("fname"),i=document.getElementById("lname");document.getElementById("password"),document.getElementById("cpassword"),e.ref("user/"+t+"/info/email").once("value").then((function(t){t.exists()||(n.placeholder="No email yet"),t.exists()&&(n.value=t.val().toString())})),e.ref("user/"+t+"/info/fname").once("value").then((function(t){t.exists()||(r.placeholder="type your first name"),t.exists()&&(r.value=t.val().toString())})),e.ref("user/"+t+"/info/lname").once("value").then((function(t){t.exists()||(i.placeholder="type your last name"),t.exists()&&(i.value=t.val().toString())}))}function save_db(t){var e=firebase.database(),n=e.ref("user/"+t),r=document.getElementById("email"),i=document.getElementById("fname"),o=document.getElementById("lname"),s=document.getElementById("password"),a=document.getElementById("cpassword"),u=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;""!=i.value&&""!=o.value||alert_field("First name and last name are required!!"),a.value!=s.value&&alert_field("Password mismatch"),r.value.match(u)||alert_field("Invalid email address"),a.value==s.value&&r.value.match(u)&&""!=i.value&&""!=o.value&&(""!=s.value&&n.once("value").then((function(n){e.ref("user/"+t+"/info").set({username:t,email:r.value,fname:i.value,lname:o.value,password:s.value})})),""==s.value&&n.once("value").then((function(n){e.ref("user/"+t+"/info/password").on("value",(function(n){var s=n.val().toString();e.ref("user/"+t+"/info").set({username:t,email:r.value,fname:i.value,lname:o.value,password:s})}))})),Swal.fire({title:"Saved!",preConfirm:()=>{window.location.href="/sign-in"}}))}function sleep(t){let e;return Swal.fire({title:"Wait..",timer:t,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),e=setInterval(()=>{const t=Swal.getContent();t&&t.querySelector("b")},100)},onClose:()=>{clearInterval(e)}}).then(t=>{}),new Promise(e=>setTimeout(e,t))}function previaw(t,e){firebase.initializeApp(firebaseConfig);var n=document.getElementById("ir");n.src=e,firebase.storage().ref(t+".jpg").putString(n.src,"data_url"),sleep(4e3).then(()=>{location.reload()})}function set_data3(t){"admin"==t?$("#admin").prepend('<ion-icon   name="add-circle" ></ion-icon>Add item'):$("#admin").remove();var e=document.getElementById("im");firebase.initializeApp(firebaseConfig),firebase.database();var n=firebase.storage().ref();n.child(t+".jpg").getDownloadURL().then((function(r){n.child(t+".jpg").getDownloadURL().then((function(t){e.src=t}))}),(function(t){n.child("avatar.jpg").getDownloadURL().then((function(t){e.src=t}))}))}function set_data2(t){var e=document.getElementById("ir");firebase.initializeApp(firebaseConfig);var n=firebase.database(),r=firebase.storage().ref(),i=document.getElementById("e"),o=document.getElementById("f"),s=document.getElementById("l");r.child(t+".jpg").getDownloadURL().then((function(n){r.child(t+".jpg").getDownloadURL().then((function(t){e.src=t}))}),(function(t){r.child("avatar.jpg").getDownloadURL().then((function(t){e.src=t}))})),n.ref("user/"+t+"/info/email").once("value").then((function(t){t.exists()||(i.innerHTML="No email yet"),t.exists()&&(i.innerHTML=t.val().toString())})),n.ref("user/"+t+"/info/fname").once("value").then((function(t){t.exists()||(o.innerHTML=""),t.exists()&&(o.innerHTML=t.val().toString())})),n.ref("user/"+t+"/info/lname").once("value").then((function(t){t.exists()||(s.innerHTML=""),t.exists()&&(s.innerHTML=t.val().toString())}))}function delete_db(t){swal.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{if(e.value){firebase.initializeApp(firebaseConfig);var n=firebase.database(),r=firebase.storage().ref().child(t+".jpg");n.ref("user/"+t).remove(),r.delete(),sleep(4e3).then(()=>{window.location.href="/sign-in"})}})}function get_point(t){for(var e=0,n=0;n<t.length;n++)e+=parseInt(t[n]);return Math.round(e/t.length)}function get_score(t,e){get_point(point)}function set_items(t){var e,n,r,i,o,s=30,a=0;firebase.initializeApp(firebaseConfig);var u=firebase.database();u.ref("Items").orderByKey().on("child_added",(function(c){u.ref("Items/"+c.key).on("value",(function(c){var l=c.key;u.ref("Items/"+l).orderByKey().on("child_added",(function(c){var h=c.key;u.ref("Items/"+l+"/"+h+"/eva/score/score").once("value",(function(c){var p=c.val();s++,$("#"+l).prepend('<div style="border: 5px solid #bbb; width: 75%; border-radius: 15px; margin: 0 auto; max-width: 500px;" class="coupon"> <div style="padding: 2px 16px; background-color: #f1f1f1;" class="container"> <h3 style="text-align:center;">'+h+"</h3> </div> <div id="+s+">   </div></div>    <br>"),u.ref("Items/"+l+"/"+h).orderByKey().on("child_added",(function(t){"Author"==t.key&&(e=t.val()),"Category"==t.key&&(r=t.val()),"Release_date"==t.key&&(i=t.val()),"Audience"==t.key&&(o=t.val()),"Description"==t.key&&(n=t.val())})),up_pic(l,h,s,e,r,i,o,n,t,p,a),a++}))}))}))}))}function up_pic(t,e,n,r,i,o,s,a,u,c,l){var h,p;"+12"==s&&(h="green"),"+16"==s&&(h="grey"),"+18"==s&&(h="red"),"Book"==t&&(p="Author"),"Movie"!=t&&"Serie"!=t||(p="Director"),fireb_storage();var f=firebase.storage().ref(),d=u+"_"+t+"_"+e+"_"+r.replace(".","1")+"_"+i+"_"+o+"_"+s;f.child(t+"_"+e+".jpg").getDownloadURL().then((function(t){$("#"+n).prepend(" <div><img src="+t+'  alt="Avatar" style="width:100%; height:200px;"></div>          <div style="padding: 2px 16px; background-color: #f1f1f1;"  class="container" > <p text-center>'+p+" : "+r+"</p> <p text-center>Category : "+i+'</p> <p style="color: rgb(46, 46, 46);"  class="expire">Release date : '+o+'</p> <p style="color: '+h+'"  class="expire"><span style="border-radius: 50%; border-style:solid; border-width: 1px 1px 1px 1px; padding:0 3%; cursor:pointer; margin:0px;">'+s+'</span></p><div id="star'+l+'"> <div> <ion-button expand="block" href= "item-show/'+d+'"     color="medium"   ><ion-icon name="add-circle"></ion-icon>More info</ion-button></div> '),1==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),2==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),3==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),4==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star"></span>'),5==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span>')}))}function set_item_show(t,e,n,r){var i;firebase.initializeApp(firebaseConfig);var o=document.getElementById("i"),s=firebase.database();s.ref("Items/"+e+"/"+n+"/eva/score/score").once("value",(function(t){var a=t.val();1==a&&$("#star"+m).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),2==a&&$(".p3-image").prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),3==a&&$(".p3-image").prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),4==a&&$(".p3-image").prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star"></span>'),5==a&&$(".p3-image").prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span>');var u,c,l=firebase.storage().ref();l.child(e+"_"+n+".jpg").getDownloadURL().then((function(t){l.child(e+"_"+n+".jpg").getDownloadURL().then((function(t){o.src=t}))}),(function(t){l.child("avatar.jpg").getDownloadURL().then((function(t){o.src=t}))})),s.ref("Items/"+e+"/"+n).once("value").then((function(t){t.exists()?s.ref("Items/"+e+"/"+n+"/Description").once("value",(function(t){i=t.val(),$("#d").prepend(" <ion-label>"+i+"</ion-label>")})):$("#d").prepend(" <ion-label>No description</ion-label>")})),"+12"==r&&(u="green"),"+16"==r&&(u="grey"),"+18"==r&&(u="red"),"Book"==e&&(c="Author"),"Movie"!=e&&"Serie"!=e||(c="Director"),$("#des").prepend("<ion-item-divider > <ion-label> "+c+" : </ion-label> </ion-item-divider> "),$("#aud").prepend('<p style="color: '+u+'"  class="expire"><span style="border-radius: 50%; border-style:solid; border-width: 1px 1px 1px 1px; padding:0 1%; cursor:pointer; margin:0px;">'+r+"</span></p>")})),test_eva(t,e,n)}function test_eva(t,e,n){var r=firebase.database(),i=e+"_"+n;r.ref("user/"+t+"/eva").once("value",(function(e){e.forEach((function(e){r.ref("user/"+t+"/eva/"+e.key+"/it0").once("value",(function(t){t.val()==i&&($("#evaluated").empty(),$("#evaluated").prepend("<p style='color:#DBE7ED;text-align:center;'><b>thank you for the evaluation</b></p>"))}))}))}))}function set_items_fav(t){var e=0;firebase.initializeApp(firebaseConfig);var n=firebase.database(),r=100;n.ref("user/"+t+"/fav").once("value").then((function(i){i.exists()?($("#fil").prepend('<h2  style="text-align:center;"> <hr style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"> Movie <hr style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"></h2> <br> <div id="Movie"> </div> <br> <br> <h2 style="text-align:center;">    <hr style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"> Serie<hr  style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"></h2> <br> <div id="Serie"> </div> <br> <br> <h2 style="text-align:center;">      <hr style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"> Book        <hr style="border-top: 8px solid rgb(0, 0, 0); border-radius: 5px;" class="rounded"> </h2> <br> <div id="Book"> </div> <br> <br>'),n.ref("user/"+t+"/fav").once("value",(function(i){i.forEach((function(i){n.ref("user/"+t+"/fav/"+i.key).orderByKey().on("child_added",(function(i){var o=i.val().split("_"),s=o[0],a=o[1];n.ref("Items/"+s+"/"+a+"/eva/score/score").once("value",(function(n){var i=n.val();r++,$("#"+s).prepend('<div style="border: 5px solid #bbb; width: 75%; border-radius: 15px; margin: 0 auto; max-width: 500px;" class="coupon"> <div style="padding: 2px 16px; background-color: #f1f1f1;" class="container"> <h3 style="text-align:center;">'+a+" </h3>  </div> <div id="+r+">   </div></div>    <br>"),get_info(s,a,r,t,i,e),e++}))}))}))}))):($("#fil").empty(),$("#fil").prepend("<p style='margin-top:50%;color:#DBE7ED;text-align:center;'><b>It's empty</b></p>"))})),sleep(2e3).then(()=>{set_emp()})}function get_info(t,e,n,r,i,o){var s,a,u,c,l;firebase.database().ref("Items/"+t+"/"+e).orderByKey().on("child_added",(function(t){"Author"==t.key&&(s=t.val()),"Category"==t.key&&(u=t.val()),"Release_date"==t.key&&(c=t.val()),"Audience"==t.key&&(l=t.val()),"Description"==t.key&&(a=t.val())})),sleep(1e3).then(()=>{up_pic2(t,e,n,s,u,c,l,a,r,i,o)})}function up_pic2(t,e,n,r,i,o,s,a,u,c,l){var h,p;"+12"==s&&(h="green"),"+16"==s&&(h="grey"),"+18"==s&&(h="red"),"Book"==t&&(p="Author"),"Movie"!=t&&"Serie"!=t||(p="Director"),fireb_storage();var f=firebase.storage().ref(),d=u+"_"+t+"_"+e+"_"+r.replace(".","1")+"_"+i+"_"+o+"_"+s;f.child(t+"_"+e+".jpg").getDownloadURL().then((function(t){$("#"+n).prepend(" <div><img src="+t+'  alt="Avatar" style="width:100%; height:200px;"></div>          <div style="padding: 2px 16px; background-color: #f1f1f1;"  class="container" > <p text-center>'+p+" : "+r+"</p> <p text-center>Category : "+i+'</p> <p style="color: rgb(46, 46, 46);"  class="expire">Release date : '+o+'</p> <p style="color: '+h+'"  class="expire"><span style="border-radius: 50%; border-style:solid; border-width: 1px 1px 1px 1px; padding:0 3%; cursor:pointer; margin:0px;">'+s+'</span></p><div id="star'+l+'"> <div> <ion-button expand="block" href= "/item-show/'+d+'"     color="medium"   ><ion-icon name="add-circle"></ion-icon>More info</ion-button></div> '),1==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),2==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star "></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),3==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span class="fa fa-star "></span><span  class="fa fa-star"></span>'),4==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span  class="fa fa-star"></span>'),5==c&&$("#star"+l).prepend('<span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span><span style="color:yellow;" class="fa fa-star checked"></span>')}))}function set_emp(){""==$.trim($("#Movie").html())&&$("#Movie").prepend("<p style='color:#DBE7ED;text-align:center;'><b>It's empty</b></p>"),""==$.trim($("#Serie").html())&&$("#Serie").prepend("<p style='color:#DBE7ED;text-align:center;'><b>It's empty</b></p>"),""==$.trim($("#Book").html())&&$("#Book").prepend("<p style='color:#DBE7ED;text-align:center;'><b>It's empty</b></p>")}function test_fav(t,e,n){firebase.initializeApp(firebaseConfig);var r=firebase.database(),i=e+"_"+n;r.ref("user/"+t+"/fav").once("value",(function(o){o.forEach((function(o){r.ref("user/"+t+"/fav/"+o.key+"/it0").once("value",(function(r){r.val()==i&&its_fav(t,e,n)}))}))}))}function its_fav(t,e,n){$("#add").remove(),$(".p2-image").prepend('<ion-button onclick="delete_fav()"  id="add"><ion-icon name="checkmark-circle"></ion-icon>Added to favourite</ion-button> ')}function add_fa(t,e,n){var r=e+"_"+n;firebase.initializeApp(firebaseConfig);var i=firebase.database();i.ref("user/"+t+"/fav").once("value").then((function(e){e.exists()?(i.ref("user/"+t).child("fav").push().set({it0:r}),$("#add").remove(),$(".p2-image").prepend('<ion-button onclick="delete_fav()" id="add"><ion-icon name="checkmark-circle"></ion-icon>Added to favourite</ion-button> ')):(i.ref("user/"+t+"/fav").set({i:12}),i.ref("user/"+t).child("fav").push().set({it0:r}),$("#add").remove(),$(".p2-image").prepend('<ion-button onclick="delete_fav()" id="add"><ion-icon name="checkmark-circle"></ion-icon>Added to favourite</ion-button> '))}))}function delete_fav(){var t=window.location.href.substring(7),e=(t=t.split("/"))[2].split("_"),n=firebase.database(),r=e[2].toString().split("%20").join(" "),i=e[0],o=e[1]+"_"+r;swal.fire({title:"Remove it from favourite?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(t=>{t.value&&(n.ref("user/"+i+"/fav").once("value",(function(t){t.forEach((function(t){var e=t.key;n.ref("user/"+i+"/fav/"+e+"/it0").once("value",(function(t){t.val()==o&&n.ref("user/"+i+"/fav/"+e).remove()}))}))})),sleep(1e3).then(()=>{$("#add").remove(),$(".p2-image").prepend(' <ion-button  onclick="add_fav()" color="medium" id="add">  <ion-icon name="add"></ion-icon> Add to favourite</ion-button> ')}))})}function add_eva(t,e,n,r){firebase.initializeApp(firebaseConfig),add_eva1(t,e,n),add_score(r,e,n)}function add_eva1(t,e,n){var r=e+"_"+n,i=firebase.database();i.ref("user/"+t+"/eva").once("value").then((function(e){e.exists()?i.ref("user/"+t).child("eva").push().set({it0:r}):(i.ref("user/"+t+"/eva").set({i:10}),i.ref("user/"+t).child("eva").push().set({it0:r}))}))}function add_score(t,e,n){var r=firebase.database();r.ref("Items/"+e+"/"+n+"/eva").once("value").then((function(i){if(i.exists())r.ref("Items/"+e+"/"+n+"/eva/ev").once("value",(function(i){var o=i.val()+","+t.toString();r.ref("Items/"+e+"/"+n+"/eva").set({ev:o})}));else{var o="3,"+t.toString();r.ref("Items/"+e+"/"+n+"/eva").set({ev:o})}})),sleep(2e3).then(()=>{set_score(e,n)})}function set_score(t,e){var n=firebase.database();n.ref("Items/"+t+"/"+e+"/eva/ev").once("value",(function(r){for(var i=0,o=r.val().split(","),s=0;s<o.length;s++)i+=parseInt(o[s]);var a=Math.round(i/o.length);n.ref("Items/"+t+"/"+e+"/eva/score").set({score:a})})),sleep(2500).then(()=>{rel()})}function rel(){location.reload()}function set_friends(t){firebase.initializeApp(firebaseConfig),firebase.storage().ref();var e,n,r,o,s,a,u=firebase.database();u.ref("user/"+t+"/friends").once("value").then((function(c){c.exists()?u.ref("user/"+t+"/friends/friends").once("value").then((function(u){if(""==u.val())$("#li").empty(),$("#li").prepend("<p style='margin-top:50%;color:#DBE7ED;text-align:center;'><b>It's empty (add new friends)</b></p>");else{var c=u.val().split(",");for(i=0;i<c.length;i++)e=c[i],n="f"+i,s="im"+i,r="l"+i,o="e"+i,a=e.toString()+"",$("#ll").prepend('<ion-item> <ion-avatar slot="start"> <img id='+s+' src=" " > </ion-avatar> <ion-label><div style="text-align: right;">        <ion-icon onclick="delete_friend(\''+a+"','"+t+'\')" color="dark" name="close"></ion-icon></div> <h2>'+e+"</h2> <h3><b id="+n+"> </b><b id="+r+"> </b></h3> <p id="+o+"> </p> </ion-label> </ion-item>"),friends_infos(e,n,r,o,s)}})):($("#li").empty(),$("#li").prepend("<p style='margin-top:50%;color:#DBE7ED;text-align:center;'><b>It's empty (add new friends)</b></p>"))}))}function myFunction(){var t,e,n,r;for(t=document.getElementById("myInput").value.toUpperCase(),e=document.getElementById("myUL").getElementsByTagName("li"),r=0;r<e.length;r++)n=e[r].getElementsByTagName("a")[0],e[r].style.display=(n.textContent||n.innerText).toUpperCase().indexOf(t)>-1?"":"none"}function myFunction2(){var t,e,n,r;for(t=document.getElementById("myInput2").value.toUpperCase(),e=document.getElementById("myUL2").getElementsByTagName("li"),r=0;r<e.length;r++)n=e[r].getElementsByTagName("a")[0],e[r].style.display=(n.textContent||n.innerText).toUpperCase().indexOf(t)>-1?"":"none"}function add_friends(t){firebase.initializeApp(firebaseConfig),firebase.database(),swal.fire({title:"Add friend ",html:'<input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for users.." title="Type in a name"> <ul id="myUL" style=" height: 170px; overflow-y: auto;list-style-type: none;padding: 0;margin: 0;">  </ul>',showCancelButton:!0,confirmButtonText:"Search",cancelButtonText:"cancel!",reverseButtons:!0}).then(e=>{if(e.value){var n=document.getElementById("myInput").value;""==n?Swal.fire({title:"Error!",icon:"warning",text:"Invalid username!!!",confirmButtonText:"ok",preConfirm:()=>{}}):n==t?Swal.fire({title:"Error!",icon:"warning",text:"the username you have entered is yours!!!",confirmButtonText:"ok",preConfirm:()=>{}}):add_frr(t,n,0)}}),set_addfr(t)}function set_addfr(t){var e=firebase.database();e.ref("user").once("value").then((function(n){var r=Object.keys(n.val());r.splice(r.indexOf("admin"),1),r.splice(r.indexOf(t),1),e.ref("user/"+t+"/friends").once("value").then((function(n){if(!n.exists())for(i=0;i<r.length;i++)but="butt"+i,$("#myUL").prepend('<li> <ion-item><a  style=" margin-top: -1px; padding: 12px; text-decoration: none; font-size: 18px; color: black; display: block">'+r[i]+'</a><ion-button id="'+but+'" onclick="add_frr(\''+t+"','"+r[i]+"','"+but+'\')" slot="end"> Add </ion-button> </ion-item> </li>   ');n.exists()&&e.ref("user/"+t+"/friends/friends").once("value").then((function(e){""==e.val()&&console.log("yes");var n=e.val().split(",");for(i=0;i<r.length;i++)but="butt"+i,n.includes(r[i])?$("#myUL").prepend('<li> <ion-item><a  style=" margin-top: -1px; padding: 12px; text-decoration: none; font-size: 18px; color: black; display: block">'+r[i]+'</a><ion-button slot="end" color="light"> <ion-icon name="checkmark-outline" color="success"></ion-icon>Added </ion-button> </ion-item> </li>'):$("#myUL").prepend('<li> <ion-item><a  style=" margin-top: -1px; padding: 12px; text-decoration: none; font-size: 18px; color: black; display: block">'+r[i]+'</a><ion-button id="'+but+'" onclick="add_frr(\''+t+"','"+r[i]+"','"+but+'\')" slot="end"> Add </ion-button> </ion-item> </li>')}))}))}))}function add_frr(t,e,n){var r=firebase.database();r.ref("user/"+e).once("value").then((function(i){i.exists()||Swal.fire({title:"Error!",icon:"warning",text:"Not found!!!",confirmButtonText:"ok",preConfirm:()=>{}}),i.exists()&&r.ref("user/"+t+"/friends").once("value").then((function(r){r.exists()||friends_noexist(t,e,n),r.exists()&&friends_exist(t,e,n)}))}))}function friends_exist(t,e,n){var r=firebase.database();r.ref("user/"+t+"/friends/friends").once("value").then((function(i){""==i.val()?friends_noexist(t,e,n):r.ref("user/"+t+"/friends/friends").once("value").then((function(i){var o=i.val().split(",");o.includes(e)||(0!=n&&($("#"+n).attr("onclick",""),$("#"+n).attr("color","light"),$("#"+n).empty(),$("#"+n).prepend('<ion-icon name="checkmark-outline" color="success"></ion-icon>Added')),r.ref("user/"+t+"/friends/friends").once("value",(function(n){var i=n.val()+","+e;r.ref("user/"+t+"/friends").set({friends:i})}))),o.includes(e)&&Swal.fire({title:"Error!",icon:"warning",text:"User already exist in your friends list!!!",confirmButtonText:"ok",preConfirm:()=>{}})}))}))}function friends_noexist(t,e,n){firebase.database().ref("user/"+t+"/friends").set({friends:e}),0!=n&&($("#"+n).attr("onclick",""),$("#"+n).attr("color","light"),$("#"+n).empty(),$("#"+n).prepend('<ion-icon name="checkmark-outline" color="success"></ion-icon>Added'))}function friends_infos(t,e,n,r,i){var o=document.getElementById(i),s=firebase.database(),a=firebase.storage().ref();a.child(t+".jpg").getDownloadURL().then((function(e){a.child(t+".jpg").getDownloadURL().then((function(t){o.src=t}))}),(function(t){a.child("avatar.jpg").getDownloadURL().then((function(t){o.src=t}))})),s.ref("user/"+t+"/info/fname").once("value").then((function(t){$("#"+e).prepend(t.val()+" ")})),s.ref("user/"+t+"/info/lname").once("value").then((function(t){$("#"+n).prepend(""+t.val())})),s.ref("user/"+t+"/info/email").once("value").then((function(t){$("#"+r).prepend("<b>"+t.val()+"</b>")}))}function delete_friend(t,e){var n,r,i=firebase.database();swal.fire({title:"Remove "+t+" from friends list?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(o=>{o.value&&(i.ref("user/"+e+"/friends/friends").once("value",(function(o){(n=o.val().split(",")).splice(n.indexOf(t),1),r=n.join(","),i.ref("user/"+e+"/friends").set({friends:r})})),sleep(2e3).then(()=>{location.reload()}))})}function swat_info(t,e,n){Swal.fire({title:"Share it with :",html:""+t,showConfirmButton:!0,preConfirm:()=>{}})}function swat_err(t){swal.fire({title:"Error",icon:"warning",html:""+t,confirmButtonText:"ok"})}function share_it(t,e){firebase.initializeApp(firebaseConfig);var n,r=firebase.database();r.ref("user/"+t+"/friends").once("value").then((function(o){o.exists()?r.ref("user/"+t+"/friends/friends").once("value").then((function(r){if(""==r.val())swat_err(n='<p style="margin-top:5%;color:#DBE7ED;text-align:center;"><b>You must add new friends</b></p>');else{n='<input type="text" id="myInput2" onkeyup="myFunction2()" placeholder="Search for friends.." title="Type in a name"> <ul id="myUL2" style=" height: 170px; overflow-y: auto;list-style-type: none;padding: 0;margin: 0;">';var o=r.val().split(",");for(i=0;i<o.length;i++)n=n+'<li> <ion-item><a  style=" margin-top: -1px; padding: 12px; text-decoration: none; font-size: 18px; color: black; display: block">'+o[i]+'</a><ion-button id="but'+i+'" onclick="add_noti(\''+o[i]+"','"+t+"','"+e+"','"+i+'\')" slot="end"> Share </ion-button> </ion-item> </li>';swat_info(n+="  </ul>",t,e)}})):swat_err(n='<p style="margin-top:5%;color:#DBE7ED;text-align:center;"><b>You must add add new friends</b></p>')}))}function add_noti(t,e,n,r){var i="but"+r;$("#"+i).attr("onclick",""),$("#"+i).attr("color","light"),$("#"+i).empty(),$("#"+i).prepend('<ion-icon name="checkmark-outline" color="success"></ion-icon>shared');var o=t+n,s=firebase.database();d=date_format(),s.ref("user/"+t).child("notification").push().set({sender:e,link:o,date:d})}function set_noti(t){firebase.initializeApp(firebaseConfig);var e=firebase.database();e.ref("user/"+t+"/notification").once("value",(function(n){n.exists()?n.forEach((function(n){e.ref("user/"+t+"/notification/"+n.key).once("value",(function(t){$("#lln").prepend("<ion-item> <ion-label> </ion-label> <div><p style='color:rgb(66, 72, 75)'> <b style='color:rgb(0, 0, 0)'>"+t.val().sender+"</b> has send you an item to check it, <a href= '/item-show/"+t.val().link+"'>Click here to view it</a> </p><b style='color:rgb(0, 0, 0);position: absolute; top: 50px; right: 10px;'> "+t.val().date+"</b></div></ion-item>")}))})):($("#lin").empty(),$("#lin").prepend("<p style='margin-top:50%;color:#DBE7ED;text-align:center;'><b>No notifications</b></p>"))}))}function moj(){var t;t=function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="build/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var r;(function(t){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=i(n(3)),s=i(n(71)),a=i(n(72)),u=i(n(94)),c=i(n(117)),l=i(n(118)),h=i(n(119)),p=i(n(127)),f=i(n(128)),d=i(n(129)),y=i(n(101)),m=i(n(110)),v=i(n(102)),g=i(n(100)),b=i(n(99)),w=i(n(116)),_=i(n(126)),E=i(n(125)),T=i(n(84)),S=i(n(105)),I={revision:"0.288.2",isDebug:!0,helpers:s.default,Shape:u.default,ShapeSwirl:c.default,Burst:l.default,Html:h.default,stagger:p.default,Spriter:f.default,MotionPath:d.default,Tween:y.default,Timeline:m.default,Tweenable:g.default,Thenable:b.default,Tunable:w.default,Module:T.default,tweener:v.default,easing:S.default,shapesMap:a.default,_pool:{Delta:_.default,Deltas:E.default}};I.h=I.helpers,I.delta=I.h.delta,I.addShape=I.shapesMap.addShape,I.CustomShape=I.shapesMap.custom,I.Transit=I.Shape,I.Swirl=I.ShapeSwirl,void 0!==(r=(function(){return I}).apply(e,[]))&&(t.exports=r),"object"===(0,o.default)(t)&&"object"===(0,o.default)(t.exports)&&(t.exports=I),e.default=I,"undefined"!=typeof window&&(window.mojs=I)}).call(e,n(2)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(4)),o=r(n(55)),s="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===s(i.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":s(t)}},function(t,e,n){t.exports={default:n(5),__esModule:!0}},function(t,e,n){n(6),n(50),t.exports=n(54).f("iterator")},function(t,e,n){"use strict";var r=n(7)(!0);n(10)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(8),i=n(9);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(11),i=n(12),o=n(27),s=n(17),a=n(28),u=n(29),c=n(30),l=n(46),h=n(48),p=n(47)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,y,m,v,g){c(n,e,y);var b,w,_,E=function(t){if(!f&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",S="values"==m,I=!1,C=t.prototype,k=C[p]||C["@@iterator"]||m&&C[m],A=k||E(m),N=m?S?E("entries"):A:void 0,x="Array"==e&&C.entries||k;if(x&&(_=h(x.call(new t)))!==Object.prototype&&(l(_,T,!0),r||a(_,p)||s(_,p,d)),S&&k&&"values"!==k.name&&(I=!0,A=function(){return k.call(this)}),r&&!g||!f&&!I&&C[p]||s(C,p,A),u[e]=A,u[T]=d,m)if(b={values:S?A:E("values"),keys:v?A:E("keys"),entries:N},g)for(w in b)w in C||o(C,w,b[w]);else i(i.P+i.F*(f||I),e,b);return b}},function(t,e){t.exports=!0},function(t,e,n){var r=n(13),i=n(14),o=n(15),s=n(17),a=function(t,e,n){var u,c,l,h=t&a.F,p=t&a.G,f=t&a.S,d=t&a.P,y=t&a.B,m=t&a.W,v=p?i:i[e]||(i[e]={}),g=v.prototype,b=p?r:f?r[e]:(r[e]||{}).prototype;for(u in p&&(n=e),n)(c=!h&&b&&void 0!==b[u])&&u in v||(l=c?b[u]:n[u],v[u]=p&&"function"!=typeof b[u]?n[u]:y&&c?o(l,r):m&&b[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((v.virtual||(v.virtual={}))[u]=l,t&a.R&&g&&!g[u]&&s(g,u,l)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(16);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(18),i=n(26);t.exports=n(22)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(19),i=n(21),o=n(25),s=Object.defineProperty;e.f=n(22)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(20);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(22)&&!n(23)((function(){return 7!=Object.defineProperty(n(24)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){t.exports=!n(23)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(20),i=n(13).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(20);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=n(17)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(31),i=n(26),o=n(46),s={};n(17)(s,n(47)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(19),i=n(32),o=n(44),s=n(41)("IE_PROTO"),a=function(){},u=function(){var t,e=n(24)("iframe"),r=o.length;for(e.style.display="none",n(45).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(18),i=n(19),o=n(33);t.exports=n(22)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var r=n(34),i=n(44);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(28),i=n(35),o=n(38)(!1),s=n(41)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(36),i=n(9);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(37);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(35),i=n(39),o=n(40);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if((a=u[l++])!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(8),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(8),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(42)("keys"),i=n(43);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){t.exports=n(13).document&&document.documentElement},function(t,e,n){var r=n(18).f,i=n(28),o=n(47)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(42)("wks"),i=n(43),o=n(13).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(28),i=n(49),o=n(41)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(9);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(51);for(var r=n(13),i=n(17),o=n(29),s=n(47)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],h=l&&l.prototype;h&&!h[s]&&i(h,s,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(52),i=n(53),o=n(29),s=n(35);t.exports=n(10)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(47)},function(t,e,n){t.exports={default:n(56),__esModule:!0}},function(t,e,n){n(57),n(68),n(69),n(70),t.exports=n(14).Symbol},function(t,e,n){"use strict";var r=n(13),i=n(28),o=n(22),s=n(12),a=n(27),u=n(58).KEY,c=n(23),l=n(42),h=n(46),p=n(43),f=n(47),d=n(54),y=n(59),m=n(60),v=n(61),g=n(64),b=n(19),w=n(35),_=n(25),E=n(26),T=n(31),S=n(65),I=n(67),C=n(18),k=n(33),A=I.f,N=C.f,x=S.f,D=r.Symbol,R=r.JSON,P=R&&R.stringify,O=f("_hidden"),L=f("toPrimitive"),M={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),j=l("op-symbols"),q=Object.prototype,B="function"==typeof D,V=r.QObject,W=!V||!V.prototype||!V.prototype.findChild,H=o&&c((function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=A(q,e);r&&delete q[e],N(t,e,n),r&&t!==q&&N(q,e,r)}:N,z=function(t){var e=U[t]=T(D.prototype);return e._k=t,e},G=B&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},K=function(t,e,n){return t===q&&K(j,e,n),b(t),e=_(e,!0),b(n),i(U,e)?(n.enumerable?(i(t,O)&&t[O][e]&&(t[O][e]=!1),n=T(n,{enumerable:E(0,!1)})):(i(t,O)||N(t,O,E(1,{})),t[O][e]=!0),H(t,e,n)):N(t,e,n)},Q=function(t,e){b(t);for(var n,r=v(e=w(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},Y=function(t){var e=M.call(this,t=_(t,!0));return!(this===q&&i(U,t)&&!i(j,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,O)&&this[O][t])||e)},X=function(t,e){if(t=w(t),e=_(e,!0),t!==q||!i(U,e)||i(j,e)){var n=A(t,e);return!n||!i(U,e)||i(t,O)&&t[O][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=x(w(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==O||e==u||r.push(e);return r},J=function(t){for(var e,n=t===q,r=x(n?j:w(t)),o=[],s=0;r.length>s;)!i(U,e=r[s++])||n&&!i(q,e)||o.push(U[e]);return o};B||(a((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===q&&e.call(j,n),i(this,O)&&i(this[O],t)&&(this[O][t]=!1),H(this,t,E(1,n))};return o&&W&&H(q,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",(function(){return this._k})),I.f=X,C.f=K,n(66).f=S.f=$,n(63).f=Y,n(62).f=J,o&&!n(11)&&a(q,"propertyIsEnumerable",Y,!0),d.f=function(t){return z(f(t))}),s(s.G+s.W+s.F*!B,{Symbol:D});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)f(Z[tt++]);for(Z=k(f.store),tt=0;Z.length>tt;)y(Z[tt++]);s(s.S+s.F*!B,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(G(t))return m(F,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!B,"Object",{create:function(t,e){return void 0===e?T(t):Q(T(t),e)},defineProperty:K,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:J}),R&&s(s.S+s.F*(!B||c((function(){var t=D();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))}))),"JSON",{stringify:function(t){if(void 0!==t&&!G(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(e=r[1])&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,P.apply(R,r)}}}),D.prototype[L]||n(17)(D.prototype,L,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(43)("meta"),i=n(20),o=n(28),s=n(18).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(23)((function(){return u(Object.preventExtensions({}))})),l=function(t){s(t,r,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e,n){var r=n(13),i=n(14),o=n(11),s=n(54),a=n(18).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var r=n(33),i=n(35);t.exports=function(t,e){for(var n,o=i(t),s=r(o),a=s.length,u=0;a>u;)if(o[n=s[u++]]===e)return n}},function(t,e,n){var r=n(33),i=n(62),o=n(63);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(37);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(35),i=n(66).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return s.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(34),i=n(44).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(63),i=n(26),o=n(35),s=n(25),a=n(28),u=n(21),c=Object.getOwnPropertyDescriptor;e.f=n(22)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(59)("asyncIterator")},function(t,e,n){n(59)("observable")},function(t,e){var n,r;n=function(){function t(){this.vars()}return t.prototype.NS="http://www.w3.org/2000/svg",t.prototype.logBadgeCss="background:#3A0839;color:#FF512F;border-radius:5px; padding: 1px 5px 2px; border: 1px solid #FF512F;",t.prototype.shortColors={transparent:"rgba(0,0,0,0)",none:"rgba(0,0,0,0)",aqua:"rgb(0,255,255)",black:"rgb(0,0,0)",blue:"rgb(0,0,255)",fuchsia:"rgb(255,0,255)",gray:"rgb(128,128,128)",green:"rgb(0,128,0)",lime:"rgb(0,255,0)",maroon:"rgb(128,0,0)",navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",purple:"rgb(128,0,128)",red:"rgb(255,0,0)",silver:"rgb(192,192,192)",teal:"rgb(0,128,128)",white:"rgb(255,255,255)",yellow:"rgb(255,255,0)",orange:"rgb(255,128,0)"},t.prototype.chainOptionMap={},t.prototype.callbacksMap={onRefresh:1,onStart:1,onComplete:1,onFirstUpdate:1,onUpdate:1,onProgress:1,onRepeatStart:1,onRepeatComplete:1,onPlaybackStart:1,onPlaybackPause:1,onPlaybackStop:1,onPlaybackComplete:1},t.prototype.tweenOptionMap={duration:1,delay:1,speed:1,repeat:1,easing:1,backwardEasing:1,isYoyo:1,shiftTime:1,isReversed:1,callbacksContext:1},t.prototype.unitOptionMap={left:1,top:1,x:1,y:1,rx:1,ry:1},t.prototype.RAD_TO_DEG=180/Math.PI,t.prototype.vars=function(){var t;return this.prefix=this.getPrefix(),this.getRemBase(),this.isFF="moz"===this.prefix.lowercase,this.isIE="ms"===this.prefix.lowercase,t=navigator.userAgent,this.isOldOpera=t.match(/presto/gim),this.isSafari=t.indexOf("Safari")>-1,this.isChrome=t.indexOf("Chrome")>-1,this.isOpera=t.toLowerCase().indexOf("op")>-1,this.isChrome&&this.isSafari&&(this.isSafari=!1),t.match(/PhantomJS/gim)&&(this.isSafari=!1),this.isChrome&&this.isOpera&&(this.isChrome=!1),this.is3d=this.checkIf3d(),this.uniqIDs=-1,this.div=document.createElement("div"),document.body.appendChild(this.div),this.defaultStyles=this.computedStyle(this.div)},t.prototype.cloneObj=function(t,e){var n,r,i,o;for(o={},n=(i=Object.keys(t)).length;n--;)r=i[n],null!=e&&e[r]||(o[r]=t[r]);return o},t.prototype.extend=function(t,e){var n;for(n in e)null==t[n]&&(t[n]=e[n]);return t},t.prototype.getRemBase=function(){var t,e;return t=document.querySelector("html"),e=getComputedStyle(t),this.remBase=parseFloat(e.fontSize)},t.prototype.clamp=function(t,e,n){return t<e?e:t>n?n:t},t.prototype.setPrefixedStyle=function(t,e,n){return"transform"===e&&(t.style[""+this.prefix.css+e]=n),t.style[e]=n},t.prototype.style=function(t,e,n){var r,i,o,s;if("object"==typeof e){for(o=(i=Object.keys(e)).length,s=[];o--;)n=e[r=i[o]],s.push(this.setPrefixedStyle(t,r,n));return s}return this.setPrefixedStyle(t,e,n)},t.prototype.prepareForLog=function(t){return(t=Array.prototype.slice.apply(t)).unshift("::"),t.unshift(this.logBadgeCss),t.unshift("%cmoÂ·js%c"),t},t.prototype.log=function(){if(!1!==mojs.isDebug)return console.log.apply(console,this.prepareForLog(arguments))},t.prototype.warn=function(){if(!1!==mojs.isDebug)return console.warn.apply(console,this.prepareForLog(arguments))},t.prototype.error=function(){if(!1!==mojs.isDebug)return console.error.apply(console,this.prepareForLog(arguments))},t.prototype.parseUnit=function(t){var e,n,r,i;return"number"==typeof t?{unit:"px",isStrict:!1,value:t,string:0===t?""+t:t+"px"}:"string"==typeof t?(n=!0,(i=null!=(r=t.match(/px|%|rem|em|ex|cm|ch|mm|in|pt|pc|vh|vw|vmin|deg/gim))?r[0]:void 0)||(i="px",n=!1),{unit:i,isStrict:n,value:e=parseFloat(t),string:0===e?""+e:""+e+i}):t},t.prototype.bind=function(t,e){var n,r;return r=function(){var r,i;return r=Array.prototype.slice.call(arguments),i=n.concat(r),t.apply(e,i)},n=Array.prototype.slice.call(arguments,2),r},t.prototype.getRadialPoint=function(t){var e,n,r;return null==t&&(t={}),e=.017453292519943295*(t.angle-90),n=null!=t.radiusX?t.radiusX:t.radius,r=null!=t.radiusY?t.radiusY:t.radius,{x:t.center.x+Math.cos(e)*n,y:t.center.y+Math.sin(e)*r}},t.prototype.getPrefix=function(){var t,e;return e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1],{dom:"WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}},t.prototype.strToArr=function(t){var e;return e=[],"number"!=typeof t||isNaN(t)?(t.trim().split(/\s+/gim).forEach(function(t){return function(n){return e.push(t.parseUnit(t.parseIfRand(n)))}}(this)),e):(e.push(this.parseUnit(t)),e)},t.prototype.calcArrDelta=function(t,e){var n,r,i,o;for(n=[],r=i=0,o=t.length;i<o;r=++i)n[r]=this.parseUnit(""+(e[r].value-t[r].value)+e[r].unit);return n},t.prototype.isArray=function(t){return t instanceof Array},t.prototype.normDashArrays=function(t,e){var n,r,i,o,s,a,u,c;if((n=t.length)>(r=e.length))for(c=e.length,i=o=0,a=n-r;0<=a?o<a:o>a;i=0<=a?++o:--o)e.push(this.parseUnit("0"+t[i+c].unit));else if(r>n)for(c=t.length,i=s=0,u=r-n;0<=u?s<u:s>u;i=0<=u?++s:--s)t.push(this.parseUnit("0"+e[i+c].unit));return[t,e]},t.prototype.makeColorObj=function(t){var e,n,r,i,o,s,a;return"#"===t[0]&&(r={},(s=/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(t))&&(i=2===s[2].length?s[2]:s[2]+s[2],n=2===s[3].length?s[3]:s[3]+s[3],r={r:parseInt(2===s[1].length?s[1]:s[1]+s[1],16),g:parseInt(i,16),b:parseInt(n,16),a:1})),"#"!==t[0]&&((o="r"===t[0]&&"g"===t[1]&&"b"===t[2])&&(a=t),o||(a=this.shortColors[t]?this.shortColors[t]:(this.div.style.color=t,this.computedStyle(this.div).color)),s=new RegExp("^rgba?\\((\\d{1,3}),\\s?(\\d{1,3}),\\s?(\\d{1,3}),?\\s?(\\d{1}|0?\\.\\d{1,})?\\)$","gi").exec(a),r={},e=parseFloat(s[4]||1),s&&(r={r:parseInt(s[1],10),g:parseInt(s[2],10),b:parseInt(s[3],10),a:null==e||isNaN(e)?1:e})),r},t.prototype.computedStyle=function(t){return getComputedStyle(t)},t.prototype.capitalize=function(t){if("string"!=typeof t)throw Error("String expected - nothing to capitalize");return t.charAt(0).toUpperCase()+t.substring(1)},t.prototype.parseRand=function(t){var e,n,r;return n=t.split(/rand\(|\,|\)/),r=this.parseUnit(n[2]),e=this.rand(parseFloat(n[1]),parseFloat(n[2])),r.unit&&n[2].match(r.unit)?e+r.unit:e},t.prototype.parseStagger=function(t,e){var n,r,i,o,s,a;return i=(a=t.split(/stagger\(|\)$/)[1].toLowerCase()).split(/(rand\(.*?\)|[^\(,\s]+)(?=\s*,|\s*$)/gim),a=i.length>3?(n=this.parseUnit(this.parseIfRand(i[1])),i[3]):(n=this.parseUnit(0),i[1]),a=this.parseIfRand(a),r=e*(s=this.parseUnit(a)).value+n.value,(o=n.isStrict?n.unit:s.isStrict?s.unit:"")?""+r+o:r},t.prototype.parseIfStagger=function(t,e){return"string"==typeof t&&t.match(/stagger/g)?this.parseStagger(t,e):t},t.prototype.parseIfRand=function(t){return"string"==typeof t&&t.match(/rand\(/)?this.parseRand(t):t},t.prototype.parseDelta=function(t,e,n){var r,i,o,s,a,u,c,l,h,p,f,d;if(null!=(o=(e=this.cloneObj(e)).easing)&&(o=mojs.easing.parseEasing(o)),delete e.easing,null!=(r=e.curve)&&(r=mojs.easing.parseEasing(r)),delete e.curve,s=e[p=Object.keys(e)[0]],i={start:p},!isNaN(parseFloat(p))||p.match(/rand\(/)||p.match(/stagger\(/))if("strokeDasharray"===t||"strokeDashoffset"===t||"origin"===t){for(f=this.strToArr(p),a=this.strToArr(s),this.normDashArrays(f,a),c=l=0,h=f.length;l<h;c=++l)this.mergeUnits(p=f[c],s=a[c],t);i={type:"array",name:t,start:f,end:a,delta:this.calcArrDelta(f,a),easing:o,curve:r}}else this.callbacksMap[t]||this.tweenOptionMap[t]||(this.unitOptionMap[t]?(s=this.parseUnit(this.parseStringOption(s,n)),p=this.parseUnit(this.parseStringOption(p,n)),this.mergeUnits(p,s,t),i={type:"unit",name:t,start:p,end:s,delta:s.value-p.value,easing:o,curve:r}):(s=parseFloat(this.parseStringOption(s,n)),i={type:"number",name:t,start:p=parseFloat(this.parseStringOption(p,n)),end:s,delta:s-p,easing:o,curve:r}));else{if("strokeLinecap"===t)return this.warn("Sorry, stroke-linecap property is not animatable yet, using the start("+p+") value instead",e),i;i={type:"color",name:t,start:d=this.makeColorObj(p),end:u=this.makeColorObj(s),easing:o,curve:r,delta:{r:u.r-d.r,g:u.g-d.g,b:u.b-d.b,a:u.a-d.a}}}return i},t.prototype.mergeUnits=function(t,e,n){return!e.isStrict&&t.isStrict?(e.unit=t.unit,e.string=""+e.value+e.unit):e.isStrict&&!t.isStrict?(t.unit=e.unit,t.string=""+t.value+t.unit):e.isStrict&&t.isStrict&&e.unit!==t.unit?(t.unit=e.unit,t.string=""+t.value+t.unit,this.warn('Two different units were specified on "'+n+'" delta property, mo Â· js will fallback to end "'+e.unit+'" unit ')):void 0},t.prototype.rand=function(t,e){return Math.random()*(e-t)+t},t.prototype.isDOM=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},t.prototype.getChildElements=function(t){var e,n,r;for(n=[],r=(e=t.childNodes).length;r--;)1===e[r].nodeType&&n.unshift(e[r]);return n},t.prototype.delta=function(t,e){var n,r,i,o,s;if(s=typeof e,n="string"==(o=typeof t)||"number"===o&&!isNaN(t),r="string"===s||"number"===s&&!isNaN(e),n&&r)return(i={})[t]=e,i;this.error("delta method expects Strings or Numbers at input but got - "+t+", "+e)},t.prototype.getUniqID=function(){return++this.uniqIDs},t.prototype.parsePath=function(t){var e;return"string"==typeof t?"m"===t.charAt(0).toLowerCase()?((e=document.createElementNS(this.NS,"path")).setAttributeNS(null,"d",t),e):document.querySelector(t):t.style?t:void 0},t.prototype.closeEnough=function(t,e,n){return Math.abs(t-e)<n},t.prototype.checkIf3d=function(){var t,e,n;return t=document.createElement("div"),this.style(t,"transform","translateZ(0)"),""!==(null!=(n=t.style)[e=this.prefix.css+"transform"]?n[e]:n.transform)},t.prototype.isObject=function(t){return null!==t&&"object"==typeof t},t.prototype.getDeltaEnd=function(t){return t[Object.keys(t)[0]]},t.prototype.getDeltaStart=function(t){return Object.keys(t)[0]},t.prototype.isTweenProp=function(t){return this.tweenOptionMap[t]||this.callbacksMap[t]},t.prototype.parseStringOption=function(t,e){return null==e&&(e=0),"string"==typeof t&&(t=this.parseIfStagger(t,e),t=this.parseIfRand(t)),t},t.prototype.getLastItem=function(t){return t[t.length-1]},t.prototype.parseEl=function(t){return r.isDOM(t)?t:("string"==typeof t&&(t=document.querySelector(t)),null===t&&r.error("Can't parse HTML element: ",t),t)},t.prototype.force3d=function(t){return this.setPrefixedStyle(t,"backface-visibility","hidden"),t},t.prototype.isDelta=function(t){return!(!this.isObject(t)||t.unit||this.isArray(t)||this.isDOM(t))},t}(),r=new n,t.exports=r},function(t,e,n){var r,i,o,s,a,u,c,l,h,p,f,d;r=n(73).default||n(73),u=n(85).default||n(85),o=n(86),l=n(87),f=n(88),p=n(89),h=n(90),s=n(91),a=n(92).default||n(92),c=n(93),d=n(71),i=function(){function t(){this.addShape=d.bind(this.addShape,this)}return t.prototype.bit=r,t.prototype.custom=u,t.prototype.circle=o,t.prototype.line=l,t.prototype.zigzag=f,t.prototype.rect=p,t.prototype.polygon=h,t.prototype.cross=s,t.prototype.equal=c,t.prototype.curve=a,t.prototype.getShape=function(t){return this[t]||d.error('no "'+t+'" shape available yet, please choose from this list:',["circle","line","zigzag","rect","polygon","cross","equal","curve"])},t.prototype.addShape=function(t,e){return this[t]=e},t}(),t.exports=new i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(3)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(84)),c=r(n(71)),l=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){this._defaults={ns:"http://www.w3.org/2000/svg",tag:"ellipse",parent:document.body,ratio:1,radius:50,radiusX:null,radiusY:null,stroke:"hotpink","stroke-dasharray":"","stroke-dashoffset":"","stroke-linecap":"","stroke-width":2,"stroke-opacity":1,fill:"transparent","fill-opacity":1,width:0,height:0},this._drawMap=["stroke","stroke-width","stroke-opacity","stroke-dasharray","fill","stroke-dashoffset","stroke-linecap","fill-opacity","transform"]},e.prototype._vars=function(){this._state={},this._drawMapLength=this._drawMap.length},e.prototype._render=function(){this._isRendered||(this._isRendered=!0,this._createSVGCanvas(),this._setCanvasSize(),this._props.parent.appendChild(this._canvas))},e.prototype._createSVGCanvas=function(){var t=this._props;this._canvas=document.createElementNS(t.ns,"svg"),this.el=document.createElementNS(t.ns,t.tag),this._canvas.appendChild(this.el)},e.prototype._setCanvasSize=function(){var t=this._canvas.style;t.display="block",t.width="100%",t.height="100%",t.left="0px",t.top="0px"},e.prototype._draw=function(){this._props.length=this._getLength();for(var t=this._drawMapLength;t--;){var e=this._drawMap[t];switch(e){case"stroke-dasharray":case"stroke-dashoffset":this.castStrokeDash(e)}this._setAttrIfChanged(e,this._props[e])}this._state.radius=this._props.radius},e.prototype.castStrokeDash=function(t){var e=this._props;if(c.default.isArray(e[t])){for(var n="",r=0;r<e[t].length;r++){var o=e[t][r];n+=("%"===o.unit?this.castPercent(o.value):o.value)+" "}return e[t]="0 "===n?n="":n,e[t]=n}"object"===(0,i.default)(e[t])&&(n="%"===e[t].unit?this.castPercent(e[t].value):e[t].value,e[t]=0===n?n="":n)},e.prototype.castPercent=function(t){return t*(this._props.length/100)},e.prototype._setAttrIfChanged=function(t,e){this._state[t]!==e&&(this.el.setAttribute(t,e),this._state[t]=e)},e.prototype._getLength=function(){var t=this._props;return this.el&&this.el.getTotalLength&&this.el.getAttribute("d")?this.el.getTotalLength():2*(null!=t.radiusX?t.radiusX:t.radius)},e.prototype._getPointsPerimiter=function(t){for(var e=0,n=1;n<t.length;n++)e+=this._pointsDelta(t[n-1],t[n]);return e+this._pointsDelta(t[0],c.default.getLastItem(t))},e.prototype._pointsDelta=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return Math.sqrt(n*n+r*r)},e.prototype._setSize=function(t,e){var n=this._props;n.width=t,n.height=e,this._draw()},e}(u.default);e.default=l},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(77)),o=r(n(81)),s=r(n(3));e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,s.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(78),__esModule:!0}},function(t,e,n){n(79),t.exports=n(14).Object.setPrototypeOf},function(t,e,n){var r=n(12);r(r.S,"Object",{setPrototypeOf:n(80).set})},function(t,e,n){var r=n(20),i=n(19),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(15)(Function.call,n(67).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(82),__esModule:!0}},function(t,e,n){n(83);var r=n(14).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(12);r(r.S,"Object",{create:n(31)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(3)),o=r(n(74)),s=r(n(71)),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t),this._o=e,this._index=this._o.index||0,this._arrayPropertyMap={strokeDashoffset:1,strokeDasharray:1,origin:1},this._skipPropsDelta={timeline:1,prevChainModule:1,callbacksContext:1},this._declareDefaults(),this._extendDefaults(),this._vars(),this._render()}return t.prototype._declareDefaults=function(){this._defaults={}},t.prototype._vars=function(){this._progress=0,this._strokeDasharrayBuffer=[]},t.prototype._render=function(){},t.prototype._setProp=function(t,e){if("object"===(void 0===t?"undefined":(0,i.default)(t)))for(var n in t)this._assignProp(n,t[n]);else this._assignProp(t,e)},t.prototype._assignProp=function(t,e){this._props[t]=e},t.prototype._show=function(){this.el&&(this._props.isSoftHide?this._showByTransform():this.el.style.display="block",this._isShown=!0)},t.prototype._hide=function(){this.el&&(this._props.isSoftHide?s.default.setPrefixedStyle(this.el,"transform","scale(0)"):this.el.style.display="none",this._isShown=!1)},t.prototype._showByTransform=function(){},t.prototype._parseOptionString=function(t){return"string"==typeof t&&t.match(/stagger/)&&(t=s.default.parseStagger(t,this._index)),"string"==typeof t&&t.match(/rand/)&&(t=s.default.parseRand(t)),t},t.prototype._parsePositionOption=function(t,e){return s.default.unitOptionMap[t]&&(e=s.default.parseUnit(e).string),e},t.prototype._parseStrokeDashOption=function(t,e){if(n=e,this._arrayPropertyMap[t]){var n=[];switch(void 0===e?"undefined":(0,i.default)(e)){case"number":n.push(s.default.parseUnit(e));break;case"string":for(var r=e.split(" "),o=0;o<r.length;o++)n.push(s.default.parseUnit(r[o]))}}return n},t.prototype._isDelta=function(t){var e=s.default.isObject(t);return!(!(e=e&&!t.unit)||s.default.isArray(t)||s.default.isDOM(t))},t.prototype._getDelta=function(t,e){var n;if("left"!==t&&"top"!==t||this._o.ctx||s.default.warn("Consider to animate x/y properties instead of left/top,\n        as it would be much more performant",e),!this._skipPropsDelta||!this._skipPropsDelta[t]){null!=(n=s.default.parseDelta(t,e,this._index)).type&&(this._deltas[t]=n);var r="object"===(0,i.default)(n.end)?0===n.end.value?0:n.end.string:n.end;this._props[t]=r}},t.prototype._extendDefaults=function(){for(var t in this._props={},this._deltas={},this._defaults)this._parseOption(t,null!=this._o[t]?this._o[t]:this._defaults[t])},t.prototype._tuneNewOptions=function(t){for(var e in this._hide(),t)t&&delete this._deltas[e],this._o[e]=t[e],this._parseOption(e,t[e])},t.prototype._parseOption=function(t,e){if(this._isDelta(e)&&!this._skipPropsDelta[t]){this._getDelta(t,e);var n=s.default.getDeltaEnd(e);return this._assignProp(t,this._parseProperty(t,n))}this._assignProp(t,this._parseProperty(t,e))},t.prototype._parsePreArrayProperty=function(t,e){return e=this._parseOptionString(e),this._parsePositionOption(t,e)},t.prototype._parseProperty=function(t,e){return"parent"===t?s.default.parseEl(e):(e=this._parsePreArrayProperty(t,e),this._parseStrokeDashOption(t,e))},t.prototype._parseDeltaValues=function(t,e){var n={};for(var r in e){var i=this._parsePreArrayProperty(t,e[r]);n[this._parsePreArrayProperty(t,r)]=i}return n},t.prototype._preparsePropValue=function(t,e){return this._isDelta(e)?this._parseDeltaValues(t,e):this._parsePreArrayProperty(t,e)},t.prototype._calcCurrentProps=function(t,e){for(var n in this._deltas){var r=this._deltas[n],i=!!r.curve,o=null==r.easing||i?t:r.easing(e);if("array"===r.type){var a;s.default.isArray(this._props[n])?(a=this._props[n]).length=0:a=[];for(var u=i?r.curve(e):null,c=0;c<r.delta.length;c++){var l=r.delta[c],h=i?u*(r.start[c].value+e*l.value):r.start[c].value+o*l.value;a.push({string:""+h+l.unit,value:h,unit:l.unit})}this._props[n]=a}else if("number"===r.type)this._props[n]=i?r.curve(e)*(r.start+e*r.delta):r.start+o*r.delta;else if("unit"===r.type){var p=i?r.curve(e)*(r.start.value+e*r.delta):r.start.value+o*r.delta;this._props[n]=""+p+r.end.unit}else if("color"===r.type){var f,d,y,m;if(i){var v=r.curve(e);f=parseInt(v*(r.start.r+e*r.delta.r),10),d=parseInt(v*(r.start.g+e*r.delta.g),10),y=parseInt(v*(r.start.b+e*r.delta.b),10),m=parseFloat(v*(r.start.a+e*r.delta.a))}else f=parseInt(r.start.r+o*r.delta.r,10),d=parseInt(r.start.g+o*r.delta.g,10),y=parseInt(r.start.b+o*r.delta.b,10),m=parseFloat(r.start.a+o*r.delta.a);this._props[n]="rgba("+f+","+d+","+y+","+m+")"}}},t.prototype._setProgress=function(t,e){this._progress=t,this._calcCurrentProps(t,e)},t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(75)),s=r(n(76)),a=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,s.default)(e,t),e.prototype._declareDefaults=function(){t.prototype._declareDefaults.call(this),this._defaults.tag="path",this._defaults.parent=null;for(var e=0;e<this._drawMap.length;e++)"stroke-width"===this._drawMap[e]&&this._drawMap.splice(e,1)},e.prototype.getShape=function(){return""},e.prototype.getLength=function(){return 100},e.prototype._draw=function(){var e=this._props,n=this._state;(n.radiusX!==e.radiusX||n.radiusY!==e.radiusY||n.radius!==e.radius)&&(this.el.setAttribute("transform",this._getScale()),n.radiusX=e.radiusX,n.radiusY=e.radiusY,n.radius=e.radius),this._setAttrIfChanged("stroke-width",e["stroke-width"]/e.maxScale),t.prototype._draw.call(this)},e.prototype._render=function(){if(!this._isRendered){this._isRendered=!0,this._length=this.getLength();var t=this._props;t.parent.innerHTML='<svg id="js-mojs-shape-canvas" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><g id="js-mojs-shape-el">'+this.getShape()+"</g></svg>",this._canvas=t.parent.querySelector("#js-mojs-shape-canvas"),this.el=t.parent.querySelector("#js-mojs-shape-el"),this._setCanvasSize()}},e.prototype._getScale=function(){var t=this._props,e=t.radiusY?t.radiusY:t.radius;return t.scaleX=2*(t.radiusX?t.radiusX:t.radius)/100,t.scaleY=2*e/100,t.maxScale=Math.max(t.scaleX,t.scaleY),t.shiftX=t.width/2-50*t.scaleX,t.shiftY=t.height/2-50*t.scaleY,"translate("+t.shiftX+", "+t.shiftY+") scale("+t.scaleX+", "+t.scaleY+")"},e.prototype._getLength=function(){return this._length},e}(r(n(73)).default);e.default=a},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.shape="ellipse"},e.prototype._draw=function(){var t;return t=null!=this._props.radiusY?this._props.radiusY:this._props.radius,this._setAttrIfChanged("rx",null!=this._props.radiusX?this._props.radiusX:this._props.radius),this._setAttrIfChanged("ry",t),this._setAttrIfChanged("cx",this._props.width/2),this._setAttrIfChanged("cy",this._props.height/2),e.__super__._draw.apply(this,arguments)},e.prototype._getLength=function(){var t,e;return t=null!=this._props.radiusX?this._props.radiusX:this._props.radius,e=null!=this._props.radiusY?this._props.radiusY:this._props.radius,2*Math.PI*Math.sqrt((t*t+e*e)/2)},e}(),t.exports=i},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="line"},e.prototype._draw=function(){var t,n,r;return r=this._props.height/2,this._setAttrIfChanged("x1",(n=this._props.width/2)-(t=null!=this._props.radiusX?this._props.radiusX:this._props.radius)),this._setAttrIfChanged("x2",n+t),this._setAttrIfChanged("y1",r),this._setAttrIfChanged("y2",r),e.__super__._draw.apply(this,arguments)},e}(),t.exports=i},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="path",this._defaults.points=3},e.prototype._draw=function(){var t,n,r,i,o,s,a,u,c,l,h,p,f,d,y;if(e.__super__._draw.apply(this,arguments),u=this._props,this._props.points&&(o=(h=null!=this._props.radiusY?this._props.radiusY:this._props.radius)===this._prevRadiusY,i=u.points===this._prevPoints,(l=null!=this._props.radiusX?this._props.radiusX:this._props.radius)!==this._prevRadiusX||!o||!i)){for(t=u.width/2-l,n=d=u.height/2,f=2*l/(u.points-1),y=-1,a=-(r=Math.sqrt(f*f+h*h)),c="M"+t+", "+d+" ",s=0,p=u.points;0<=p?s<p:s>p;0<=p?++s:--s)c+="L"+t+", "+n+" ",t+=f,a+=r,n=-1===y?d-h:d,y=-y;return this._length=a,this.el.setAttribute("d",c),this._prevPoints=u.points,this._prevRadiusX=l,this._prevRadiusY=h}},e.prototype._getLength=function(){return this._length},e}(),t.exports=i},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="rect",this._defaults.rx=0,this._defaults.ry=0},e.prototype._draw=function(){var t,n,r;return e.__super__._draw.apply(this,arguments),r=null!=(t=this._props).radiusY?t.radiusY:t.radius,this._setAttrIfChanged("width",2*(n=null!=t.radiusX?t.radiusX:t.radius)),this._setAttrIfChanged("height",2*r),this._setAttrIfChanged("x",t.width/2-n),this._setAttrIfChanged("y",t.height/2-r),this._setAttrIfChanged("rx",t.rx),this._setAttrIfChanged("ry",t.ry)},e.prototype._getLength=function(){return 2*(2*(null!=this._props.radiusX?this._props.radiusX:this._props.radius)+2*(null!=this._props.radiusY?this._props.radiusY:this._props.radius))},e}(),t.exports=i},function(t,e,n){var r,i,o,s={}.hasOwnProperty;r=n(73).default||n(73),o=n(71),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="path",this._defaults.points=3},e.prototype._draw=function(){var t,n,r,i,s,a,u,c,l,h,p,f,d,y;if(i=(p=null!=this._props.radiusY?this._props.radiusY:this._props.radius)===this._prevRadiusY,r=(c=this._props).points===this._prevPoints,(h=null!=this._props.radiusX?this._props.radiusX:this._props.radius)!==this._prevRadiusX||!i||!r){for(y=360/this._props.points,null==this._radialPoints?this._radialPoints=[]:this._radialPoints.length=0,n=s=0,f=this._props.points;0<=f?s<f:s>f;n=0<=f?++s:--s)this._radialPoints.push(o.getRadialPoint({radius:this._props.radius,radiusX:this._props.radiusX,radiusY:this._props.radiusY,angle:n*y,center:{x:c.width/2,y:c.height/2}}));for(t="",n=a=0,u=(d=this._radialPoints).length;a<u;n=++a)t+=(0===n?"M":"L")+(l=d[n]).x.toFixed(4)+","+l.y.toFixed(4)+" ";this._prevPoints=c.points,this._prevRadiusX=h,this._prevRadiusY=p,this.el.setAttribute("d",t+="z")}return e.__super__._draw.apply(this,arguments)},e.prototype._getLength=function(){return this._getPointsPerimiter(this._radialPoints)},e}(),t.exports=i},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="path"},e.prototype._draw=function(){var t,n,r,i,o;if(e.__super__._draw.apply(this,arguments),t=(r=null!=this._props.radiusY?this._props.radiusY:this._props.radius)===this._prevRadiusY,(n=null!=this._props.radiusX?this._props.radiusX:this._props.radius)!==this._prevRadiusX||!t)return this.el.setAttribute("d","M"+((i=this._props.width/2)-n)+","+(o=this._props.height/2)+" L"+(i+n)+","+o+" M"+i+","+(o-r)+" L"+i+","+(o+r)),this._prevRadiusX=n,this._prevRadiusY=r},e.prototype._getLength=function(){return 2*((null!=this._props.radiusX?this._props.radiusX:this._props.radius)+(null!=this._props.radiusY?this._props.radiusY:this._props.radius))},e}(),t.exports=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(75)),s=r(n(76)),a=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,s.default)(e,t),e.prototype._declareDefaults=function(){t.prototype._declareDefaults.call(this),this._defaults.tag="path"},e.prototype._draw=function(){t.prototype._draw.call(this);var e=this._props,n=null!=e.radiusX?e.radiusX:e.radius,r=null!=e.radiusY?e.radiusY:e.radius;if(n!==this._prevRadiusX||r!==this._prevRadiusY||e.points!==this._prevPoints){var i=e.width/2,o=e.height/2;this.el.setAttribute("d","M"+(i-n)+" "+o+" Q "+i+" "+(o-2*r)+" "+(i+n)+" "+o),this._prevPoints=e.points,this._prevRadiusX=n,this._prevRadiusY=r}},e.prototype._getLength=function(){var t=this._props,e=null!=t.radiusX?t.radiusX:t.radius,n=null!=t.radiusY?t.radiusY:t.radius,r=e+n,i=Math.sqrt((3*e+n)*(e+3*n));return.5*Math.PI*(3*r-i)},e}(r(n(73)).default);e.default=a},function(t,e,n){var r,i,o={}.hasOwnProperty;r=n(73).default||n(73),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype._declareDefaults=function(){return e.__super__._declareDefaults.apply(this,arguments),this._defaults.tag="path",this._defaults.points=2},e.prototype._draw=function(){var t,n,r,i,o,s,a,u,c,l,h,p,f,d,y;if(e.__super__._draw.apply(this,arguments),s=this._props,this._props.points&&(i=(u=null!=this._props.radiusY?this._props.radiusY:this._props.radius)===this._prevRadiusY,r=s.points===this._prevPoints,(a=null!=this._props.radiusX?this._props.radiusX:this._props.radius)!==this._prevRadiusX||!i||!r)){for(h=(l=this._props.width/2)-a,p=l+a,t="",y=2*u/(this._props.points-1),d=(f=this._props.height/2)-u,n=o=0,c=this._props.points;0<=c?o<c:o>c;n=0<=c?++o:--o)t+="M"+h+", "+(f=""+(n*y+d))+" L"+p+", "+f+" ";return this.el.setAttribute("d",t),this._prevPoints=s.points,this._prevRadiusX=a,this._prevRadiusY=u}},e.prototype._getLength=function(){return 2*(null!=this._props.radiusX?this._props.radiusX:this._props.radius)},e}(),t.exports=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(95)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(84)),c=(r(n(99)),r(n(116))),l=(r(n(100)),r(n(101)),r(n(110)),n(71)),h=(n(73),n(72)),p=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){this._defaults={parent:document.body,className:"",shape:"circle",stroke:"transparent",strokeOpacity:1,strokeLinecap:"",strokeWidth:2,strokeDasharray:0,strokeDashoffset:0,fill:"deeppink",fillOpacity:1,isSoftHide:!0,isForce3d:!1,left:"50%",top:"50%",x:0,y:0,angle:0,scale:1,scaleX:null,scaleY:null,origin:"50% 50%",opacity:1,rx:0,ry:0,points:3,radius:50,radiusX:null,radiusY:null,isShowStart:!1,isShowEnd:!0,isRefreshState:!0,duration:400,width:null,height:null,isWithShape:!0,callbacksContext:this}},e.prototype.tune=function(e){return t.prototype.tune.call(this,e),this._getMaxSizeInChain(),this},e.prototype.then=function(e){return t.prototype.then.call(this,e),this._getMaxSizeInChain(),this},e.prototype._vars=function(){return t.prototype._vars.call(this),this._lastSet={},this._prevChainModule=this._o.prevChainModule,this.isForeign=!!this._o.ctx,this.isForeignBit=!!this._o.shape},e.prototype._render=function(){return this._isRendered||this._isChained?this._isChained&&(this.el=this._masterModule.el,this.shapeModule=this._masterModule.shapeModule):(this.el=document.createElement("div"),this.el.setAttribute("data-name","mojs-shape"),this.el.setAttribute("class",this._props.className),this._createShape(),this._props.parent.appendChild(this.el),this._setElStyles(),this._setProgress(0,0),this._props.isShowStart?this._show():this._hide(),this._isRendered=!0),this},e.prototype._setElStyles=function(){if(this.el){var t=this._props,e=this.el.style,n=t.shapeWidth,r=t.shapeHeight;if(e.position="absolute",this._setElSizeStyles(n,r),t.isForce3d){var i="backface-visibility";e[""+i]="hidden",e[""+l.prefix.css+i]="hidden"}}},e.prototype._setElSizeStyles=function(t,e){var n=this.el.style;n.width=t+"px",n.height=e+"px",n["margin-left"]=-t/2+"px",n["margin-top"]=-e/2+"px"},e.prototype._draw=function(){if(this.shapeModule){var t=this._props,e=this.shapeModule._props;e.rx=t.rx,e.ry=t.ry,e.stroke=t.stroke,e["stroke-width"]=t.strokeWidth,e["stroke-opacity"]=t.strokeOpacity,e["stroke-dasharray"]=t.strokeDasharray,e["stroke-dashoffset"]=t.strokeDashoffset,e["stroke-linecap"]=t.strokeLinecap,e.fill=t.fill,e["fill-opacity"]=t.fillOpacity,e.radius=t.radius,e.radiusX=t.radiusX,e.radiusY=t.radiusY,e.points=t.points,this.shapeModule._draw(),this._drawEl()}},e.prototype._drawEl=function(){if(null==this.el)return!0;var t=this._props,e=this.el.style;if(this._isPropChanged("opacity")&&(e.opacity=t.opacity),!this.isForeign){this._isPropChanged("left")&&(e.left=t.left),this._isPropChanged("top")&&(e.top=t.top);var n=this._isPropChanged("x"),r=this._isPropChanged("y"),i=n||r,o=this._isPropChanged("scaleX"),s=this._isPropChanged("scaleY"),a=(a=this._isPropChanged("scale"))||o||s,u=this._isPropChanged("angle");if(i||a||u){var c=this._fillTransform();e[l.prefix.css+"transform"]=c,e.transform=c}if(this._isPropChanged("origin")||this._deltas.origin){var h=this._fillOrigin();e[l.prefix.css+"transform-origin"]=h,e["transform-origin"]=h}}},e.prototype._isPropChanged=function(t){return null==this._lastSet[t]&&(this._lastSet[t]={}),this._lastSet[t].value!==this._props[t]&&(this._lastSet[t].value=this._props[t],!0)},e.prototype._tuneNewOptions=function(e){if(t.prototype._tuneNewOptions.call(this,e),null==e||!(0,i.default)(e).length)return 1;this._setElStyles()},e.prototype._getMaxRadius=function(t){var e;return e=this._getRadiusSize("radius"),this._getRadiusSize(t,e)},e.prototype._increaseSizeWithEasing=function(){var t=this._props,e=this._o.easing;switch(e&&"string"==typeof e&&e.toLowerCase()){case"elastic.out":case"elastic.inout":t.size*=1.25;break;case"back.out":case"back.inout":t.size*=1.1}},e.prototype._getRadiusSize=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._deltas[t];return null!=n?Math.max(Math.abs(n.end),Math.abs(n.start)):null!=this._props[t]?parseFloat(this._props[t]):e},e.prototype._getShapeSize=function(){var t=this._props,e=this._getMaxStroke();t.shapeWidth=null!=t.width?t.width:2*this._getMaxRadius("radiusX")+e,t.shapeHeight=null!=t.height?t.height:2*this._getMaxRadius("radiusY")+e},e.prototype._createShape=function(){if(this._getShapeSize(),this._props.isWithShape){var t=this._props,e=h.getShape(this._props.shape);this.shapeModule=new e({width:t.shapeWidth,height:t.shapeHeight,parent:this.el})}},e.prototype._getMaxSizeInChain=function(){for(var t=0,e=0,n=0;n<this._modules.length;n++)this._modules[n]._getShapeSize(),t=Math.max(t,this._modules[n]._props.shapeWidth),e=Math.max(e,this._modules[n]._props.shapeHeight);this.shapeModule&&this.shapeModule._setSize(t,e),this._setElSizeStyles(t,e)},e.prototype._getMaxStroke=function(){var t=this._props,e=this._deltas.strokeWidth;return null!=e?Math.max(e.start,e.end):t.strokeWidth},e.prototype._setProgress=function(t,e){u.default.prototype._setProgress.call(this,t,e),this._draw(t)},e.prototype._applyCallbackOverrides=function(t){var e=this,n=this._props;t.callbackOverrides={onUpdate:function(t,n){return e._setProgress(t,n)},onStart:function(t){e._isChained||(t?e._show():n.isShowStart||e._hide())},onComplete:function(t){e._isLastInChain()&&(t?n.isShowEnd||e._hide():e._show())},onRefresh:function(t){n.isRefreshState&&t&&e._refreshBefore()}}},e.prototype._transformTweenOptions=function(){this._applyCallbackOverrides(this._o)},e.prototype._fillTransform=function(){var t=this._props;return"translate("+t.x+", "+t.y+") rotate("+t.angle+"deg) scale("+(null!=t.scaleX?t.scaleX:t.scale)+", "+(null!=t.scaleY?t.scaleY:t.scale)+")"},e.prototype._fillOrigin=function(){for(var t=this._props,e="",n=0;n<t.origin.length;n++)e+=t.origin[n].string+" ";return e},e.prototype._refreshBefore=function(){this._setProgress(this.tween._props.easing(0),0),this._props.isShowStart?this._show():this._hide()},e.prototype._showByTransform=function(){this._lastSet.scale=null,this._drawEl()},e}(c.default);e.default=p},function(t,e,n){t.exports={default:n(96),__esModule:!0}},function(t,e,n){n(97),t.exports=n(14).Object.keys},function(t,e,n){var r=n(49),i=n(33);n(98)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){var r=n(12),i=n(14),o=n(23);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(95)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(100)),c=r(n(71)),l=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype.then=function(t){if(null==t||!(0,i.default)(t).length)return 1;var e=this._mergeThenOptions(this._history[this._history.length-1],t);this._resetMergedFlags(e);var n=new this.constructor(e);return n._masterModule=this,this._modules.push(n),this.timeline.append(n),this},e.prototype._resetMergedFlags=function(t){return t.isTimelineLess=!0,t.isShowStart=!1,t.isRefreshState=!1,t.callbacksContext=this._props.callbacksContext||this,t.prevChainModule=c.default.getLastItem(this._modules),t.masterModule=this,t},e.prototype._vars=function(){t.prototype._vars.call(this),this._masterModule=this._o.masterModule,this._isChained=!!this._masterModule;var e=c.default.cloneObj(this._props);for(var n in this._arrayPropertyMap)if(this._o[n]){var r=this._parsePreArrayProperty(n,this._o[n]);e[n]=r}this._history=[e],this._modules=[this],this._nonMergeProps={shape:1}},e.prototype._mergeThenOptions=function(t,e){var n={};return this._mergeStartLoop(n,t),this._mergeEndLoop(n,t,e),this._history.push(n),n},e.prototype._checkStartValue=function(t,e){return e},e.prototype._mergeStartLoop=function(t,e){for(var n in e){var r=e[n];null!=e[n]&&(c.default.isTweenProp(n)&&"duration"!==n||(t[n]=this._isDelta(r)?c.default.getDeltaEnd(r):r))}},e.prototype._mergeEndLoop=function(t,e,n){for(var r in(0,i.default)(n),n)if("parent"!=r){var o=n[r],s=null!=e[r]?e[r]:this._defaults[r];if(s=this._checkStartValue(r,s),null!=o){var a="radiusX"===r||"radiusY"===r;a&&null==s&&(s=e.radius),(a="scaleX"===r||"scaleY"===r)&&null==s&&(s=e.scale),t[r]=this._mergeThenProperty(r,s,o)}}else t[r]=n[r]},e.prototype._mergeThenProperty=function(t,e,n){var r,i,o="boolean"==typeof n;if(c.default.isTweenProp(t)||this._nonMergeProps[t]||o)return n;if(c.default.isObject(n)&&null!=n.to&&(r=n.curve,i=n.easing,n=n.to),this._isDelta(n))return this._parseDeltaValues(t,n);var s,a,u=this._parsePreArrayProperty(t,n);return this._isDelta(e)?((s={})[c.default.getDeltaEnd(e)]=u,s.easing=i,s.curve=r,s):((a={})[e]=u,a.easing=i,a.curve=r,a)},e.prototype._getArrayLength=function(t){return c.default.isArray(t)?t.length:-1},e.prototype._isDelta=function(t){var e=c.default.isObject(t);return!(!(e=e&&!t.unit)||c.default.isArray(t)||c.default.isDOM(t))},e.prototype._isFirstInChain=function(){return!this._masterModule},e.prototype._isLastInChain=function(){var t=this._masterModule;return t?this===c.default.getLastItem(t._modules):1===this._modules.length},e}(u.default);e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(75)),s=r(n(76)),a=r(n(101)),u=r(n(110)),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e);var r=(0,o.default)(this,t.call(this,n));return r._transformTweenOptions(),!r._o.isTweenLess&&r._makeTween(),!r._o.isTimelineLess&&r._makeTimeline(),r}return(0,s.default)(e,t),e.prototype.play=function(){return this.timeline.play.apply(this.timeline,arguments),this},e.prototype.playBackward=function(){return this.timeline.playBackward.apply(this.timeline,arguments),this},e.prototype.pause=function(){return this.timeline.pause.apply(this.timeline,arguments),this},e.prototype.stop=function(){return this.timeline.stop.apply(this.timeline,arguments),this},e.prototype.reset=function(){return this.timeline.reset.apply(this.timeline,arguments),this},e.prototype.replay=function(){return this.timeline.replay.apply(this.timeline,arguments),this},e.prototype.replayBackward=function(){return this.timeline.replayBackward.apply(this.timeline,arguments),this},e.prototype.resume=function(){return this.timeline.resume.apply(this.timeline,arguments),this},e.prototype.setProgress=function(){return this.timeline.setProgress.apply(this.timeline,arguments),this},e.prototype.setSpeed=function(t){return this.timeline.setSpeed.apply(this.timeline,arguments),this},e.prototype._transformTweenOptions=function(){},e.prototype._makeTween=function(){this._o.callbacksContext=this._o.callbacksContext||this,this.tween=new a.default(this._o),this._o.isTimelineLess&&(this.timeline=this.tween)},e.prototype._makeTimeline=function(){this._o.timeline=this._o.timeline||{},this._o.timeline.callbacksContext=this._o.callbacksContext||this,this.timeline=new u.default(this._o.timeline),this._isTimeline=!0,this.tween&&this.timeline.add(this.tween)},e}(r(n(84)).default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(75)),s=r(n(76)),a=(r(n(71)),r(n(102))),u=r(n(105)),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e);var r=(0,o.default)(this,t.call(this,n));return null==r._props.name&&r._setSelfName(),(0,o.default)(r,r)}return(0,s.default)(e,t),e.prototype._declareDefaults=function(){this._defaults={duration:350,delay:0,repeat:0,speed:1,isYoyo:!1,easing:"Sin.Out",backwardEasing:null,name:null,nameBase:"Tween",onProgress:null,onStart:null,onRefresh:null,onComplete:null,onRepeatStart:null,onRepeatComplete:null,onFirstUpdate:null,onUpdate:null,isChained:!1,onPlaybackStart:null,onPlaybackPause:null,onPlaybackStop:null,onPlaybackComplete:null,callbacksContext:null}},e.prototype.play=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"play"===this._state&&this._isRunning?this:(this._props.isReversed=!1,this._subPlay(t,"play"),this._setPlaybackState("play"),this)},e.prototype.playBackward=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"reverse"===this._state&&this._isRunning?this:(this._props.isReversed=!0,this._subPlay(t,"reverse"),this._setPlaybackState("reverse"),this)},e.prototype.pause=function(){return"pause"===this._state||"stop"===this._state?this:(this._removeFromTweener(),this._setPlaybackState("pause"),this)},e.prototype.stop=function(t){return"stop"===this._state?this:(this._wasUknownUpdate=void 0,this.setProgress(null!=t?t:"reverse"===this._state?1:0),this.reset(),this)},e.prototype.replay=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reset(),this.play(t),this},e.prototype.replayBackward=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reset(),this.playBackward(t),this},e.prototype.resume=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("pause"!==this._state)return this;switch(this._prevState){case"play":this.play(t);break;case"reverse":this.playBackward(t)}return this},e.prototype.setProgress=function(t){var e=this._props;return!e.startTime&&this._setStartTime(),this._playTime=null,t<0&&(t=0),t>1&&(t=1),this._update(e.startTime-e.delay+t*e.repeatTime),this},e.prototype.setSpeed=function(t){return this._props.speed=t,"play"!==this._state&&"reverse"!==this._state||this._setResumeTime(this._state),this},e.prototype.reset=function(){return this._removeFromTweener(),this._setPlaybackState("stop"),this._progressTime=0,this._isCompleted=!1,this._isStarted=!1,this._isFirstUpdate=!1,this._wasUknownUpdate=void 0,this._prevTime=void 0,this._prevYoyo=void 0,this._props.isReversed=!1,this},e.prototype._subPlay=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=this._props,r=this._state,i=this._prevState,o="pause"===r,s="play"===r||o&&"play"===i,u="reverse"===r||o&&"reverse"===i,c=s&&"reverse"===e||u&&"play"===e;return this._progressTime=this._progressTime>=n.repeatTime?0:this._progressTime,c&&(this._progressTime=n.repeatTime-this._progressTime),this._setResumeTime(e,t),a.default.add(this),this},e.prototype._setResumeTime=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._resumeTime=performance.now();var n=this._resumeTime-Math.abs(e)-this._progressTime;this._setStartTime(n,!1),null!=this._prevTime&&(this._prevTime="play"===t?this._normPrevTimeForward():this._props.endTime-this._progressTime)},e.prototype._normPrevTimeForward=function(){var t=this._props;return t.startTime+this._progressTime-t.delay},e.prototype._setSelfName=function(){var t="_"+this._props.nameBase+"s";a.default[t]=null==a.default[t]?1:++a.default[t],this._props.name=this._props.nameBase+" "+a.default[t]},e.prototype._setPlaybackState=function(t){this._prevState=this._state,this._state=t;var e="pause"===this._prevState,n="play"===this._prevState||"reverse"===this._prevState;"play"!==t&&"reverse"!==t||!("stop"===this._prevState||e)||this._playbackStart(),"pause"===t&&n&&this._playbackPause(),"stop"===t&&(n||e)&&this._playbackStop()},e.prototype._vars=function(){return this.progress=0,this._prevTime=void 0,this._progressTime=0,this._negativeShift=0,this._state="stop",this._props.delay<0&&(this._negativeShift=this._props.delay,this._props.delay=0),this._calcDimentions()},e.prototype._calcDimentions=function(){this._props.time=this._props.duration+this._props.delay,this._props.repeatTime=this._props.time*(this._props.repeat+1)},e.prototype._extendDefaults=function(){this._callbackOverrides=this._o.callbackOverrides||{},delete this._o.callbackOverrides,t.prototype._extendDefaults.call(this);var e=this._props;e.easing=u.default.parseEasing(e.easing),e.easing._parent=this,null!=e.backwardEasing&&(e.backwardEasing=u.default.parseEasing(e.backwardEasing),e.backwardEasing._parent=this)},e.prototype._setStartTime=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._props,r=n.shiftTime||0;e&&(this._isCompleted=!1,this._isRepeatCompleted=!1,this._isStarted=!1);var i=null==t?performance.now():t;return n.startTime=i+n.delay+this._negativeShift+r,n.endTime=n.startTime+n.repeatTime-n.delay,this._playTime=null!=this._resumeTime?this._resumeTime:i+r,this._resumeTime=null,this},e.prototype._update=function(t,e,n,r){var i=this._props;null==this._prevTime&&null!=e&&(this._props.speed&&this._playTime&&(this._prevTime=this._playTime+this._props.speed*(e-this._playTime)),this._wasUknownUpdate=!0);var o=i.startTime-i.delay;if(i.speed&&this._playTime&&(t=this._playTime+i.speed*(t-this._playTime)),Math.abs(i.endTime-t)<1e-8&&(t=i.endTime),r&&null!=n){var s=this._getPeriod(t),a=!(!i.isYoyo||!this._props.repeat||s%2!=1);if(this._timelines)for(var u=0;u<this._timelines.length;u++)this._timelines[u]._update(t,e,n,r);1===r?n?(this._prevTime=t+1,this._repeatStart(t,a),this._start(t,a)):(this._prevTime=t-1,this._repeatComplete(t,a),this._complete(t,a)):-1===r&&(n?(this._prevTime=t-1,this._repeatComplete(t,a),this._complete(t,a)):this._prevTime>=i.startTime&&this._prevTime<=i.endTime&&(this._prevTime=t+1,this._repeatStart(t,a),this._start(t,a),this._isCompleted=!0)),this._prevTime=void 0}return t>o&&t<i.endTime?this._progressTime=t-o:t<=o?this._progressTime=0:t>=i.endTime&&(this._progressTime=i.repeatTime+1e-11),i.isReversed&&(t=i.endTime-this._progressTime),null==this._prevTime?(this._prevTime=t,this._wasUknownUpdate=!0,!1):(t>=o&&t<=i.endTime&&this._progress((t-o)/i.repeatTime,t),t>=i.startTime&&t<=i.endTime?this._updateInActiveArea(t):this._isInActiveArea?this._updateInInactiveArea(t):this._isRefreshed||t<i.startTime&&0!==this.progress&&(this._refresh(!0),this._isRefreshed=!0),this._prevTime=t,t>=i.endTime||t<=o)},e.prototype._updateInInactiveArea=function(t){if(this._isInActiveArea){var e=this._props;if(t>e.endTime&&!this._isCompleted){this._progress(1,t);var n=this._getPeriod(e.endTime),r=e.isYoyo&&n%2==0;this._setProgress(r?0:1,t,r),this._repeatComplete(t,r),this._complete(t,r)}t<this._prevTime&&t<e.startTime&&!this._isStarted&&!this._isCompleted&&(this._progress(0,t,!1),this._setProgress(0,t,!1),this._isRepeatStart=!1,this._repeatStart(t,!1),this._start(t,!1)),this._isInActiveArea=!1}},e.prototype._updateInActiveArea=function(t){var e=this._props,n=e.delay+e.duration,r=e.startTime-e.delay,i=(t-e.startTime+e.delay)%n,o=Math.round((e.endTime-e.startTime+e.delay)/n),s=this._getPeriod(t),a=this._delayT,u=this._getPeriod(this._prevTime),c=this._delayT,l=e.isYoyo&&s%2==1,h=e.isYoyo&&u%2==1,p=l?1:0;if(t===e.endTime)return this._wasUknownUpdate=!1,this._setProgress((l=e.isYoyo&&(s-1)%2==1)?0:1,t,l),t>this._prevTime&&(this._isRepeatCompleted=!1),this._repeatComplete(t,l),this._complete(t,l);if(this._isCompleted=!1,this._isRefreshed=!1,r+i>=e.startTime){this._isInActiveArea=!0,this._isRepeatCompleted=!1,this._isRepeatStart=!1,this._isStarted=!1;var f=(t-e.startTime)%n/e.duration,d=s>0&&u<s,y=u>s;this._onEdge=0,d&&(this._onEdge=1),y&&(this._onEdge=-1),this._wasUknownUpdate&&(t>this._prevTime&&(this._start(t,l),this._repeatStart(t,l),this._firstUpdate(t,l)),t<this._prevTime&&(this._complete(t,l),this._repeatComplete(t,l),this._firstUpdate(t,l),this._isCompleted=!1)),d&&(1!==this.progress&&this._repeatComplete(t,e.isYoyo&&(s-1)%2==1),u>=0&&this._repeatStart(t,l)),t>this._prevTime&&(!this._isStarted&&this._prevTime<=e.startTime&&(this._start(t,l),this._repeatStart(t,l),this._isStarted=!1,this._isRepeatStart=!1),this._firstUpdate(t,l)),y&&(0!==this.progress&&1!==this.progress&&u!=o&&this._repeatStart(t,h),u!==o||this._wasUknownUpdate||(this._complete(t,l),this._repeatComplete(t,l),this._firstUpdate(t,l),this._isCompleted=!1),this._repeatComplete(t,l)),"delay"===u&&(s<c&&this._repeatComplete(t,l),s===c&&s>0&&this._repeatStart(t,l)),t>this._prevTime?(0===f&&this._repeatStart(t,l),t!==e.endTime&&this._setProgress(l?1-f:f,t,l)):(t!==e.endTime&&this._setProgress(l?1-f:f,t,l),0===f&&this._repeatStart(t,l)),t===e.startTime&&this._start(t,l)}else if(this._isInActiveArea){var m="delay"===s?a:s,v=t>this._prevTime;v&&m--,p=e.isYoyo&&m%2==1?1:0,t<this._prevTime&&(this._setProgress(p,t,1===p),this._repeatStart(t,1===p)),this._setProgress(v?1-p:p,t,1===p),t>this._prevTime&&(0===this.progress&&1!==p||this._repeatComplete(t,1===p)),this._isInActiveArea=!1}this._wasUknownUpdate=!1},e.prototype._removeFromTweener=function(){return a.default.remove(this),this},e.prototype._getPeriod=function(t){var e=this._props,n=e.delay+e.duration,r=e.delay+t-e.startTime,i=r/n,o=t<e.endTime?r%n:0;return i=t>=e.endTime?Math.round(i):Math.floor(i),t>e.endTime?i=Math.round((e.endTime-e.startTime+e.delay)/n):o>0&&o<e.delay&&(this._delayT=i,i="delay"),i},e.prototype._setProgress=function(t,e,n){var r=this._props,i=r.wasYoyo!==n,o=e>this._prevTime;return this.progress=t,o&&!n||!o&&n?this.easedProgress=r.easing(t):(!o&&!n||o&&n)&&(this.easedProgress=(null!=r.backwardEasing?r.backwardEasing:r.easing)(t)),(r.prevEasedProgress!==this.easedProgress||i)&&null!=r.onUpdate&&"function"==typeof r.onUpdate&&r.onUpdate.call(r.callbacksContext||this,this.easedProgress,this.progress,o,n),r.prevEasedProgress=this.easedProgress,r.wasYoyo=n,this},e.prototype._start=function(t,e){if(!this._isStarted){var n=this._props;null!=n.onStart&&"function"==typeof n.onStart&&n.onStart.call(n.callbacksContext||this,t>this._prevTime,e),this._isCompleted=!1,this._isStarted=!0,this._isFirstUpdate=!1}},e.prototype._playbackStart=function(){var t=this._props;null!=t.onPlaybackStart&&"function"==typeof t.onPlaybackStart&&t.onPlaybackStart.call(t.callbacksContext||this)},e.prototype._playbackPause=function(){var t=this._props;null!=t.onPlaybackPause&&"function"==typeof t.onPlaybackPause&&t.onPlaybackPause.call(t.callbacksContext||this)},e.prototype._playbackStop=function(){var t=this._props;null!=t.onPlaybackStop&&"function"==typeof t.onPlaybackStop&&t.onPlaybackStop.call(t.callbacksContext||this)},e.prototype._playbackComplete=function(){var t=this._props;null!=t.onPlaybackComplete&&"function"==typeof t.onPlaybackComplete&&t.onPlaybackComplete.call(t.callbacksContext||this)},e.prototype._complete=function(t,e){if(!this._isCompleted){var n=this._props;null!=n.onComplete&&"function"==typeof n.onComplete&&n.onComplete.call(n.callbacksContext||this,t>this._prevTime,e),this._isCompleted=!0,this._isStarted=!1,this._isFirstUpdate=!1,this._prevYoyo=void 0}},e.prototype._firstUpdate=function(t,e){if(!this._isFirstUpdate){var n=this._props;null!=n.onFirstUpdate&&"function"==typeof n.onFirstUpdate&&(n.onFirstUpdate.tween=this,n.onFirstUpdate.call(n.callbacksContext||this,t>this._prevTime,e)),this._isFirstUpdate=!0}},e.prototype._repeatComplete=function(t,e){if(!this._isRepeatCompleted){var n=this._props;null!=n.onRepeatComplete&&"function"==typeof n.onRepeatComplete&&n.onRepeatComplete.call(n.callbacksContext||this,t>this._prevTime,e),this._isRepeatCompleted=!0}},e.prototype._repeatStart=function(t,e){if(!this._isRepeatStart){var n=this._props;null!=n.onRepeatStart&&"function"==typeof n.onRepeatStart&&n.onRepeatStart.call(n.callbacksContext||this,t>this._prevTime,e),this._isRepeatStart=!0}},e.prototype._progress=function(t,e){var n=this._props;null!=n.onProgress&&"function"==typeof n.onProgress&&n.onProgress.call(n.callbacksContext||this,t,e>this._prevTime)},e.prototype._refresh=function(t){var e=this._props;if(null!=e.onRefresh){var n=t?0:1;e.onRefresh.call(e.callbacksContext||this,t,e.easing(n),n)}},e.prototype._onTweenerRemove=function(){},e.prototype._onTweenerFinish=function(){this._setPlaybackState("stop"),this._playbackComplete()},e.prototype._setProp=function(e,n){t.prototype._setProp.call(this,e,n),this._calcDimentions()},e.prototype._assignProp=function(e,n){null==n&&(n=this._defaults[e]),"easing"===e&&((n=u.default.parseEasing(n))._parent=this);var r=this._callbackOverrides[e];r&&(!n||!n.isMojsCallbackOverride)&&(n=this._overrideCallback(n,r)),t.prototype._assignProp.call(this,e,n)},e.prototype._overrideCallback=function(t,e){var n=t&&"function"==typeof t,r=function(){n&&t.apply(this,arguments),e.apply(this,arguments)};return r.isMojsCallbackOverride=!0,r},e}(r(n(84)).default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74));n(103),n(104),r(n(71));var o=new(function(){function t(){return(0,i.default)(this,t),this._vars(),this._listenVisibilityChange(),this}return t.prototype._vars=function(){this.tweens=[],this._savedTweens=[],this._loop=this._loop.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this)},t.prototype._loop=function(){return!!this._isRunning&&(this._update(window.performance.now()),this.tweens.length?(requestAnimationFrame(this._loop),this):this._isRunning=!1)},t.prototype._startLoop=function(){this._isRunning||(this._isRunning=!0,requestAnimationFrame(this._loop))},t.prototype._stopLoop=function(){this._isRunning=!1},t.prototype._update=function(t){for(var e=this.tweens.length;e--;){var n=this.tweens[e];n&&!0===n._update(t)&&(this.remove(n),n._onTweenerFinish(),n._prevTime=void 0)}},t.prototype.add=function(t){t._isRunning||(t._isRunning=!0,this.tweens.push(t),this._startLoop())},t.prototype.removeAll=function(){this.tweens.length=0},t.prototype.remove=function(t){var e="number"==typeof t?t:this.tweens.indexOf(t);-1!==e&&(t=this.tweens[e])&&(t._isRunning=!1,this.tweens.splice(e,1),t._onTweenerRemove())},t.prototype._listenVisibilityChange=function(){void 0!==document.hidden?(this._visibilityHidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.mozHidden?(this._visibilityHidden="mozHidden",this._visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(this._visibilityHidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._visibilityHidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),document.addEventListener(this._visibilityChange,this._onVisibilityChange,!1)},t.prototype._onVisibilityChange=function(){document[this._visibilityHidden]?this._savePlayingTweens():this._restorePlayingTweens()},t.prototype._savePlayingTweens=function(){this._savedTweens=this.tweens.slice(0);for(var t=0;t<this._savedTweens.length;t++)this._savedTweens[t].pause()},t.prototype._restorePlayingTweens=function(){for(var t=0;t<this._savedTweens.length;t++)this._savedTweens[t].resume()},t}());e.default=o},function(t,e){!function(){"use strict";var t,e,n,r,i,o;for(r=["webkit","moz"],t=0,o=window;t<r.length&&!o.requestAnimationFrame;)o.requestAnimationFrame=o[(i=r[t])+"RequestAnimationFrame"],o.cancelAnimationFrame=o[i+"CancelAnimationFrame"]||o[i+"CancelRequestAnimationFrame"],++t;e=!o.requestAnimationFrame||!o.cancelAnimationFrame,(/iP(ad|hone|od).*OS 6/.test(o.navigator.userAgent)||e)&&(n=0,o.requestAnimationFrame=function(t){var e,r;return r=Date.now(),e=Math.max(n+16,r),setTimeout((function(){t(n=e)}),e-r)},o.cancelAnimationFrame=clearTimeout)}()},function(t,e){!function(t){var e,n,r;null==t.performance&&(t.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},null==t.performance.now&&(e=(null!=(n=t.performance)&&null!=(r=n.timing)?r.navigationStart:void 0)?performance.timing.navigationStart:Date.now(),t.performance.now=function(){return Date.now()-e})}(window)},function(t,e,n){var r,i,o,s,a,u,c,l,h;a=n(106),o=n(107),l=n(108),c=n(71),s=n(109).default||n(109),h=Math.sin,i=Math.PI,r=function(){function t(){}return t.prototype.bezier=a,t.prototype.PathEasing=o,t.prototype.path=new o("creator").create,t.prototype.approximate=s,t.prototype.inverse=function(t){return 1-t},t.prototype.linear={none:function(t){return t}},t.prototype.ease={in:a.apply(t,[.42,0,1,1]),out:a.apply(t,[0,0,.58,1]),inout:a.apply(t,[.42,0,.58,1])},t.prototype.sin={in:function(t){return 1-Math.cos(t*i/2)},out:function(t){return h(t*i/2)},inout:function(t){return.5*(1-Math.cos(i*t))}},t.prototype.quad={in:function(t){return t*t},out:function(t){return t*(2-t)},inout:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},t.prototype.cubic={in:function(t){return t*t*t},out:function(t){return--t*t*t+1},inout:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},t.prototype.quart={in:function(t){return t*t*t*t},out:function(t){return 1- --t*t*t*t},inout:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},t.prototype.quint={in:function(t){return t*t*t*t*t},out:function(t){return--t*t*t*t*t+1},inout:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},t.prototype.expo={in:function(t){return 0===t?0:Math.pow(1024,t-1)},out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},inout:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},t.prototype.circ={in:function(t){return 1-Math.sqrt(1-t*t)},out:function(t){return Math.sqrt(1- --t*t)},inout:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},t.prototype.back={in:function(t){return t*t*(2.70158*t-1.70158)},out:function(t){return--t*t*(2.70158*t+1.70158)+1},inout:function(t){var e;return e=2.5949095,(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},t.prototype.elastic={in:function(t){var e;return e=void 0,0===t?0:1===t?1:(e=.1,-1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},out:function(t){var e;return e=void 0,0===t?0:1===t?1:(e=.1,1*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},inout:function(t){var e;return e=void 0,0===t?0:1===t?1:(e=.1,(t*=2)<1?1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:1*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},t.prototype.bounce={in:function(t){return 1-u.bounce.out(1-t)},out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inout:function(t){return t<.5?.5*u.bounce.in(2*t):.5*u.bounce.out(2*t-1)+.5}},t.prototype.parseEasing=function(t){var e;return null==t&&(t="linear.none"),"string"==typeof t?"m"===t.charAt(0).toLowerCase()?this.path(t):(e=this[(t=this._splitEasing(t))[0]])?e[t[1]]:(c.error('Easing with name "'+t[0]+'" was not found, fallback to "linear.none" instead'),this.linear.none):c.isArray(t)?this.bezier.apply(this,t):t},t.prototype._splitEasing=function(t){var e;return"function"==typeof t?t:"string"==typeof t&&t.length?[(e=t.split("."))[0].toLowerCase()||"linear",e[1].toLowerCase()||"none"]:["linear","none"]},t}(),(u=new r).mix=l(u),t.exports=u},function(t,e,n){(function(e){var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=n(71),r=new(function(){function t(t){return this.vars(),this.generate}return t.prototype.vars=function(){return this.generate=i.bind(this.generate,this)},t.prototype.generate=function(t,n,r,i){var s,a,u,c,l,h,p,f,d,y,m,v,g,b,w,_,E;if(arguments.length<4)return this.error("Bezier function expects 4 arguments");for(v=g=0;g<4;v=++g)if("number"!=typeof(c=arguments[v])||isNaN(c)||!isFinite(c))return this.error("Bezier function expects 4 arguments");return t<0||t>1||r<0||r>1?this.error("Bezier x values should be > 0 and < 1"):(d=o.call(e,"Float32Array")>=0,s=function(t,e){return 1-3*e+3*t},a=function(t,e){return 3*e-6*t},u=function(t){return 3*t},h=function(t,e,n){return((s(e,n)*t+a(e,n))*t+u(e))*t},y=function(t,e,n){return 3*s(e,n)*t*t+2*a(e,n)*t+u(e)},w=function(e,n){var i;for(v=0;v<4;){if(0===(i=y(n,t,r)))return n;n-=(h(n,t,r)-e)/i,++v}return n},p=function(){for(v=0;v<11;)b[v]=h(.1*v,t,r),++v},l=function(e,n,i){var o,s;for(s=void 0,o=void 0,v=0;(s=h(o=n+(i-n)/2,t,r)-e)>0?i=o:n=o,Math.abs(s)>1e-7&&++v<10;);return o},m=function(e){var n,i,o,s;for(s=0,n=1;10!==n&&b[n]<=e;)s+=.1,++n;return--n,(o=y(i=s+(e-b[n])/(b[n+1]-b[n])*.1,t,r))>=.001?w(e,i):0===o?i:l(e,s,s+.1)},_=function(){if(t!==n||r!==i)return p()},b=d?new Float32Array(11):new Array(11),E="bezier("+[t,n,r,i]+")",(f=function(e){return _(),t===n&&r===i?e:0===e?0:1===e?1:h(m(e),n,i)}).toStr=function(){return E},f)},t.prototype.error=function(t){return i.error(t)},t}()),t.exports=r}).call(e,function(){return this}())},function(t,e,n){var r,i;i=n(71),r=function(){function t(t,e){if(this.o=null!=e?e:{},"creator"!==t){if(this.path=i.parsePath(t),null==this.path)return i.error("Error while parsing the path");this._vars(),this.path.setAttribute("d",this._normalizePath(this.path.getAttribute("d"))),this.pathLength=this.path.getTotalLength(),this.sample=i.bind(this.sample,this),this._hardSample=i.bind(this._hardSample,this),this._preSample()}}return t.prototype._vars=function(){return this._precompute=i.clamp(this.o.precompute||1450,100,1e4),this._step=1/this._precompute,this._rect=this.o.rect||100,this._approximateMax=this.o.approximateMax||5,this._eps=this.o.eps||.001,this._boundsPrevProgress=-1},t.prototype._preSample=function(){var t,e,n,r,i,o,s;for(this._samples=[],s=[],t=e=0,o=this._precompute;0<=o?e<=o:e>=o;t=0<=o?++e:--e)r=this.path.getPointAtLength(n=this.pathLength*(i=t*this._step)),s.push(this._samples[t]={point:r,length:n,progress:i});return s},t.prototype._findBounds=function(t,e){var n,r,i,o,s,a,u,c,l,h,p,f;if(e===this._boundsPrevProgress)return this._prevBounds;for(null==this._boundsStartIndex&&(this._boundsStartIndex=0),this._boundsPrevProgress>e?(a=0,r="reverse"):(a=t.length,r="forward"),"forward"===r?(p=t[0],i=t[t.length-1]):(p=t[t.length-1],i=t[0]),o=s=l=this._boundsStartIndex,h=a;l<=h?s<h:s>h;o=l<=h?++s:--s){if(c=(f=t[o]).point.x/this._rect,u=e,"reverse"===r&&(n=c,c=u,u=n),!(c<u)){i=f;break}p=f,this._boundsStartIndex=o}return this._boundsPrevProgress=e,this._prevBounds={start:p,end:i}},t.prototype.sample=function(t){var e,n;return t=i.clamp(t,0,1),e=this._findBounds(this._samples,t),null!=(n=this._checkIfBoundsCloseEnough(t,e))?n:this._findApproximate(t,e.start,e.end)},t.prototype._checkIfBoundsCloseEnough=function(t,e){var n;return null!=(n=this._checkIfPointCloseEnough(t,e.start.point))?n:this._checkIfPointCloseEnough(t,e.end.point)},t.prototype._checkIfPointCloseEnough=function(t,e){if(i.closeEnough(t,e.x/this._rect,this._eps))return this._resolveY(e)},t.prototype._approximate=function(t,e,n){return t.length+(n-t.point.x/this._rect)/((e.point.x-t.point.x)/this._rect)*(e.length-t.length)},t.prototype._findApproximate=function(t,e,n,r){var o,s,a,u;return null==r&&(r=this._approximateMax),o=this._approximate(e,n,t),a=this.path.getPointAtLength(o),i.closeEnough(t,u=a.x/this._rect,this._eps)?this._resolveY(a):--r<1?this._resolveY(a):(s={point:a,length:o},this._findApproximate.apply(this,t<u?[t,e,s,r]:[t,s,n,r]))},t.prototype._resolveY=function(t){return 1-t.y/this._rect},t.prototype._normalizePath=function(t){var e,n,r,i;return(r=t.split(i=/[M|L|H|V|C|S|Q|T|A]/gim)).shift(),e=t.match(i),r[0]=this._normalizeSegment(r[0]),r[n=r.length-1]=this._normalizeSegment(r[n],this._rect||100),this._joinNormalizedPath(e,r)},t.prototype._joinNormalizedPath=function(t,e){var n,r,i,o;for(o="",n=r=0,i=t.length;r<i;n=++r)o+=(0===n?"":" ")+t[n]+e[n].trim();return o},t.prototype._normalizeSegment=function(t,e){var n,r,i,o,s,a;if(null==e&&(e=0),t=t.trim(),i=(s=this._getSegmentPairs(t.match(/(-|\+)?((\d+(\.(\d|\e(-|\+)?)+)?)|(\.?(\d|\e|(\-|\+))+))/gim)))[s.length-1],Number(i[0])!==e)for(t="",i[0]=e,n=r=0,o=s.length;r<o;n=++r)t+=(0===n?"":" ")+(a=s[n])[0]+","+a[1];return t},t.prototype._getSegmentPairs=function(t){var e,n,r,o;for(t.length%2!=0&&i.error("Failed to parse the path - segment pairs are not even.",t),o=[],e=n=0,r=t.length;n<r;e=n+=2)o.push([t[e],t[e+1]]);return o},t.prototype.create=function(e,n){var r;return(r=new t(e,n)).sample.path=r.path,r.sample},t}(),t.exports=r},function(t,e){var n,r,i,o,s,a=[].slice;n=null,o=function(t){return"number"==typeof t.value?t.value:n.parseEasing(t.value)},s=function(t,e){var n;return t.value=o(t),e.value=o(e),n=0,t.to<e.to&&(n=-1),t.to>e.to&&(n=1),n},r=function(t,e){var n,r,i,o;for(r=0,n=i=0,o=t.length;i<o&&(r=n,!(t[n].to>e));n=++i);return r},i=function(){var t;return(t=1<=arguments.length?a.call(arguments,0):[]).length>1?t=t.sort(s):t[0].value=o(t[0]),function(e){var n,i;if(-1!==(n=r(t,e)))return i=t[n].value,n===t.length-1&&e>t[n].to?1:"function"==typeof i?i(e):i}},t.exports=function(t){return n=t,i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(3)),o=(r(n(71)),{_sample:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=void 0===e?"undefined":(0,i.default)(e),r={};if("number"===n){var s=0,a=Math.pow(10,e),u=1/a;r[0]=t(0);for(var c=0;c<a-1;c++)s+=u,r[parseFloat(s.toFixed(e))]=t(s);r[1]=t(1),r.base=e}else"object"===n?r=e:"string"===n&&(r=JSON.parse(e));return o._sample._proximate(r)},_proximate:function(t){var e=t.base,n=1/Math.pow(10,e),r=function(r){var i=function(t,e){e=+e||0;var n=Math.pow(10,e);return Math.round(t*n)/n}(r,e),o=t[i.toString()];if(Math.abs(r-i)<n)return o;if(r>i)a=t[s=i+n];else var s=i-n,a=t[s];var u=a-o;return u<n?o:o+(r-i)/(s-i)*(a>o?-1:1)*u};return r.getSamples=function(){return t},r}});o._sample._proximate=o._proximate,e.default=o._sample},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(111)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(71)),c=(r(n(102)),r(n(101))),l=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)(this,e),(0,s.default)(this,t.call(this,n))}return(0,a.default)(e,t),e.prototype.add=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._pushTimelineArray(e),this._calcDimentions(),this},e.prototype.append=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e,o=Array.isArray(r),s=0;for(r=o?r:(0,i.default)(r);;){var a;if(o){if(s>=r.length)break;a=r[s++]}else{if((s=r.next()).done)break;a=s.value}var c=a;u.default.isArray(c)?this._appendTimelineArray(c):this._appendTimeline(c,this._timelines.length),this._calcDimentions()}return this},e.prototype.stop=function(e){return t.prototype.stop.call(this,e),this._stopChildren(e),this},e.prototype.reset=function(){return t.prototype.reset.call(this),this._resetChildren(),this},e.prototype._resetChildren=function(){for(var t=0;t<this._timelines.length;t++)this._timelines[t].reset()},e.prototype._stopChildren=function(t){for(var e=this._timelines.length-1;e>=0;e--)this._timelines[e].stop(t)},e.prototype._appendTimelineArray=function(t){for(var e=t.length,n=this._props.repeatTime-this._props.delay,r=this._timelines.length;e--;)this._appendTimeline(t[e],r,n)},e.prototype._appendTimeline=function(t,n,r){t.timeline instanceof e&&(t=t.timeline),t.tween instanceof c.default&&(t=t.tween);var i=null!=r?r:this._props.duration;i+=t._props.shiftTime||0,t.index=n,this._pushTimeline(t,i)},e.prototype._pushTimelineArray=function(t){for(var e=0;e<t.length;e++){var n=t[e];u.default.isArray(n)?this._pushTimelineArray(n):this._pushTimeline(n)}},e.prototype._pushTimeline=function(t,n){t.timeline instanceof e&&(t=t.timeline),t.tween instanceof c.default&&(t=t.tween),null!=n&&t._setProp({shiftTime:n}),this._timelines.push(t),this._recalcDuration(t)},e.prototype._setProgress=function(t,e,n){this._updateChildren(t,e,n),c.default.prototype._setProgress.call(this,t,e)},e.prototype._updateChildren=function(t,e,n){var r=e>this._prevTime?-1:1;this._props.isYoyo&&n&&(r*=-1);for(var i=this._props.startTime+t*this._props.duration,o=i+r,s=this._timelines.length,a=0;a<s;a++)this._timelines[i>o?a:s-1-a]._update(i,o,this._prevYoyo,this._onEdge);this._prevYoyo=n},e.prototype._recalcDuration=function(t){var e=t._props;this._props.duration=Math.max(e.repeatTime/e.speed+(e.shiftTime||0)+t._negativeShift,this._props.duration)},e.prototype._recalcTotalDuration=function(){var t=this._timelines.length;for(this._props.duration=0;t--;){var e=this._timelines[t];e._recalcTotalDuration&&e._recalcTotalDuration(),this._recalcDuration(e)}this._calcDimentions()},e.prototype._setStartTime=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prototype._setStartTime.call(this,e),this._startTimelines(this._props.startTime,n)},e.prototype._startTimelines=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="stop"===this._state;null==t&&(t=this._props.startTime);for(var r=0;r<this._timelines.length;r++){var i=this._timelines[r];i._setStartTime(t,e),e||null==i._prevTime||n||(i._prevTime=i._normPrevTimeForward())}},e.prototype._refresh=function(e){for(var n=this._timelines.length,r=0;r<n;r++)this._timelines[r]._refresh(e);t.prototype._refresh.call(this,e)},e.prototype._declareDefaults=function(){null!=this._o.duration&&(u.default.error('Duration can not be declared on Timeline, but "'+this._o.duration+'" is. You probably want to use Tween instead.'),this._o.duration=0),t.prototype._declareDefaults.call(this),this._defaults.duration=0,this._defaults.easing="Linear.None",this._defaults.backwardEasing="Linear.None",this._defaults.nameBase="Timeline"},e.prototype._vars=function(){this._timelines=[],t.prototype._vars.call(this)},e}(c.default);e.default=l},function(t,e,n){t.exports={default:n(112),__esModule:!0}},function(t,e,n){n(50),n(6),t.exports=n(113)},function(t,e,n){var r=n(19),i=n(114);t.exports=n(14).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(115),i=n(47)("iterator"),o=n(29);t.exports=n(14).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(37),i=n(47)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(95)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(71)),c=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype.tune=function(t){if(t&&(0,i.default)(t).length){for(var e in this._transformHistory(t),this._tuneNewOptions(t),this._history[0]=u.default.cloneObj(this._props),this._arrayPropertyMap)null!=t[e]&&(this._history[0][e]=this._preparsePropValue(e,t[e]));this._tuneSubModules(),this._resetTweens()}return this},e.prototype.generate=function(){return this.tune(this._o)},e.prototype._transformHistory=function(t){for(var e in t)this._transformHistoryFor(e,this._preparsePropValue(e,t[e]))},e.prototype._transformHistoryFor=function(t,e){for(var n=0;n<this._history.length&&(!(e=this._transformHistoryRecord(n,t,e))||null!=e);n++);},e.prototype._transformHistoryRecord=function(t,e,n,r,i){if(null==n)return null;var o,s=(r=null==r?this._history[t]:r)[e],a=null==(i=null==i?this._history[t+1]:i)?null:i[e];if(0===t){if(r[e]=n,u.default.isTweenProp(e)&&"duration"!==e)return null;var c=this._isRewriteNext(s,a),l=this._isDelta(n)?u.default.getDeltaEnd(n):n;return c?l:null}return this._isDelta(s)?(r[e]=((o={})[n]=u.default.getDeltaEnd(s),o),null):(r[e]=n,this._isRewriteNext(s,a)?n:null)},e.prototype._isRewriteNext=function(t,e){if(null==e&&null!=t)return!1;var n=t===e,r=this._isDelta(e),i=!1,o=!1;return this._isDelta(t)&&r?u.default.getDeltaEnd(t)==u.default.getDeltaStart(e)&&(o=!0):r&&(i=u.default.getDeltaStart(e)===""+t),n||i||o},e.prototype._tuneSubModules=function(){for(var t=1;t<this._modules.length;t++)this._modules[t]._tuneNewOptions(this._history[t])},e.prototype._resetTweens=function(){var t=0,e=0,n=this.timeline._timelines;if(null!=n){for(t=0;t<n.length;t++){var r=n[t-1];this._resetTween(n[t],this._history[t],e+=r?r._props.repeatTime:0)}this.timeline._setProp(this._props.timeline),this.timeline._recalcTotalDuration()}},e.prototype._resetTween=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.shiftTime=n,t._setProp(e)},e}(r(n(99)).default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(75)),s=r(n(76)),a=r(n(94)),u=r(n(71)),c=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,s.default)(e,t),e.prototype._declareDefaults=function(){t.prototype._declareDefaults.call(this),this._defaults.isSwirl=!0,this._defaults.swirlSize=10,this._defaults.swirlFrequency=3,this._defaults.pathScale=1,this._defaults.degreeShift=0,this._defaults.radius=5,this._defaults.x=0,this._defaults.y=0,this._defaults.scale={1:0},this._defaults.direction=1},e.prototype._extendDefaults=function(){t.prototype._extendDefaults.call(this),this._calcPosData()},e.prototype._tuneNewOptions=function(e){null!=e&&(t.prototype._tuneNewOptions.call(this,e),null==e.x&&null==e.y||this._calcPosData())},e.prototype._calcPosData=function(){var t=this._getPosValue("x"),e=this._getPosValue("y"),n=90+Math.atan(e.delta/t.delta||0)*u.default.RAD_TO_DEG;this._posData={radius:Math.sqrt(t.delta*t.delta+e.delta*e.delta),angle:t.delta<0?n+180:n,x:t,y:e}},e.prototype._getPosValue=function(t){var e=this._deltas[t];if(e)return delete this._deltas[t],{start:e.start.value,end:e.end.value,delta:e.delta,units:e.end.unit};var n=u.default.parseUnit(this._props[t]);return{start:n.value,end:n.value,delta:0,units:n.unit}},e.prototype._setProgress=function(t,e){this._progress=t,this._calcCurrentProps(t,e),this._calcSwirlXY(t),this._draw(t)},e.prototype._calcSwirlXY=function(t){var e=this._props,n=this._posData.angle+e.degreeShift,r=u.default.getRadialPoint({angle:e.isSwirl?n+this._getSwirl(t):n,radius:t*this._posData.radius*e.pathScale,center:{x:this._posData.x.start,y:this._posData.y.start}}),i=r.x,o=r.y;i>0&&i<1e-6&&(i=1e-6),o>0&&o<1e-6&&(o=1e-6),i<0&&i>-1e-6&&(i=-1e-6),o<0&&o>-1e-6&&(o=-1e-6),e.x=this._o.ctx?i:""+i+this._posData.x.units,e.y=this._o.ctx?o:""+o+this._posData.y.units},e.prototype._getSwirl=function(t){var e=this._props;return e.direction*e.swirlSize*Math.sin(e.swirlFrequency*t)},e.prototype._draw=function(){a.default.prototype[this._props.isWithShape?"_draw":"_drawEl"].call(this)},e}(a.default);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(95)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(110)),c=r(n(117)),l=r(n(116)),h=r(n(71)),p=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){this._defaults={count:5,degree:360,radius:{0:50},radiusX:null,radiusY:null,width:0,height:0}},e.prototype.then=function(t){this._removeTweenProperties(t);var e=this._masterThen(t),n=this._childThen(t);return this._setSwirlDuration(e,this._calcPackTime(n)),this.timeline._recalcTotalDuration(),this},e.prototype.tune=function(t){return null==t?this:(this._saveTimelineOptions(t),this.timeline._setProp(this._timelineOptions),this._removeTweenProperties(t),this._tuneNewOptions(t),this.masterSwirl.tune(t),this._tuneSwirls(t),this._recalcModulesTime(),this)},e.prototype._extendDefaults=function(){this._removeTweenProperties(this._o),t.prototype._extendDefaults.call(this)},e.prototype._removeTweenProperties=function(t){for(var e in h.default.tweenOptionMap)null==this._defaults[e]&&delete t[e]},e.prototype._recalcModulesTime=function(){for(var t=this.masterSwirl._modules,e=this._swirls,n=0,r=0;r<t.length;r++){var i=t[r].tween,o=this._calcPackTime(e[r]);i._setProp({duration:o,shiftTime:n}),n+=o}this.timeline._recalcTotalDuration()},e.prototype._tuneSwirls=function(t){for(var e=this._swirls[0],n=0;n<e.length;n++){var r=e[n],i=this._getChildOption(t||{},n),o=null!=i.degreeShift;o||(i.degreeShift=this._swirls[0][n]._props.degreeShift),this._addBurstProperties(i,n),o||delete i.degreeShift,r.tune(i),this._refreshBurstOptions(r._modules,n)}},e.prototype._refreshBurstOptions=function(t,e){for(var n=1;n<t.length;n++){var r=t[n],i={};this._addBurstProperties(i,e,n),r._tuneNewOptions(i)}},e.prototype._masterThen=function(t){this.masterSwirl.then(t);var e=h.default.getLastItem(this.masterSwirl._modules);return this._masterSwirls.push(e),e},e.prototype._childThen=function(t){for(var e=this._swirls[0],n=[],r=0;r<e.length;r++){var i=this._getChildOption(t,r),o=e[r];h.default.getLastItem(o._modules),i.parent=this.el,this._addBurstProperties(i,r,this._masterSwirls.length-1),o.then(i),n.push(h.default.getLastItem(o._modules))}return this._swirls[this._masterSwirls.length-1]=n,n},e.prototype._vars=function(){t.prototype._vars.call(this),this._bufferTimeline=new u.default},e.prototype._render=function(){this._o.isWithShape=!1,this._o.isSwirl=this._props.isSwirl,this._o.callbacksContext=this,this._saveTimelineOptions(this._o),this.masterSwirl=new d(this._o),this._masterSwirls=[this.masterSwirl],this.el=this.masterSwirl.el,this._renderSwirls()},e.prototype._renderSwirls=function(){for(var t=this._props,e=[],n=0;n<t.count;n++){var r=this._getChildOption(this._o,n);e.push(new f(this._addOptionalProps(r,n)))}this._swirls={0:e},this._setSwirlDuration(this.masterSwirl,this._calcPackTime(e))},e.prototype._saveTimelineOptions=function(t){this._timelineOptions=t.timeline,delete t.timeline},e.prototype._calcPackTime=function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n].tween._props;e=Math.max(r.repeatTime/r.speed,e)}return e},e.prototype._setSwirlDuration=function(t,e){t.tween._setProp("duration",e),t.timeline&&t.timeline._recalcTotalDuration&&t.timeline._recalcTotalDuration()},e.prototype._getChildOption=function(t,e){var n={};for(var r in t.children)n[r]=this._getPropByMod(r,e,t.children);return n},e.prototype._getPropByMod=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})[t];return h.default.isArray(n)?n[e%n.length]:n},e.prototype._addOptionalProps=function(t,e){return t.index=e,t.parent=this.masterSwirl.el,this._addBurstProperties(t,e),t},e.prototype._addBurstProperties=function(t,e,n){var r=this._index;this._index=e;var i=this._parseProperty("degreeShift",t.degreeShift||0);this._index=r;var o=this._props,s=o.degree/(o.degree%360==0?o.count:o.count-1||1),a=this._getSidePoint("start",e*s+i,n),u=this._getSidePoint("end",e*s+i,n);t.x=this._getDeltaFromPoints("x",a,u),t.y=this._getDeltaFromPoints("y",a,u),t.angle=this._getBitAngle(t.angle||0,i,e)},e.prototype._getBitAngle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=this._props,o=r.degree%360==0?r.count:r.count-1||1,s=n*(r.degree/o)+90;if(s+=e,this._isDelta(t)){var a={},u=(0,i.default)(t)[0],c=t[u];u=h.default.parseStringOption(u,n),c=h.default.parseStringOption(c,n),a[parseFloat(u)+s]=parseFloat(c)+s,t=a}else t+=s;return t},e.prototype._getSidePoint=function(t,e,n){var r=this._getSideRadius(t,n);return h.default.getRadialPoint({radius:r.radius,radiusX:r.radiusX,radiusY:r.radiusY,angle:e,center:{x:0,y:0}})},e.prototype._getSideRadius=function(t,e){return{radius:this._getRadiusByKey("radius",t,e),radiusX:this._getRadiusByKey("radiusX",t,e),radiusY:this._getRadiusByKey("radiusY",t,e)}},e.prototype._getRadiusByKey=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._masterSwirls[n],i=r._deltas,o=r._props;return null!=i[t]?i[t][e]:null!=o[t]?o[t]:void 0},e.prototype._getDeltaFromPoints=function(t,e,n){var r={};return e[t]===n[t]?r=e[t]:r[e[t]]=n[t],r},e.prototype._makeTimeline=function(){this._o.timeline=this._timelineOptions,t.prototype._makeTimeline.call(this),this.timeline.add(this.masterSwirl,this._swirls[0])},e.prototype._makeTween=function(){},e.prototype._hide=function(){},e.prototype._show=function(){},e}(l.default),f=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){t.prototype._declareDefaults.call(this),this._defaults.isSwirl=!1,this._o.duration=null!=this._o.duration?this._o.duration:700},e.prototype._calcSwirlXY=function(e){var n=this._props.degreeShift;this._props.degreeShift=0,t.prototype._calcSwirlXY.call(this,e),this._props.degreeShift=n},e}(c.default),d=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){t.prototype._declareDefaults.call(this),this._defaults.scale=1,this._defaults.width=0,this._defaults.height=0,this._defaults.radius={25:75}},e}(f);p.ChildSwirl=f,p.MainSwirl=d,e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(120)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(95)),c=r(n(99)),l=r(n(101)),h=r(n(125)),p=n(71),f={};l.default.prototype._declareDefaults.call(f);for(var d=(0,u.default)(f._defaults),y=0;y<d.length;y++)f._defaults[d[y]]=1;f._defaults.timeline=1;var m=f._defaults,v=function(t){function e(){return(0,o.default)(this,e),(0,s.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype._declareDefaults=function(){this._defaults={x:0,y:0,z:0,skewX:0,skewY:0,angleX:0,angleY:0,angleZ:0,scale:1,scaleX:1,scaleY:1,isSoftHide:!0,isShowStart:!0,isShowEnd:!0,isForce3d:!1,isRefreshState:!0},this._drawExclude={el:1},this._3dProperties=["angleX","angleY","z"],this._arrayPropertyMap={transformOrigin:1,backgroundPosition:1},this._numberPropertyMap={opacity:1,scale:1,scaleX:1,scaleY:1,angleX:1,angleY:1,angleZ:1,skewX:1,skewY:1},this._prefixPropertyMap={transform:1,transformOrigin:1},this._prefix=p.prefix.css},e.prototype.then=function(e){if(null==e||!(0,u.default)(e).length)return 1;var n=p.getLastItem(this._modules);return n.deltas.refresh(!1),this._history[this._history.length-1]=n._o,t.prototype.then.call(this,e),n.deltas.restore(),this},e.prototype._checkStartValue=function(t,e){return null==e?null!=this._defaults[t]?this._defaults[t]:null!=this._customProps[t]?this._customProps[t]:null!=p.defaultStyles[t]?p.defaultStyles[t]:0:e},e.prototype._draw=function(){for(var t=this._props,e=0;e<this._drawProps.length;e++){var n=this._drawProps[e];this._setStyle(n,t[n])}this._drawTransform(),this._customDraw&&this._customDraw(this._props.el,this._props)},e.prototype._drawTransform=function(){var t=this._props;this._setStyle("transform",this._is3d?"translate3d("+t.x+", "+t.y+", "+t.z+")\n          rotateX("+t.angleX+"deg)\n          rotateY("+t.angleY+"deg)\n          rotateZ("+t.angleZ+"deg)\n          skew("+t.skewX+"deg, "+t.skewY+"deg)\n          scale("+t.scaleX+", "+t.scaleY+")":"translate("+t.x+", "+t.y+")\n          rotate("+t.angleZ+"deg)\n          skew("+t.skewX+"deg, "+t.skewY+"deg)\n          scale("+t.scaleX+", "+t.scaleY+")")},e.prototype._render=function(){if(!this._o.prevChainModule){for(var t=this._props,e=0;e<this._renderProps.length;e++){var n=this._renderProps[e],r=t[n];this._setStyle(n,r="number"==typeof r?r+"px":r)}this._draw(),t.isShowStart||this._hide()}},e.prototype._setStyle=function(t,e){if(this._state[t]!==e){var n=this._props.el.style;n[t]=e,this._prefixPropertyMap[t]&&(n[""+this._prefix+t]=e),this._state[t]=e}},e.prototype._extendDefaults=function(){this._props=this._o.props||{},this._renderProps=[],this._drawProps=[],this._saveCustomProperties(this._o);var t=(0,i.default)({},this._o);t=this._addDefaults(t);for(var e=(0,u.default)(t),n=0;n<e.length;n++){var r=e[n],o=!this._drawExclude[r]&&null==this._defaults[r]&&!m[r],s=this._customProps[r];p.isDelta(t[r])||m[r]?o&&!s&&this._drawProps.push(r):(this._parseOption(r,t[r]),"el"===r&&(this._props.el=p.parseEl(t.el),this.el=this._props.el),o&&!s&&this._renderProps.push(r))}this._createDeltas(t)},e.prototype._saveCustomProperties=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._customProps=t.customProperties||{},this._customProps=(0,i.default)({},this._customProps),this._customDraw=this._customProps.draw,delete this._customProps.draw,delete t.customProperties,this._copyDefaultCustomProps()},e.prototype._copyDefaultCustomProps=function(){for(var t in this._customProps)null==this._o[t]&&(this._o[t]=this._customProps[t])},e.prototype._resetMergedFlags=function(e){return t.prototype._resetMergedFlags.call(this,e),e.props=this._props,e.customProperties=this._customProps,e},e.prototype._parseOption=function(e,n){t.prototype._parseOption.call(this,e,n);var r=this._props[e];p.isArray(r)&&(this._props[e]=this._arrToString(r))},e.prototype._arrToString=function(t){for(var e="",n=0;n<t.length;n++)e+=t[n].string+" ";return e},e.prototype._addDefaults=function(t){for(var e in this._is3d=!1,this._defaults)null==t[e]?t[e]="scaleX"===e||"scaleY"===e?null!=t.scale?t.scale:this._defaults.scale:this._defaults[e]:-1!==this._3dProperties.indexOf(e)&&(this._is3d=!0);return this._o.isForce3d&&(this._is3d=!0),t},e.prototype._vars=function(){this.deltas.refresh(!1),t.prototype._vars.call(this),this._state={},this.deltas.restore(!1)},e.prototype._createDeltas=function(t){this.deltas=new h.default({options:t,props:this._props,arrayPropertyMap:this._arrayPropertyMap,numberPropertyMap:this._numberPropertyMap,customProps:this._customProps,callbacksContext:t.callbacksContext||this,isChained:!!this._o.prevChainModule}),this._o.prevChainModule&&(this.timeline=this.deltas.timeline)},e.prototype._makeTween=function(){},e.prototype._makeTimeline=function(){this._o.prevChainModule||(this._o.timeline=this._o.timeline||{},this._addCallbackOverrides(this._o.timeline),t.prototype._makeTimeline.call(this),this.timeline.add(this.deltas))},e.prototype._addCallbackOverrides=function(t){var e=this,n=this._props;t.callbackOverrides={onUpdate:this._draw,onRefresh:this._props.isRefreshState?this._draw:void 0,onStart:function(t){e._isChained||(t&&!n.isShowStart?e._show():n.isShowStart||e._hide())},onComplete:function(t){e._isChained||(t?n.isShowEnd||e._hide():n.isShowEnd||e._show())}}},e.prototype._showByTransform=function(){this._drawTransform()},e.prototype._mergeThenProperty=function(t,e,n){var r="boolean"==typeof n;if(p.isTweenProp(t)||this._nonMergeProps[t]||r)return n;var o={};if(p.isObject(n)&&null!=n.to){for(var s in n)(m[s]||"curve"===s)&&(o[s]=n[s],delete n[s]);n=n.to}if(this._isDelta(n)){var a={};for(var u in n)(m[u]||"curve"===u)&&(a[u]=n[u],delete n[u]);var c=this._parseDeltaValues(t,n);return(0,i.default)({},c,a)}var l,h,f=this._parsePreArrayProperty(t,n);return this._isDelta(e)?(0,i.default)(((l={})[p.getDeltaEnd(e)]=f,l),o):(0,i.default)(((h={})[e]=f,h),o)},e}(c.default);e.default=v},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(121));e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports={default:n(122),__esModule:!0}},function(t,e,n){n(123),t.exports=n(14).Object.assign},function(t,e,n){var r=n(12);r(r.S+r.F,"Object",{assign:n(124)})},function(t,e,n){"use strict";var r=n(33),i=n(62),o=n(63),s=n(49),a=n(36),u=Object.assign;t.exports=!u||n(23)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r}))?function(t,e){for(var n=s(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var p,f=a(arguments[c++]),d=l?r(f).concat(l(f)):r(f),y=d.length,m=0;y>m;)h.call(f,p=d[m++])&&(n[p]=f[p]);return n}:u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(120)),o=r(n(74)),s=r(n(95)),a=r(n(110)),u=r(n(101)),c=r(n(126)),l=n(105),h=n(71),p={};u.default.prototype._declareDefaults.call(p);for(var f=(0,s.default)(p._defaults),d=0;d<f.length;d++)p._defaults[f[d]]=1;p._defaults.timeline=1;var y=p._defaults,m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t),this._o=e,this._shortColors={transparent:"rgba(0,0,0,0)",none:"rgba(0,0,0,0)",aqua:"rgb(0,255,255)",black:"rgb(0,0,0)",blue:"rgb(0,0,255)",fuchsia:"rgb(255,0,255)",gray:"rgb(128,128,128)",green:"rgb(0,128,0)",lime:"rgb(0,255,0)",maroon:"rgb(128,0,0)",navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",purple:"rgb(128,0,128)",red:"rgb(255,0,0)",silver:"rgb(192,192,192)",teal:"rgb(0,128,128)",white:"rgb(255,255,255)",yellow:"rgb(255,255,0)",orange:"rgb(255,128,0)"},this._ignoreDeltasMap={prevChainModule:1,masterModule:1},this._parseDeltas(e.options),this._createDeltas(),this._createTimeline(this._mainTweenOptions)}return t.prototype.refresh=function(t){for(var e=0;e<this._deltas.length;e++)this._deltas[e].refresh(t);return this},t.prototype.restore=function(){for(var t=0;t<this._deltas.length;t++)this._deltas[t].restore();return this},t.prototype._createTimeline=function(){this.timeline=new a.default,this.timeline.add(this._deltas)},t.prototype._createDeltas=function(){this._deltas=[],this._deltas.push(this._createDelta(this._mainDeltas,this._mainTweenOptions));for(var t=0;t<this._childDeltas.length;t++){var e=this._childDeltas[t];this._deltas.push(this._createDelta([e.delta],e.tweenOptions))}},t.prototype._createDelta=function(t,e){var n=this._o;return new c.default({deltas:t,tweenOptions:e,props:n.props,isChained:n.isChained,callbacksContext:n.callbacksContext})},t.prototype._parseDeltas=function(t){var e=this._splitTweenOptions(t),n=e.delta;this._mainTweenOptions=e.tweenOptions,this._mainDeltas=[],this._childDeltas=[];for(var r=(0,s.default)(n),i=0;i<r.length;i++){var o=r[i];if(this._isDelta(n[o])&&!this._ignoreDeltasMap[o]){var a=this._splitAndParseDelta(o,n[o]);a.tweenOptions?this._childDeltas.push(a):this._mainDeltas.push(a.delta)}}},t.prototype._splitAndParseDelta=function(t,e){var n=this._splitTweenOptions(e);return n.delta=this._parseDelta(t,n.delta),n},t.prototype._parseDelta=function(t,e,n){return this._o.customProps&&null!=this._o.customProps[t]?this._parseDeltaByCustom(t,e,n):this._parseDeltaByGuess(t,e,n)},t.prototype._parseDeltaByCustom=function(t,e,n){return this._parseNumberDelta(t,e,n)},t.prototype._parseDeltaByGuess=function(t,e,n){var r=this._preparseDelta(e).start,i=this._o;return!isNaN(parseFloat(r))||r.match(/rand\(/)||r.match(/stagger\(/)?i.arrayPropertyMap&&i.arrayPropertyMap[t]?this._parseArrayDelta(t,e):i.numberPropertyMap&&i.numberPropertyMap[t]?this._parseNumberDelta(t,e,n):this._parseUnitDelta(t,e,n):this._parseColorDelta(t,e)},t.prototype._splitTweenOptions=function(t){t=(0,i.default)({},t);for(var e=(0,s.default)(t),n={},r=null,o=0;o<e.length;o++){var a=e[o];y[a]&&(null!=t[a]&&(n[a]=t[a],r=!0),delete t[a])}return{delta:t,tweenOptions:r?n:void 0}},t.prototype._isDelta=function(t){var e=h.isObject(t);return!(!(e=e&&!t.unit)||h.isArray(t)||h.isDOM(t))},t.prototype._parseColorDelta=function(t,e){if("strokeLinecap"===t)return h.warn("Sorry, stroke-linecap property is not animatable yet, using the start(#{start}) value instead",e),{};var n=this._preparseDelta(e),r=this._makeColorObj(n.start),i=this._makeColorObj(n.end);return{type:"color",name:t,start:r,end:i,curve:n.curve,delta:{r:i.r-r.r,g:i.g-r.g,b:i.b-r.b,a:i.a-r.a}}},t.prototype._parseArrayDelta=function(t,e){var n=this._preparseDelta(e),r=this._strToArr(n.start),i=this._strToArr(n.end);h.normDashArrays(r,i);for(var o=0;o<r.length;o++)h.mergeUnits(r[o],i[o],t);return{type:"array",name:t,start:r,end:i,delta:h.calcArrDelta(r,i),curve:n.curve}},t.prototype._parseUnitDelta=function(t,e,n){var r=this._preparseDelta(e),i=h.parseUnit(h.parseStringOption(r.end,n)),o=h.parseUnit(h.parseStringOption(r.start,n));return h.mergeUnits(o,i,t),{type:"unit",name:t,start:o,end:i,delta:i.value-o.value,curve:r.curve}},t.prototype._parseNumberDelta=function(t,e,n){var r=this._preparseDelta(e),i=parseFloat(h.parseStringOption(r.end,n)),o=parseFloat(h.parseStringOption(r.start,n));return{type:"number",name:t,start:o,end:i,delta:i-o,curve:r.curve}},t.prototype._preparseDelta=function(t){var e=(t=(0,i.default)({},t)).curve;null!=e&&((e=l.parseEasing(e))._parent=this),delete t.curve;var n=(0,s.default)(t)[0];return{start:n,end:t[n],curve:e}},t.prototype._makeColorObj=function(t){var e={};if("#"===t[0]){var n=/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(t);if(n){var r=2===n[2].length?n[2]:n[2]+n[2],i=2===n[3].length?n[3]:n[3]+n[3];e={r:parseInt(2===n[1].length?n[1]:n[1]+n[1],16),g:parseInt(r,16),b:parseInt(i,16),a:1}}}if("#"!==t[0]){var o="r"===t[0]&&"g"===t[1]&&"b"===t[2],s=void 0;o&&(s=t),o||(this._shortColors[t]?s=this._shortColors[t]:(h.div.style.color=t,s=h.computedStyle(h.div).color));var a=new RegExp("^rgba?\\((\\d{1,3}),\\s?(\\d{1,3}),\\s?(\\d{1,3}),?\\s?(\\d{1}|0?\\.\\d{1,})?\\)$","gi").exec(s),u=parseFloat(a[4]||1);a&&(e={r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10),a:null==u||isNaN(u)?1:u})}return e},t.prototype._strToArr=function(t){var e=[];return"number"!=typeof t||isNaN(t)?(t.trim().split(/\s+/gim).forEach((function(t){e.push(h.parseUnit(h.parseIfRand(t)))})),e):(e.push(h.parseUnit(t)),e)},t}();e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(101)),s=(n(71),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t),this._o=e,this._createTween(e.tweenOptions),!this._o.isChained&&this.refresh(!0)}return t.prototype.refresh=function(t){this._previousValues=[];for(var e=this._o.deltas,n=0;n<e.length;n++){var r=e[n].name;this._previousValues.push({name:r,value:this._o.props[r]})}return this.tween._refresh(t),this},t.prototype.restore=function(){for(var t=this._previousValues,e=0;e<t.length;e++){var n=t[e];this._o.props[n.name]=n.value}return this},t.prototype._createTween=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;t.callbackOverrides={onUpdate:function(t,n){e._calcCurrentProps(t,n)}},this._o.isChained||(t.callbackOverrides.onRefresh=function(t,n,r){e._calcCurrentProps(n,r)}),t.callbacksContext=this._o.callbacksContext,this.tween=new o.default(t)},t.prototype._calcCurrentProps=function(t,e){for(var n=this._o.deltas,r=0;r<n.length;r++)this["_calcCurrent_"+n[r].type](n[r],t,e)},t.prototype._calcCurrent_color=function(t,e,n){var r,i,o,s,a=t.start,u=t.delta;if(t.curve){var c=t.curve(n);r=parseInt(c*(a.r+n*u.r),10),i=parseInt(c*(a.g+n*u.g),10),o=parseInt(c*(a.b+n*u.b),10),s=parseFloat(c*(a.a+n*u.a))}else r=parseInt(a.r+e*u.r,10),i=parseInt(a.g+e*u.g,10),o=parseInt(a.b+e*u.b,10),s=parseFloat(a.a+e*u.a);this._o.props[t.name]="rgba("+r+","+i+","+o+","+s+")"},t.prototype._calcCurrent_number=function(t,e,n){this._o.props[t.name]=t.curve?t.curve(n)*(t.start+n*t.delta):t.start+e*t.delta},t.prototype._calcCurrent_unit=function(t,e,n){var r=t.curve?t.curve(n)*(t.start.value+n*t.delta):t.start.value+e*t.delta;this._o.props[t.name]=""+r+t.end.unit},t.prototype._calcCurrent_array=function(t,e,n){for(var r=t.name,i=this._o.props,o="",s=t.curve?t.curve(n):null,a=0;a<t.delta.length;a++){var u=t.delta[a];o+=""+(t.curve?s*(t.start[a].value+n*u.value):t.start[a].value+e*u.value)+u.unit+" "}i[r]=o},t}());e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=r(n(95)),o=r(n(74)),s=r(n(75)),a=r(n(76)),u=r(n(71)),c=r(n(110)),l=function(t){function e(n,r){var i;(0,o.default)(this,e);var a=(0,s.default)(this,t.call(this));return i=a._init(n,r),(0,s.default)(a,i)}return(0,a.default)(e,t),e.prototype.then=function(t){if(null==t)return this;for(var e=0;e<this._modules.length;e++)this._modules[e].then(this._getOptionByIndex(e,t));return this.timeline._recalcTotalDuration(),this},e.prototype.tune=function(t){if(null==t)return this;for(var e=0;e<this._modules.length;e++)this._modules[e].tune(this._getOptionByIndex(e,t));return this.timeline._recalcTotalDuration(),this},e.prototype.generate=function(){for(var t=0;t<this._modules.length;t++)this._modules[t].generate();return this.timeline._recalcTotalDuration(),this},e.prototype._getOptionByMod=function(t,e,n){var r=n[t];r+""!="[object NodeList]"&&r+""!="[object HTMLCollection]"||(r=Array.prototype.slice.call(r,0));var i=u.default.isArray(r)?r[e%r.length]:r;return u.default.parseIfStagger(i,e)},e.prototype._getOptionByIndex=function(t,e){var n=this,r={};return(0,i.default)(e).forEach((function(i){return r[i]=n._getOptionByMod(i,t,e)})),r},e.prototype._getChildQuantity=function(t,e){if("number"==typeof t)return t;var n=e[t];return u.default.isArray(n)?n.length:n+""=="[object NodeList]"?n.length:n+""=="[object HTMLCollection]"?Array.prototype.slice.call(n,0).length:n instanceof HTMLElement?1:"string"==typeof n?1:void 0},e.prototype._init=function(t,e){var n=this._getChildQuantity(t.quantifier||"el",t);this._createTimeline(t),this._modules=[];for(var r=0;r<n;r++){var i=this._getOptionByIndex(r,t);i.isRunLess=!0,i.index=r;var o=new e(i);this._modules.push(o),this.timeline.add(o)}return this},e.prototype._createTimeline=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.timeline=new c.default(t.timeline)},e.prototype._makeTween=function(){},e.prototype._makeTimeline=function(){},e}(r(n(116)).default);t.exports=function(t){return function(e){return new l(e,t)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(74)),o=r(n(71)),s=r(n(101)),a=r(n(110)),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.default)(this,t),this.o=e,this.o.el?(this._vars(),this._declareDefaults(),this._extendDefaults(),this._parseFrames(),this._frames.length<=2&&o.default.warn("Spriter: only "+this._frames.length+" frames found"),this._frames.length<1&&o.default.error("Spriter: there is no frames to animate, aborting"),this._createTween(),this):o.default.error('No "el" option specified, aborting')}return t.prototype._declareDefaults=function(){this._defaults={duration:500,delay:0,easing:"linear.none",repeat:0,yoyo:!1,isRunLess:!1,isShowEnd:!1,onStart:null,onUpdate:null,onComplete:null}},t.prototype._vars=function(){this._props=o.default.cloneObj(this.o),this.el=this.o.el,this._frames=[]},t.prototype.run=function(t){return this.timeline.play()},t.prototype._extendDefaults=function(){return o.default.extend(this._props,this._defaults)},t.prototype._parseFrames=function(){this._frames=Array.prototype.slice.call(this.el.children,0),this._frames.forEach((function(t,e){return t.style.opacity=0})),this._frameStep=1/this._frames.length},t.prototype._createTween=function(){var t=this;this._tween=new s.default({duration:this._props.duration,delay:this._props.delay,yoyo:this._props.yoyo,repeat:this._props.repeat,easing:this._props.easing,onStart:function(){return t._props.onStart&&t._props.onStart()},onComplete:function(){return t._props.onComplete&&t._props.onComplete()},onUpdate:function(e){return t._setProgress(e)}}),this.timeline=new a.default,this.timeline.add(this._tween),this._props.isRunLess||this._startTween()},t.prototype._startTween=function(){var t=this;setTimeout((function(){return t.timeline.play()}),1)},t.prototype._setProgress=function(t){var e=Math.floor(t/this._frameStep);if(this._prevFrame!=this._frames[e]){this._prevFrame&&(this._prevFrame.style.opacity=0);var n=1===t&&this._props.isShowEnd?e-1:e;this._frames[n]&&(this._frames[n].style.opacity=1),this._prevFrame=this._frames[e]}this._props.onUpdate&&this._props.onUpdate(t)},t}();e.default=u},function(t,e,n){var r,i,o,s,a;s=n(71),a=n(130),o=n(101).default,i=n(110).default,r=function(){function t(t){this.o=null!=t?t:{},this.calcHeight=function(t,e){return function(){return t.apply(e,arguments)}}(this.calcHeight,this),this.vars()||this.createTween()}return t.prototype.defaults={path:null,curvature:{x:"75%",y:"50%"},isCompositeLayer:!0,delay:0,duration:1e3,easing:null,repeat:0,yoyo:!1,onStart:null,onComplete:null,onUpdate:null,offsetX:0,offsetY:0,angleOffset:null,pathStart:0,pathEnd:1,motionBlur:0,transformOrigin:null,isAngle:!1,isReverse:!1,isRunLess:!1,isPresetPosition:!0},t.prototype.vars=function(){return this.getScaler=s.bind(this.getScaler,this),this.resize=a,this.props=s.cloneObj(this.defaults),this.extendOptions(this.o),this.isMotionBlurReset=s.isSafari||s.isIE,this.isMotionBlurReset&&(this.props.motionBlur=0),this.history=[s.cloneObj(this.props)],this.postVars()},t.prototype.curveToPath=function(t){var e,n,r,i,o,a,u,c,l,h,p,f;return h=document.createElementNS(s.NS,"path"),l={x:(f=t.start).x+t.shift.x,y:f.x+t.shift.y},n=t.curvature,u=t.shift.x,c=t.shift.y,p=Math.sqrt(u*u+c*c)/100,e=Math.atan(c/u)*(180/Math.PI)+90,t.shift.x<0&&(e+=180),r=s.parseUnit(n.x),a=s.getRadialPoint({center:{x:f.x,y:f.y},radius:r="%"===r.unit?r.value*p:r.value,angle:e}),i=s.parseUnit(n.y),o=s.getRadialPoint({center:{x:a.x,y:a.y},radius:i="%"===i.unit?i.value*p:i.value,angle:e+90}),h.setAttribute("d","M"+f.x+","+f.y+" Q"+o.x+","+o.y+" "+l.x+","+l.y),h},t.prototype.postVars=function(){return this.props.pathStart=s.clamp(this.props.pathStart,0,1),this.props.pathEnd=s.clamp(this.props.pathEnd,this.props.pathStart,1),this.angle=0,this.speedX=0,this.speedY=0,this.blurX=0,this.blurY=0,this.prevCoords={},this.blurAmount=20,this.props.motionBlur=s.clamp(this.props.motionBlur,0,1),this.onUpdate=this.props.onUpdate,this.o.el?(this.el=this.parseEl(this.props.el),this.props.motionBlur>0&&this.createFilter(),this.path=this.getPath(),this.path.getAttribute("d")?(this.len=this.path.getTotalLength(),this.slicedLen=this.len*(this.props.pathEnd-this.props.pathStart),this.startLen=this.props.pathStart*this.len,this.fill=this.props.fill,null!=this.fill&&(this.container=this.parseEl(this.props.fill.container),this.fillRule=this.props.fill.fillRule||"all",this.getScaler(),null!=this.container)?(this.removeEvent(this.container,"onresize",this.getScaler),this.addEvent(this.container,"onresize",this.getScaler)):void 0):(s.error("Path has no coordinates to work with, aborting"),!0)):(s.error('Missed "el" option. It could be a selector, DOMNode or another module.'),!0)},t.prototype.addEvent=function(t,e,n){return t.addEventListener(e,n,!1)},t.prototype.removeEvent=function(t,e,n){return t.removeEventListener(e,n,!1)},t.prototype.createFilter=function(){var t,e;return t=document.createElement("div"),this.filterID="filter-"+s.getUniqID(),t.innerHTML='<svg id="svg-'+this.filterID+'"\n    style="visibility:hidden; width:0px; height:0px">\n  <filter id="'+this.filterID+'" y="-20" x="-20" width="40" height="40">\n    <feOffset\n      id="blur-offset" in="SourceGraphic"\n      dx="0" dy="0" result="offset2"></feOffset>\n    <feGaussianblur\n      id="blur" in="offset2"\n      stdDeviation="0,0" result="blur2"></feGaussianblur>\n    <feMerge>\n      <feMergeNode in="SourceGraphic"></feMergeNode>\n      <feMergeNode in="blur2"></feMergeNode>\n    </feMerge>\n  </filter>\n</svg>',e=t.querySelector("#svg-"+this.filterID),this.filter=e.querySelector("#blur"),this.filterOffset=e.querySelector("#blur-offset"),document.body.insertBefore(e,document.body.firstChild),this.el.style.filter="url(#"+this.filterID+")",this.el.style[s.prefix.css+"filter"]="url(#"+this.filterID+")"},t.prototype.parseEl=function(t){return"string"==typeof t?document.querySelector(t):t instanceof HTMLElement?t:null!=t._setProp?(this.isModule=!0,t):void 0},t.prototype.getPath=function(){return s.parsePath(this.props.path)||(this.props.path.x||this.props.path.y?this.curveToPath({start:{x:0,y:0},shift:{x:this.props.path.x||0,y:this.props.path.y||0},curvature:{x:this.props.curvature.x||this.defaults.curvature.x,y:this.props.curvature.y||this.defaults.curvature.y}}):void 0)},t.prototype.getScaler=function(){var t,e,n;switch(this.cSize={width:this.container.offsetWidth||0,height:this.container.offsetHeight||0},n=this.path.getPointAtLength(0),t=this.path.getPointAtLength(this.len),e={},this.scaler={},e.width=t.x>=n.x?t.x-n.x:n.x-t.x,e.height=t.y>=n.y?t.y-n.y:n.y-t.y,this.fillRule){case"all":return this.calcWidth(e),this.calcHeight(e);case"width":return this.calcWidth(e),this.scaler.y=this.scaler.x;case"height":return this.calcHeight(e),this.scaler.x=this.scaler.y}},t.prototype.calcWidth=function(t){return this.scaler.x=this.cSize.width/t.width,!isFinite(this.scaler.x)&&(this.scaler.x=1)},t.prototype.calcHeight=function(t){return this.scaler.y=this.cSize.height/t.height,!isFinite(this.scaler.y)&&(this.scaler.y=1)},t.prototype.run=function(t){var e,n;if(t){for(e in t)n=t[e],s.callbacksMap[e]||s.tweenOptionMap[e]?(s.warn('the property "'+e+'" property can not be overridden on run yet'),delete t[e]):this.history[0][e]=n;this.tuneOptions(t)}return this.startTween()},t.prototype.createTween=function(){return this.tween=new o({duration:this.props.duration,delay:this.props.delay,yoyo:this.props.yoyo,repeat:this.props.repeat,easing:this.props.easing,onStart:function(t){return function(){var e;return null!=(e=t.props.onStart)?e.apply(t):void 0}}(this),onComplete:function(t){return function(){var e;return t.props.motionBlur&&t.setBlur({blur:{x:0,y:0},offset:{x:0,y:0}}),null!=(e=t.props.onComplete)?e.apply(t):void 0}}(this),onUpdate:function(t){return function(e){return t.setProgress(e)}}(this),onFirstUpdate:function(t){return function(e,n){if(!e)return t.history.length>1&&t.tuneOptions(t.history[0])}}(this)}),this.timeline=new i,this.timeline.add(this.tween),!this.props.isRunLess&&this.startTween(),this.props.isPresetPosition&&this.setProgress(0,!0)},t.prototype.startTween=function(){return setTimeout(function(t){return function(){var e;return null!=(e=t.timeline)?e.play():void 0}}(this),1)},t.prototype.setProgress=function(t,e){var n,r,i,o;return i=(r=this.path.getPointAtLength(n=this.startLen+(this.props.isReverse?(1-t)*this.slicedLen:t*this.slicedLen))).x+this.props.offsetX,o=r.y+this.props.offsetY,this._getCurrentAngle(r,n,t),this._setTransformOrigin(t),this._setTransform(i,o,t,e),this.props.motionBlur&&this.makeMotionBlur(i,o)},t.prototype.setElPosition=function(t,e,n){return s.setPrefixedStyle(this.el,"transform","translate("+t+"px,"+e+"px) "+(0!==this.angle?"rotate("+this.angle+"deg)":"")+" "+(this.props.isCompositeLayer&&s.is3d?"translateZ(0)":""))},t.prototype.setModulePosition=function(t,e){return this.el._setProp({shiftX:t+"px",shiftY:e+"px",angle:this.angle}),this.el._draw()},t.prototype._getCurrentAngle=function(t,e,n){var r,i;return this.props.isAngle||null!=this.props.angleOffset||"function"==typeof this.props.transformOrigin?(i=this.path.getPointAtLength(e-1),r=Math.atan((t.y-i.y)/(t.x-i.x)),!isFinite(r)&&(r=0),this.angle=r*s.RAD_TO_DEG,"function"!=typeof this.props.angleOffset?this.angle+=this.props.angleOffset||0:this.angle=this.props.angleOffset.call(this,this.angle,n)):this.angle=0},t.prototype._setTransform=function(t,e,n,r){var i;return this.scaler&&(t*=this.scaler.x,e*=this.scaler.y),i=null,r||(i="function"==typeof this.onUpdate?this.onUpdate(n,{x:t,y:e,angle:this.angle}):void 0),this.isModule?this.setModulePosition(t,e):"string"!=typeof i?this.setElPosition(t,e,n):s.setPrefixedStyle(this.el,"transform",i)},t.prototype._setTransformOrigin=function(t){var e;if(this.props.transformOrigin)return e="function"==typeof this.props.transformOrigin?this.props.transformOrigin(this.angle,t):this.props.transformOrigin,s.setPrefixedStyle(this.el,"transform-origin",e)},t.prototype.makeMotionBlur=function(t,e){var n,r,i,o,a,u;return u=0,o=1,a=1,null==this.prevCoords.x||null==this.prevCoords.y?(this.speedX=0,this.speedY=0):(i=e-this.prevCoords.y,(r=t-this.prevCoords.x)>0&&(o=-1),o<0&&(a=-1),this.speedX=Math.abs(r),this.speedY=Math.abs(i),u=Math.atan(i/r)*(180/Math.PI)+90),n=this.angToCoords(u-this.angle),this.blurX=s.clamp(this.speedX/16*this.props.motionBlur,0,1),this.blurY=s.clamp(this.speedY/16*this.props.motionBlur,0,1),this.setBlur({blur:{x:3*this.blurX*this.blurAmount*Math.abs(n.x),y:3*this.blurY*this.blurAmount*Math.abs(n.y)},offset:{x:3*o*this.blurX*n.x*this.blurAmount,y:3*a*this.blurY*n.y*this.blurAmount}}),this.prevCoords.x=t,this.prevCoords.y=e},t.prototype.setBlur=function(t){if(!this.isMotionBlurReset)return this.filter.setAttribute("stdDeviation",t.blur.x+","+t.blur.y),this.filterOffset.setAttribute("dx",t.offset.x),this.filterOffset.setAttribute("dy",t.offset.y)},t.prototype.extendDefaults=function(t){var e,n;for(e in n=[],t)n.push(this[e]=t[e]);return n},t.prototype.extendOptions=function(t){var e,n;for(e in n=[],t)n.push(this.props[e]=t[e]);return n},t.prototype.then=function(t){var e,n,r,i;for(n in r={},i=this.history[this.history.length-1])!s.callbacksMap[n]&&!s.tweenOptionMap[n]||"duration"===n?null==t[n]&&(t[n]=i[n]):null==t[n]&&(t[n]=void 0),s.tweenOptionMap[n]&&(r[n]="duration"!==n?t[n]:null!=t[n]?t[n]:i[n]);return this.history.push(t),e=this,r.onUpdate=function(t){return function(e){return t.setProgress(e)}}(this),r.onStart=function(t){return function(){var e;return null!=(e=t.props.onStart)?e.apply(t):void 0}}(this),r.onComplete=function(t){return function(){var e;return null!=(e=t.props.onComplete)?e.apply(t):void 0}}(this),r.onFirstUpdate=function(){return e.tuneOptions(e.history[this.index])},r.isChained=!t.delay,this.timeline.append(new o(r)),this},t.prototype.tuneOptions=function(t){return this.extendOptions(t),this.postVars()},t.prototype.angToCoords=function(t){var e,n,r;return e=((t%=360)-90)*Math.PI/180,n=Math.cos(e),r=Math.sin(e),{x:1.428571429*(n=n<0?Math.max(n,-.7):Math.min(n,.7)),y:1.428571429*(r=r<0?Math.max(r,-.7):Math.min(r,.7))}},t}(),t.exports=r},function(t,e,n){var r;!function(){var n;n=function(){function t(t){this.o=null!=t?t:{},window.isAnyResizeEventInited||(this.vars(),this.redefineProto())}return t.prototype.vars=function(){return window.isAnyResizeEventInited=!0,this.allowedProtos=[HTMLDivElement,HTMLFormElement,HTMLLinkElement,HTMLBodyElement,HTMLParagraphElement,HTMLFieldSetElement,HTMLLegendElement,HTMLLabelElement,HTMLButtonElement,HTMLUListElement,HTMLOListElement,HTMLLIElement,HTMLHeadingElement,HTMLQuoteElement,HTMLPreElement,HTMLBRElement,HTMLFontElement,HTMLHRElement,HTMLModElement,HTMLParamElement,HTMLMapElement,HTMLTableElement,HTMLTableCaptionElement,HTMLImageElement,HTMLTableCellElement,HTMLSelectElement,HTMLInputElement,HTMLTextAreaElement,HTMLAnchorElement,HTMLObjectElement,HTMLTableColElement,HTMLTableSectionElement,HTMLTableRowElement],this.timerElements={img:1,textarea:1,input:1,embed:1,object:1,svg:1,canvas:1,tr:1,tbody:1,thead:1,tfoot:1,a:1,select:1,option:1,optgroup:1,dl:1,dt:1,br:1,basefont:1,font:1,col:1,iframe:1}},t.prototype.redefineProto=function(){var t,e,n;return e=this,(function(){var r,i,o,s;for(s=[],t=r=0,i=(o=this.allowedProtos).length;r<i;t=++r)null!=(n=o[t]).prototype&&s.push(function(t){return function(n){var r;r=function(){return this===window&&this===document||"onresize"===arguments[0]&&!this.isAnyResizeEventInited&&e.handleResize({args:arguments,that:this}),n.apply(this,arguments)},t.prototype.addEventListener?t.prototype.addEventListener=r:t.prototype.attachEvent&&(t.prototype.attachEvent=r)}(t.prototype.addEventListener||t.prototype.attachEvent),function(e){return t.prototype.removeEventListener?t.prototype.removeEventListener=function(){return this.isAnyResizeEventInited=!1,this.iframe&&this.removeChild(this.iframe),e.apply(this,arguments)}:t.prototype.detachEvent?t.prototype.detachEvent=wrappedListener:void 0}(t.prototype.removeEventListener||t.prototype.detachEvent)}(n));return s}).call(this)},t.prototype.handleResize=function(t){var e,n,r,i;return this.timerElements[(n=t.that).tagName.toLowerCase()]?this.initTimer(n):(r=document.createElement("iframe"),n.appendChild(r),r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.zIndex=-999,r.style.opacity=0,r.style.top=0,r.style.left=0,("static"===(e=window.getComputedStyle?getComputedStyle(n):n.currentStyle).position&&""===n.style.position||""===e.position&&""===n.style.position)&&(n.style.position="relative"),null!=(i=r.contentWindow)&&(i.onresize=function(t){return function(e){return t.dispatchEvent(n)}}(this)),n.iframe=r),n.isAnyResizeEventInited=!0},t.prototype.initTimer=function(t){var e,n;return n=0,e=0,this.interval=setInterval(function(r){return function(){var i,o;if(i=t.offsetHeight,(o=t.offsetWidth)!==n||i!==e)return r.dispatchEvent(t),n=o,e=i}}(this),this.o.interval||62.5)},t.prototype.dispatchEvent=function(t){var e;return document.createEvent?((e=document.createEvent("HTMLEvents")).initEvent("onresize",!1,!1),t.dispatchEvent(e)):!!document.createEventObject&&(e=document.createEventObject(),t.fireEvent("onresize",e))},t.prototype.destroy=function(){var t,e,n,r,i,o;for(clearInterval(this.interval),this.interval=null,window.isAnyResizeEventInited=!1,o=[],t=e=0,n=(i=this.allowedProtos).length;e<n;t=++e)null!=(r=i[t]).prototype&&o.push(function(t){return t.prototype.addEventListener?t.prototype.addEventListener=Element.prototype.addEventListener:t.prototype.attachEvent&&(t.prototype.attachEvent=Element.prototype.attachEvent),t.prototype.removeEventListener?t.prototype.removeEventListener=Element.prototype.removeEventListener:t.prototype.detachEvent?t.prototype.detachEvent=Element.prototype.detachEvent:void 0}(r));return o},t}(),void 0!==(r=(function(){return new n}).apply(e,[]))&&(t.exports=r)}()}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mojs",[],t):"object"==typeof exports?exports.mojs=t():this.mojs=t()}function fireb_app(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,(function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)},e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function i(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=i(t[n],e[n]));return t}var o=(s.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},s);function s(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}var a,u,c,l=(c=Error,t(a=p,u=c),a.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h),p);function h(){this.constructor=a}function p(t,e){var n=c.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,p.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,f.prototype.create),n}var f=(d.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new l(i,a),c=0,h=Object.keys(r);c<h.length;c++){var p=h[c];"_"!==p.slice(-1)&&(p in u&&console.warn('Overwriting FirebaseError base field "'+p+'" can cause unexpected behavior.'),u[p]=r[p])}return u},d);function d(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var y=/\{\$([^}]+)}/g;function m(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(t,e){var n=new g(t,e);return n.subscribe.bind(n)}var g=(b.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},b.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},b.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},b.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},b.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},b.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},b.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},b.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},b);function b(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function w(){}var _=(E.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},E.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},E.prototype.setServiceProps=function(t){return this.serviceProps=t,this},E);function E(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var T="[DEFAULT]",S=(I.prototype.get=function(t){void 0===t&&(t=T);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new o;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},I.prototype.getImmediate=function(t){var n=e({identifier:T,optional:!1},t),r=n.optional,i=this.normalizeInstanceIdentifier(n.identifier);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},I.prototype.getComponent=function(){return this.component},I.prototype.setComponent=function(t){var e,i;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(function(t){return"EAGER"===t.instantiationMode}(this.component=t))try{this.getOrInitializeService(T)}catch(t){}try{for(var o=n(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var a=r(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},I.prototype.clearInstance=function(t){void 0===t&&(t=T),this.instancesDeferred.delete(t),this.instances.delete(t)},I.prototype.delete=function(){return function(t,e,n,r){return new(n=n||Promise)((function(e,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?e(t.value):new n((function(e){e(t.value)})).then(o,s)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function(){var t;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},I.prototype.isComponentSet=function(){return null!=this.component},I.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===T?void 0:t}(t)),this.instances.set(t,e)),e||null},I.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:T:t},I);function I(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var C,k,A=(N.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},N.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},N.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new S(t,this);return this.providers.set(t,e),e},N.prototype.getProviders=function(){return Array.from(this.providers.values())},N);function N(t){this.name=t,this.providers=new Map}function x(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function D(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case C.DEBUG:case C.VERBOSE:console.log.apply(console,x(["["+i+"]  "+t.name+":"],n));break;case C.INFO:console.info.apply(console,x(["["+i+"]  "+t.name+":"],n));break;case C.WARN:console.warn.apply(console,x(["["+i+"]  "+t.name+":"],n));break;case C.ERROR:console.error.apply(console,x(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(k=C=C||{})[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT";var R,P=C.INFO,O=(Object.defineProperty(L.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in C))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(L.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),L.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,x([this,C.DEBUG],t))},L.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,x([this,C.VERBOSE],t))},L.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,x([this,C.INFO],t))},L.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,x([this,C.WARN],t))},L.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,x([this,C.ERROR],t))},L);function L(t){this.name=t,this._logLevel=P,this._logHandler=D}var M,F=((R={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",R["bad-app-name"]="Illegal App name: '{$appName}",R["duplicate-app"]="Firebase App named '{$appName}' already exists",R["app-deleted"]="Firebase App named '{$appName}' already deleted",R["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",R),U=new f("app","Firebase",F),j="@firebase/app",q="[DEFAULT]",B=((M={})[j]="fire-core",M["@firebase/analytics"]="fire-analytics",M["@firebase/auth"]="fire-auth",M["@firebase/database"]="fire-rtdb",M["@firebase/functions"]="fire-fn",M["@firebase/installations"]="fire-iid",M["@firebase/messaging"]="fire-fcm",M["@firebase/performance"]="fire-perf",M["@firebase/remote-config"]="fire-rc",M["@firebase/storage"]="fire-gcs",M["@firebase/firestore"]="fire-fst",M["fire-js"]="fire-js",M["firebase-wrapper"]="fire-js-all",M),V=new O("@firebase/app"),W=(Object.defineProperty(H.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(H.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),H.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},H.prototype._getService=function(t,e){return void 0===e&&(e=q),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},H.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=q),this.container.getProvider(t).clearInstance(e)},H.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){V.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},H.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},H.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw U.create("app-deleted",{appName:this.name_})},H);function H(t,e,r){var o,s,a=this;this.firebase_=r,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=function(t){return i(void 0,t)}(t),this.container=new A(e.name),this._addComponent(new _("app",(function(){return a}),"PUBLIC"));try{for(var u=n(this.firebase_.INTERNAL.components.values()),c=u.next();!c.done;c=u.next())this._addComponent(c.value)}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}}W.prototype.name&&W.prototype.options||W.prototype.delete||console.log("dc");var z=function t(){var r=function(t){var e={},r=new Map,o={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var i=r;void 0===i.name&&(i.name=q);var s=i.name;if("string"!=typeof s||!s)throw U.create("bad-app-name",{appName:String(s)});if(m(e,s))throw U.create("duplicate-app",{appName:s});var a=new t(n,i,o);return e[s]=a},app:s,registerVersion:function(t,e,n){var r,i=null!==(r=B[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void V.warn(u.join(" "))}a(new _(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},apps:null,SDK_VERSION:"7.8.0",INTERNAL:{registerComponent:a,removeApp:function(t){delete e[t]},components:r,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function s(t){if(!m(e,t=t||q))throw U.create("no-app",{appName:t});return e[t]}function a(a){var u,c,l=a.name;if(r.has(l))return V.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?o[l]:null;if(r.set(l,a),"PUBLIC"===a.type){var h=function(t){if(void 0===t&&(t=s()),"function"!=typeof t[l])throw U.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&i(h,a.serviceProps),o[l]=h,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,l).apply(this,a.multipleInstances?t:[])}}try{for(var p=n(Object.keys(e)),f=p.next();!f.done;f=p.next())e[f.value]._addComponent(a)}catch(c){u={error:c}}finally{try{f&&!f.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?o[l]:null}return o.default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),s.App=t,o}(W);return r.INTERNAL=e(e({},r.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){i(r,t)},createSubscribe:v,ErrorFactory:f,deepExtend:i}),r}(),G=(K.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e;return"VERSION"===(null===(e=t.getComponent())||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},K);function K(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Q=self.firebase.SDK_VERSION;Q&&0<=Q.indexOf("LITE")&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Y=z.initializeApp;z.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&V.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Y.apply(void 0,t)};var X,$=z;return(X=$).INTERNAL.registerComponent(new _("platform-logger",(function(t){return new G(t)}),"PRIVATE")),X.registerVersion(j,"0.5.3",void 0),X.registerVersion("fire-js",""),$.registerVersion("firebase","7.8.0","app"),$}))}function fireb_auth(){var t,e;t=this,e=function(e){"use strict";try{(function(){e=e&&e.hasOwnProperty("default")?e.default:e,(function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.La(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).La(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}for(var s=[],a=0;s.push(void 0),a++,o(r.value).La(i(s.length-1),e),!(r=n.next()).done;);}))},e}));var o=o||{},s=this||self;function a(t){return"string"==typeof t}function u(t){return"boolean"==typeof t}var c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(){}function p(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return null===t}function d(t){return"array"==p(t)}function y(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function m(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function I(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,(t.prototype.constructor=t).gd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function A(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function N(t,e){throw new A("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function R(){this.b=this.a=null}I(k,Error),k.prototype.name="CustomError",I(A,k),A.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var P=new x((function(){return new O}),(function(t){t.reset()}));function O(){this.next=this.b=this.a=null}function L(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}R.prototype.add=function(t,e){var n=P.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},O.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},O.prototype.reset=function(){this.next=this.b=this.a=null};var M=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},F=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},U=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=a(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},j=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function q(t,e){return 0<=M(t,e)}function B(t,e){var n;return(n=0<=(e=M(t,e)))&&Array.prototype.splice.call(t,e,1),n}function V(t,e){!function(t,e){for(var n=a(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function W(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function z(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function G(t){for(var e in t)return!1;return!0}function K(t){var e,n={};for(e in t)n[e]=t[e];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function X(t,e){this.a=t===Z&&e||"",this.b=J}function $(t){return t instanceof X&&t.constructor===X&&t.b===J?t.a:(N("expected object of type Const, got '"+t+"'"),"type_error:Const")}X.prototype.qa=!0,X.prototype.pa=function(){return this.a},X.prototype.toString=function(){return"Const{"+this.a+"}"};var J={},Z={},tt=new X(Z,"");function et(){this.a="",this.b=st}function nt(t){return t instanceof et&&t.constructor===et&&t.b===st?t.a:(N("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function rt(t,e){var n=$(t);if(!ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return at(t=n.replace(it,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof X?$(t):encodeURIComponent(String(t))})))}et.prototype.qa=!0,et.prototype.pa=function(){return this.a.toString()},et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var it=/%{(\w+)}/g,ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,st={};function at(t){var e=new et;return e.a=t,e}var ut=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ct=/&/g,lt=/</g,ht=/>/g,pt=/"/g,ft=/'/g,dt=/\x00/g,yt=/[\x00&<>"']/;function mt(t,e){return-1!=t.indexOf(e)}function vt(t,e){return t<e?-1:e<t?1:0}function gt(){this.a="",this.b=Tt}function bt(t){return t instanceof gt&&t.constructor===gt&&t.b===Tt?t.a:(N("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}gt.prototype.qa=!0,gt.prototype.pa=function(){return this.a.toString()},gt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var wt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function _t(t){return t instanceof gt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),wt.test(t)||(t="about:invalid#zClosurez"),St(t))}var Et,Tt={};function St(t){var e=new gt;return e.a=t,e}St("about:blank");t:{var It=s.navigator;if(It){var Ct=It.userAgent;if(Ct){Et=Ct;break t}}Et=""}function kt(t){return mt(Et,t)}function At(){this.a="",this.b=xt}function Nt(t){return t instanceof At&&t.constructor===At&&t.b===xt?t.a:(N("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}At.prototype.qa=!0,At.prototype.pa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xt={};function Dt(t){var e=new At;return e.a=t,e}Dt("<!DOCTYPE html>");var Rt,Pt,Ot=Dt("");function Lt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Mt(t){return yt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ct,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(lt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ht,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(pt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ft,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(dt,"&#0;"))),t}function Ft(t){s.setTimeout((function(){throw t}),0)}function Ut(t,e){Pt||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);Pt=function(){t.then(Bt)}}else Pt=function(){var t=Bt;!m(s.setImmediate)||s.Window&&s.Window.prototype&&!kt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(Rt=Rt||function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!kt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=at($(tt));L(t,"HTMLIFrameElement"),t.src=nt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Nt(Ot)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||kt("Trident")||kt("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){s.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}())(t):s.setImmediate(t)}}(),jt||(Pt(),jt=!0),qt.add(t,e)}Dt("<br>");var jt=!1,qt=new R;function Bt(){for(var t;n=e=void 0,n=null,(e=qt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Ft(t)}D(P,t)}var e,n;jt=!1}function Vt(t,e){if(this.a=Wt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){ee(n,Ht,t)}),(function(t){if(!(t instanceof ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ee(n,zt,t)}))}catch(t){ee(this,zt,t)}}var Wt=0,Ht=2,zt=3;function Gt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Gt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Kt=new x((function(){return new Gt}),(function(t){t.reset()}));function Qt(t,e,n){var r=Kt.get();return r.g=t,r.b=e,r.f=n,r}function Yt(t){if(t instanceof Vt)return t;var e=new Vt(h);return ee(e,Ht,t),e}function Xt(t){return new Vt((function(e,n){n(t)}))}function $t(t,e,n){ne(t,e,n,null)||Ut(T(e,t))}function Jt(t){return new Vt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)$t(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Zt(t,e){t.b||t.a!=Ht&&t.a!=zt||re(t),t.f?t.f.next=e:t.b=e,t.f=e}function te(t,e,n,r){var i=Qt(null,null,null);return i.a=new Vt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ue?o(e):t(i)}catch(e){o(e)}}:o})),Zt(i.a.c=t,i),i.a}function ee(t,e,n){t.a==Wt&&(t===n&&(e=zt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ne(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,re(t),e!=zt||n instanceof ue||function(t,e){t.g=!0,Ut((function(){t.g&&ae.call(null,e)}))}(t,n)))}function ne(t,e,n,r){if(t instanceof Vt)return Zt(t,Qt(e||h,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(m(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function re(t){t.h||(t.h=!0,Ut(t.Zb,t))}function ie(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function oe(t,e,n,r){if(n==zt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,se(e,n,r);else try{e.c?e.g.call(e.f):se(e,n,r)}catch(t){ae.call(null,t)}D(Kt,e)}function se(t,e,n){e==Ht?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Vt.prototype.then=function(t,e,n){return te(this,m(t)?t:null,m(e)?e:null,n)},Vt.prototype.$goog_Thenable=!0,(t=Vt.prototype).ka=function(t,e){return(t=Qt(t,t,e)).c=!0,Zt(this,t),this},t.s=function(t,e){return te(this,null,t,e)},t.cancel=function(t){this.a==Wt&&Ut((function(){!function t(e,n){if(e.a==Wt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Wt&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ie(r),oe(r,o,zt,n)))}e.c=null}else ee(e,zt,n)}(this,new ue(t))}),this)},t.Oc=function(t){this.a=Wt,ee(this,Ht,t)},t.Pc=function(t){this.a=Wt,ee(this,zt,t)},t.Zb=function(){for(var t;t=ie(this);)oe(this,t,this.a,this.i);this.h=!1};var ae=Ft;function ue(t){k.call(this,t)}function ce(){this.va=this.va,this.la=this.la}function le(t){!t.va&&(t.va=!0,t.za(),0)&&(t[g]||(t[g]=++b))}function he(t){return he[" "](t),t}I(ue,k),ce.prototype.va=!(ue.prototype.name="cancel"),ce.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},he[" "]=h;var pe,fe,de=kt("Opera"),ye=kt("Trident")||kt("MSIE"),me=kt("Edge"),ve=me||ye,ge=kt("Gecko")&&!(mt(Et.toLowerCase(),"webkit")&&!kt("Edge"))&&!(kt("Trident")||kt("MSIE"))&&!kt("Edge"),be=mt(Et.toLowerCase(),"webkit")&&!kt("Edge");function we(){var t=s.document;return t?t.documentMode:void 0}t:{var _e="",Ee=(fe=Et,ge?/rv:([^\);]+)(\)|;)/.exec(fe):me?/Edge\/([\d\.]+)/.exec(fe):ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(fe):be?/WebKit\/(\S+)/.exec(fe):de?/(?:Version)[ \/]?(\S+)/.exec(fe):void 0);if(Ee&&(_e=Ee?Ee[1]:""),ye){var Te=we();if(null!=Te&&Te>parseFloat(_e)){pe=String(Te);break t}}pe=_e}var Se,Ie={};function Ce(t){return function(e,n){var r=Ie;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=ut(String(pe)).split("."),r=ut(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=vt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||vt(0==s[2].length,0==a[2].length)||vt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}()}(t)}Se=s.document&&ye?we():void 0;var ke=Object.freeze||function(t){return t},Ae=!ye||9<=Number(Se),Ne=ye&&!Ce("9"),xe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function De(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Re(t,e){if(De.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ge){t:{try{he(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:Pe[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}De.prototype.preventDefault=function(){this.Mb=!1},I(Re,De);var Pe=ke({2:"touch",3:"pen",4:"mouse"});Re.prototype.preventDefault=function(){Re.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ne)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Re.prototype.f=function(){return this.a};var Oe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Me(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Le,this.ta=this.Ka=!1}function Fe(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function Ue(t){this.src=t,this.a={},this.b=0}function je(t,e){var n=e.type;n in t.a&&B(t.a[n],e)&&(Fe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}Ue.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=qe(t,e,r,i);return-1<s?(e=t[s],n||(e.Ka=!1)):((e=new Me(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var Be="closure_lm_"+(1e6*Math.random()|0),Ve={};function We(t,e,n,r,i){if(r&&r.once)ze(t,e,n,r,i);else if(d(e))for(var o=0;o<e.length;o++)We(t,e[o],n,r,i);else n=tn(n),t&&t[Oe]?nn(t,e,n,v(r)?!!r.capture:!!r,i):He(t,e,n,!1,r,i)}function He(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=Je(t);if(a||(t[Be]=a=new Ue(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=$e,e=Ae?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)xe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ze(t,e,n,r,i){if(d(e))for(var o=0;o<e.length;o++)ze(t,e[o],n,r,i);else n=tn(n),t&&t[Oe]?rn(t,e,n,v(r)?!!r.capture:!!r,i):He(t,e,n,!0,r,i)}function Ge(t,e,n,r,i){if(d(e))for(var o=0;o<e.length;o++)Ge(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=tn(n),t&&t[Oe]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=qe(o=t.a[e],n,r,i))&&(Fe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&Je(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,n,r,i)),(n=-1<t?e[t]:null)&&Ke(n))}function Ke(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Oe])je(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Je(e))?(je(n,t),0==n.b&&(n.src=null,e[Be]=null)):Fe(t)}}}function Qe(t){return t in Ve?Ve[t]:Ve[t]="on"+t}function Ye(t,e,n,r){var i=!0;if((t=Je(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=Xe(o,r),i=i&&!1!==o)}return i}function Xe(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Ke(t),n.call(r,e)}function $e(t,e){if(t.ta)return!0;if(Ae)return Xe(t,new Re(e,this));if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Re(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Ye(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Ye(r[i],t,!1,e),n=n&&o}return n}function Je(t){return(t=t[Be])instanceof Ue?t:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(t){return m(t)?t:(t[Ze]||(t[Ze]=function(e){return t.handleEvent(e)}),t[Ze])}function en(){ce.call(this),this.u=new Ue(this),(this.Sb=this).Xa=null}function nn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function rn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function on(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ta&&s.capture==n){var a=s.listener,u=s.Pa||s.src;s.Ka&&je(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Mb}function sn(t,e,n){if(m(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function an(t){var e=null;return new Vt((function(n,r){-1==(e=sn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw s.clearTimeout(e),t}))}function un(t){if(t.U&&"function"==typeof t.U)return t.U();if(a(t))return t.split("");if(y(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function cn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(y(t)||a(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function ln(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ln)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function hn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)pn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}I(en,ce),en.prototype[Oe]=!0,en.prototype.addEventListener=function(t,e,n,r){We(this,t,e,n,r)},en.prototype.removeEventListener=function(t,e,n,r){Ge(this,t,e,n,r)},en.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(a(t))t=new De(t,n);else if(t instanceof De)t.target=t.target||n;else{var i=t;Y(t=new De(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=on(s,r,!0,t)&&i}if(i=on(s=t.b=n,r,!0,t)&&i,i=on(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=on(s=t.b=e[o],r,!1,t)&&i;return i},en.prototype.za=function(){if(en.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Fe(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=ln.prototype).U=function(){hn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return hn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return pn(this.b,t)?this.b[t]:e},t.set=function(t,e){pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var fn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof dn?(this.h=void 0!==e?e:t.h,yn(this,t.f),this.i=t.i,this.b=t.b,mn(this,t.l),this.c=t.c,vn(this,Mn(t.a)),this.g=t.g):t&&(n=String(t).match(fn))?(this.h=!!e,yn(this,n[1]||"",!0),this.i=En(n[2]||""),this.b=En(n[3]||"",!0),mn(this,n[4]),this.c=En(n[5]||"",!0),vn(this,n[6]||"",!0),this.g=En(n[7]||"")):(this.h=!!e,this.a=new xn(null,this.h))}function yn(t,e,n){t.f=n?En(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function mn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function vn(t,e,n){e instanceof xn?(t.a=e,function(t,e){e&&!t.f&&(Dn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Pn(this,e),Ln(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Tn(e,An)),t.a=new xn(e,t.h))}function gn(t,e,n){t.a.set(e,n)}function bn(t,e){return t.a.get(e)}function wn(t){return t instanceof dn?new dn(t):new dn(t,void 0)}function _n(t,e){var n=new dn(null,void 0);return yn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function En(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Tn(t,e,n){return a(t)?(t=encodeURI(t).replace(e,Sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}dn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Tn(e,In,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Tn(e,In,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Tn(n,"/"==n.charAt(0)?kn:Cn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Tn(n,Nn)),t.join("")},dn.prototype.resolve=function(t){var e=new dn(this),n=!!t.f;n?yn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)mn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(mt(i,"./")||mt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?vn(e,Mn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var In=/[#\/\?@]/g,Cn=/[#\?:]/g,kn=/[#\?]/g,An=/[#\?@]/g,Nn=/#/g;function xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Dn(t){t.a||(t.a=new ln,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Rn(t){var e=cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new xn(null,void 0);t=un(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];d(o)?Ln(n,i,o):n.add(i,o)}return n}function Pn(t,e){Dn(t),e=Fn(t,e),pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&hn(t)))}function On(t,e){return Dn(t),e=Fn(t,e),pn(t.a.b,e)}function Ln(t,e,n){Pn(t,e),0<n.length&&(t.c=null,t.a.set(Fn(t,e),H(n)),t.b+=n.length)}function Mn(t){var e=new xn;return e.c=t.c,t.a&&(e.a=new ln(t.a),e.b=t.b),e}function Fn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=xn.prototype).add=function(t,e){Dn(this),this.c=null,t=Fn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Dn(this),this.a.forEach((function(n,r){F(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){Dn(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){Dn(this);var e=[];if(a(t))On(this,t)&&(e=W(e,this.a.get(Fn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return Dn(this),this.c=null,On(this,t=Fn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Un=!ye||9<=Number(Se);function jn(t){var e=document;return a(t)?e.getElementById(t):t}function qn(t,e){z(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Bn.hasOwnProperty(n)?t.setAttribute(Bn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Bn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Vn(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(m(t))return"function"==typeof t.item}return!1}function Wn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(d(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Kn(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Kn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Hn,t,e),e.join("")}function Hn(){}var zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Gn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Kn(t,e){e.push('"',t.replace(Gn,(function(t){var e=zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),zn[t]=e),e})),'"')}function Qn(){var t=pr();return ye&&!!Se&&11==Se||/Edge\/\d+/.test(t)}function Yn(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function Xn(t,e){e=e||s.window;var n="about:blank";t&&(n=bt(_t(t)).toString()),e.location.href=n}function $n(t){return!!((t=(t||pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function Jn(t){t=t||s.window;try{t.close()}catch(t){}}function Zn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=pr().toLowerCase(),r&&(e.target=r,mt(n,"crios/")&&(e.target="_blank")),cr(pr())==ur&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof gt?n:_t(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((kt("iPhone")&&!kt("iPod")&&!kt("iPad")||kt("iPad")||kt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(L(s=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof gt||e instanceof gt||(e="object"==typeof e&&e.qa?e.pa():String(e),wt.test(e)||(e="about:invalid#zClosurez"),e=St(e)),s.href=bt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=bt(e).toString(),s&&(ve&&mt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Dt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Mt(t)+'">'),s.document.write(Nt(t)),s.document.close())):(s=r.open(bt(e).toString(),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,er=/^[^@]+@[^@]+$/;function nr(){var t=null;return new Vt((function(e){"complete"==s.document.readyState?e():(t=function(){e()},ze(window,"load",t))})).s((function(e){throw Ge(window,"load",t),e}))}function rr(t){return t=t||pr(),!("file:"!==vr()&&"ionic:"!==vr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ir(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function or(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function sr(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":or()?"Worker":"Browser"}function ar(){var t=sr();return"ReactNative"===t||"Node"===t}var ur="Firefox";function cr(t){var e=t.toLowerCase();return mt(e,"opera/")||mt(e,"opr/")||mt(e,"opios/")?"Opera":mt(e,"iemobile")?"IEMobile":mt(e,"msie")||mt(e,"trident/")?"IE":mt(e,"edge/")?"Edge":mt(e,"firefox/")?ur:mt(e,"silk/")?"Silk":mt(e,"blackberry")?"Blackberry":mt(e,"webos")?"Webos":!mt(e,"safari/")||mt(e,"chrome/")||mt(e,"crios/")||mt(e,"android")?!mt(e,"chrome/")&&!mt(e,"crios/")||mt(e,"edge/")?mt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var lr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function hr(t,e){e=e||[];var n,r=[],i={};for(n in lr)i[lr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=sr())?r=cr(i=pr()):"Worker"===r&&(r=cr(i=pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function pr(){return s.navigator&&s.navigator.userAgent||""}function fr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function dr(){try{var t=s.localStorage,e=Er();if(t)return t.setItem(e,"1"),t.removeItem(e),!Qn()||!!s.indexedDB}catch(t){return or()&&!!s.indexedDB}return!1}function yr(){return(mr()||"chrome-extension:"===vr()||rr())&&!ar()&&dr()&&!or()}function mr(){return"http:"===vr()||"https:"===vr()}function vr(){return s.location&&s.location.protocol||null}function gr(t){return!$n(t=t||pr())&&cr(t)!=ur}function br(t){return void 0===t?null:Wn(t)}function wr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function _r(t){if(null!==t)return JSON.parse(t)}function Er(t){return t||Math.floor(1e9*Math.random()).toString()}function Tr(t){return"Safari"!=cr(t=t||pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Sr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ir(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=pr(),e=sr(),this.b=$n(t)||"ReactNative"===e}function Cr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Ar(){return!(!fr("fireauth.oauthhelper",s)&&!fr("fireauth.iframe",s))}Ir.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!mr()&&"chrome-extension:"!==vr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Nr,xr={};function Dr(t){xr[t]||(xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Rr={};Object.defineProperty(Rr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Rr,"abcd",{configurable:!0,enumerable:!0,value:2}),Nr=2==Rr.abcd}catch(t){Nr=!1}function Pr(t,e,n){Nr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Or(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Pr(t,n,e[n])}function Lr(t){var e={};return Or(e,t),e}function Mr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Pr(e,n,Mr(t[n]));return e}function Fr(t){var e={},n=t[jr],r=t[qr];if(!(t=t[Br])||t!=Ur&&!n)throw Error("Invalid provider user info!");e[Wr]=r||null,e[Vr]=n||null,Pr(this,zr,t),Pr(this,Hr,Mr(e))}var Ur="EMAIL_SIGNIN",jr="email",qr="newEmail",Br="requestType",Vr="email",Wr="fromEmail",Hr="data",zr="operation";function Gr(t,e){this.code=Qr+t,this.message=e||Yr[t]||""}function Kr(t){var e=t&&t.code;return e?new Gr(e.substring(Qr.length),t.message):null}I(Gr,Error),Gr.prototype.A=function(){return{code:this.code,message:this.message}},Gr.prototype.toJSON=function(){return this.A()};var Qr="auth/",Yr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Xr(t){var e=bn(t=wn(t),$r)||null,n=bn(t,Jr)||null,r=bn(t,ei)||null;if(r=r&&ri[r]||null,!e||!n||!r)throw new Gr("argument-error",$r+", "+Jr+"and "+ei+" are required in a valid action code URL.");Or(this,{apiKey:e,operation:r,code:n,continueUrl:bn(t,Zr)||null,languageCode:bn(t,ti)||null,tenantId:bn(t,ni)||null})}var $r="apiKey",Jr="oobCode",Zr="continueUrl",ti="languageCode",ei="mode",ni="tenantId",ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Ur,verifyEmail:"VERIFY_EMAIL"};function ii(t){try{return new Xr(t)}catch(t){return null}}function oi(t){var e=t[li];if(void 0===e)throw new Gr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Gr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[si];if(n&&"object"==typeof n){e=n[fi];var r=n[hi];if(n=n[pi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Gr("argument-error",hi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Gr("argument-error",pi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Gr("argument-error",fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Gr("missing-android-pkg-name")}}else if(void 0!==n)throw new Gr("argument-error",si+" property must be a non null object when specified.");if(this.f=null,(e=t[ci])&&"object"==typeof e){if("string"==typeof(e=e[di])&&e.length)this.f=e;else if(void 0!==e)throw new Gr("argument-error",di+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Gr("argument-error",ci+" property must be a non null object when specified.");if(void 0!==(e=t[ui])&&"boolean"!=typeof e)throw new Gr("argument-error",ui+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[ai])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Gr("argument-error",ai+" property must be a non empty string when specified.");this.i=t||null}var si="android",ai="dynamicLinkDomain",ui="handleCodeInApp",ci="iOS",li="url",hi="installApp",pi="minimumVersion",fi="packageName",di="bundleId";function yi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var mi=null,vi=null;function gi(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function bi(t){return(t=wi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new gi(t):null}function wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!mi){mi={},vi={};for(var t=0;t<65;t++)mi[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(vi[mi[t]]=t)&&(vi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}gi.prototype.R=function(){return this.c},gi.prototype.g=function(){return this.b};var _i,Ei={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ti(t){for(var e in Ei)if(Ei[e].id===t)return{firebaseEndpoint:(t=Ei[e]).cb,secureTokenEndpoint:t.ib};return null}_i=Ti("__EID__")?"__EID__":void 0;var Si="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ii=["client_id","response_type","scope","redirect_uri","state"],Ci={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Ii},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Ii},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Ii},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Si},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function ki(t){for(var e in Ci)if(Ci[e].Fa==t)return Ci[e];return null}function Ai(t){var e={};e["facebook.com"]=Pi,e["google.com"]=Li,e["github.com"]=Oi,e["twitter.com"]=Mi;var n=t&&t[xi];try{if(n)return e[n]?new e[n](t):new Ri(t);if(void 0!==t[Ni])return new Di(t)}catch(t){}return null}var Ni="idToken",xi="providerId";function Di(t){var e=t[xi];if(!e&&t[Ni]){var n=bi(t[Ni]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Pr(this,"providerId",e),Pr(this,"isNewUser",n)}function Ri(t){Di.call(this,t),Pr(this,"profile",Mr((t=_r(t.rawUserInfo||"{}"))||{}))}function Pi(t){if(Ri.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Oi(t){if(Ri.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Pr(this,"username",this.profile&&this.profile.login||null)}function Li(t){if(Ri.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Mi(t){if(Ri.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Pr(this,"username",t.screenName||null)}function Fi(t){var e=wn(t),n=bn(e,"link"),r=bn(wn(n),"link");return bn(wn(e=bn(e,"deep_link_id")),"link")||e||r||n||t}function Ui(){}function ji(t,e){return t.then((function(t){if(t[Cs]){var n=bi(t[Cs]);if(!n||e!=n.f)throw new Gr("user-mismatch");return t}throw new Gr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==Qr+"user-not-found"?new Gr("user-mismatch"):t}))}function qi(t,e){if(!e)throw new Gr("internal-error","failed to construct a credential");this.a=e,Pr(this,"providerId",t),Pr(this,"signInMethod",t)}function Bi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Vi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new qi(t.providerId,t.pendingToken)}catch(t){}return null}function Wi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Pr(this,"idToken",e.idToken),e.accessToken&&Pr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Pr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Gr("internal-error","failed to construct a credential");Pr(this,"accessToken",e.oauthToken),Pr(this,"secret",e.oauthTokenSecret)}Pr(this,"providerId",t),Pr(this,"signInMethod",n)}function Hi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Rn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function zi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Wi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function Gi(t,e){this.Fc=e||[],Or(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(ki(t)||{}).Ea||null,this.bb=null}function Ki(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Gr("argument-error",'SAML provider IDs must be prefixed with "saml."');Gi.call(this,t,[])}function Qi(t){Gi.call(this,t,Ii),this.a=[]}function Yi(){Qi.call(this,"facebook.com")}function Xi(t){if(!t)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Yi).credential({accessToken:e})}function $i(){Qi.call(this,"github.com")}function Ji(t){if(!t)throw new Gr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new $i).credential({accessToken:e})}function Zi(){Qi.call(this,"google.com"),this.ya("profile")}function to(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Zi).credential({idToken:n,accessToken:e})}function eo(){Gi.call(this,"twitter.com",Si)}function no(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Gr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Wi("twitter.com",n,"twitter.com")}function ro(t,e,n){this.a=t,this.c=e,Pr(this,"providerId","password"),Pr(this,"signInMethod",n===oo.EMAIL_LINK_SIGN_IN_METHOD?oo.EMAIL_LINK_SIGN_IN_METHOD:oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function io(t){return t&&t.email&&t.password?new ro(t.email,t.password,t.signInMethod):null}function oo(){Or(this,{providerId:"password",isOAuthProvider:!1})}function so(t,e){if(!(e=ao(e)))throw new Gr("argument-error","Invalid email link!");return new ro(t,e.code,oo.EMAIL_LINK_SIGN_IN_METHOD)}function ao(t){return(t=ii(t=Fi(t)))&&t.operation===Ur?t:null}function uo(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new Gr("internal-error");this.a=t,Pr(this,"providerId","phone"),Pr(this,"signInMethod","phone")}function co(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return F(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new uo(e)}return null}function lo(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function ho(t){try{this.a=t||e.auth()}catch(t){throw new Gr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Or(this,{providerId:"phone",isOAuthProvider:!1})}function po(t,e){if(!t)throw new Gr("missing-verification-id");if(!e)throw new Gr("missing-verification-code");return new uo({Va:t,Ua:e})}function fo(t){if(t.temporaryProof&&t.phoneNumber)return new uo({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return to(o,n);case"facebook.com":return Xi(n);case"github.com":return Ji(n);case"twitter.com":return no(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new qi(e,s):new Wi(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Qi(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function yo(t){if(!t.isOAuthProvider)throw new Gr("invalid-oauth-provider")}function mo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new Gr("invalid-auth-event");if(this.g&&this.a)throw new Gr("invalid-auth-event");if(this.g&&!this.f)throw new Gr("invalid-auth-event")}function vo(t){return(t=t||{}).type?new mo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Kr(t.error),t.postBody,t.tenantId):null}function go(){this.b=null,this.a=[]}I(Ri,Di),I(Pi,Ri),I(Oi,Ri),I(Li,Ri),I(Mi,Ri),qi.prototype.na=function(t){return Hs(t,Bi(this))},qi.prototype.b=function(t,e){var n=Bi(this);return n.idToken=e,zs(t,n)},qi.prototype.f=function(t,e){return ji(Gs(t,Bi(this)),e)},qi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Wi.prototype.na=function(t){return Hs(t,Hi(this))},Wi.prototype.b=function(t,e){var n=Hi(this);return n.idToken=e,zs(t,n)},Wi.prototype.f=function(t,e){return ji(Gs(t,Hi(this)),e)},Wi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Gi.prototype.Ga=function(t){return this.zb=K(t),this},I(Ki,Gi),I(Qi,Gi),Qi.prototype.ya=function(t){return q(this.a,t)||this.a.push(t),this},Qi.prototype.Hb=function(){return H(this.a)},Qi.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Gr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Wi(this.providerId,n,this.providerId)},I(Yi,Qi),Pr(Yi,"PROVIDER_ID","facebook.com"),Pr(Yi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I($i,Qi),Pr($i,"PROVIDER_ID","github.com"),Pr($i,"GITHUB_SIGN_IN_METHOD","github.com"),I(Zi,Qi),Pr(Zi,"PROVIDER_ID","google.com"),Pr(Zi,"GOOGLE_SIGN_IN_METHOD","google.com"),I(eo,Gi),Pr(eo,"PROVIDER_ID","twitter.com"),Pr(eo,"TWITTER_SIGN_IN_METHOD","twitter.com"),ro.prototype.na=function(t){return this.signInMethod==oo.EMAIL_LINK_SIGN_IN_METHOD?_a(t,ta,{email:this.a,oobCode:this.c}):_a(t,va,{email:this.a,password:this.c})},ro.prototype.b=function(t,e){return this.signInMethod==oo.EMAIL_LINK_SIGN_IN_METHOD?_a(t,ea,{idToken:e,email:this.a,oobCode:this.c}):_a(t,ha,{idToken:e,email:this.a,password:this.c})},ro.prototype.f=function(t,e){return ji(this.na(t),e)},ro.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Or(oo,{PROVIDER_ID:"password"}),Or(oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Or(oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),uo.prototype.na=function(t){return t.Wa(lo(this))},uo.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,_a(t,ba,n)},uo.prototype.f=function(t,e){var n=lo(this);return n.operation="REAUTH",ji(t=_a(t,wa,n),e)},uo.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},ho.prototype.Wa=function(t,e){var n=this.a.b;return Yt(e.verify()).then((function(r){if(!a(r))throw new Gr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return _a(t,ca,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new Gr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Or(ho,{PROVIDER_ID:"phone"}),Or(ho,{PHONE_SIGN_IN_METHOD:"phone"}),mo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},mo.prototype.R=function(){return this.h},mo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var bo,wo=null;function _o(t){var e="unauthorized-domain",n=void 0,r=wn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Lt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Lt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Gr.call(this,e,n)}function Eo(t,e,n){Gr.call(this,t,n),(t=e||{}).Ab&&Pr(this,"email",t.Ab),t.ba&&Pr(this,"phoneNumber",t.ba),t.credential&&Pr(this,"credential",t.credential),t.Qb&&Pr(this,"tenantId",t.Qb)}function To(t){if(t.code){var e=t.code||"";0==e.indexOf(Qr)&&(e=e.substring(Qr.length));var n={credential:fo(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Gr(e,t.message||void 0);return new Eo(e,n,t.message)}return null}function So(){}function Io(){}function Co(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function ko(){}function Ao(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function No(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function xo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Do(t){this.f=t,this.b=this.c=this.a=null}function Ro(t,e){this.name=t,this.value=e}I(_o,Gr),I(Eo,Gr),Eo.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Y(t,e),t},Eo.prototype.toJSON=function(){return this.A()},So.prototype.c=null,I(Io,So),Io.prototype.a=function(){var t=Co(this);return t?new ActiveXObject(t):new XMLHttpRequest},Io.prototype.b=function(){var t={};return Co(this)&&(t[0]=!0,t[1]=!0),t},bo=new Io,I(ko,So),ko.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ao;throw Error("Unsupported browser")},ko.prototype.b=function(){return{}},(t=Ao.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,No(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",No(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,No(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},xo.prototype.a=null,xo.prototype.reset=function(t,e,n,r,i){delete this.a},Ro.prototype.toString=function(){return this.name};var Po=new Ro("SEVERE",1e3),Oo=new Ro("WARNING",900),Lo=new Ro("CONFIG",700),Mo=new Ro("FINE",500);Do.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(N("Root logger has no level set."),null)}(this).value)for(m(e)&&(e=e()),t=new xo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Fo,Uo={},jo=null;function qo(t){var e;if(jo||(jo=new Do(""),(Uo[""]=jo).c=Lo),!(e=Uo[t])){e=new Do(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=qo(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,Uo[t]=e}return e}function Bo(t,e){t&&t.log(Mo,e,void 0)}function Vo(t){this.f=t}function Wo(t){en.call(this),this.o=t,this.readyState=Ho,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=qo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}I(Vo,So),Vo.prototype.a=function(){return new Wo(this.f)},Vo.prototype.b=(Fo={},function(){return Fo}),I(Wo,en);var Ho=0;function zo(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function Go(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Ko(t)}function Ko(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Qo(t){en.call(this),this.headers=new ln,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Yo,this.v=this.P=!1}(t=Wo.prototype).open=function(t,e){if(this.readyState!=Ho)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Ko(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Go(this,!1)),this.readyState=Ho},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Ko(this)),this.a&&(this.readyState=3,Ko(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,zo(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Go(this,!0):Ko(this),3==this.readyState&&zo(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,Go(this,!0))},t.hc=function(t){this.a&&(this.response=t,Go(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log(Oo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Go(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Oo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Oo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},I(Qo,en);var Yo="";Qo.prototype.b=qo("goog.net.XhrIo");var Xo=/^https?$/i,$o=["POST","PUT"];function Jo(t){return"content-type"==t.toLowerCase()}function Zo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ts(t),ns(t)}function ts(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function es(t){if(t.c&&void 0!==o)if(t.w[1]&&4==is(t)&&2==os(t))Bo(t.b,ss(t,"Local request error detected and ignored"));else if(t.i&&4==is(t))sn(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==is(t)){Bo(t.b,ss(t,"Request complete")),t.c=!1;try{var e,n=os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(fn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Xo.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<is(t)?t.a.statusText:""}catch(e){Bo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+os(t)+"]",ts(t)}}finally{ns(t)}}}function ns(t,e){if(t.a){rs(t);var n=t.a,r=t.w[0]?h:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Po,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function rs(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(s.clearTimeout(t.o),t.o=null)}function is(t){return t.a?t.a.readyState:0}function os(t){try{return 2<is(t)?t.a.status:-1}catch(t){return-1}}function ss(t,e){return e+" ["+t.O+" "+t.l+" "+os(t)+"]"}function as(t){var e=gs;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function us(t,e,n){t.a=!0,t.c=n,t.f=!e,ps(t)}function cs(t){if(t.a){if(!t.u)throw new fs(t);t.u=!1}}function ls(t,e,n,r){t.g.push([e,n,r]),t.a&&ps(t)}function hs(t){return j(t.g,(function(t){return m(t[1])}))}function ps(t){if(t.h&&t.a&&hs(t)){var e=t.h,n=ms[e];n&&(s.clearTimeout(n.a),delete ms[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(C(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,hs(t)||(n=!0)}}t.c=e,r&&(u=E(t.m,t,!0),r=E(t.m,t,!1),e instanceof as?(ls(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new ys(e),ms[e.a]=e,t.h=e.a)}function fs(){k.call(this)}function ds(){k.call(this)}function ys(t){this.a=s.setTimeout(E(this.c,this),0),this.b=t}(t=Qo.prototype).Ia=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Bo(this.b,ss(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Bo(this.b,ss(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ns(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ns(this,!0)),Qo.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?es(this):this.yc())},t.yc=function(){es(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Yo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Po,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Bo(this.b,"Can not get response: "+t.message),null}},as.prototype.cancel=function(t){if(this.a)this.c instanceof as&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new ds(this),cs(this),us(this,!1,t))}},as.prototype.m=function(t,e){this.i=!1,us(this,t,e)},as.prototype.then=function(t,e,n){var r,i,o=new Vt((function(t,e){r=t,i=e}));return ls(this,r,(function(t){t instanceof ds?o.cancel():i(t)})),o.then(t,e,n)},as.prototype.$goog_Thenable=!0,I(fs,k),fs.prototype.message="Deferred has already fired",fs.prototype.name="AlreadyCalledError",I(ds,k),ds.prototype.message="Deferred was canceled",ds.prototype.name="CanceledError",ys.prototype.c=function(){throw delete ms[this.a],this.b};var ms={};function vs(t){var e,n=document,r=nt(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new as(o);return e=window.setTimeout((function(){bs(i,!0);var t=new Es(_s,"Timeout reached for loading script "+r);cs(a),us(a,!1,t)}),5e3),o.Ia=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(bs(i,!1,e),cs(a),us(a,!0,null))},i.onerror=function(){bs(i,!0,e);var t=new Es(ws,"Error while loading script "+r);cs(a),us(a,!1,t)},Y(o={},{type:"text/javascript",charset:"UTF-8"}),qn(i,o),function(t,e){L(t,"HTMLScriptElement"),t.src=nt(e),null===l&&(l=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""),(e=l)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function gs(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&bs(t,!0,this.Ia)}}function bs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var ws=0,_s=1;function Es(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Ts(t){this.f=t}function Ss(t,n,r){if(this.c=t,this.l=(t=n||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||ks,this.g=K(t.secureTokenHeaders||As),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||Ns,this.a=K(t.firebaseHeaders||xs),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==sr(),!(r=s.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!or())throw new Gr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=or()?new Vo(self):ar()?new Ts(r):new ko,this.b=null}I(Es,k),I(Ts,So),Ts.prototype.a=function(){return new this.f},Ts.prototype.b=function(){return{}};var Is,Cs="idToken",ks=new Ir(3e4,6e4),As={"Content-Type":"application/x-www-form-urlencoded"},Ns=new Ir(3e4,6e4),xs={"Content-Type":"application/json"};function Ds(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Rs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ps(t,e,n,r,i,o,a){(t=function(){var t=pr();return!((t="Chrome"!=cr(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30||ye&&Se&&!(9<Se))}()||or()?E(t.o,t):(Is=Is||new Vt((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Ls]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ls(t,null,e,void 0)}(vs(rt(Os,{onload:Ls})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)})),E(t.m,t)))(e,n,r,i,o,a)}Ss.prototype.R=function(){return this.b},Ss.prototype.o=function(t,e,n,r,i,o){if(or()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new Gr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Qo(this.f);if(o){u.g=Math.max(0,o);var c=setTimeout((function(){u.dispatchEvent("timeout")}),o)}nn(u,"complete",(function(){c&&clearTimeout(c);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Bo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),rn(u,"ready",(function(){c&&clearTimeout(c),le(this)})),rn(u,"timeout",(function(){c&&clearTimeout(c),le(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():bo.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:bo),t.a.onreadystatechange=E(t.Lb,t);try{Bo(t.b,ss(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return Bo(t.b,ss(t,"Error opening Xhr: "+e.message)),void Zo(t,e)}e=r||"";var o=new ln(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(y(t)||a(t))F(t,e,void 0);else for(var n=cn(t),r=un(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Jo,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:a(t)?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!q($o,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{rs(t),0<t.g&&(t.v=function(t){return ye&&Ce(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Bo(t.b,ss(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ia,t)):t.o=sn(t.Ia,t.g,t)),Bo(t.b,ss(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Bo(t.b,ss(t,"Send error: "+e.message)),Zo(t,e)}}(u,t,n,r,i)};var Os=new X(Z,"https://apis.google.com/js/client.js?onload=%{onload}"),Ls="__fcb"+Math.floor(1e6*Math.random()).toString();function Ms(t){if(!a(t=t.email)||!er.test(t))throw new Gr("invalid-email")}function Fs(t){"email"in t&&Ms(t)}function Us(t){if(!t[Cs])throw new Gr("internal-error")}function js(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Gr("internal-error")}else{if(!t.sessionInfo)throw new Gr("missing-verification-id");if(!t.code)throw new Gr("missing-verification-code")}}Ss.prototype.m=function(t,e,n,r,i){var o=this;Is.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ss.prototype.ob=function(){return _a(this,pa,{})},Ss.prototype.rb=function(t,e){return _a(this,la,{idToken:t,email:e})},Ss.prototype.sb=function(t,e){return _a(this,ha,{idToken:t,password:e})};var qs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Bs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Gr("internal-error")}function Vs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&On(t=new xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Ws(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=To(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=To(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=To(t)):t.errorMessage&&(e=Ea(t.errorMessage)),e)throw e;if(!t[Cs])throw new Gr("internal-error")}function Hs(t,e){return e.returnIdpCredential=!0,_a(t,fa,e)}function zs(t,e){return e.returnIdpCredential=!0,_a(t,ya,e)}function Gs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,_a(t,da,e)}function Ks(t){if(!t.oobCode)throw new Gr("invalid-action-code")}(t=Ss.prototype).tb=function(t,e){var n={idToken:t},r=[];return z(qs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),_a(this,la,n)},t.kb=function(t,e){return Y(t={requestType:"PASSWORD_RESET",email:t},e),_a(this,oa,t)},t.lb=function(t,e){return Y(t={requestType:"EMAIL_SIGNIN",email:t},e),_a(this,ra,t)},t.jb=function(t,e){return Y(t={requestType:"VERIFY_EMAIL",idToken:t},e),_a(this,ia,t)},t.Wa=function(t){return _a(this,ga,t)},t.ab=function(t,e){return _a(this,ua,{oobCode:t,newPassword:e})},t.Ma=function(t){return _a(this,Ys,{oobCode:t})},t.Ya=function(t){return _a(this,Qs,{oobCode:t})};var Qs={endpoint:"setAccountInfo",D:Ks,fa:"email",F:!0},Ys={endpoint:"resetPassword",D:Ks,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Gr("internal-error")},F:!0},Xs={endpoint:"signupNewUser",D:function(t){if(Ms(t),!t.password)throw new Gr("weak-password")},K:Us,T:!0,F:!0},$s={endpoint:"createAuthUri",F:!0},Js={endpoint:"deleteAccount",V:["idToken"]},Zs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!d(t.deleteProvider))throw new Gr("internal-error")}},ta={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ms,K:Us,T:!0,F:!0},ea={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ms,K:Us,T:!0},na={endpoint:"getAccountInfo"},ra={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Gr("internal-error");Ms(t)},fa:"email",F:!0},ia={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Gr("internal-error")},fa:"email",F:!0},oa={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Gr("internal-error");Ms(t)},fa:"email",F:!0},sa={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},aa={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Gr("internal-error")}},ua={endpoint:"resetPassword",D:Ks,fa:"email",F:!0},ca={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},la={endpoint:"setAccountInfo",V:["idToken"],D:Fs,T:!0},ha={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Fs(t),!t.password)throw new Gr("weak-password")},K:Us,T:!0},pa={endpoint:"signupNewUser",K:Us,T:!0,F:!0},fa={endpoint:"verifyAssertion",D:Bs,Ra:Vs,K:Ws,T:!0,F:!0},da={endpoint:"verifyAssertion",D:Bs,Ra:Vs,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Gr("user-not-found");if(t.errorMessage)throw Ea(t.errorMessage);if(!t[Cs])throw new Gr("internal-error")},T:!0,F:!0},ya={endpoint:"verifyAssertion",D:function(t){if(Bs(t),!t.idToken)throw new Gr("internal-error")},Ra:Vs,K:Ws,T:!0},ma={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Gr("invalid-custom-token")},K:Us,T:!0,F:!0},va={endpoint:"verifyPassword",D:function(t){if(Ms(t),!t.password)throw new Gr("wrong-password")},K:Us,T:!0,F:!0},ga={endpoint:"verifyPhoneNumber",D:js,K:Us,F:!0},ba={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Gr("internal-error");js(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",To(t);Us(t)}},wa={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:js,K:Us,F:!0};function _a(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return Xt(new Gr("internal-error"));var r,i=e.Kb||"POST";return Yt(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var s=wn(t.h+e);gn(s,"key",t.c),o&&gn(s,"cb",S().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&gn(s,u,r[u]);return new Vt((function(e,o){Ps(t,s.toString(),(function(t){t?t.error?o(Ta(t,i||{})):e(t):o(new Gr("network-request-failed"))}),n,a?void 0:Wn(wr(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Ra?e.Ra(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new Gr("internal-error");return r[e.fa]}))}function Ea(t){return Ta({error:{errors:[{message:t}],code:400,message:t}})}function Ta(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Gr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Y(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Gr(r[i],e);return!e&&t&&(e=br(t)),new Gr("internal-error",e)}function Sa(t){this.b=t,this.a=null,this.gb=function(t){return(Aa=Aa||new Vt((function(t,e){function n(){Sr(),fr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Sr(),e(Error("Network Error"))},timeout:Ca.get()})}if(fr("gapi.iframes.Iframe"))t();else if(fr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){fr("gapi.load")?n():e(Error("Network Error"))},Yt(vs(r=rt(Ia,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw Aa=null,t}))).then((function(){return new Vt((function(e,n){fr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:fr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ka.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ia=new X(Z,"https://apis.google.com/js/api.js?onload=%{onload}"),Ca=new Ir(3e4,6e4),ka=new Ir(5e3,15e3),Aa=null;function Na(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=_n(this.i,"/__/auth/iframe"),gn(this.a,"apiKey",this.g),gn(this.a,"appName",this.h),this.b=null,this.c=[]}function xa(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Da(t){try{return e.app(t).auth().Ca()}catch(t){return[]}}function Ra(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Pa(t){var e=Yn();return function(t){return _a(t,sa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=wn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(s=0==o.indexOf("chrome-extension://")?wn(o).b==s&&"chrome-extension"==a:("http"==a||"https"==a)&&(tr.test(o)?s==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)))){t=!0;break t}}t=!1}if(!t)throw new _o(Yn())}))}function Oa(t){return t.l||(t.l=nr().then((function(){if(!t.o){var e=t.c,n=t.h,r=Da(t.b),i=new Na(t.u,t.f,t.b);i.f=e,i.b=n,i.c=H(r||[]),t.o=i.toString()}t.i=new Sa(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then((function(){t.a.register("authEvent",e,fr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=vo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Yt(n)}return n.status="ERROR",Yt(n)}))}(t)}))),t.l}function La(t){return t.m||(t.v=t.c?hr(t.c,Da(t.b)):null,t.m=new Ss(t.f,Ti(t.h),t.v)),t.m}function Ma(t,e,n,r,i,o,s,a,u,c,l){return(t=new xa(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=K(u||null),t.f=c,t.nb(l).toString()}function Fa(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Gr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ua(t){this.b=t,this.a={},this.f=E(this.c,this)}Na.prototype.toString=function(){return this.f?gn(this.a,"v",this.f):Pn(this.a.a,"v"),this.b?gn(this.a,"eid",this.b):Pn(this.a.a,"eid"),this.c.length?gn(this.a,"fw",this.c.join(",")):Pn(this.a.a,"fw"),this.a.toString()},xa.prototype.nb=function(t){return this.h=t,this},xa.prototype.toString=function(){var t=_n(this.o,"/__/auth/handler");if(gn(t,"apiKey",this.m),gn(t,"appName",this.c),gn(t,"authType",this.u),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ha()}catch(t){r=null}for(var i in n.bb=r,gn(t,"providerId",this.a.providerId),r=wr((n=this.a).zb))r[i]=r[i].toString();i=n.Fc,r=K(r);for(var o=0;o<i.length;o++){var s=i[o];s in r&&delete r[s]}n.eb&&n.bb&&!r[n.eb]&&(r[n.eb]=n.bb),G(r)||gn(t,"customParameters",br(r))}if("function"==typeof this.a.Hb&&(n=this.a.Hb()).length&&gn(t,"scopes",n.join(",")),this.l?gn(t,"redirectUrl",this.l):Pn(t.a,"redirectUrl"),this.g?gn(t,"eventId",this.g):Pn(t.a,"eventId"),this.i?gn(t,"v",this.i):Pn(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!bn(t,a)&&gn(t,a,this.b[a]);return this.h?gn(t,"tid",this.h):Pn(t.a,"tid"),this.f?gn(t,"eid",this.f):Pn(t.a,"eid"),(a=Da(this.c)).length&&gn(t,"fw",a.join(",")),t.toString()},(t=Ra.prototype).Fb=function(t,e,n){var r=new Gr("popup-closed-by-user"),i=new Gr("web-storage-unsupported"),o=this,s=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return Oa(t).then((function(){return function(t,e){return t.gb.then((function(){return new Vt((function(n){t.a.send(e.type,e,n,fr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&Jn(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new Vt((function(e){return function n(){an(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return an(n).then((function(){e(r)}))}))},t.Ob=function(){var t=pr();return!gr(t)&&!Tr(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,s,a){if(!t)return Xt(new Gr("popup-blocked"));if(s&&!gr())return this.ia().s((function(e){Jn(t),i(e)})),r(),Yt();this.a||(this.a=Pa(La(this)));var u=this;return this.a.then((function(){var e=u.ia().s((function(e){throw Jn(t),i(e),e}));return r(),e})).then((function(){yo(n),s||Xn(Ma(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Eb=function(t,e,n,r){this.a||(this.a=Pa(La(this)));var i=this;return this.a.then((function(){yo(e),Xn(Ma(i.u,i.f,i.b,t,e,Yn(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ia=function(){var t=this;return Oa(this).then((function(){return t.i.gb})).s((function(){throw t.a=null,new Gr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(t){V(this.g,(function(e){return e==t}))},(t=Fa.prototype).get=function(t){return Yt(this.a.getItem(t)).then((function(t){return t&&_r(t)}))},t.set=function(t,e){return Yt(this.a.setItem(t,br(e)))},t.S=function(t){return Yt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var ja,qa=[];function Ba(t,e,n){G(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Va(t){this.a=t}function Wa(t){this.c=t,this.b=!1,this.a=[]}function Ha(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Xt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Vt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return za(t,c),e})).s((function(e){throw za(t,c),e}))}function za(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),V(t.a,(function(t){return t==e}))}}function Ga(){if(!Qa())throw new Gr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;or()&&self?(this.l=function(){var t=or()?self:null;if(F(qa,(function(n){n.b==t&&(e=n)})),!e){var e=new Ua(t);qa.push(e)}return e}(),Ba(this.l,"keyChanged",(function(e,n){return Za(t).then((function(e){return 0<e.length&&F(t.a,(function(t){t(e)})),{keyProcessed:q(e,n.key)}}))})),Ba(this.l,"ping",(function(){return Yt(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Yt().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Yt(null)}().then((function(e){(t.h=e)&&(t.g=new Wa(new Va(e)),Ha(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&q(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Ka(t){return t.m||(t.m=function t(e){return new Vt((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new Vt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){r(t)}))}}))}(t)),t.m}function Qa(){try{return!!s.indexedDB}catch(t){return!1}}function Ya(t){return t.objectStore("firebaseLocalStorage")}function Xa(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function $a(t){return new Vt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Ja(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ha(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Yt()}function Za(t){return Ka(t).then((function(t){var e=Ya(Xa(t,!1));return e.getAll?$a(e.getAll()):new Vt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function tu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function eu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Yt().then((function(){if(Qa()){var t=Er(),r="__sak"+t;return ja=ja||new Ga,(n=ja).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){F(e.a,(function(e){e(t)}))})),t}))}function nu(){this.a={},this.type="inMemory"}function ru(){if(!function(){var t="Node"==sr();if(!(t=iu()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The LocalStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=iu()||e.INTERNAL.node.localStorage,this.type="localStorage"}function iu(){try{var t=s.localStorage,e=Er();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ou(){this.type="nullStorage"}function su(){if(!function(){var t="Node"==sr();if(!(t=au()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==sr())throw new Gr("internal-error","The SessionStorage compatibility library was not found.");throw new Gr("web-storage-unsupported")}this.a=au()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function au(){try{var t=s.sessionStorage,e=Er();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function uu(){var t={};t.Browser=hu,t.Node=pu,t.ReactNative=fu,t.Worker=du,this.a=t[sr()]}Ua.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];F(r,(function(e){i.push(Yt().then((function(){return e(t.origin,t.data.data)})))})),Jt(i).then((function(r){var i=[];F(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),F(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Va.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Wa.prototype.close=function(){for(;0<this.a.length;)za(this,this.a[0]);this.b=!0},(t=Ga.prototype).set=function(t,e){var n,r=!1,i=this;return Ka(this).then((function(e){return $a((e=Ya(Xa(n=e,!0))).get(t))})).then((function(o){var s=Ya(Xa(n,!0));return o?(o.value=e,$a(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,$a(s.add(o)))})).then((function(){return i.c[t]=e,Ja(i,t)})).ka((function(){r&&i.b--}))},t.get=function(t){return Ka(this).then((function(e){return $a(Ya(Xa(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.S=function(t){var e=!1,n=this;return Ka(this).then((function(r){return e=!0,n.b++,$a(Ya(Xa(r,!0)).delete(t))})).then((function(){return delete n.c[t],Ja(n,t)})).ka((function(){e&&n.b--}))},t.$=function(t){0==this.a.length&&function(t){tu(t),function e(){t.f=setTimeout((function(){t.i=Za(t).then((function(e){0<e.length&&F(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ea=function(t){V(this.a,(function(e){return e==t})),0==this.a.length&&tu(this)},(t=eu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.S=function(t){return this.b.then((function(e){return e.S(t)}))},t.$=function(t){this.a.push(t)},t.ea=function(t){V(this.a,(function(e){return e==t}))},(t=nu.prototype).get=function(t){return Yt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Yt()},t.S=function(t){return delete this.a[t],Yt()},t.$=function(){},t.ea=function(){},(t=ru.prototype).get=function(t){var e=this;return Yt().then((function(){return _r(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Yt().then((function(){var r=br(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Yt().then((function(){e.a.removeItem(t)}))},t.$=function(t){s.window&&We(s.window,"storage",t)},t.ea=function(t){s.window&&Ge(s.window,"storage",t)},(t=ou.prototype).get=function(){return Yt(null)},t.set=function(){return Yt()},t.S=function(){return Yt()},t.$=function(){},t.ea=function(){},(t=su.prototype).get=function(t){var e=this;return Yt().then((function(){return _r(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Yt().then((function(){var r=br(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Yt().then((function(){e.a.removeItem(t)}))},t.$=function(){},t.ea=function(){};var cu,lu,hu={C:ru,Ta:su},pu={C:ru,Ta:su},fu={C:Fa,Ta:ou},du={C:ru,Ta:ou},yu={ad:"local",NONE:"none",cd:"session"};function mu(){var t=!(Tr(pr())||!ir()),e=gr(),n=dr();this.m=t,this.h=e,this.l=n,this.a={},t=cu=cu||new uu;try{this.g=!Qn()&&Ar()||!s.indexedDB?new t.a.C:new eu(or()?new nu:new t.a.C)}catch(t){this.g=new nu,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new nu}this.u=new nu,this.f=E(this.Pb,this),this.b={}}function vu(){return lu=lu||new mu}function gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function bu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function wu(t,e,n){return n=bu(e,n),"local"==e.C&&(t.b[n]=null),gu(t,e.C).S(n)}function _u(t){t.c&&(clearInterval(t.c),t.c=null)}function Eu(t){this.a=t,this.b=vu()}(t=mu.prototype).get=function(t,e){return gu(this,t.C).get(bu(t,e))},t.set=function(t,e,n){var r=bu(t,n),i=this,o=gu(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=bu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),G(this.a)&&(gu(this,"local").$(this.f),this.h||(Qn()||!Ar())&&s.indexedDB||!this.l||function(t){_u(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Re({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=bu(t,e),this.a[t]&&(V(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),G(this.a)&&(gu(this,"local").ea(this.f),_u(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?gu(this,"local").ea(this.f):_u(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.$a(e))},ye&&Se&&10==Se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else F(t,E(this.$a,this))},t.$a=function(t){this.a[t]&&F(this.a[t],(function(t){t()}))};var Tu,Su={name:"authEvent",C:"local"};function Iu(){this.a=vu()}function Cu(t,e){this.b=ku,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0!==Tu||(Tu=s.Int32Array?new Int32Array(Ou):Ou),this.reset()}I(Cu,(function(){this.b=-1}));for(var ku=64,Au=ku-1,Nu=[],xu=0;xu<Au;xu++)Nu[xu]=0;var Du=W(128,Nu);function Ru(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Tu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Pu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(a(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ru(t),i=0);else{if(!y(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ru(t),i=0)}}t.c=i,t.g+=n}Cu.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):H(this.h)};var Ou=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Lu(){Cu.call(this,8,Mu)}I(Lu,Cu);var Mu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Fu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Iu,this.g=new Eu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Uu(t){return new Gr("invalid-cordova-configuration",t)}function ju(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function qu(t){return t.f||(t.f=t.ia().then((function(){return new Vt((function(e){t.Aa((function n(r){return e(r),t.Na(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Bu(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Fi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=_r(bn(o=wn(i),"firebaseError")||null))?Kr(o):null)?new mo(r.c,r.b,null,null,o,null,r.R()):new mo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}ju(t,i)}))}var n=new mo("unknown",null,null,null,new Gr("no-auth-event")),r=!1,i=an(500).then((function(){return Bu(t).then((function(){r||ju(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(fr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},wo=wo||new go,function(t){var e=wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=fr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Bu(t){var e=null;return function(t){return t.b.get(Su,t.a).then((function(t){return vo(t)}))}(t.g).then((function(n){return e=n,wu((n=t.g).b,Su,n.a)})).then((function(){return e}))}function Vu(t){this.a=t,this.b=vu()}(t=Fu.prototype).ia=function(){return this.Da?this.Da:this.Da=(rr(void 0)?nr().then((function(){return new Vt((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Xt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof fr("universalLinks.subscribe",s))throw Uu("cordova-universal-links-plugin-fix is not installed");if(void 0===fr("BuildInfo.packageName",s))throw Uu("cordova-plugin-buildinfo is not installed");if("function"!=typeof fr("cordova.plugins.browsertab.openUrl",s))throw Uu("cordova-plugin-browsertab is not installed");if("function"!=typeof fr("cordova.InAppBrowser.open",s))throw Uu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Gr("cordova-not-ready")}))},t.Fb=function(t,e){return e(new Gr("operation-not-supported-in-this-environment")),Yt()},t.Db=function(){return Xt(new Gr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return Xt(new Gr("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Yt().then((function(){return yo(e),qu(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new mo(e,r,null,o,new Gr("no-auth-event"),null,i),u=fr("BuildInfo.packageName",s);if("string"!=typeof u)throw new Gr("invalid-cordova-configuration");var c=fr("BuildInfo.displayName",s),l={};if(pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!pr().toLowerCase().match(/android/))return Xt(new Gr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new Lu;Pu(e,t),t=[];var n=8*e.g;Pu(e,Du,e.c<56?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ru(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return U(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=Ma(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Su,a.A(),e)})).then((function(){var e=fr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new Gr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=fr("cordova.plugins.browsertab.openUrl",s)))throw new Gr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=fr("cordova.InAppBrowser.open",s)))throw new Gr("invalid-cordova-configuration");e=pr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Vt((function(t,e){u=function(){var e=fr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),l=function(){Cr()&&c()},o.addEventListener("resume",c=function(){a=a||an(2e3).then((function(){e(new Gr("redirect-cancelled-by-user"))}))},!1),pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Bu(i).then((function(){throw t}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(t){this.b.push(t),qu(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new mo("unknown",null,null,null,new Gr("no-auth-event")),t(e))}))},t.Na=function(t){V(this.b,(function(e){return e==t}))};var Wu={name:"pendingRedirect",C:"session"};function Hu(t){return wu(t.b,Wu,t.a)}function zu(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new oc,this.w=new lc,this.g=new Vu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Gu(this.B,this.u,this.m,_i)}function Gu(t,n,r,i){var o=e.SDK_VERSION||null;return rr()?new Fu(t,n,r,o,i):new Ra(t,n,r,o,i)}function Ku(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function Qu(t){t.a.Ob()&&Ku(t).s((function(e){var n=new mo("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));tc(e)&&t.o(n)})),t.a.Jb()||sc(t.b)}function Yu(t,e){q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Wu,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Hu(t.g).then((function(){Ku(t).s((function(e){var n=new mo("unknown",null,null,null,new Gr("operation-not-supported-in-this-environment"));tc(e)&&t.o(n)}))})):Qu(t)})).s((function(){Qu(t)}))}function Xu(t,e){V(t.h,(function(t){return t==e}))}zu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Gu(this.B,this.u,this.m),this.i={}},zu.prototype.o=function(t){if(!t)throw new Gr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=S())),e=!0;break}}return sc(this.b),e};var $u=new Ir(2e3,1e4),Ju=new Ir(3e4,6e4);function Zu(t,e,n,r,i,o,s){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.Aa(t.l))}),(function(){t.reset()}),i,o,s)}function tc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function ec(t,e,n,r,i){var o;return function(t){return t.b.set(Wu,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(tc(e))throw new Gr("operation-not-supported-in-this-environment");return o=e,Hu(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new Vt((function(){})):Hu(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function nc(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),$u.get())}zu.prototype.oa=function(){return this.b.oa()};var rc={};function ic(t,e,n){var r=e+":"+n;return rc[r]||(rc[r]=new zu(t,e,n)),rc[r]}function oc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function sc(t){t.g||(t.g=!0,cc(t,!1,null,null))}function ac(t){t.g&&!t.i&&cc(t,!1,null,null)}function uc(t,e){if(t.b=function(){return Yt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function cc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Xt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):uc(t,n):uc(t,{user:null}),t.f=[],t.c=[]}function lc(){}function hc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function pc(t,e){this.a=e,Pr(this,"verificationId",t)}function fc(t,e,n,r){return new ho(t).Wa(e,n).then((function(t){return new pc(t,r)}))}function dc(t){var e=wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Gr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Or(this,{token:t,expirationTime:kr(1e3*e.exp),authTime:kr(1e3*e.auth_time),issuedAtTime:kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function yc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function mc(t){this.f=t,this.b=this.a=null,this.c=0}function vc(t,e){var n=e[Cs],r=e.refreshToken;e=gc(e.expiresIn),t.b=n,t.c=e,t.a=r}function gc(t){return S()+1e3*parseInt(t,10)}function bc(t,e){this.a=t||null,this.b=e||null,Or(this,{lastSignInTime:kr(e||null),creationTime:kr(t||null)})}function wc(t,e,n,r,i,o){Or(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _c(t,e){for(var n in De.call(this,t),e)this[n]=e[n]}function Ec(t,n,r){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=e.SDK_VERSION?hr(e.SDK_VERSION):null,this.a=new Ss(this.l,Ti(_i),t),this.b=new mc(this.a),Nc(this,n[Cs]),vc(this.b,n),Pr(this,"refreshToken",this.b.a),Rc(this,r||{}),en.call(this),this.J=!1,this.o&&yr()&&(this.i=ic(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new yc((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-S()-3e5;return 0<e?e:0}))}(this),this.W=E(this.Ja,this);var i=this;this.ga=null,this.xa=function(t){i.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Sc(i,t.c)},this.Y=null}function Tc(t,e){t.Z&&Ge(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&We(e,"languageCodeChanged",t.xa)}function Sc(t,n){t.P=n,Rs(t.a,e.SDK_VERSION?hr(e.SDK_VERSION,t.P):null)}function Ic(t,e){t.Y&&Ge(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&We(e,"frameworkChanged",t.wa)}function Cc(n){try{return e.app(n.m).auth()}catch(t){throw new Gr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+n.m+"'!")}}function kc(t){t.B||t.w.b||(t.w.start(),Ge(t,"tokenChanged",t.W),We(t,"tokenChanged",t.W))}function Ac(t){Ge(t,"tokenChanged",t.W),t.w.stop()}function Nc(t,e){t.ma=e,Pr(t,"_lat",e)}function xc(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return Jt(e).then((function(){return t}))}function Dc(t){t.i&&!t.J&&(t.J=!0,Yu(t.i,t))}function Rc(t,e){Or(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new bc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Pc(){}function Oc(t){return Yt().then((function(){if(t.B)throw new Gr("app-deleted")}))}function Lc(t){return U(t.providerData,(function(t){return t.providerId}))}function Mc(t,e){e&&(Fc(t,e.providerId),t.providerData.push(e))}function Fc(t,e){V(t.providerData,(function(t){return t.providerId==e}))}function Uc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Pr(t,e,n)}function jc(t,e){t!=e&&(Or(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Pr(t,"metadata",e.metadata?function(t){return new bc(t.a,t.b)}(e.metadata):new bc),F(e.providerData,(function(e){Mc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Pr(t,"refreshToken",t.b.a))}function qc(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return _a(t.a,na,{idToken:e}).then(E(t.zc,t))}(t,e).then((function(){return n||Uc(t,"isAnonymous",!1),e}))}))}function Bc(t,e){e[Cs]&&t.ma!=e[Cs]&&(vc(t.b,e),t.dispatchEvent(new _c("tokenChanged")),Nc(t,e[Cs]),Uc(t,"refreshToken",t.b.a))}function Vc(t,e){return qc(t).then((function(){if(q(Lc(t),e))return xc(t).then((function(){throw new Gr("provider-already-linked")}))}))}function Wc(t,e,n){return Lr({user:t,credential:fo(e),additionalUserInfo:e=Ai(e),operationType:n})}function Hc(t,e){return Bc(t,e),t.reload().then((function(){return t}))}function zc(t,n,r,i,o){if(!yr())return Xt(new Gr("operation-not-supported-in-this-environment"));if(t.h&&!o)return Xt(t.h);var s=ki(r.providerId),a=Er(t.uid+":::"),u=null;(!gr()||ir())&&t.o&&r.isOAuthProvider&&(u=Ma(t.o,t.l,t.m,n,r,null,a,e.SDK_VERSION||null,null,null,t.tenantId));var c=Zn(u,s&&s.sa,s&&s.ra);return i=i().then((function(){if(Kc(t),!o)return t.G().then((function(){}))})).then((function(){return Zu(t.i,c,n,r,a,!!u,t.tenantId)})).then((function(){return new Vt((function(e,r){t.ja(n,null,new Gr("cancelled-popup-request"),t.g||null),t.f=e,t.v=r,t.g=a,t.c=nc(t.i,t,n,c,a)}))})).then((function(t){return c&&Jn(c),t?Lr(t):null})).s((function(t){throw c&&Jn(c),t})),Qc(t,i,o)}function Gc(t,e,n,r,i){if(!yr())return Xt(new Gr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Xt(t.h);var o=null,s=Er(t.uid+":::");return r=r().then((function(){if(Kc(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=s,xc(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set($c,t.A(),e.a)),e})).then((function(){return ec(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.da)return Jc(t.da);throw o})).then((function(){if(o)throw o})),Qc(t,r,i)}function Kc(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Gr("internal-error");throw new Gr("auth-domain-config-required")}}function Qc(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Xt(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new _c("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){B(t.I,r)})),r}function Yc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Cs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-S())/1e3;var r=new Ec(e,n,t);return t.providerData&&F(t.providerData,(function(t){t&&Mc(r,Lr(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function Xc(t){this.a=t,this.b=vu()}oc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},oc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(cc(this,!0,null,t.a),Yt()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.R(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){cc(t,a,e,null)})).s((function(e){cc(t,a,null,e)}))}(this,t,e):Xt(new Gr("invalid-auth-event")):(cc(this,!1,null,null),Yt())}else Xt(new Gr("invalid-auth-event"))},oc.prototype.oa=function(){var t=this;return new Vt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Gr("timeout");t.a&&t.a.cancel(),t.a=an(Ju.get()).then((function(){t.b||(t.g=!0,cc(t,!0,null,e))}))}(t))}))},lc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Yt()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):Xt(new Gr("invalid-auth-event"))}else Xt(new Gr("invalid-auth-event"))},pc.prototype.confirm=function(t){return t=po(this.verificationId,t),this.a(t)},yc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=an(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return t=s.document,e=null,Cr()||!t?Yt():new Vt((function(n){e=function(){Cr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}));var t,e})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},yc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},mc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},mc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Xt(new Gr("user-token-expired")):t||!this.b||S()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Vt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ps(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ta(t)):t.access_token&&t.refresh_token?n(t):r(new Gr("internal-error")):r(new Gr("network-request-failed"))}),"POST",Rn(e).toString(),t.g,t.u.get()):r(new Gr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=gc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Yt(null):Yt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},bc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(_c,De),I(Ec,en),Ec.prototype.ua=function(t){this.ga=t,Ds(this.a,t)},Ec.prototype.ha=function(){return this.ga},Ec.prototype.Ca=function(){return H(this.P)},Ec.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Pr(Ec.prototype,"providerId","firebase"),(t=Ec.prototype).reload=function(){var t=this;return Qc(this,Oc(this).then((function(){return qc(t).then((function(){return xc(t)})).then(Pc)})))},t.dc=function(t){return this.G(t).then((function(t){return new dc(t)}))},t.G=function(t){var e=this;return Qc(this,Oc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new Gr("internal-error");return t.accessToken!=e.ma&&(Nc(e,t.accessToken),e.dispatchEvent(new _c("tokenChanged"))),Uc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new Gr("internal-error");Rc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?U(t,(function(t){return new wc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Mc(this,e[n]);Uc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return Dr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return Qc(this,t.f(this.a,this.uid).then((function(t){return Bc(e,t),n=Wc(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.rc=function(t){return Dr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(t){var e=this,n=null;return Qc(this,Vc(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Wc(e,t,"link"),Hc(e,t)})).then((function(){return n})))},t.sc=function(t,e){var n=this;return Qc(this,Vc(this,"phone").then((function(){return fc(Cc(n),t,e,E(n.fb,n))})))},t.Bc=function(t,e){var n=this;return Qc(this,Yt().then((function(){return fc(Cc(n),t,e,E(n.hb,n))})),!0)},t.rb=function(t){var e=this;return Qc(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Bc(e,t),e.reload()})))},t.Sc=function(t){var e=this;return Qc(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Bc(e,t),e.reload()})))},t.sb=function(t){var e=this;return Qc(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Bc(e,t),e.reload()})))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oc(this);var e=this;return Qc(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Bc(e,t),Uc(e,"displayName",t.displayName||null),Uc(e,"photoURL",t.photoUrl||null),F(e.providerData,(function(t){"password"===t.providerId&&(Pr(t,"displayName",e.displayName),Pr(t,"photoURL",e.photoURL))})),xc(e)})).then(Pc))},t.Qc=function(t){var e=this;return Qc(this,qc(this).then((function(n){return q(Lc(e),t)?function(t,e,n){return _a(t,Zs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return F(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),F(Lc(e),(function(t){n[t]||Fc(e,t)})),n[ho.PROVIDER_ID]||Pr(e,"phoneNumber",null),xc(e)})):xc(e).then((function(){throw new Gr("no-such-provider")}))})))},t.delete=function(){var t=this;return Qc(this,this.G().then((function(e){return _a(t.a,Js,{idToken:e})})).then((function(){t.dispatchEvent(new _c("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Tc(t,null),Ic(t,null),t.I=[],t.B=!0,Ac(t),Pr(t,"refreshToken",null),t.i&&Xu(t.i,t)}))},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?E(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?E(this.Cb,this):null},t.tc=function(t){var e=this;return zc(this,"linkViaPopup",t,(function(){return Vc(e,t.providerId).then((function(){return xc(e)}))}),!1)},t.Cc=function(t){return zc(this,"reauthViaPopup",t,(function(){return Yt()}),!0)},t.uc=function(t){var e=this;return Gc(this,"linkViaRedirect",t,(function(){return Vc(e,t.providerId)}),!1)},t.Dc=function(t){return Gc(this,"reauthViaRedirect",t,(function(){return Yt()}),!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qc(this,this.G().then((function(n){return zs(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Wc(i,t,"link"),Hc(i,t)})).then((function(){return o})))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qc(this,Yt().then((function(){return ji(Gs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Wc(i,t,"reauthenticate"),Bc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(t){var e=this,n=null;return Qc(this,this.G().then((function(e){return n=e,void 0===t||G(t)?{}:yi(new oi(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Y(t,this.metadata.A()),F(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var $c={name:"redirectUser",C:"session"};function Jc(t){return wu(t.b,$c,t.a)}function Zc(t){this.a=t,this.b=vu(),this.c=null,this.f=function(t){var e=nl("local"),n=nl("session"),r=nl("none");return function(t,e,n){var r=bu(e,n),i=gu(t,e.C);return t.get(e,n).then((function(o){var a=null;try{a=_r(s.localStorage.getItem(r))}catch(o){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(el,t.a).then((function(t){return t?nl(t):e}))}))}))})).then((function(e){return t.c=e,tl(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nl("local"),this.a,E(this.g,this))}function tl(t,e){var n,r=[];for(n in yu)yu[n]!==e&&r.push(wu(t.b,nl(yu[n]),t.a));return r.push(wu(t.b,el,t.a)),function(t){return new Vt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)$t(t[a],T(o,a),s);else e(i)}))}(r)}Zc.prototype.g=function(){var t=this,e=nl("local");sl(this,(function(){return Yt().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return tl(t,"local").then((function(){t.c=e}))}))}))};var el={name:"persistence",C:"session"};function nl(t){return{name:"authUser",C:t}}function rl(t,e){return sl(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function il(t){return sl(t,(function(){return wu(t.b,t.c,t.a)}))}function ol(t,e){return sl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yc(t||{})}))}))}function sl(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Pr(this,"settings",new hc),Pr(this,"app",t),!yl(this).options||!yl(this).options.apiKey)throw new Gr("invalid-api-key");t=e.SDK_VERSION?hr(e.SDK_VERSION):null,this.b=new Ss(yl(this).options&&yl(this).options.apiKey,Ti(_i),t),this.O=[],this.m=[],this.J=[],this.Ub=e.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=e.INTERNAL.createSubscribe(E(this.pc,this)),fl(this,null),this.h=new Zc(yl(this).options.apiKey+":"+yl(this).name),this.w=new Xc(yl(this).options.apiKey+":"+yl(this).name),this.Y=bl(this,function(t){var e=yl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get($c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yc(t||{})}))}(t.w,yl(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),Jc(t.w)}));return bl(t,e)}(t).then((function(){return ol(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return rl(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:il(t.h)}))):null})).then((function(e){fl(t,e||null)}));return bl(t,n)}(this)),this.i=bl(this,function(t){return t.Y.then((function(){return hl(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(nl("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.wa=E(this.bc,this),this.xa=E(this.mc,this),this.Ja=E(this.nc,this),this.a=null,function(t){var e=yl(t).options.authDomain,n=yl(t).options.apiKey;e&&yr()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=ic(e,n,yl(t).name),Yu(t.a,t),ml(t)&&Dc(ml(t)),t.B){Dc(t.B);var r=t.B;r.ua(t.ha()),Tc(r,t),Sc(r=t.B,t.I),Ic(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,en.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function ul(t){De.call(this,"languageCodeChanged"),this.g=t}function cl(t){De.call(this,"frameworkChanged"),this.c=t}function ll(t){return t.Tb||Xt(new Gr("auth-domain-config-required"))}function hl(t){if(!yr())return Xt(new Gr("operation-not-supported-in-this-environment"));var e=ll(t).then((function(){return t.a.oa()})).then((function(t){return t?Lr(t):null}));return bl(t,e)}function pl(t,e){var n={};return n.apiKey=yl(t).options.apiKey,n.authDomain=yl(t).options.authDomain,n.appName=yl(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Ec(t,e);return n&&(i.da=n),r&&Sc(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Ca())})).then((function(e){return ml(t)&&e.uid==ml(t).uid?jc(ml(t),e):(fl(t,e),Dc(e)),t.aa(e)})).then((function(){gl(t)}))}function fl(t,e){ml(t)&&(function(t,e){V(t.O,(function(t){return t==e}))}(ml(t),t.ub),Ge(ml(t),"tokenChanged",t.wa),Ge(ml(t),"userDeleted",t.xa),Ge(ml(t),"userInvalidated",t.Ja),Ac(ml(t))),e&&(e.O.push(t.ub),We(e,"tokenChanged",t.wa),We(e,"userDeleted",t.xa),We(e,"userInvalidated",t.Ja),0<t.o&&kc(e)),Pr(t,"currentUser",e),e&&(e.ua(t.ha()),Tc(e,t),Sc(e,t.I),Ic(e,t))}function dl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=fo(e),r=Ai(e),pl(t,e)})).then((function(){return Lr({user:ml(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function yl(t){return t.app}function ml(t){return t.currentUser}function vl(t){return ml(t)&&ml(t)._lat||null}function gl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](vl(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](vl(t))}}function bl(t,e){return t.O.push(e),e.ka((function(){B(t.O,e)})),e}function wl(){}function _l(){this.a={},this.b=1e12}Zc.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Gr("invalid-persistence-type"),n=new Gr("unsupported-persistence-type");t:{for(r in yu)if(yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!dr()&&"none"!==t)throw n}}(t),sl(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,tl(n,t)})).then((function(){if(n.c=nl(t),e)return n.b.set(n.c,e,n.a)})):Yt()}))},I(al,en),I(ul,De),I(cl,De),(t=al.prototype).mb=function(t){return bl(this,t=this.h.mb(t))},t.ua=function(t){this.Z===t||this.l||(this.Z=t,Ds(this.b,this.Z),this.dispatchEvent(new ul(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=s.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),Rs(this.b,e.SDK_VERSION?hr(e.SDK_VERSION,this.I):null),this.dispatchEvent(new cl(this.I))},t.Ca=function(){return H(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:yl(this).options.apiKey,authDomain:yl(this).options.authDomain,appName:yl(this).name,currentUser:ml(this)&&ml(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=Hs(i.b,t).then((function(t){return o=fo(t),s=Ai(t),t}));return bl(this,t=i.Y.then((function(){return a})).then((function(t){return pl(i,t)})).then((function(){return Lr({user:ml(i),credential:o,additionalUserInfo:s,operationType:"signIn"})})))},t.Lc=function(t){if(!yr())return Xt(new Gr("operation-not-supported-in-this-environment"));var n=this,r=ki(t.providerId),i=Er(),o=null;(!gr()||ir())&&yl(this).options.authDomain&&t.isOAuthProvider&&(o=Ma(yl(this).options.authDomain,yl(this).options.apiKey,yl(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null,null,null,this.R()));var s=Zn(o,r&&r.sa,r&&r.ra);return bl(this,r=ll(this).then((function(e){return Zu(e,s,"signInViaPopup",t,i,!!o,n.R())})).then((function(){return new Vt((function(t,e){n.ja("signInViaPopup",null,new Gr("cancelled-popup-request"),n.g),n.f=t,n.v=e,n.g=i,n.c=nc(n.a,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&Jn(s),t?Lr(t):null})).s((function(t){throw s&&Jn(s),t})))},t.Mc=function(t){if(!yr())return Xt(new Gr("operation-not-supported-in-this-environment"));var e=this;return bl(this,ll(this).then((function(){return function(t){return sl(t,(function(){return t.b.set(el,t.c.C,t.a)}))}(e.h)})).then((function(){return ec(e.a,"signInViaRedirect",t,void 0,e.R())})))},t.oa=function(){var t=this;return hl(this).then((function(e){return t.a&&ac(t.a.b),e})).s((function(e){throw t.a&&ac(t.a.b),e}))},t.Rc=function(t){if(!t)return Xt(new Gr("null-user"));if(this.P!=t.tenantId)return Xt(new Gr("tenant-id-mismatch"));var e=this,n={};n.apiKey=yl(this).options.apiKey,n.authDomain=yl(this).options.authDomain,n.appName=yl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Cs]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,e=new Ec(e,o),n&&(e.da=n),r&&Sc(e,r),jc(e,t),e}(t,n,e.w,e.Ca());return bl(this,this.i.then((function(){if(yl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ml(e)&&t.uid==ml(e).uid?(jc(ml(e),t),e.aa(t)):(fl(e,r),Dc(r),e.aa(r))})).then((function(){gl(e)})))},t.pb=function(){var t=this;return bl(this,this.i.then((function(){return t.a&&ac(t.a.b),ml(t)?(fl(t,null),il(t.h).then((function(){gl(t)}))):Yt()})))},t.Nc=function(){var t=this;return ol(this.h,yl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ml(t)&&e){n=ml(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jc(ml(t),e),ml(t).G();(ml(t)||e)&&(fl(t,e),e&&(Dc(e),e.da=t.w),t.a&&Yu(t.a,t),gl(t))}}))},t.aa=function(t){return rl(this.h,t)},t.bc=function(){gl(this),this.aa(ml(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ml(e))}))},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),bl(t,t.i.then((function(){!t.l&&q(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(vl(t)))})))}(this,(function(){t.next(ml(e))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){m(t)?t(ml(r)):m(t.next)&&t.next(ml(r))})),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),m(t)?t(ml(r)):m(t.next)&&t.next(ml(r))})),this.Vb(t,e,n)},t.cc=function(t){var e=this;return bl(this,this.i.then((function(){return ml(e)?ml(e).G(t).then((function(t){return{accessToken:t}})):null})))},t.Hc=function(t){var e=this;return this.i.then((function(){return dl(e,_a(e.b,ma,{token:t}))})).then((function(t){var n=t.user;return Uc(n,"isAnonymous",!1),e.aa(n),t}))},t.Ic=function(t,e){var n=this;return this.i.then((function(){return dl(n,_a(n.b,va,{email:t,password:e}))}))},t.Xb=function(t,e){var n=this;return this.i.then((function(){return dl(n,_a(n.b,Xs,{email:t,password:e}))}))},t.Sa=function(t){var e=this;return this.i.then((function(){return dl(e,t.na(e.b))}))},t.Gc=function(t){return Dr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var t=this;return this.i.then((function(){var e=ml(t);return e&&e.isAnonymous?Lr({user:e,credential:null,additionalUserInfo:Lr({providerId:null,isNewUser:!1}),operationType:"signIn"}):dl(t,t.b.ob()).then((function(e){var n=e.user;return Uc(n,"isAnonymous",!0),t.aa(n),e}))}))},t.getUid=function(){return ml(this)&&ml(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&ml(this)&&kc(ml(this))},t.Ec=function(t){var e=this;F(this.m,(function(n){n==t&&e.o--})),this.o<0&&(this.o=0),0==this.o&&ml(this)&&Ac(ml(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),bl(this,this.i.then((function(){e.l||q(e.m,t)&&t(vl(e))})))},t.removeAuthTokenListener=function(t){V(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(nl("local"),t.a,this.ma),this.a&&(Xu(this.a,this),ac(this.a.b)),Promise.resolve()},t.$b=function(t){return bl(this,function(t,e){return _a(t,$s,{identifier:e,continueUri:mr()?Yn():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.qc=function(t){return!!ao(t)},t.lb=function(t,e){var n=this;return bl(this,Yt().then((function(){var t=new oi(e);if(!t.c)throw new Gr("argument-error",ui+" must be true when sending sign in link to email");return yi(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},t.Uc=function(t){return this.Ma(t).then((function(t){return t.data.email}))},t.ab=function(t,e){return bl(this,this.b.ab(t,e).then((function(){})))},t.Ma=function(t){return bl(this,this.b.Ma(t).then((function(t){return new Fr(t)})))},t.Ya=function(t){return bl(this,this.b.Ya(t).then((function(){})))},t.kb=function(t,e){var n=this;return bl(this,Yt().then((function(){return void 0===e||G(e)?{}:yi(new oi(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},t.Kc=function(t,e){return bl(this,fc(this,t,e,E(this.Sa,this)))},t.Jc=function(t,e){var n=this;return bl(this,Yt().then((function(){var r=e||Yn(),i=so(t,r);if(!(r=ao(r)))throw new Gr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Gr("tenant-id-mismatch");return n.Sa(i)})))},wl.prototype.render=function(){},wl.prototype.reset=function(){},wl.prototype.getResponse=function(){},wl.prototype.execute=function(){};var El=null;function Tl(t,e){return(e=Sl(e))&&t.a[e]||null}function Sl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=jn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():We(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kl(){}_l.prototype.render=function(t,e){return this.a[this.b.toString()]=new Il(t,e),this.b++},_l.prototype.reset=function(t){var e=Tl(this,t);t=Sl(t),e&&t&&(e.delete(),delete this.a[t])},_l.prototype.getResponse=function(t){return(t=Tl(this,t))?t.getResponse():null},_l.prototype.execute=function(t){(t=Tl(this,t))&&t.execute()},Il.prototype.getResponse=function(){return Cl(this),this.b},Il.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},Il.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,Ge(this.f,"click",this.i)},kl.prototype.g=function(){return Yt(El=El||new _l)},kl.prototype.c=function(){};var Al=null;function Nl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xl=new X(Z,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Ir(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new Vt((function(n,r){var i=setTimeout((function(){r(new Gr("network-request-failed"))}),Dl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new Gr("internal-error"));delete s[e.a]},Yt(vs(rt(xl,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new Gr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Nl.prototype.c=function(){this.b--};var Rl=null;function Pl(t,e,n,r,i,o,a){if(Pr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a=a?Al=Al||new kl:Rl=Rl||new Nl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ml])throw new Gr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Fl],!s.document)throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!jn(e)||!this.i&&jn(e).hasChildNodes())throw new Gr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ss(t,o||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ol];this.a[Ol]=function(t){if(Ul(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=fr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Ll];this.a[Ll]=function(){if(Ul(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=fr(l,s);"function"==typeof t&&t()}}}var Ol="callback",Ll="expired-callback",Ml="sitekey",Fl="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.ka((function(){B(t.h,e)})),e}function ql(t){if(t.B)throw new Gr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,n,r){var i=!1;try{this.b=r||e.app()}catch(t){throw new Gr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Gr("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ca()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=e.SDK_VERSION?hr(e.SDK_VERSION,s):null,Pl.call(this,r,t,n,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),s,Ti(_i),i)}function Vl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new Gr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],i<0||i>=Wl.length)throw new Gr("internal-error","Argument validator received an unsupported number of arguments.");n=Wl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Gr("argument-error",t+" failed: "+r)}(t=Pl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=jl(this,Yt().then((function(){if(mr()&&!or())return nr();throw new Gr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,_a(t.o,aa,{})})).then((function(e){t.a[Ml]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return jl(this,this.Da().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=jn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!Un&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Mt(s.name),'"'),s.type){o.push(' type="',Mt(s.type),'"');var u={};Y(u,s),delete u.type,s=u}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(a(s)?o.className=s:d(s)?o.className=s.join(" "):qn(o,s)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(a(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||v(o)&&0<o.nodeType?r(o):F(Vn(o)?H(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return jl(this,this.render().then((function(e){return new Vt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){V(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=jn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},I(Bl,Pl);var Wl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:a}}function zl(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:u}}function Gl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:v}}function Kl(t,e){return{name:t||"",M:"a function",optional:!!e,N:m}}function Ql(t,e){return{name:t||"",M:"null",optional:!!e,N:f}}function Yl(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){return!!e&&!(!e.na||t&&e.providerId!==t)}}}function Xl(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&a(t.type)&&m(t.verify))}}}function $l(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=eh(r,t[n],e[n].j)}}function Zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Vl(t,[n],[r],!0),this[e]=r}),r,n,e[n].Za),enumerable:!0})}}function th(t,e,n,r){t[e]=eh(e,n,r)}function eh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Vl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(al.prototype,{Ya:{name:"applyActionCode",j:[Hl("code")]},Ma:{name:"checkActionCode",j:[Hl("code")]},ab:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},wc:{name:"onAuthStateChanged",j:[$l(Gl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[$l(Gl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Hl("email"),$l(Gl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Hl("email"),Gl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Hl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Yl()]},Hc:{name:"signInWithCustomToken",j:[Hl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Jc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[$l({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Ec)}},Ql(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),Zl(al.prototype,{lc:{name:"languageCode",Za:$l(Hl(),Ql(),"languageCode")},ti:{name:"tenantId",Za:$l(Hl(),Ql(),"tenantId")}}),(al.Persistence=yu).LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",Jl(Ec.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},fb:{name:"linkWithCredential",j:[Yl()]},sc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},hb:{name:"reauthenticateWithCredential",j:[Yl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[$l(Gl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Qc:{name:"unlink",j:[Hl("provider")]},rb:{name:"updateEmail",j:[Hl("email")]},sb:{name:"updatePassword",j:[Hl("password")]},Sc:{name:"updatePhoneNumber",j:[Yl("phone")]},tb:{name:"updateProfile",j:[Gl("profile")]}}),Jl(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Vt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Zl(hc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:zl("appVerificationDisabledForTesting")}}),Jl(pc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),th(Ui,"fromJSON",(function(t){t=a(t)?JSON.parse(t):t;for(var e,n=[zi,io,co,Vi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$l(Hl(),Gl(),"json")]),th(oo,"credential",(function(t,e){return new ro(t,e)}),[Hl("email"),Hl("password")]),Jl(ro.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Yi.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(Yi,"credential",Xi,[$l(Hl(),Gl(),"token")]),th(oo,"credentialWithLink",so,[Hl("email"),Hl("emailLink")]),Jl($i.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th($i,"credential",Ji,[$l(Hl(),Gl(),"token")]),Jl(Zi.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(Zi,"credential",to,[$l(Hl(),$l(Gl(),Ql()),"idToken"),$l(Hl(),Ql(),"accessToken",!0)]),Jl(eo.prototype,{Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(eo,"credential",no,[$l(Hl(),Gl(),"token"),Hl("secret",!0)]),Jl(Qi.prototype,{ya:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[$l(Hl(),$l(Gl(),Ql()),"optionsOrIdToken"),$l(Hl(),Ql(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(Wi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(qi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),th(ho,"credential",po,[Hl("verificationId"),Hl("verificationCode")]),Jl(ho.prototype,{Wa:{name:"verifyPhoneNumber",j:[Hl("phoneNumber"),Xl()]}}),Jl(uo.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Gr.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Eo.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(_o.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),th(Xr,"parseLink",ii,[Hl("link")]),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ur,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:Ui,Error:Gr};th(t,"EmailAuthProvider",oo,[]),th(t,"FacebookAuthProvider",Yi,[]),th(t,"GithubAuthProvider",$i,[]),th(t,"GoogleAuthProvider",Zi,[]),th(t,"TwitterAuthProvider",eo,[]),th(t,"OAuthProvider",Qi,[Hl("providerId")]),th(t,"SAMLAuthProvider",Ki,[Hl("providerId")]),th(t,"PhoneAuthProvider",ho,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof al)}}]),th(t,"RecaptchaVerifier",Bl,[$l(Hl(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof e.app.App)}}]),th(t,"ActionCodeURL",Xr,[]),e.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.cc,t),addAuthTokenListener:E(t.Wb,t),removeAuthTokenListener:E(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.registerVersion("@firebase/auth","0.13.4"),e.INTERNAL.extendNamespace({User:Ec})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-auth.js - be sure to load firebase-app.js first.")}},"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}function fireb_data(){var t,e;t=this,e=function(n){"use strict";try{(function(){n=n&&n.hasOwnProperty("default")?n.default:n;var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function r(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function u(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function c(t){try{return p.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var l=function(t,e){if(!t)throw h(e)},h=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},f=(d.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},d);function d(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}var m,v=(r(g,m=Error),g);function g(t,e){var n=m.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,b.prototype.create),n}var b=(w.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(_,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},w);function w(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var _=/\{\$([^}]+)}/g;function E(t){return JSON.parse(t)}function T(t){return JSON.stringify(t)}function S(t){var e={},n={},r={},i="";try{var o=t.split(".");e=E(c(o[0])||""),n=E(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function k(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function A(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var N,x,D=(R.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},R.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},R.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},R.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},R);function R(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function P(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function O(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function L(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(O(t,e,r)+"must be a valid function.")}function M(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(O(t,e,r)+"must be a valid context object.")}function F(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}function U(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function j(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case N.DEBUG:case N.VERBOSE:console.log.apply(console,U(["["+i+"]  "+t.name+":"],n));break;case N.INFO:console.info.apply(console,U(["["+i+"]  "+t.name+":"],n));break;case N.WARN:console.warn.apply(console,U(["["+i+"]  "+t.name+":"],n));break;case N.ERROR:console.error.apply(console,U(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(x=N=N||{})[x.DEBUG=0]="DEBUG",x[x.VERBOSE=1]="VERBOSE",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR",x[x.SILENT=5]="SILENT";var q=N.INFO,B=(Object.defineProperty(V.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in N))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),V.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,U([this,N.DEBUG],t))},V.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,U([this,N.VERBOSE],t))},V.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,U([this,N.INFO],t))},V.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,U([this,N.WARN],t))},V.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,U([this,N.ERROR],t))},V);function V(t){this.name=t,this._logLevel=q,this._logHandler=j}var W=(H.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},H.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},H.prototype.setServiceProps=function(t){return this.serviceProps=t,this},H);function H(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var z=(G.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),T(e))},G.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:E(e)},G.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},G.prototype.prefixedName_=function(t){return this.prefix_+t},G.prototype.toString=function(){return this.domStorage_.toString()},G);function G(t){this.domStorage_=t,this.prefix_="firebase:"}var K=(Q.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Q.prototype.get=function(t){return I(this.cache_,t)?this.cache_[t]:null},Q.prototype.remove=function(t){delete this.cache_[t]},Q);function Q(){this.cache_={},this.isInMemoryStorage=!0}function Y(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new z(e)}}catch(t){}return new K}function X(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;l(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new D;n.update(e);var r=n.digest();return p.encodeByteArray(r)}function $(t,e){l(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(lt.logLevel=N.VERBOSE,ft=lt.log.bind(lt),e&&ct.set("logging_enabled",!0)):"function"==typeof t?ft=t:(ft=null,ct.remove("logging_enabled"))}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===dt&&(dt=!1,null===ft&&!0===ct.get("logging_enabled")&&$(!0)),ft){var n=pt.apply(null,t);ft(n)}}function Z(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];J.apply(void 0,a([t],e))}}function tt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+pt.apply(void 0,a(t));lt.error(n)}function et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+pt.apply(void 0,a(t));throw lt.error(n),new Error(n)}function nt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+pt.apply(void 0,a(t));lt.warn(n)}function rt(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function it(t,e){return t===e?0:t<e?-1:1}function ot(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+T(e))}function st(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,n<i+e?n:i+e));return r}var at,ut=Y("localStorage"),ct=Y("sessionStorage"),lt=new B("@firebase/database"),ht=(at=1,function(){return at++}),pt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=pt.apply(null,i):n+="object"==typeof i?T(i):i,n+=" "}return n},ft=null,dt=!0,yt="[MIN_NAME]",mt="[MAX_NAME]",vt=function(t,e){if(t===e)return 0;if(t===yt||e===mt)return-1;if(e===yt||t===mt)return 1;var n=St(t),r=St(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},gt=function(t){if("object"!=typeof t||null===t)return T(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=T(e[i]),r+=":",r+=gt(t[e[i]]);return r+"}"};function bt(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function wt(t){var e,n,r,i,o;l(!rt(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function _t(t){try{t()}catch(e){setTimeout((function(){throw nt("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}}function Et(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Tt=new RegExp("^-?(0*)\\d{1,10}$"),St=function(t){if(Tt.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},It=(Object.defineProperty(Ct,"Empty",{get:function(){return new Ct("")},enumerable:!0,configurable:!0}),Ct.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Ct.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Ct.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Ct(this.pieces_,t)},Ct.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Ct.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Ct.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Ct.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Ct.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Ct(t,0)},Ct.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Ct)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new Ct(e,0)},Ct.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Ct.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Ct.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Ct.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=vt(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Ct.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Ct.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Ct);function Ct(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var kt=(Object.defineProperty(At,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(At,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),At.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=F(t),this.checkValid_()},At.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=F(t),0<this.parts_.length&&(this.byteLength_-=1)},At.prototype.checkValid_=function(){if(this.byteLength_>At.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+At.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>At.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+At.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},At.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},At);function At(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=F(this.parts_[n]);this.checkValid_()}var Nt="firebaseio.com",xt="websocket",Dt="long_polling",Rt=(Pt.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Pt.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Pt.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Pt.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Pt.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ut.set("host:"+this.host,this.internalHost))},Pt.prototype.connectionURL=function(t,e){var n;if(l("string"==typeof t,"typeof type must == string"),l("object"==typeof e,"typeof params must == object"),t===xt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Dt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return bt(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},Pt.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Pt.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Pt);function Pt(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ut.get("host:"+t)||this.host}function Ot(t){var e=Gt(t),n=e.namespace;return"firebase"===e.domain&&et(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||et("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rt(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new It(e.pathString)}}function Lt(t){return"string"==typeof t&&0!==t.length&&!Kt.test(t)}function Mt(t){return"string"==typeof t&&0!==t.length&&!Qt.test(t)}function Ft(t){return null===t||"string"==typeof t||"number"==typeof t&&!rt(t)||t&&"object"==typeof t&&I(t,".sv")}function Ut(t,e,n,r,i){i&&void 0===n||Xt(O(t,e,i),n,r)}function jt(t,e,n,r,i){if(!i||void 0!==n){var o=O(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];bt(n,(function(t,e){var n=new It(t);if(Xt(o,e,r.child(n)),".priority"===n.getBack()&&!Ft(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Lt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(It.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function qt(t,e,n,r){if(!r||void 0!==n){if(rt(n))throw new Error(O(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ft(n))throw new Error(O(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Bt(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(O(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Vt(t,e,n,r){if(!(r&&void 0===n||Lt(n)))throw new Error(O(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Wt(t,e,n,r){if(!(r&&void 0===n||Mt(n)))throw new Error(O(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ht(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function zt(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Lt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return Mt(t=t&&t.replace(/^\/*\.info(\/|$)/,"/"))}(r))throw new Error(O(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Gt=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");0<=l&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,p)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=o(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):nt("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,p)));0<=(l=e.indexOf(":"))?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=t.length;var d=e.split(".");3===d.length?(n=d[1],s=r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,l).toLowerCase()&&(n="localhost"),"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Kt=/[\[\].#$\/\u0000-\u001F\u007F]/,Qt=/[\[\].#$\u0000-\u001F\u007F]/,Yt=10485760,Xt=function(t,e,n){var r=n instanceof It?new kt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(rt(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>Yt/3&&F(e)>Yt)throw new Error(t+"contains a string greater than "+Yt+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(bt(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Lt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Xt(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},$t=(Jt.prototype.cancel=function(t){P("OnDisconnect.cancel",0,1,arguments.length),L("OnDisconnect.cancel",1,t,!0);var e=new f;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Jt.prototype.remove=function(t){P("OnDisconnect.remove",0,1,arguments.length),Ht("OnDisconnect.remove",this.path_),L("OnDisconnect.remove",1,t,!0);var e=new f;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Jt.prototype.set=function(t,e){P("OnDisconnect.set",1,2,arguments.length),Ht("OnDisconnect.set",this.path_),Ut("OnDisconnect.set",1,t,this.path_,!1),L("OnDisconnect.set",2,e,!0);var n=new f;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Jt.prototype.setWithPriority=function(t,e,n){P("OnDisconnect.setWithPriority",2,3,arguments.length),Ht("OnDisconnect.setWithPriority",this.path_),Ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),qt("OnDisconnect.setWithPriority",2,e,!1),L("OnDisconnect.setWithPriority",3,n,!0);var r=new f;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Jt.prototype.update=function(t,e){if(P("OnDisconnect.update",1,2,arguments.length),Ht("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,nt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jt("OnDisconnect.update",1,t,this.path_,!1),L("OnDisconnect.update",2,e,!0);var i=new f;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Jt);function Jt(t,e){this.repo_=t,this.path_=e}var Zt=(te.prototype.toJSON=function(){return P("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},te);function te(t,e){this.committed=t,this.snapshot=e}var ee,ne,re,ie=(ee="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ne=0,re=[],function(t){var e,n=t===ne;ne=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=ee.charAt(t%64),t=Math.floor(t/64);l(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===re[e];e--)re[e]=0;re[e]++}else for(e=0;e<12;e++)re[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ee.charAt(re[e]);return l(20===i.length,"nextPushId: Length should be 20."),i}),oe=(se.Wrap=function(t,e){return new se(t,e)},se);function se(t,e){this.name=t,this.node=e}var ae,ue=(ce.prototype.getCompare=function(){return this.compare.bind(this)},ce.prototype.indexedValueChanged=function(t,e){var n=new oe(yt,t),r=new oe(yt,e);return 0!==this.compare(n,r)},ce.prototype.minPost=function(){return oe.MIN},ce);function ce(){}var le,he=(r(pe,le=ue),Object.defineProperty(pe,"__EMPTY_NODE",{get:function(){return ae},set:function(t){ae=t},enumerable:!0,configurable:!0}),pe.prototype.compare=function(t,e){return vt(t.name,e.name)},pe.prototype.isDefinedOn=function(t){throw h("KeyIndex.isDefinedOn not expected to be called.")},pe.prototype.indexedValueChanged=function(t,e){return!1},pe.prototype.minPost=function(){return oe.MIN},pe.prototype.maxPost=function(){return new oe(mt,ae)},pe.prototype.makePost=function(t,e){return l("string"==typeof t,"KeyIndex indexValue must always be a string."),new oe(t,ae)},pe.prototype.toString=function(){return".key"},pe);function pe(){return null!==le&&le.apply(this,arguments)||this}var fe,de=new he;function ye(t){return"number"==typeof t?"number:"+wt(t):"string:"+t}function me(t){if(t.isLeafNode()){var e=t.val();l("string"==typeof e||"number"==typeof e||"object"==typeof e&&I(e,".sv"),"Priority must be a string or number.")}else l(t===fe||t.isEmpty(),"priority of unexpected type.");l(t===fe||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var ve,ge,be,we,_e=(Object.defineProperty(Ee,"__childrenNodeConstructor",{get:function(){return ve},set:function(t){ve=t},enumerable:!0,configurable:!0}),Ee.prototype.isLeafNode=function(){return!0},Ee.prototype.getPriority=function(){return this.priorityNode_},Ee.prototype.updatePriority=function(t){return new Ee(this.value_,t)},Ee.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE},Ee.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE},Ee.prototype.hasChild=function(){return!1},Ee.prototype.getPredecessorChildName=function(t,e){return null},Ee.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Ee.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Ee.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(l(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Ee.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Ee.prototype.isEmpty=function(){return!1},Ee.prototype.numChildren=function(){return 0},Ee.prototype.forEachChild=function(t,e){return!1},Ee.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Ee.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ye(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?wt(this.value_):this.value_,this.lazyHash_=X(t)}return this.lazyHash_},Ee.prototype.getValue=function(){return this.value_},Ee.prototype.compareTo=function(t){return t===Ee.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ee.__childrenNodeConstructor?-1:(l(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Ee.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Ee.VALUE_TYPE_ORDER.indexOf(e),i=Ee.VALUE_TYPE_ORDER.indexOf(n);return l(0<=r,"Unknown leaf type: "+e),l(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Ee.prototype.withIndex=function(){return this},Ee.prototype.isIndexed=function(){return!0},Ee.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Ee.VALUE_TYPE_ORDER=["object","boolean","number","string"],Ee);function Ee(t,e){void 0===e&&(e=Ee.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,l(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),me(this.priorityNode_)}function Te(){return null!==we&&we.apply(this,arguments)||this}var Se=new(r(Te,we=ue),Te.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?vt(t.name,e.name):i},Te.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Te.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Te.prototype.minPost=function(){return oe.MIN},Te.prototype.maxPost=function(){return new oe(mt,new _e("[PRIORITY-POST]",be))},Te.prototype.makePost=function(t,e){var n=ge(t);return new oe(e,new _e("[PRIORITY-POST]",n))},Te.prototype.toString=function(){return".priority"},Te),Ie=(Ce.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Ce.prototype.hasNext=function(){return 0<this.nodeStack_.length},Ce.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Ce);function Ce(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var ke=(Ae.prototype.copy=function(t,e,n,r,i){return new Ae(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ae.prototype.count=function(){return this.left.count()+1+this.right.count()},Ae.prototype.isEmpty=function(){return!1},Ae.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Ae.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Ae.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Ae.prototype.minKey=function(){return this.min_().key},Ae.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Ae.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Ae.prototype.removeMin_=function(){if(this.left.isEmpty())return De.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Ae.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return De.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Ae.prototype.isRed_=function(){return this.color},Ae.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Ae.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Ae.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Ae.prototype.rotateLeft_=function(){var t=this.copy(null,null,Ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ae.prototype.rotateRight_=function(){var t=this.copy(null,null,Ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ae.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ae.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Ae.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Ae.RED=!0,Ae.BLACK=!1,Ae);function Ae(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ae.RED,this.left=null!=r?r:De.EMPTY_NODE,this.right=null!=i?i:De.EMPTY_NODE}var Ne=(xe.prototype.copy=function(t,e,n,r,i){return this},xe.prototype.insert=function(t,e,n){return new ke(t,e,null)},xe.prototype.remove=function(t,e){return this},xe.prototype.count=function(){return 0},xe.prototype.isEmpty=function(){return!0},xe.prototype.inorderTraversal=function(t){return!1},xe.prototype.reverseTraversal=function(t){return!1},xe.prototype.minKey=function(){return null},xe.prototype.maxKey=function(){return null},xe.prototype.check_=function(){return 0},xe.prototype.isRed_=function(){return!1},xe);function xe(){}var De=(Re.prototype.insert=function(t,e){return new Re(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ke.BLACK,null,null))},Re.prototype.remove=function(t){return new Re(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ke.BLACK,null,null))},Re.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Re.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Re.prototype.isEmpty=function(){return this.root_.isEmpty()},Re.prototype.count=function(){return this.root_.count()},Re.prototype.minKey=function(){return this.root_.minKey()},Re.prototype.maxKey=function(){return this.root_.maxKey()},Re.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Re.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Re.prototype.getIterator=function(t){return new Ie(this.root_,null,this.comparator_,!1,t)},Re.prototype.getIteratorFrom=function(t,e){return new Ie(this.root_,t,this.comparator_,!1,e)},Re.prototype.getReverseIteratorFrom=function(t,e){return new Ie(this.root_,t,this.comparator_,!0,e)},Re.prototype.getReverseIterator=function(t){return new Ie(this.root_,null,this.comparator_,!0,t)},Re.EMPTY_NODE=new Ne,Re);function Re(t,e){void 0===e&&(e=Re.EMPTY_NODE),this.comparator_=t,this.root_=e}var Pe=Math.log(2),Oe=(Le.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Le);function Le(t){this.count=parseInt(Math.log(t+1)/Pe,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}var Me,Fe,Ue=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0==a)return null;if(1==a)return o=t[e],s=n?n(o):o,new ke(s,o.node,ke.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new ke(s,o.node,ke.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(1+o,a),l=t[o],h=n?n(l):l;u(new ke(h,l.node,r,null,c))},u=function(t){r=r?r.left=t:o=t},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,ke.BLACK):(a(h,ke.BLACK),a(h,ke.RED))}return o}(new Oe(t.length));return new De(r||e,o)},je={},qe=(Object.defineProperty(Be,"Default",{get:function(){return l(Se,"ChildrenNode.ts has not been loaded"),Me=Me||new Be({".priority":je},{".priority":Se})},enumerable:!0,configurable:!0}),Be.prototype.get=function(t){var e=C(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof De?e:null},Be.prototype.hasIndex=function(t){return I(this.indexSet_,t.toString())},Be.prototype.addIndex=function(t,e){l(t!==de,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],o=!1,s=e.getIterator(oe.Wrap),a=s.getNext();a;)o=o||t.isDefinedOn(a.node),r.push(a),a=s.getNext();n=o?Ue(r,t.getCompare()):je;var u=t.toString(),c=i({},this.indexSet_);c[u]=t;var h=i({},this.indexes_);return h[u]=n,new Be(h,c)},Be.prototype.addToIndexes=function(t,e){var n=this;return new Be(A(this.indexes_,(function(r,i){var o=C(n.indexSet_,i);if(l(o,"Missing index implementation for "+i),r===je){if(o.isDefinedOn(t.node)){for(var s=[],a=e.getIterator(oe.Wrap),u=a.getNext();u;)u.name!==t.name&&s.push(u),u=a.getNext();return s.push(t),Ue(s,o.getCompare())}return je}var c=e.get(t.name),h=r;return c&&(h=h.remove(new oe(t.name,c))),h.insert(t,t.node)})),this.indexSet_)},Be.prototype.removeFromIndexes=function(t,e){return new Be(A(this.indexes_,(function(n){if(n===je)return n;var r=e.get(t.name);return r?n.remove(new oe(t.name,r)):n})),this.indexSet_)},Be);function Be(t,e){this.indexes_=t,this.indexSet_=e}function Ve(t,e){return vt(t.name,e.name)}function We(t,e){return vt(t,e)}var He,ze=(Object.defineProperty(Ge,"EMPTY_NODE",{get:function(){return Fe=Fe||new Ge(new De(We),null,qe.Default)},enumerable:!0,configurable:!0}),Ge.prototype.isLeafNode=function(){return!1},Ge.prototype.getPriority=function(){return this.priorityNode_||Fe},Ge.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Ge(this.children_,t,this.indexMap_)},Ge.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Fe:e},Ge.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Ge.prototype.hasChild=function(t){return null!==this.children_.get(t)},Ge.prototype.updateImmediateChild=function(t,e){if(l(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n,r=new oe(t,e),i=void 0;n=e.isEmpty()?(i=this.children_.remove(t),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,e),this.indexMap_.addToIndexes(r,this.children_));var o=i.isEmpty()?Fe:this.priorityNode_;return new Ge(i,o,n)},Ge.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;l(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Ge.prototype.isEmpty=function(){return this.children_.isEmpty()},Ge.prototype.numChildren=function(){return this.children_.count()},Ge.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(Se,(function(o,s){e[o]=s.val(t),n++,i&&Ge.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o=[];for(var s in e)o[s]=e[s];return o}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},Ge.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ye(this.getPriority().val())+":"),this.forEachChild(Se,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":X(t)}return this.lazyHash_},Ge.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new oe(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Ge.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Ge.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new oe(e,this.children_.get(e)):null},Ge.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Ge.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new oe(e,this.children_.get(e)):null},Ge.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},Ge.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Ge.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,oe.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Ge.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Ge.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,oe.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Ge.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ye?-1:0},Ge.prototype.withIndex=function(t){if(t===de||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Ge(this.children_,this.priorityNode_,e)},Ge.prototype.isIndexed=function(t){return t===de||this.indexMap_.hasIndex(t)},Ge.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Se),r=e.getIterator(Se),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Ge.prototype.resolveIndex_=function(t){return t===de?null:this.indexMap_.get(t.toString())},Ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Ge);function Ge(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&me(this.priorityNode_),this.children_.isEmpty()&&l(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Ke(){return He.call(this,new De(We),ze.EMPTY_NODE,qe.Default)||this}var Qe,Ye=new(r(Ke,He=ze),Ke.prototype.compareTo=function(t){return t===this?0:1},Ke.prototype.equals=function(t){return t===this},Ke.prototype.getPriority=function(){return this},Ke.prototype.getImmediateChild=function(t){return ze.EMPTY_NODE},Ke.prototype.isEmpty=function(){return!1},Ke);function Xe(t,e){if(void 0===e&&(e=null),null===t)return ze.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),l(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new _e(t,Xe(e));if(t instanceof Array){var n=ze.EMPTY_NODE;return bt(t,(function(e,r){if(I(t,e)&&"."!==e.substring(0,1)){var i=Xe(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Xe(e))}var r=[],i=!1;if(bt(t,(function(t,e){if("."!==t.substring(0,1)){var n=Xe(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new oe(t,n)))}})),0===r.length)return ze.EMPTY_NODE;var o=Ue(r,Ve,(function(t){return t.name}),We);if(i){var s=Ue(r,Se.getCompare());return new ze(o,Xe(e),new qe({".priority":s},{".priority":Se}))}return new ze(o,Xe(e),qe.Default)}function $e(){return null!==Qe&&Qe.apply(this,arguments)||this}Object.defineProperties(oe,{MIN:{value:new oe(yt,ze.EMPTY_NODE)},MAX:{value:new oe(mt,Ye)}}),he.__EMPTY_NODE=ze.EMPTY_NODE,_e.__childrenNodeConstructor=ze,fe=Ye,be=Ye,ge=Xe;var Je,Ze=new(r($e,Qe=ue),$e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?vt(t.name,e.name):n},$e.prototype.isDefinedOn=function(t){return!0},$e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},$e.prototype.minPost=function(){return oe.MIN},$e.prototype.maxPost=function(){return oe.MAX},$e.prototype.makePost=function(t,e){var n=Xe(t);return new oe(e,n)},$e.prototype.toString=function(){return".value"},$e),tn=(r(en,Je=ue),en.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},en.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},en.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?vt(t.name,e.name):i},en.prototype.makePost=function(t,e){var n=Xe(t),r=ze.EMPTY_NODE.updateChild(this.indexPath_,n);return new oe(e,r)},en.prototype.maxPost=function(){var t=ze.EMPTY_NODE.updateChild(this.indexPath_,Ye);return new oe(mt,t)},en.prototype.toString=function(){return this.indexPath_.slice().join("/")},en);function en(t){var e=Je.call(this)||this;return e.indexPath_=t,l(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var nn=(rn.prototype.val=function(){return P("DataSnapshot.val",0,0,arguments.length),this.node_.val()},rn.prototype.exportVal=function(){return P("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},rn.prototype.toJSON=function(){return P("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},rn.prototype.exists=function(){return P("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},rn.prototype.child=function(t){P("DataSnapshot.child",0,1,arguments.length),Wt("DataSnapshot.child",1,t=String(t),!1);var e=new It(t),n=this.ref_.child(e);return new rn(this.node_.getChild(e),n,Se)},rn.prototype.hasChild=function(t){P("DataSnapshot.hasChild",1,1,arguments.length),Wt("DataSnapshot.hasChild",1,t,!1);var e=new It(t);return!this.node_.getChild(e).isEmpty()},rn.prototype.getPriority=function(){return P("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},rn.prototype.forEach=function(t){var e=this;return P("DataSnapshot.forEach",1,1,arguments.length),L("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(n,r){return t(new rn(r,e.ref_.child(n),Se))}))},rn.prototype.hasChildren=function(){return P("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(rn.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),rn.prototype.numChildren=function(){return P("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},rn.prototype.getRef=function(){return P("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(rn.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),rn);function rn(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var on=(sn.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},sn.prototype.getEventType=function(){return this.eventType},sn.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},sn.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+T(this.snapshot.exportVal())},sn);function sn(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var an=(un.prototype.getPath=function(){return this.path},un.prototype.getEventType=function(){return"cancel"},un.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},un.prototype.toString=function(){return this.path.toString()+":cancel"},un);function un(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var cn=(ln.prototype.respondsTo=function(t){return"value"===t},ln.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new on("value",this,new nn(t.snapshotNode,e.getRef(),n))},ln.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){l(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},ln.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new an(this,t,e):null},ln.prototype.matches=function(t){return t instanceof ln&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},ln.prototype.hasAnyCallback=function(){return null!==this.callback_},ln);function ln(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var hn,pn=(fn.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return I(this.callbacks_,e="children_removed"===e?"child_removed":e)},fn.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new an(this,t,e):null},fn.prototype.createEvent=function(t,e){l(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new on(t.type,this,new nn(t.snapshotNode,n,r),t.prevName)},fn.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){l(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},fn.prototype.matches=function(t){var e=this;if(t instanceof fn){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every((function(n){return t.callbacks_[n]===e.callbacks_[n]}));var o=n[0],s=r[0];return!(s!==o||t.callbacks_[o]&&this.callbacks_[s]&&t.callbacks_[o]!==this.callbacks_[s])}}}return!1},fn.prototype.hasAnyCallback=function(){return null!==this.callbacks_},fn);function fn(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var dn=(Object.defineProperty(yn,"__referenceConstructor",{get:function(){return l(hn,"Reference.ts has not been loaded"),hn},set:function(t){hn=t},enumerable:!0,configurable:!0}),yn.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===de){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==yt)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==mt)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Se){if(null!=e&&!Ft(e)||null!=n&&!Ft(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(l(t.getIndex()instanceof tn||t.getIndex()===Ze,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},yn.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},yn.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},yn.prototype.getQueryParams=function(){return this.queryParams_},yn.prototype.getRef=function(){return P("Query.ref",0,0,arguments.length),new yn.__referenceConstructor(this.repo,this.path)},yn.prototype.on=function(t,e,n,r){P("Query.on",2,4,arguments.length),Bt("Query.on",1,t,!1),L("Query.on",2,e,!1);var i=yn.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},yn.prototype.onValueEvent=function(t,e,n){var r=new cn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},yn.prototype.onChildEvent=function(t,e,n){var r=new pn(t,e,n);this.repo.addEventCallbackForQuery(this,r)},yn.prototype.off=function(t,e,n){P("Query.off",0,3,arguments.length),Bt("Query.off",1,t,!0),L("Query.off",2,e,!0),M("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new cn(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new pn(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},yn.prototype.once=function(t,e,n,r){var i=this;P("Query.once",1,4,arguments.length),Bt("Query.once",1,t,!1),L("Query.once",2,e,!0);var o=yn.getCancelAndContextArgs_("Query.once",n,r),s=!0,a=new f;a.promise.catch((function(){}));var u=function(n){s&&(s=!1,i.off(t,u),e&&e.bind(o.context)(n),a.resolve(n))};return this.on(t,u,(function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),a.reject(e)})),a.promise},yn.prototype.limitToFirst=function(t){if(P("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new yn(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},yn.prototype.limitToLast=function(t){if(P("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new yn(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},yn.prototype.orderByChild=function(t){if(P("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Wt("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new It(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new tn(e),r=this.queryParams_.orderBy(n);return yn.validateQueryEndpoints_(r),new yn(this.repo,this.path,r,!0)},yn.prototype.orderByKey=function(){P("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(de);return yn.validateQueryEndpoints_(t),new yn(this.repo,this.path,t,!0)},yn.prototype.orderByPriority=function(){P("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Se);return yn.validateQueryEndpoints_(t),new yn(this.repo,this.path,t,!0)},yn.prototype.orderByValue=function(){P("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Ze);return yn.validateQueryEndpoints_(t),new yn(this.repo,this.path,t,!0)},yn.prototype.startAt=function(t,e){void 0===t&&(t=null),P("Query.startAt",0,2,arguments.length),Ut("Query.startAt",1,t,this.path,!0),Vt("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(yn.validateLimit_(n),yn.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new yn(this.repo,this.path,n,this.orderByCalled_)},yn.prototype.endAt=function(t,e){void 0===t&&(t=null),P("Query.endAt",0,2,arguments.length),Ut("Query.endAt",1,t,this.path,!0),Vt("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(yn.validateLimit_(n),yn.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new yn(this.repo,this.path,n,this.orderByCalled_)},yn.prototype.equalTo=function(t,e){if(P("Query.equalTo",1,2,arguments.length),Ut("Query.equalTo",1,t,this.path,!1),Vt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},yn.prototype.toString=function(){return P("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},yn.prototype.toJSON=function(){return P("Query.toJSON",0,1,arguments.length),this.toString()},yn.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},yn.prototype.queryIdentifier=function(){var t=this.queryObject(),e=gt(t);return"{}"===e?"default":e},yn.prototype.isEqual=function(t){if(P("Query.isEqual",1,1,arguments.length),!(t instanceof yn))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},yn.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,L(t,3,r.cancel,!0),r.context=n,M(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(O(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(yn.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),yn);function yn(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var mn=(vn.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},vn.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new vn);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},vn.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Se,(function(t,e){n.remember(new It(t),e)})),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},vn.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new It(t.toString()+"/"+n);r.forEachTree(i,e)}))},vn.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},vn);function vn(){this.value=null,this.children=new Map}function gn(t,e){return t&&"object"==typeof t?(l(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}var bn,wn,_n=function(t,e){var n,r=gn(t.getPriority().val(),e);if(t.isLeafNode()){var i=t,o=gn(i.getValue(),e);return o!==i.getValue()||r!==i.getPriority().val()?new _e(o,Xe(r)):t}var s=t;return r!==(n=s).getPriority().val()&&(n=n.updatePriority(new _e(r))),s.forEachChild(Se,(function(t,r){var i=_n(r,e);i!==r&&(n=n.updateImmediateChild(t,i))})),n};(wn=bn=bn||{})[wn.OVERWRITE=0]="OVERWRITE",wn[wn.MERGE=1]="MERGE",wn[wn.ACK_USER_WRITE=2]="ACK_USER_WRITE",wn[wn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var En=(Tn.User=new Tn(!0,!1,null,!1),Tn.Server=new Tn(!1,!0,null,!1),Tn.forServerTaggedQuery=function(t){return new Tn(!1,!0,t,!0)},Tn);function Tn(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,l(!r||e,"Tagged queries must be from server.")}var Sn,In=(Cn.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return l(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new It(t));return new Cn(It.Empty,e,this.revert)}return l(this.path.getFront()===t,"operationForChild called for unrelated child."),new Cn(this.path.popFront(),this.affectedTree,this.revert)},Cn);function Cn(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=bn.ACK_USER_WRITE,this.source=En.User}var kn=(An.fromObject=function(t){var e=An.Empty;return bt(t,(function(t,n){e=e.set(new It(t),n)})),e},An.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},An.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:It.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new It(n).child(i.path),value:i.value}},An.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},An.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):An.Empty},An.prototype.set=function(t,e){if(t.isEmpty())return new An(e,this.children);var n=t.getFront(),r=(this.children.get(n)||An.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new An(this.value,i)},An.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?An.Empty:new An(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?An.Empty:new An(this.value,i)}return this},An.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},An.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n,r=t.getFront(),i=(this.children.get(r)||An.Empty).setTree(t.popFront(),e);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new An(this.value,n)},An.prototype.fold=function(t){return this.fold_(It.Empty,t)},An.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},An.prototype.findOnPath=function(t,e){return this.findOnPath_(t,It.Empty,e)},An.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},An.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,It.Empty,e)},An.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):An.Empty},An.prototype.foreach=function(t){this.foreach_(It.Empty,t)},An.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},An.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},An.Empty=new An(null),An);function An(t,e){void 0===e&&(e=Sn=Sn||new De(it)),this.value=t,this.children=e}var Nn=(xn.prototype.operationForChild=function(t){return this.path.isEmpty()?new xn(this.source,It.Empty):new xn(this.source,this.path.popFront())},xn);function xn(t,e){this.source=t,this.path=e,this.type=bn.LISTEN_COMPLETE}var Dn=(Rn.prototype.operationForChild=function(t){return this.path.isEmpty()?new Rn(this.source,It.Empty,this.snap.getImmediateChild(t)):new Rn(this.source,this.path.popFront(),this.snap)},Rn);function Rn(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=bn.OVERWRITE}var Pn=(On.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new It(t));return e.isEmpty()?null:e.value?new Dn(this.source,It.Empty,e.value):new On(this.source,It.Empty,e)}return l(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new On(this.source,this.path.popFront(),this.children)},On.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},On);function On(t,e,n){this.source=t,this.path=e,this.children=n,this.type=bn.MERGE}var Ln=(Mn.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Mn.prototype.isFiltered=function(){return this.filtered_},Mn.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Mn.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Mn.prototype.getNode=function(){return this.node_},Mn);function Mn(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Fn=(Un.prototype.updateEventSnap=function(t,e,n){return new Un(new Ln(t,e,n),this.serverCache_)},Un.prototype.updateServerSnap=function(t,e,n){return new Un(this.eventCache_,new Ln(t,e,n))},Un.prototype.getEventCache=function(){return this.eventCache_},Un.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Un.prototype.getServerCache=function(){return this.serverCache_},Un.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Un.Empty=new Un(new Ln(ze.EMPTY_NODE,!1,!1),new Ln(ze.EMPTY_NODE,!1,!1)),Un);function Un(t,e){this.eventCache_=t,this.serverCache_=e}var jn=(qn.valueChange=function(t){return new qn(qn.VALUE,t)},qn.childAddedChange=function(t,e){return new qn(qn.CHILD_ADDED,e,t)},qn.childRemovedChange=function(t,e){return new qn(qn.CHILD_REMOVED,e,t)},qn.childChangedChange=function(t,e,n){return new qn(qn.CHILD_CHANGED,e,t,n)},qn.childMovedChange=function(t,e){return new qn(qn.CHILD_MOVED,e,t)},qn.CHILD_ADDED="child_added",qn.CHILD_REMOVED="child_removed",qn.CHILD_CHANGED="child_changed",qn.CHILD_MOVED="child_moved",qn.VALUE="value",qn);function qn(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Bn=(Vn.prototype.updateChild=function(t,e,n,r,i,o){l(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(jn.childRemovedChange(e,s)):l(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(jn.childAddedChange(e,n)):o.trackChildChange(jn.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Vn.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Se,(function(t,r){e.hasChild(t)||n.trackChildChange(jn.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Se,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(jn.childChangedChange(e,r,i))}else n.trackChildChange(jn.childAddedChange(e,r))}))),e.withIndex(this.index_)},Vn.prototype.updatePriority=function(t,e){return t.isEmpty()?ze.EMPTY_NODE:t.updatePriority(e)},Vn.prototype.filtersNodes=function(){return!1},Vn.prototype.getIndexedFilter=function(){return this},Vn.prototype.getIndex=function(){return this.index_},Vn);function Vn(t){this.index_=t}var Wn=(Hn.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;l(e===jn.CHILD_ADDED||e===jn.CHILD_CHANGED||e===jn.CHILD_REMOVED,"Only child changes supported for tracking"),l(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===jn.CHILD_ADDED&&i===jn.CHILD_REMOVED)this.changeMap.set(n,jn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===jn.CHILD_REMOVED&&i===jn.CHILD_ADDED)this.changeMap.delete(n);else if(e===jn.CHILD_REMOVED&&i===jn.CHILD_CHANGED)this.changeMap.set(n,jn.childRemovedChange(n,r.oldSnap));else if(e===jn.CHILD_CHANGED&&i===jn.CHILD_ADDED)this.changeMap.set(n,jn.childAddedChange(n,t.snapshotNode));else{if(e!==jn.CHILD_CHANGED||i!==jn.CHILD_CHANGED)throw h("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,jn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Hn.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Hn);function Hn(){this.changeMap=new Map}function zn(){}var Gn=new(zn.prototype.getCompleteChild=function(t){return null},zn.prototype.getChildAfterChild=function(t,e,n){return null},zn),Kn=(Qn.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ln(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Qn.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Qn);function Qn(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Yn=function(t,e){this.viewCache=t,this.changes=e},Xn=($n.prototype.assertIndexed=function(t){l(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),l(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},$n.prototype.applyOperation=function(t,e,n,r){var i,o,s=new Wn;if(e.type===bn.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(l(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===bn.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(l(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===bn.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==bn.LISTEN_COMPLETE)throw h("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var p=s.getChanges();return $n.maybeAddValueEvent_(t,i,p),new Yn(i,p)},$n.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(jn.valueChange(e.getCompleteEventSnap()))}},$n.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(l(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof ze?u:ze.EMPTY_NODE);s=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var p=e.getFront();if(".priority"===p){l(1===e.getLength(),"Can't have a priority with additional path components");var f=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,f,a);s=null!=d?this.filter_.updatePriority(f,d):o.getNode()}else{var y=e.popFront(),m=void 0;if(o.isCompleteForChild(p)){a=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);m=null!=v?o.getNode().getImmediateChild(p).updateChild(y,v):o.getNode().getImmediateChild(p)}else m=n.calcCompleteChild(p,t.getServerCache());s=null!=m?this.filter_.updateChild(o.getNode(),p,m,y,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},$n.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var p=e.popFront(),f=u.getNode().getImmediateChild(h).updateChild(p,n);a=".priority"===h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,p,Gn,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Kn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},$n.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Kn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),p=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var d=c.getCompleteChild(l);f=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):ze.EMPTY_NODE}if(p.equals(f))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,f,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},$n.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},$n.prototype.applyUserMerge_=function(t,e,n,r,i,o){var s=this,a=t;return n.foreach((function(n,u){var c=e.child(n);$n.cacheHasChild_(t,c.getFront())&&(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),n.foreach((function(n,u){var c=e.child(n);$n.cacheHasChild_(t,c.getFront())||(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),a},$n.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},$n.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:kn.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new It(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),p=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new It(e),p,r,i,o,s)}})),c},$n.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=kn.Empty;return a.getNode().forEachChild(de,(function(t,e){u=u.set(new It(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=kn.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},$n.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Gn,r)},$n.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Kn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();l(h instanceof ze,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}u=this.filter_.updateFullNode(a,c=c,i)}else{var p=e.getFront(),f=n.calcCompleteChild(p,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(p)&&(f=a.getImmediateChild(p)),(u=null!=f?this.filter_.updateChild(a,p,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(a,p,ze.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(It.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},$n);function $n(t){this.filter_=t}var Jn=(Zn.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===jn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(jn.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,jn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,jn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,jn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,jn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,jn.VALUE,t,n,e),i},Zn.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},Zn.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Zn.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw h("Should only compare child_ events.");var n=new oe(t.childName,t.snapshotNode),r=new oe(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Zn);function Zn(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var tr,er=(nr.prototype.getQuery=function(){return this.query_},nr.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},nr.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},nr.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},nr.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},nr.prototype.removeEventRegistration=function(t,e){var n=[];if(e){l(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},nr.prototype.applyOperation=function(t,e,n){t.type===bn.MERGE&&null!==t.source.queryId&&(l(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),l(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),l(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},nr.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Se,(function(t,e){n.push(jn.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(jn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},nr.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},nr);function nr(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Bn(n.getIndex()),i=n.getNodeFilter();this.processor_=new Xn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(ze.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ze.EMPTY_NODE,s.getNode(),null),c=new Ln(a,o.isFullyInitialized(),r.filtersNodes()),l=new Ln(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Fn(l,c),this.eventGenerator_=new Jn(this.query_)}var rr=(Object.defineProperty(ir,"__referenceConstructor",{get:function(){return l(tr,"Reference.ts has not been loaded"),tr},set:function(t){l(!tr,"__referenceConstructor has already been defined"),tr=t},enumerable:!0,configurable:!0}),ir.prototype.isEmpty=function(){return 0===this.views.size},ir.prototype.applyOperation=function(t,e,n){var r,i,s=t.source.queryId;if(null!==s){var a=this.views.get(s);return l(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var u=[];try{for(var c=o(this.views.values()),h=c.next();!h.done;h=c.next())u=u.concat((a=h.value).applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u},ir.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a,u=n.calcCompleteEventCache(i?r:null);a=!!u||(u=r instanceof ze?n.calcCompleteEventChildren(r):ze.EMPTY_NODE,!1);var c=new Fn(new Ln(u,a,!1),new Ln(r,i,!1));s=new er(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},ir.prototype.removeEventRegistration=function(t,e,n){var r,i,a=t.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=o(this.views.entries()),p=h.next();!p.done;p=h.next()){var f=s(p.value,2),d=f[0],y=f[1];c=c.concat(y.removeEventRegistration(e,n)),y.isEmpty()&&(this.views.delete(d),y.getQuery().getQueryParams().loadsAllData()||u.push(y.getQuery()))}}catch(t){r={error:t}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}else(y=this.views.get(a))&&(c=c.concat(y.removeEventRegistration(e,n)),y.isEmpty()&&(this.views.delete(a),y.getQuery().getQueryParams().loadsAllData()||u.push(y.getQuery())));return l&&!this.hasCompleteView()&&u.push(new ir.__referenceConstructor(t.repo,t.path)),{removed:u,events:c}},ir.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=o(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},ir.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=o(this.views.values()),s=i.next();!s.done;s=i.next())r=r||s.value.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},ir.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},ir.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ir.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ir.prototype.getCompleteView=function(){var t,e;try{for(var n=o(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},ir);function ir(){this.views=new Map}var or=(sr.prototype.addWrite=function(t,e){if(t.isEmpty())return new sr(new kn(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=It.relativePath(r,t);return i=i.updateChild(o,e),new sr(this.writeTree_.set(r,i))}var s=new kn(e);return new sr(this.writeTree_.setTree(t,s))},sr.prototype.addWrites=function(t,e){var n=this;return bt(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},sr.prototype.removeWrite=function(t){return t.isEmpty()?sr.Empty:new sr(this.writeTree_.setTree(t,kn.Empty))},sr.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},sr.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(It.relativePath(e.path,t)):null},sr.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Se,(function(e,n){t.push(new oe(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new oe(e,n.value))})),t},sr.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new sr(null!=e?new kn(e):this.writeTree_.subtree(t))},sr.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},sr.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(l(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(It.Empty,this.writeTree_,t)},sr.Empty=new sr(new kn(null)),sr);function sr(t){this.writeTree_=t}var ar=(ur.prototype.childWrites=function(t){return new cr(t,this)},ur.prototype.addOverwrite=function(t,e,n,r){l(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},ur.prototype.addMerge=function(t,e,n){l(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},ur.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},ur.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));l(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(n<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):bt(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0)},ur.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},ur.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);return!r&&i.isEmpty()?e:r||null!=e||i.hasCompleteWrite(It.Empty)?ur.layerTree_(this.allWrites_,(function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t).apply(a=e||ze.EMPTY_NODE):null}var o=this.visibleWrites_.getCompleteNode(t);if(null!=o)return o;var s=this.visibleWrites_.childCompoundWrite(t);if(s.isEmpty())return e;if(null!=e||s.hasCompleteWrite(It.Empty)){var a=e||ze.EMPTY_NODE;return s.apply(a)}return null},ur.prototype.calcCompleteEventChildren=function(t,e){var n=ze.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Se,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Se,(function(t,e){var r=i.childCompoundWrite(new It(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},ur.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){l(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},ur.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},ur.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},ur.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(It.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=h.getNext();p&&c.length<r;)0!==l(p,n)&&c.push(p),p=h.getNext();return c},ur.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},ur.prototype.resetTree_=function(){this.visibleWrites_=ur.layerTree_(this.allWrites_,ur.DefaultFilter_,It.Empty),this.lastWriteId_=0<this.allWrites_.length?this.allWrites_[this.allWrites_.length-1].writeId:-1},ur.DefaultFilter_=function(t){return t.visible},ur.layerTree_=function(t,e,n){for(var r=or.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=It.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=It.relativePath(s,n),r=r.addWrite(It.Empty,o.snap.getChild(a)));else{if(!o.children)throw h("WriteRecord should have .snap or .children");if(n.contains(s))a=It.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=It.relativePath(s,n)).isEmpty())r=r.addWrites(It.Empty,o.children);else{var u=C(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(It.Empty,c)}}}}}return r},ur);function ur(){this.visibleWrites_=or.Empty,this.allWrites_=[],this.lastWriteId_=-1}var cr=(lr.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},lr.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},lr.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},lr.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},lr.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},lr.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},lr.prototype.child=function(t){return new lr(this.treePath_.child(t),this.writeTree_)},lr);function lr(t,e){this.treePath_=t,this.writeTree_=e}var hr=(pr.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Dn(En.User,t,e)):[]},pr.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=kn.fromObject(e);return this.applyOperationToSyncPoints_(new Pn(En.User,t,r))},pr.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=kn.Empty;return null!=n.snap?r=r.set(It.Empty,!0):bt(n.children,(function(t,e){r=r.set(new It(t),e)})),this.applyOperationToSyncPoints_(new In(n.path,r,e))}return[]},pr.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Dn(En.Server,t,e))},pr.prototype.applyServerMerge=function(t,e){var n=kn.fromObject(e);return this.applyOperationToSyncPoints_(new Pn(En.Server,t,n))},pr.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Nn(En.Server,t))},pr.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=pr.parseQueryKey_(r),o=i.path,s=i.queryId,a=It.relativePath(o,t),u=new Dn(En.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},pr.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=pr.parseQueryKey_(r),o=i.path,s=i.queryId,a=It.relativePath(o,t),u=kn.fromObject(e),c=new Pn(En.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},pr.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=pr.parseQueryKey_(n),i=r.path,o=r.queryId,s=It.relativePath(i,t),a=new Nn(En.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},pr.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,(function(t,e){var o=It.relativePath(t,n);r=r||e.getCompleteServerCache(o),i=i||e.hasCompleteView()}));var o,s=this.syncPointTree_.get(n);s?(i=i||s.hasCompleteView(),r=r||s.getCompleteServerCache(It.Empty)):(s=new rr,this.syncPointTree_=this.syncPointTree_.set(n,s)),null!=r?o=!0:(o=!1,r=ze.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild((function(t,e){var n=e.getCompleteServerCache(It.Empty);n&&(r=r.updateImmediateChild(t,n))})));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=pr.makeQueryKey_(t);l(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=pr.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(n),p=s.addEventRegistration(t,e,h,r,o);if(!a&&!i){var f=s.viewForQuery(t);p=p.concat(this.setupListener_(t,f))}return p},pr.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(i,(function(t,e){return e.hasCompleteView()}));if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(h),f=0;f<p.length;++f){var d=p[f],y=d.getQuery(),m=this.createListenerForView_(d);this.listenProvider_.startListening(pr.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(pr.queryForListening_(t),null):u.forEach((function(t){var e=r.queryToTagMap.get(pr.makeQueryKey_(t));r.listenProvider_.stopListening(pr.queryForListening_(t),e)}))),this.removeTags_(u)}return s},pr.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=It.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},pr.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),bt(n,(function(t,e){r=r.concat(e)})),r}))},pr.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=pr.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},pr.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},pr.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(pr.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)l(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),bt(n,(function(t,e){r=r.concat(e)})),r})),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(pr.queryForListening_(c),this.tagForQuery_(c))}return o},pr.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ze.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},pr.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},pr.parseQueryKey_=function(t){var e=t.indexOf("$");return l(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new It(t.substr(0,e))}},pr.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},pr.prototype.tagForQuery_=function(t){var e=pr.makeQueryKey_(t);return this.queryToTagMap.get(e)},pr.getNextQueryTag_=function(){return pr.nextQueryTag_++},pr.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);l(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},pr.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(It.Empty))},pr.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(It.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(It.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},pr.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(It.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(It.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},pr.nextQueryTag_=1,pr);function pr(t){this.listenProvider_=t,this.syncPointTree_=kn.Empty,this.pendingWriteTree_=new ar,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var fr=(dr.prototype.getNode=function(t){return this.rootNode_.getChild(t)},dr.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},dr);function dr(){this.rootNode_=ze.EMPTY_NODE}var yr=(mr.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(J("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},mr.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},mr.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},mr.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';nt(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},mr);function mr(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}var vr=(gr.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),I(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},gr.prototype.get=function(){return function(t){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(var r in n)n.hasOwnProperty(r)&&(e[r]=t(e[r],n[r]));return e}(void 0,t)}(this.counters_)},gr);function gr(){this.counters_={}}var br=(wr.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new vr),this.collections_[e]},wr.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},wr.collections_={},wr.reporters_={},wr);function wr(){}var _r=(Er.prototype.get=function(){var t=this.collection_.get(),e=i({},t);return this.last_&&bt(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},Er);function Er(t){this.collection_=t,this.last_=null}var Tr=(Sr.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Sr.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;bt(e,(function(e,i){0<i&&I(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Et(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Sr);function Sr(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new _r(t);var n=1e4+2e4*Math.random();Et(this.reportStats_.bind(this),Math.floor(n))}var Ir=(Cr.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new kr(i)),e.add(r)}e&&this.eventLists_.push(e)},Cr.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},Cr.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},Cr.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Cr);function Cr(){this.eventLists_=[],this.recursionDepth_=0}var kr=(Ar.prototype.add=function(t){this.events_.push(t)},Ar.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();ft&&J("event: "+e.toString()),_t(n)}}},Ar.prototype.getPath=function(){return this.path_},Ar);function Ar(t){this.path_=t,this.events_=[]}var Nr=(xr.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=a(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},xr.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},xr.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},xr.prototype.validateEventType_=function(t){l(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},xr);function xr(t){this.allowedEvents_=t,this.listeners_={},l(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Dr,Rr=(r(Pr,Dr=Nr),Pr.getInstance=function(){return new Pr},Pr.prototype.getInitialEvent=function(t){return l("visible"===t,"Unknown event type: "+t),[this.visible_]},Pr);function Pr(){var t,e,n=Dr.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var Or,Lr=(r(Mr,Or=Nr),Mr.getInstance=function(){return new Mr},Mr.prototype.getInitialEvent=function(t){return l("online"===t,"Unknown event type: "+t),[this.online_]},Mr.prototype.currentlyOnline=function(){return this.online_},Mr);function Mr(){var t=Or.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||y()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var Fr=(Ur.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Ur.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&_t((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},Ur);function Ur(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var jr=(qr.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Fr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Br((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Nt)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},qr.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},qr.forceAllow=function(){qr.forceAllow_=!0},qr.forceDisallow=function(){qr.forceDisallow_=!0},qr.isAvailable=function(){return!!qr.forceAllow_||!(qr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},qr.prototype.markConnectionHealthy=function(){},qr.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},qr.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},qr.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},qr.prototype.send=function(t){var e=T(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=st(function(t){var e=u(t);return p.encodeByteArray(e,!0)}(e),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},qr.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},qr.prototype.incrementIncomingBytes_=function(t){var e=T(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},qr);function qr(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Z(t),this.stats_=br.getCollection(e),this.urlFn=function(t){return e.connectionURL(Dt,t)}}var Br=(Vr.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||J("No IE domain setting required")}catch(r){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},Vr.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Vr.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Vr.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},Vr.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Vr.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},Vr.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){J("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},Vr);function Vr(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ht(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Vr.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){J("frame writing exception"),t.stack&&J(t.stack),J(t)}}var Wr="",Hr=null;"undefined"!=typeof MozWebSocket?Hr=MozWebSocket:"undefined"!=typeof WebSocket&&(Hr=WebSocket);var zr=(Gr.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Nt)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(xt,r)},Gr.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ut.set("previous_websocket_failure",!0);try{this.mySock=new Hr(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var r=t.message||t.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},Gr.prototype.start=function(){},Gr.forceDisallow=function(){Gr.forceDisallow_=!0},Gr.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Hr&&!Gr.forceDisallow_},Gr.previouslyFailed=function(){return ut.isInMemoryStorage||!0===ut.get("previous_websocket_failure")},Gr.prototype.markConnectionHealthy=function(){ut.remove("previous_websocket_failure")},Gr.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=E(e);this.onMessage(n)}},Gr.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Gr.prototype.extractFrameCount_=function(t){if(l(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Gr.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},Gr.prototype.send=function(t){this.resetKeepAlive();var e=T(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=st(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Gr.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Gr.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Gr.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Gr.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Gr.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Gr.responsesRequiredToBeHealthy=2,Gr.healthyTimeout=3e4,Gr);function Gr(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Z(this.connId),this.stats_=br.getCollection(e),this.connURL=Gr.connectionURL_(e,n,r)}var Kr=(Object.defineProperty(Qr,"ALL_TRANSPORTS",{get:function(){return[jr,zr]},enumerable:!0,configurable:!0}),Qr.prototype.initTransports_=function(t){var e,n,r=zr&&zr.isAvailable(),i=r&&!zr.previouslyFailed();if(t.webSocketOnly&&(r||nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[zr];else{var s=this.transports_=[];try{for(var a=o(Qr.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},Qr.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Qr.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Qr);function Qr(t){this.initTransports_(t)}var Yr=(Xr.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=Et((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},Xr.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Xr.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},Xr.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},Xr.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},Xr.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Xr.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Xr.prototype.onSecondaryMessageReceived_=function(t){var e=ot("t",t),n=ot("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Xr.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Xr.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Xr.prototype.onPrimaryMessageReceived_=function(t){var e=ot("t",t),n=ot("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Xr.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Xr.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Xr.prototype.onControl_=function(t){var e=ot("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?tt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tt("Unknown control packet command: "+e)}},Xr.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&nt("Protocol version mismatch detected"),this.tryStartUpgrade_())},Xr.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Xr.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Et((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},Xr.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Xr.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Et((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Xr.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Xr.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Xr.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ut.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Xr.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Xr.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Xr.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Xr.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Xr);function Xr(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Z("c:"+this.id+":"),this.transportManager_=new Kr(e),this.log_("Connection created"),this.start_()}var $r=(Jr.prototype.put=function(t,e,n,r){},Jr.prototype.merge=function(t,e,n,r){},Jr.prototype.refreshAuthToken=function(t){},Jr.prototype.onDisconnectPut=function(t,e,n){},Jr.prototype.onDisconnectMerge=function(t,e,n){},Jr.prototype.onDisconnectCancel=function(t,e){},Jr.prototype.reportStats=function(t){},Jr);function Jr(){}var Zr,ti=(r(ei,Zr=$r),ei.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(T(i)),l(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},ei.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),l(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),l(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},ei.prototype.sendListen_=function(t){var e=this,n=t.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n.queryObject(),o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,a=o.s;ei.warnOnListenWarnings_(s,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==a&&e.removeListen_(r,i),t.onComplete&&t.onComplete(a,s))}))},ei.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&I(t,"w")){var n=C(t,"w");Array.isArray(n)&&~n.indexOf("no_index")&&nt('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+e.getQueryParams().getIndex().toString()+'" at '+e.path.toString()+" to your security rules for better performance.")}},ei.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},ei.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){var e=S(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},ei.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=function(t){var e=S(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},ei.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),l(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},ei.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},ei.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},ei.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},ei.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},ei.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},ei.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},ei.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},ei.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},ei.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},ei.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},ei.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+T(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},ei.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):tt("Unrecognized action received from server: "+T(t)+"\nAre you using the latest client?")},ei.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},ei.prototype.scheduleConnect_=function(t){var e=this;l(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},ei.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},ei.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},ei.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},ei.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ei.nextConnectionId_++,i=this,o=this.lastSessionId,s=!1,a=null,u=function(){a?a.close():(s=!0,n())};this.realtime_={close:u,sendRequest:function(t){l(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(u){s?J("getToken() completed but was canceled"):(J("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,a=new Yr(r,i.repoInfo_,t,e,n,(function(t){nt(t+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")}),o))})).then(null,(function(t){i.log_("Failed to get token: "+t),s||u()}))}},ei.prototype.interrupt=function(t){J("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},ei.prototype.resume=function(t){J("Resuming connection for reason: "+t),delete this.interruptReasons_[t],k(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},ei.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},ei.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},ei.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return gt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},ei.prototype.removeListen_=function(t,e){var n,r=new It(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},ei.prototype.onAuthRevoked_=function(t,e){J("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},ei.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},ei.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=o(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,o(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},ei.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Wr.replace(/\./g,"-")]=1,y()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)},ei.prototype.shouldReconnect_=function(){var t=Lr.getInstance().currentlyOnline();return k(this.interruptReasons_)&&t},ei.nextPersistentConnectionId_=0,ei.nextConnectionId_=0,ei);function ei(t,e,n,r,i,o){var s=Zr.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=ei.nextPersistentConnectionId_++,s.log_=Z("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Rr.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Lr.getInstance().on("online",s.onOnline_,s),s}var ni,ri=(r(ii,ni=$r),ii.prototype.reportStats=function(t){throw new Error("Method not implemented.")},ii.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(l(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},ii.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=ii.getListenId_(t,n),a={};this.listens_[s]=a;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,(function(t,e){var u=e;404===t&&(t=u=null),null===t&&i.onDataUpdate_(o,u,!1,n),C(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},ii.prototype.unlisten=function(t,e){var n=ii.getListenId_(t,e);delete this.listens_[n]},ii.prototype.refreshAuthToken=function(t){},ii.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&a.status<300){try{t=E(a.responseText)}catch(t){nt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&nt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},ii);function ii(t,e,n){var r=ni.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Z("p:rest:"),r.listens_={},r}var oi="repo_interrupt",si=(ai.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},ai.prototype.name=function(){return this.repoInfo_.namespace},ai.prototype.serverTime=function(){var t=this.infoData_.getNode(new It(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},ai.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},ai.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new It(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=A(e,(function(t){return Xe(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Xe(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=A(e,(function(t){return Xe(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Xe(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},ai.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},ai.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},ai.prototype.onServerInfoUpdate_=function(t){var e=this;bt(t,(function(t,n){e.updateInfo_(t,n)}))},ai.prototype.updateInfo_=function(t,e){var n=new It("/.info/"+t),r=Xe(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},ai.prototype.getNextWriteId_=function(){return this.nextWriteId_++},ai.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Xe(e,n),a=_n(s,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||nt("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},ai.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(bt(e,(function(t,e){i=!1;var n=Xe(e);s[t]=_n(n,o)})),i)J("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||nt("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=0<s.length?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),bt(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},ai.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new mn;return t.forEachTree(new It(""),(function(t,r){n.remember(t,_n(r,e))})),n}(this.onDisconnect_,e),r=[];n.forEachTree(It.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new mn,this.eventQueue_.raiseEventsForChangedPath(It.Empty,r)},ai.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},ai.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Xe(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},ai.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Xe(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},ai.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(k(e))return J("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&bt(e,(function(e,n){var i=Xe(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},ai.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},ai.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},ai.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(oi)},ai.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(oi)},ai.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new _r(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);bt(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},ai.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},ai.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),J.apply(void 0,a([n],t))},ai.prototype.callOnCompleteCallback=function(t,e,n){t&&_t((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(ai.prototype,"database",{get:function(){return this.__database||(this.__database=new Ci(this))},enumerable:!0,configurable:!0}),ai);function ai(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ir,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mn,this.persistentConnection_=null;var o=new yr(n,r);if(this.stats_=br.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new ri(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{T(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new ti(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=br.getOrCreateReporter(t,(function(){return new Tr(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new fr,this.infoSyncTree_=new hr({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new hr({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}var ui=(ci.prototype.getStartPost=function(){return this.startPost_},ci.prototype.getEndPost=function(){return this.endPost_},ci.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},ci.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new oe(e,n))||(n=ze.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},ci.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ze.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ze.EMPTY_NODE);var i=this;return e.forEachChild(Se,(function(t,e){i.matches(new oe(t,e))||(r=r.updateImmediateChild(t,ze.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},ci.prototype.updatePriority=function(t,e){return t},ci.prototype.filtersNodes=function(){return!0},ci.prototype.getIndexedFilter=function(){return this.indexedFilter_},ci.prototype.getIndex=function(){return this.index_},ci.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},ci.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},ci);function ci(t){this.indexedFilter_=new Bn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ci.getStartPost_(t),this.endPost_=ci.getEndPost_(t)}var li=(hi.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new oe(e,n))||(n=ze.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},hi.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ze.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ze.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ze.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ze.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},hi.prototype.updatePriority=function(t,e){return t},hi.prototype.filtersNodes=function(){return!0},hi.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},hi.prototype.getIndex=function(){return this.index_},hi.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;l(a.numChildren()===this.limit_,"");var u=new oe(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var p=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=d)return null!=i&&i.trackChildChange(jn.childChangedChange(e,n,p)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(jn.childRemovedChange(e,p));var y=a.updateImmediateChild(e,ze.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(jn.childAddedChange(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}return n.isEmpty()?t:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(jn.childRemovedChange(c.name,c.node)),i.trackChildChange(jn.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ze.EMPTY_NODE)):t},hi);function hi(t){this.rangedFilter_=new ui(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var pi=(fi.prototype.hasStart=function(){return this.startSet_},fi.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===fi.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},fi.prototype.getIndexStartValue=function(){return l(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},fi.prototype.getIndexStartName=function(){return l(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yt},fi.prototype.hasEnd=function(){return this.endSet_},fi.prototype.getIndexEndValue=function(){return l(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},fi.prototype.getIndexEndName=function(){return l(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mt},fi.prototype.hasLimit=function(){return this.limitSet_},fi.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},fi.prototype.getLimit=function(){return l(this.limitSet_,"Only valid if limit has been set"),this.limit_},fi.prototype.getIndex=function(){return this.index_},fi.prototype.copy_=function(){var t=new fi;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},fi.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},fi.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=fi.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},fi.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=fi.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},fi.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},fi.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},fi.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},fi.prototype.getQueryObject=function(){var t=fi.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==Se&&(e[t.INDEX]=this.index_.toString()),e},fi.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},fi.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Se},fi.prototype.getNodeFilter=function(){return this.loadsAllData()?new Bn(this.getIndex()):this.hasLimit()?new li(this):new ui(this)},fi.prototype.toRestQueryStringParameters=function(){var t,e=fi.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Se?e.PRIORITY_INDEX:this.index_===Ze?e.VALUE_INDEX:this.index_===de?e.KEY_INDEX:(l(this.index_ instanceof tn,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=T(t),this.startSet_&&(n[e.START_AT]=T(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+T(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=T(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+T(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},fi.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},fi.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},fi.DEFAULT=new fi,fi);function fi(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Se}var di,yi=(r(mi,di=dn),mi.prototype.getKey=function(){return P("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},mi.prototype.child=function(t){return P("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof It||(null===this.path.getFront()?Wt("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),!1):Wt("Reference.child",1,t,!1)),new mi(this.repo,this.path.child(t));var e},mi.prototype.getParent=function(){P("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new mi(this.repo,t)},mi.prototype.getRoot=function(){P("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},mi.prototype.databaseProp=function(){return this.repo.database},mi.prototype.set=function(t,e){P("Reference.set",1,2,arguments.length),Ht("Reference.set",this.path),Ut("Reference.set",1,t,this.path,!1),L("Reference.set",2,e,!0);var n=new f;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},mi.prototype.update=function(t,e){if(P("Reference.update",1,2,arguments.length),Ht("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,nt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jt("Reference.update",1,t,this.path,!1),L("Reference.update",2,e,!0);var i=new f;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},mi.prototype.setWithPriority=function(t,e,n){if(P("Reference.setWithPriority",2,3,arguments.length),Ht("Reference.setWithPriority",this.path),Ut("Reference.setWithPriority",1,t,this.path,!1),qt("Reference.setWithPriority",2,e,!1),L("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new f;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},mi.prototype.remove=function(t){return P("Reference.remove",0,1,arguments.length),Ht("Reference.remove",this.path),L("Reference.remove",1,t,!0),this.set(null,t)},mi.prototype.transaction=function(t,e,n){if(P("Reference.transaction",1,3,arguments.length),Ht("Reference.transaction",this.path),L("Reference.transaction",1,t,!1),L("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(O("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new f;return"function"==typeof e&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,t,(function(t,n,i){t?r.reject(t):r.resolve(new Zt(n,i)),"function"==typeof e&&e(t,n,i)}),n),r.promise},mi.prototype.setPriority=function(t,e){P("Reference.setPriority",1,2,arguments.length),Ht("Reference.setPriority",this.path),qt("Reference.setPriority",1,t,!1),L("Reference.setPriority",2,e,!0);var n=new f;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},mi.prototype.push=function(t,e){P("Reference.push",0,2,arguments.length),Ht("Reference.push",this.path),Ut("Reference.push",1,t,this.path,!0),L("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=ie(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},mi.prototype.onDisconnect=function(){return Ht("Reference.onDisconnect",this.path),new $t(this.repo,this.path)},Object.defineProperty(mi.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(mi.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(mi.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(mi.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),mi);function mi(t,e){if(!(t instanceof si))throw new Error("new Reference() no longer supported - use app.database().");return di.call(this,t,e,pi.DEFAULT,!1)||this}dn.__referenceConstructor=yi,rr.__referenceConstructor=yi;var vi,gi,bi=function(){this.children={},this.childCount=0,this.value=null},wi=(_i.prototype.subTree=function(t){for(var e=t instanceof It?t:new It(t),n=this,r=e.getFront();null!==r;)n=new _i(r,n,C(n.node_.children,r)||new bi),r=(e=e.popFront()).getFront();return n},_i.prototype.getValue=function(){return this.node_.value},_i.prototype.setValue=function(t){l(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},_i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},_i.prototype.hasChildren=function(){return 0<this.node_.childCount},_i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},_i.prototype.forEachChild=function(t){var e=this;bt(this.node_.children,(function(n,r){t(new _i(n,e,r))}))},_i.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},_i.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},_i.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},_i.prototype.path=function(){return new It(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},_i.prototype.name=function(){return this.name_},_i.prototype.parent=function(){return this.parent_},_i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},_i.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=I(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},_i);function _i(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new bi),this.name_=t,this.parent_=e,this.node_=n}(gi=vi=vi||{})[gi.RUN=0]="RUN",gi[gi.SENT=1]="SENT",gi[gi.COMPLETED=2]="COMPLETED",gi[gi.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",gi[gi.NEEDS_ABORT=4]="NEEDS_ABORT",si.MAX_TRANSACTION_RETRIES_=25,si.prototype.transactionsInit_=function(){this.transactionQueueTree_=new wi},si.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new yi(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:ht(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new nn(s.currentInputSnapshot,new yi(this,s.path),Se);s.onComplete(null,!1,c)}}else{Xt("transaction failed: Data returned ",u,s.path),s.status=vi.RUN;var h=this.transactionQueueTree_.subTree(t),p=h.getValue()||[];p.push(s),h.setValue(p);var f=void 0;"object"==typeof u&&null!==u&&I(u,".priority")?(f=C(u,".priority"),l(Ft(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||ze.EMPTY_NODE).getPriority().val(),f=f;var d=this.generateServerValues(),y=Xe(u,f),m=_n(y,d);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,m,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},si.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ze.EMPTY_NODE},si.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);l(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return t.status===vi.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},si.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];l(u.status===vi.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=vi.SENT,u.retryCount++;var c=It.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),p=t;this.server_.put(p.toString(),h,(function(r){n.log_("transaction put response",{path:p.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=vi.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new yi(n,e[s].path),c=new nn(a,u,Se);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)_t(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===vi.SENT_NEEDS_ABORT?vi.NEEDS_ABORT:vi.RUN;else for(nt("transaction at "+p.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=vi.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),s)},si.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},si.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===vi.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var s=t[o],a=It.relativePath(e,s.path),u=!1,c=void 0;if(l(null!==a,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===vi.NEEDS_ABORT)u=!0,c=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===vi.RUN)if(s.retryCount>=si.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,i);s.currentInputSnapshot=h;var p=t[o].update(h.val());if(void 0!==p){Xt("transaction failed: Data returned ",p,s.path);var f=Xe(p);"object"==typeof p&&null!=p&&I(p,".priority")||(f=f.updatePriority(h.getPriority()));var d=s.currentWriteId,y=this.generateServerValues(),m=_n(f,y);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],u&&(t[o].status=vi.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===c){var v=new yi(this,t[o].path),g=new nn(t[o].currentInputSnapshot,v,Se);n.push(t[o].onComplete.bind(null,null,!1,g))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)_t(n[o]);this.sendReadyTransactions_()}},si.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},si.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},si.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},si.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vi.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},si.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},si.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===vi.SENT_NEEDS_ABORT||(e[o].status===vi.SENT?(l(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=vi.SENT_NEEDS_ABORT,e[o].abortReason="set"):(l(e[o].status===vi.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)_t(n[o])}};var Ei,Ti="databaseURL",Si=(Ii.getInstance=function(){return Ei=Ei||new Ii},Ii.prototype.interrupt=function(){var t,e,n,r;try{for(var i=o(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,o(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Ii.prototype.resume=function(){var t,e,n,r;try{for(var i=o(Object.keys(this.repos_)),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,o(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Ii.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Ti];void 0===r&&et("Can't determine Firebase Database URL.  Be sure to include "+Ti+" option when calling firebase.initializeApp().");var i=Ot(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(o=(i=Ot(r="http://"+s+"?ns="+o.namespace)).repoInfo),zt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||et("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Ii.prototype.deleteRepo=function(t){var e=C(this.repos_,t.app.name);e&&C(e,t.repoInfo_.toURLString())===t||et("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Ii.prototype.createRepo=function(t,e,n){var r=C(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=C(r,t.toURLString());return i&&et("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new si(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Ii.prototype.forceRestClient=function(t){this.useRestClient_=t},Ii);function Ii(){this.repos_={},this.useRestClient_=!1}var Ci=(Object.defineProperty(ki.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),ki.prototype.ref=function(t){return this.checkDeleted_("ref"),P("database.ref",0,1,arguments.length),t instanceof yi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},ki.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),P(e,1,1,arguments.length);var n=Ot(t);zt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&et(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},ki.prototype.checkDeleted_=function(t){null===this.repo_&&et("Cannot call "+t+" on a deleted database.")},ki.prototype.goOffline=function(){P("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},ki.prototype.goOnline=function(){P("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},ki.ServerValue={TIMESTAMP:{".sv":"timestamp"}},ki);function ki(t){(this.repo_=t)instanceof si||et("Don't call new Database() directly - please use firebase.database()."),this.root_=new yi(t,It.Empty),this.INTERNAL=new Ai(this)}var Ai=(Ni.prototype.delete=function(){return function(t,e,n,r){return new(n=n||Promise)((function(e,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?e(t.value):new n((function(e){e(t.value)})).then(o,s)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function(){return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){return this.database.checkDeleted_("delete"),Si.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},Ni);function Ni(t){this.database=t}var xi=Object.freeze({__proto__:null,forceLongPolling:function(){zr.forceDisallow(),jr.forceAllow()},forceWebSockets:function(){jr.forceDisallow()},isWebSocketsAvailable:function(){return zr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Di=ti;ti.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ti.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ri,Pi,Oi=Object.freeze({__proto__:null,DataConnection:Di,RealTimeConnection:Yr,hijackHash:function(t){var e=ti.prototype.put;return ti.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){ti.prototype.put=e}},ConnectionTarget:Rt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Si.getInstance().forceRestClient(t)}}),Li=Ci.ServerValue;Ri=(Pi=n).SDK_VERSION,Wr=Ri,Pi.INTERNAL.registerComponent(new W("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Si.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:yi,Query:dn,Database:Ci,DataSnapshot:nn,enableLogging:$,INTERNAL:xi,ServerValue:Li,TEST_ACCESS:Oi}).setMultipleInstances(!0)),Pi.registerVersion("@firebase/database","0.5.20")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-database.js - be sure to load firebase-app.js first.")}},"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}function fireb_storage(){var t,e;t=this,e=function(e){"use strict";try{(function(){e=e&&e.hasOwnProperty("default")?e.default:e;var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i,o,s,a=(s=Error,n(i=c,o=s),i.prototype=null===o?Object.create(o):(u.prototype=o.prototype,new u),c);function u(){this.constructor=i}function c(t,e){var n=s.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,c.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,l.prototype.create),n}var l=(h.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(p,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",c=new a(i,u),l=0,h=Object.keys(r);l<h.length;l++){var f=h[l];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=r[f])}return c},h);function h(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var p=/\{\$([^}]+)}/g,f=(d.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},d.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},d.prototype.setServiceProps=function(t){return this.serviceProps=t,this},d);function d(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var y="firebasestorage.googleapis.com",m="storageBucket",v=(g.prototype.codeProp=function(){return this.code},g.prototype.codeEquals=function(t){return b(t)===this.codeProp()},g.prototype.serverResponseProp=function(){return this.serverResponse_},g.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(g.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),g);function g(t,e){this.code_=b(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}function b(t){return"storage/"+t}function w(){return new v("unknown","An unknown error occurred, please check the error payload for server response.")}function _(){return new v("canceled","User canceled the upload/download.")}function E(){return new v("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function T(t,e,n){return new v("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function S(){return new v("app-deleted","The Firebase app was deleted.")}function I(t,e){return new v("invalid-format","String does not match format '"+t+"': "+e)}function C(t){throw new v("internal-error","Internal error: "+t)}var k={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function A(t){switch(t){case k.RAW:case k.BASE64:case k.BASE64URL:case k.DATA_URL:return;default:throw"Expected one of the event types: ["+k.RAW+", "+k.BASE64+", "+k.BASE64URL+", "+k.DATA_URL+"]."}}var N=function(t,e){this.data=t,this.contentType=e||null};function x(t,e){switch(t){case k.RAW:return new N(D(e));case k.BASE64:case k.BASE64URL:return new N(R(t,e));case k.DATA_URL:return new N(function(t){var e=new L(t);return e.base64?R(k.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw I(k.DATA_URL,"Malformed data URL.")}return D(e)}(e.rest)}(e),function(t){return new L(t).contentType}(e))}throw w()}function D(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function R(t,e){switch(t){case k.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw I(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case k.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw I(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw I(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var P,O,L=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw I(k.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)},M={STATE_CHANGED:"state_changed"},F="running",U="pausing",j="paused",q="success",B="canceling",V="canceled",W="error",H={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function z(t){switch(t){case F:case U:case B:return H.RUNNING;case j:return H.PAUSED;case q:return H.SUCCESS;case V:return H.CANCELED;case W:default:return H.ERROR}}function G(t){return null!=t}function K(t){return void 0!==t}function Q(t){return"function"==typeof t}function Y(t){return"object"==typeof t}function X(t){return"string"==typeof t||t instanceof String}function $(t){return"number"==typeof t||t instanceof Number}function J(t){return Z()&&t instanceof Blob}function Z(){return"undefined"!=typeof Blob}(O=P=P||{})[O.NO_ERROR=0]="NO_ERROR",O[O.NETWORK_ERROR=1]="NETWORK_ERROR",O[O.ABORT=2]="ABORT";var tt=(et.prototype.send=function(t,e,n,r){if(this.sent_)throw C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),G(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return G(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},et.prototype.getErrorCode=function(){if(!this.sent_)throw C("cannot .getErrorCode() before sending");return this.errorCode_},et.prototype.getStatus=function(){if(!this.sent_)throw C("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},et.prototype.getResponseText=function(){if(!this.sent_)throw C("cannot .getResponseText() before sending");return this.xhr_.responseText},et.prototype.abort=function(){this.xhr_.abort()},et.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},et.prototype.addUploadProgressListener=function(t){G(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},et.prototype.removeUploadProgressListener=function(t){G(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},et);function et(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=P.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=P.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=P.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}var nt=(rt.prototype.createXhrIo=function(){return new tt},rt);function rt(){}function it(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Z())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var ot=(st.prototype.size=function(){return this.size_},st.prototype.type=function(){return this.type_},st.prototype.slice=function(t,e){if(J(this.data_)){var n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new st(n)}return new st(new Uint8Array(this.data_.buffer,t,e-t),!0)},st.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Z()){var n=t.map((function(t){return t instanceof st?t.data_:t}));return new st(it.apply(null,n))}var r=t.map((function(t){return X(t)?x(k.RAW,t).data:t.data_})),i=0;r.forEach((function(t){i+=t.byteLength}));var o=new Uint8Array(i),s=0;return r.forEach((function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]})),new st(o,!0)},st.prototype.uploadData=function(){return this.data_},st);function st(t,e){var n=0,r="";J(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var at=(Object.defineProperty(ut.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(ut.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),ut.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},ut.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},ut.makeFromBucketSpec=function(t){var e;try{e=ut.makeFromUrl(t)}catch(e){return new ut(t,"")}if(""===e.path)return e;throw function(t){return new v("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(t)},ut.makeFromUrl=function(t){for(var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=y.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<o.length;s++){var a=o[s],u=a.regex.exec(t);if(u){var c=u[a.indices.path];e=new ut(u[a.indices.bucket],c=c||""),a.postModify(e);break}}if(null==e)throw function(t){return new v("invalid-url","Invalid URL '"+t+"'.")}(t);return e},ut);function ut(t,e){this.bucket=t,this.path_=e}function ct(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return Y(t)&&!Array.isArray(t)}(e)?e:null}function lt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ht(t){return"https://"+y+"/v0"+t}function pt(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function ft(t,e){return e}var dt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ft},yt=null;function mt(t,e,n){var r=ct(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new at(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function vt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function gt(t){if(!Y(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!Y(n))throw"Expected object for 'customMetadata' mapping."}else if(Y(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var bt="maxResults",wt="pageToken",_t="prefixes";function Et(t){if(!Y(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===bt){if(!$(n=t[bt])||!Number.isInteger(n)||t[bt]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[bt])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==wt)throw"Unknown option: "+e;if(t[wt]&&!X(t[wt]))throw"Expected pageToken to be string."}var n}var Tt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function St(t){if(!t)throw w()}function It(t,e){return function(n,r){var i=mt(t,r,e);return St(null!==i),i}}function Ct(t){return function(e,n){var r=function(t,e){var n=ct(e);return null===n?null:function(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new v("no-default-bucket","No default bucket found. Did you set the '"+m+"' property when initializing the app?");if(e[_t])for(var i=0,o=e[_t];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new at(r,s));n.prefixes.push(a)}if(e.items)for(var u=0,c=e.items;u<c.length;u++)a=t.makeStorageReference(new at(r,c[u].name)),n.items.push(a);return n}(t,n)}(t,n);return St(null!==r),r}}function kt(t,e){return function(n,r){var i=mt(t,r,e);return St(null!==i),function(t,e){var n=ct(e);if(null===n)return null;if(!X(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return ht("/b/"+i(t.bucket)+"/o/"+i(n))+pt({alt:"media",token:e})}))[0]}(i,r)}}function At(t){return function(e,n){var r;return(r=401===e.getStatus()?new v("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(t){return new v("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===e.getStatus()?function(t){return new v("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):n).setServerResponseProp(n.serverResponseProp()),r}}function Nt(t){var e=At(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=function(t){return new v("object-not-found","Object '"+t+"' does not exist.")}(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function xt(t,e,n){var r=ht(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Tt(r,"GET",It(t,n),i);return o.errorHandler=Nt(e),o}function Dt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Rt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Pt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){St(!1)}return St(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ot=function(t,e,n){if(Q(t)||G(e)||G(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Lt=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Mt(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return o=t===e?1===(i=t)?"argument":"arguments":(i="between "+t+" and "+e,"arguments"),new v("invalid-argument-count","Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?T(o,t,e.message):T(o,t,e)}}var Ft=function(t,e){var n=this;this.validator=function(e){n.optional&&!K(e)||t(e)},this.optional=!!e};function Ut(t,e){function n(t){if(!X(t))throw"Expected string."}var r;return r=t?function(t,e){return function(n){t(n),e(n)}}(n,t):n,new Ft(r,e)}function jt(){return new Ft((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Z()&&t instanceof Blob))throw"Expected Blob or File."}))}function qt(t){return new Ft(gt,t)}function Bt(){return new Ft((function(t){if(!($(t)&&0<=t))throw"Expected a number 0 or greater."}))}function Vt(t,e){return new Ft((function(e){if(!(null===e||G(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function Wt(t){return new Ft((function(t){if(null!==t&&!Q(t))throw"Expected a Function."}),t)}function Ht(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var zt=(Gt.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},Gt.prototype.shouldDoResumable_=function(t){return 262144<t.size()},Gt.prototype.start_=function(){this.state_===F&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},Gt.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case F:t(n);break;case B:e.transition_(V);break;case U:e.transition_(j)}}))},Gt.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Dt(e,r,i),a={name:s.fullPath},u=ht(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=vt(s,n),h=t.maxUploadRetryTime(),p=new Tt(u,"POST",(function(t){var e;Pt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){St(!1)}return St(X(e)),e}),h);return p.urlParams=a,p.headers=c,p.body=l,p.errorHandler=At(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},Gt.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new Tt(n,"POST",(function(t){var e=Pt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){St(!1)}n||St(!1);var i=Number(n);return St(!isNaN(i)),new Rt(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=At(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);(t.request_=i).getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},Gt.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Rt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Rt(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new v("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<i&&(l=Math.min(l,i));var h=u.current,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw E();var d=e.maxUploadRetryTime(),y=new Tt(n,"POST",(function(t,n){var i,s=Pt(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?It(e,o)(t,n):null,new Rt(a,c,"final"===s,i)}),d);return y.headers=p,y.body=f.uploadData(),y.progressCallback=a||null,y.errorHandler=At(t),y}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(i){return t.error_=i,void t.transition_(W)}var s=t.authWrapper_.makeRequest(o,i);(t.request_=s).getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(q)):t.completeTransitions_()}),t.errorHandler_)}))},Gt.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},Gt.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=xt(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(q)}),t.metadataErrorHandler_)}))},Gt.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Dt(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+vt(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l=ot.getBlob(c,r,"\r\n--"+a+"--");if(null===l)throw E();var h={name:u.fullPath},p=ht(o),f=t.maxUploadRetryTime(),d=new Tt(p,"POST",It(t,n),f);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=At(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(q)}),t.errorHandler_)}))},Gt.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},Gt.prototype.transition_=function(t){if(this.state_!==t)switch(t){case B:case U:this.state_=t,null!==this.request_&&this.request_.cancel();break;case F:var e=this.state_===j;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case j:this.state_=t,this.notifyObservers_();break;case V:this.error_=_(),this.state_=t,this.notifyObservers_();break;case W:case q:this.state_=t,this.notifyObservers_()}},Gt.prototype.completeTransitions_=function(){switch(this.state_){case U:this.transition_(j);break;case B:this.transition_(V);break;case F:this.start_()}},Object.defineProperty(Gt.prototype,"snapshot",{get:function(){var t=z(this.state_);return new Lt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),Gt.prototype.on=function(t,e,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=Wt(!0).validator,s=Vt(null,!0).validator;function a(t){try{return void o(t)}catch(t){}try{if(s(t),!(K(t.next)||K(t.error)||K(t.complete)))throw"";return}catch(t){throw i}}Mt("on",[Ut((function(){if(t!==M.STATE_CHANGED)throw"Expected one of the event types: ["+M.STATE_CHANGED+"]."})),Vt(a,!0),Wt(!0),Wt(!0)],arguments);var u=this;function c(t){return function(e,n,i){null!==t&&Mt("on",t,arguments);var o=new Ot(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[Vt((function(t){if(null===t)throw i;a(t)})),Wt(!0),Wt(!0)];return K(e)||K(n)||K(r)?c(null)(e,n,r):c(l)},Gt.prototype.then=function(t,e){return this.promise_.then(t,e)},Gt.prototype.catch=function(t){return this.then(null,t)},Gt.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},Gt.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},Gt.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},Gt.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(z(this.state_)){case H.SUCCESS:Ht(this.resolve_.bind(null,this.snapshot))();break;case H.CANCELED:case H.ERROR:Ht(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},Gt.prototype.notifyObserver_=function(t){switch(z(this.state_)){case H.RUNNING:case H.PAUSED:t.next&&Ht(t.next.bind(t,this.snapshot))();break;case H.SUCCESS:t.complete&&Ht(t.complete.bind(t))();break;case H.CANCELED:case H.ERROR:t.error&&Ht(t.error.bind(t,this.error_))();break;default:t.error&&Ht(t.error.bind(t,this.error_))()}},Gt.prototype.resume=function(){Mt("resume",[],arguments);var t=this.state_===j||this.state_===U;return t&&this.transition_(F),t},Gt.prototype.pause=function(){Mt("pause",[],arguments);var t=this.state_===F;return t&&this.transition_(U),t},Gt.prototype.cancel=function(){Mt("cancel",[],arguments);var t=this.state_===F||this.state_===U;return t&&this.transition_(B),t},Gt);function Gt(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=F,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(W))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_(W))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}var Kt=(Qt.prototype.toString=function(){return Mt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},Qt.prototype.newRef=function(t,e){return new Qt(t,e)},Qt.prototype.mappings=function(){return function(){if(yt)return yt;var t=[];t.push(new dt("bucket")),t.push(new dt("generation")),t.push(new dt("metageneration")),t.push(new dt("name","fullPath",!0));var e=new dt("name");e.xform=function(t,e){return function(t){return!X(t)||t.length<2?t:lt(t)}(e)},t.push(e);var n=new dt("size");return n.xform=function(t,e){return G(e)?Number(e):e},t.push(n),t.push(new dt("timeCreated")),t.push(new dt("updated")),t.push(new dt("md5Hash",null,!0)),t.push(new dt("cacheControl",null,!0)),t.push(new dt("contentDisposition",null,!0)),t.push(new dt("contentEncoding",null,!0)),t.push(new dt("contentLanguage",null,!0)),t.push(new dt("contentType",null,!0)),t.push(new dt("metadata","customMetadata",!0)),yt=t}()},Qt.prototype.child=function(t){Mt("child",[Ut()],arguments);var e=function(t,e){var n=e.split("/").filter((function(t){return 0<t.length})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new at(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(Qt.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new at(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Qt.prototype,"root",{get:function(){var t=new at(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(Qt.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(Qt.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(Qt.prototype,"name",{get:function(){return lt(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(Qt.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),Qt.prototype.put=function(t,e){return void 0===e&&(e=null),Mt("put",[jt(),qt(!0)],arguments),this.throwIfRoot_("put"),new zt(this,this.authWrapper,this.location,this.mappings(),new ot(t),e)},Qt.prototype.putString=function(t,e,n){void 0===e&&(e=k.RAW),Mt("putString",[Ut(),Ut(A,!0),qt(!0)],arguments),this.throwIfRoot_("putString");var r=x(e,t),i=Object.assign({},n);return!G(i.contentType)&&G(r.contentType)&&(i.contentType=r.contentType),new zt(this,this.authWrapper,this.location,this.mappings(),new ot(r.data,!0),i)},Qt.prototype.delete=function(){var t=this;return Mt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=function(t,e){var n=ht(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new Tt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Nt(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},Qt.prototype.listAll=function(){Mt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},Qt.prototype.listAllHelper=function(t,e){return function(t,e,n,r){return new(n=n||Promise)((function(e,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?e(t.value):new n((function(e){e(t.value)})).then(o,s)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function(){var n,r,i;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},Qt.prototype.list=function(t){Mt("list",[new Ft(Et,!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=ht(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new Tt(s,"GET",Ct(t),a);return u.urlParams=o,u.errorHandler=At(e),u}(e.authWrapper,e.location,0,r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},Qt.prototype.getMetadata=function(){var t=this;return Mt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=xt(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},Qt.prototype.updateMetadata=function(t){var e=this;return Mt("updateMetadata",[qt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=function(t,e,n,r){var i=ht(e.fullServerUrl()),o=vt(n,r),s=t.maxOperationRetryTime(),a=new Tt(i,"PATCH",It(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Nt(e),a}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},Qt.prototype.getDownloadURL=function(){var t=this;return Mt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=function(t,e,n){var r=ht(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Tt(r,"GET",kt(t,n),i);return o.errorHandler=Nt(e),o}(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new v("no-download-url","The given file does not have any download URLs.");return t}))}))},Qt.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new v("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},Qt);function Qt(t,e){this.authWrapper=t,this.location=e instanceof at?e:at.makeFromUrl(e)}var Yt=(Xt.prototype.getPromise=function(){return this.promise_},Xt.prototype.cancel=function(t){},Xt);function Xt(t){this.promise_=Promise.reject(t)}var $t=(Jt.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},Jt.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},Jt);function Jt(){this.map=new Map,this.id=-9007199254740991}var Zt=(te.extractBucket_=function(t){var e=t[m]||null;return null==e?null:at.makeFromBucketSpec(e).bucket},te.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},te.prototype.bucket=function(){if(this.deleted_)throw S();return this.bucket_},te.prototype.service=function(){return this.service_},te.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},te.prototype.makeRequest=function(t,e){if(this.deleted_)return new Yt(S());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},te.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},te.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},te.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},te.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},te.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},te);function te(t,e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;G(s)&&(this.bucket_=te.extractBucket_(s))}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new $t}var ee=(ne.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());K(a)?i(a):i()}catch(e){o(e)}else null!==s?((r=w()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?S():_():new v("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new re(!1,null,!0)):this.backoffId_=function(t,e,n){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function h(e){o=setTimeout((function(){o=null,t(p,u())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];c||(t?l.call.apply(l,r([null,t],e)):u()||s?l.call.apply(l,r([null,t],e)):(i<64&&(i*=2),h(1===a?(a=2,0):1e3*(i+Math.random()))))}var f=!1;function d(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){d(s=!0)}),n),d}((function(e,n){if(n)e(!1,new re(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===P.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new re(s,n))}else{var a=n.getErrorCode()===P.ABORT;e(!1,new re(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}),e,this.timeout_)},ne.prototype.getPromise=function(){return this.promise_},ne.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},ne.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},ne);function ne(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var re=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ie(t,n,r){var i=pt(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){null!==e&&0<e.length&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==e?e.SDK_VERSION:"AppManager")}(s),new ee(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var oe=(se.prototype.ref=function(t){if(Mt("ref",[Ut((function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}),!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Kt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},se.prototype.refFromURL=function(t){return Mt("refFromURL",[Ut((function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{at.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}),!1)],arguments),new Kt(this.authWrapper_,t)},Object.defineProperty(se.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),se.prototype.setMaxUploadRetryTime=function(t){Mt("setMaxUploadRetryTime",[Bt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},se.prototype.setMaxOperationRetryTime=function(t){Mt("setMaxOperationRetryTime",[Bt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(se.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(se.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),se);function se(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new Zt(t,e,(function(t,e){return new Kt(t,e)}),ie,this,n),this.app_=t,null!=r)this.bucket_=at.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new at(i,""))}this.internals_=new ce(this)}var ae,ue,ce=(le.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},le);function le(t){this.service_=t}ue={TaskState:H,TaskEvent:M,StringFormat:k,Storage:oe,Reference:Kt},(ae=e).INTERNAL.registerComponent(new f("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new oe(n,r,new nt,e)}),"PUBLIC").setServiceProps(ue).setMultipleInstances(!0)),ae.registerVersion("@firebase/storage","0.3.25")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-storage.js - be sure to load firebase-app.js first.")}},"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}function sweet_alert(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Sweetalert2=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,n){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t){return Object.keys(t).map((function(e){return t[e]}))}function h(t){return Array.prototype.slice.call(t)}function p(t){console.error("".concat(F," ").concat(t))}function f(t,e){var n;n='"'.concat(t,'" is deprecated and will be removed in the next major release. Please use "').concat(e,'" instead.'),-1===j.indexOf(n)&&(j.push(n),U(n))}function d(t){return t&&Promise.resolve(t)===t}function y(e){return e instanceof Element||"object"===t(n=e)&&n.jquery;var n}function m(t){var e={};for(var n in t)e[t[n]]="swal2-"+t[n];return e}function v(t){var e=H();return e?e.querySelector(t):null}function g(t){return v(".".concat(t))}function b(){return h(z().querySelectorAll(".".concat(V.icon)))}function w(){var t=b().filter((function(t){return lt(t)}));return t.length?t[0]:null}function _(){return g(V.title)}function E(){return g(V.content)}function T(){return g(V.image)}function S(){return g(V["progress-steps"])}function I(){return g(V["validation-message"])}function C(){return v(".".concat(V.actions," .").concat(V.confirm))}function k(){return v(".".concat(V.actions," .").concat(V.cancel))}function A(){return g(V.actions)}function N(){return g(V.header)}function x(){return g(V.footer)}function D(){return g(V["timer-progress-bar"])}function R(){return g(V.close)}function P(){var t=h(z().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((function(t,e){return t=parseInt(t.getAttribute("tabindex")),(e=parseInt(e.getAttribute("tabindex")))<t?1:t<e?-1:0})),e=h(z().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter((function(t){return"-1"!==t.getAttribute("tabindex")}));return function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(t.concat(e)).filter((function(t){return lt(t)}))}function O(){return!G()&&!document.body.classList.contains(V["no-backdrop"])}function L(t,e){if(e){for(var n=e.split(/\s+/),r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return;return 1}}function M(e,n,r){var i,o;if(o=n,h((i=e).classList).forEach((function(t){-1===l(V).indexOf(t)&&-1===l(W).indexOf(t)&&-1===l(o.showClass).indexOf(t)&&i.classList.remove(t)})),n.customClass&&n.customClass[r]){if("string"!=typeof n.customClass[r]&&!n.customClass[r].forEach)return U("Invalid type of customClass.".concat(r,'! Expected string or iterable object, got "').concat(t(n.customClass[r]),'"'));at(e,n.customClass[r])}}var F="SweetAlert2:",U=function(t){console.warn("".concat(F," ").concat(t))},j=[],q=function(t){return"function"==typeof t?t():t},B=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),V=m(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","toast","toast-shown","toast-column","show","hide","close","title","header","content","html-container","actions","confirm","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),W=m(["success","warning","info","question","error"]),H=function(){return document.body.querySelector(".".concat(V.container))},z=function(){return g(V.popup)},G=function(){return document.body.classList.contains(V["toast-shown"])},K={previousBodyPadding:null};function Q(t,e){if(!e)return null;switch(e){case"select":case"textarea":case"file":return ct(t,V[e]);case"checkbox":return t.querySelector(".".concat(V.checkbox," input"));case"radio":return t.querySelector(".".concat(V.radio," input:checked"))||t.querySelector(".".concat(V.radio," input:first-child"));case"range":return t.querySelector(".".concat(V.range," input"));default:return ct(t,V.input)}}function Y(t){if(t.focus(),"file"!==t.type){var e=t.value;t.value="",t.value=e}}function X(t,e,n){t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach((function(e){t.forEach?t.forEach((function(t){n?t.classList.add(e):t.classList.remove(e)})):n?t.classList.add(e):t.classList.remove(e)})))}function $(t,e,n){n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)}function J(t,e){var n=1<arguments.length&&void 0!==e?e:"flex";t.style.opacity="",t.style.display=n}function Z(t){t.style.opacity="",t.style.display="none"}function tt(t,e,n){e?J(t,n):Z(t)}function et(t){var e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return 0<n||0<r}function nt(t,e){var n=1<arguments.length&&void 0!==e&&e,r=D();lt(r)&&(n&&(r.style.transition="none",r.style.width="100%"),setTimeout((function(){r.style.transition="width ".concat(t/1e3,"s linear"),r.style.width="0%"}),10))}function rt(){return"undefined"==typeof window||"undefined"==typeof document}function it(t){he.isVisible()&&st!==t.target.value&&he.resetValidationMessage(),st=t.target.value}function ot(e,n){e instanceof HTMLElement?n.appendChild(e):"object"===t(e)?pt(e,n):e&&(n.innerHTML=e)}var st,at=function(t,e){X(t,e,!0)},ut=function(t,e){X(t,e,!1)},ct=function(t,e){for(var n=0;n<t.childNodes.length;n++)if(L(t.childNodes[n],e))return t.childNodes[n]},lt=function(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))},ht='\n <div aria-labelledby="'.concat(V.title,'" aria-describedby="').concat(V.content,'" class="').concat(V.popup,'" tabindex="-1">\n   <div class="').concat(V.header,'">\n     <ul class="').concat(V["progress-steps"],'"></ul>\n     <div class="').concat(V.icon," ").concat(W.error,'"></div>\n     <div class="').concat(V.icon," ").concat(W.question,'"></div>\n     <div class="').concat(V.icon," ").concat(W.warning,'"></div>\n     <div class="').concat(V.icon," ").concat(W.info,'"></div>\n     <div class="').concat(V.icon," ").concat(W.success,'"></div>\n     <img class="').concat(V.image,'" />\n     <h2 class="').concat(V.title,'" id="').concat(V.title,'"></h2>\n     <button type="button" class="').concat(V.close,'"></button>\n   </div>\n   <div class="').concat(V.content,'">\n     <div id="').concat(V.content,'" class="').concat(V["html-container"],'"></div>\n     <input class="').concat(V.input,'" />\n     <input type="file" class="').concat(V.file,'" />\n     <div class="').concat(V.range,'">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="').concat(V.select,'"></select>\n     <div class="').concat(V.radio,'"></div>\n     <label for="').concat(V.checkbox,'" class="').concat(V.checkbox,'">\n       <input type="checkbox" />\n       <span class="').concat(V.label,'"></span>\n     </label>\n     <textarea class="').concat(V.textarea,'"></textarea>\n     <div class="').concat(V["validation-message"],'" id="').concat(V["validation-message"],'"></div>\n   </div>\n   <div class="').concat(V.actions,'">\n     <button type="button" class="').concat(V.confirm,'">OK</button>\n     <button type="button" class="').concat(V.cancel,'">Cancel</button>\n   </div>\n   <div class="').concat(V.footer,'"></div>\n   <div class="').concat(V["timer-progress-bar"],'"></div>\n </div>\n').replace(/(^|\n)\s*/g,""),pt=function(t,e){t.jquery?ft(e,t):e.innerHTML=t.toString()},ft=function(t,e){if(t.innerHTML="",0 in e)for(var n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},dt=function(){if(rt())return!1;var t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1}();function yt(t,e,n){var r;tt(t,n["show".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Button")],"inline-block"),t.innerHTML=n["".concat(e,"ButtonText")],t.setAttribute("aria-label",n["".concat(e,"ButtonAriaLabel")]),t.className=V[e],M(t,n,"".concat(e,"Button")),at(t,n["".concat(e,"ButtonClass")])}function mt(t,e){t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)}var vt={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap},gt=["input","file","range","select","radio","checkbox","textarea"],bt=function(t){var e=V[t]?V[t]:V.input;return ct(E(),e)},wt={};function _t(){return H().getAttribute("data-queue-step")}function Et(t,e){var n,r,i,o;n=e,$(r=z(),"width",n.width),$(r,"padding",n.padding),n.background&&(r.style.background=n.background),Nt(r,n),function(t,e){var n=H();if(n){var r,i,o;"string"==typeof(r=e.backdrop)?n.style.background=r:r||at([document.documentElement,document.body],V["no-backdrop"]),!e.backdrop&&e.allowOutsideClick&&U('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),i=n,(o=e.position)in V?at(i,V[o]):(U('The "position" parameter is not valid, defaulting to "center"'),at(i,V.center)),function(t,e){if(e&&"string"==typeof e){var n="grow-".concat(e);n in V&&at(t,V[n])}}(n,e.grow),M(n,e,"container");var s=document.body.getAttribute("data-swal2-queue-step");s&&(n.setAttribute("data-queue-step",s),document.body.removeAttribute("data-swal2-queue-step"))}}(0,e),function(t,e){var n,r,i,o;M(N(),e,"header"),function(t,e){var n=S();if(!e.progressSteps||0===e.progressSteps.length)return Z(n);J(n),n.innerHTML="";var r=parseInt(void 0===e.currentProgressStep?_t():e.currentProgressStep);r>=e.progressSteps.length&&U("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach((function(t,i){var o,s,a,u,c=(o=t,s=document.createElement("li"),at(s,V["progress-step"]),s.innerHTML=o,s);if(n.appendChild(c),i===r&&at(c,V["active-progress-step"]),i!==e.progressSteps.length-1){var l=(a=t,u=document.createElement("li"),at(u,V["progress-step-line"]),a.progressStepsDistance&&(u.style.width=a.progressStepsDistance),u);n.appendChild(l)}}))}(0,e),function(t,e){var n=vt.innerParams.get(t);if(n&&e.icon===n.icon&&w())M(w(),e,"icon");else if(St(),e.icon)if(-1!==Object.keys(W).indexOf(e.icon)){var r=v(".".concat(V.icon,".").concat(W[e.icon]));J(r),Ct(r,e),It(),M(r,e,"icon"),at(r,e.showClass.icon)}else p('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"'))}(t,e),function(t){var e=T();if(!t.imageUrl)return Z(e);J(e),e.setAttribute("src",t.imageUrl),e.setAttribute("alt",t.imageAlt),$(e,"width",t.imageWidth),$(e,"height",t.imageHeight),e.className=V.image,M(e,t,"image")}(e),n=e,tt(r=_(),n.title||n.titleText),n.title&&ot(n.title,r),n.titleText&&(r.innerText=n.titleText),M(r,n,"title"),i=e,(o=R()).innerHTML=i.closeButtonHtml,M(o,i,"closeButton"),tt(o,i.showCloseButton),o.setAttribute("aria-label",i.closeButtonAriaLabel)}(t,e),function(t,e){var n,r,i,o,s,a=E().querySelector("#".concat(V.content));e.html?(ot(e.html,a),J(a,"block")):e.text?(a.textContent=e.text,J(a,"block")):Z(a),n=t,r=e,i=E(),o=vt.innerParams.get(n),s=!o||r.input!==o.input,gt.forEach((function(t){var e=V[t],n=ct(i,e);(function(t,e){var n=Q(E(),t);if(n)for(var r in function(t){for(var e=0;e<t.attributes.length;e++){var n=t.attributes[e].name;-1===["type","value","style"].indexOf(n)&&t.removeAttribute(n)}}(n),e)"range"===t&&"placeholder"===r||n.setAttribute(r,e[r])})(t,r.inputAttributes),n.className=e,s&&Z(n)})),r.input&&(s&&function(t){if(!wt[t.input])return p('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));var e=bt(t.input),n=wt[t.input](e,t);J(n),setTimeout((function(){Y(n)}))}(r),function(t){var e=bt(t.input);t.customClass&&at(e,t.customClass.input)}(r)),M(E(),e,"content")}(t,e),function(t,e){var n=A(),r=C(),i=k();e.showConfirmButton||e.showCancelButton||Z(n),M(n,e,"actions"),yt(r,"confirm",e),yt(i,"cancel",e),e.buttonsStyling?function(t,e,n){at([t,e],V.styled),n.confirmButtonColor&&(t.style.backgroundColor=n.confirmButtonColor),n.cancelButtonColor&&(e.style.backgroundColor=n.cancelButtonColor);var r=window.getComputedStyle(t).getPropertyValue("background-color");t.style.borderLeftColor=r,t.style.borderRightColor=r}(r,i,e):(ut([r,i],V.styled),r.style.backgroundColor=r.style.borderLeftColor=r.style.borderRightColor="",i.style.backgroundColor=i.style.borderLeftColor=i.style.borderRightColor=""),e.reverseButtons&&r.parentNode.insertBefore(i,r)}(0,e),i=e,tt(o=x(),i.footer),i.footer&&ot(i.footer,o),M(o,i,"footer"),"function"==typeof e.onRender&&e.onRender(z())}function Tt(){return C()&&C().click()}wt.text=wt.email=wt.password=wt.number=wt.tel=wt.url=function(e,n){return"string"==typeof n.inputValue||"number"==typeof n.inputValue?e.value=n.inputValue:d(n.inputValue)||U('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(t(n.inputValue),'"')),mt(e,n),e.type=n.input,e},wt.file=function(t,e){return mt(t,e),t},wt.range=function(t,e){var n=t.querySelector("input"),r=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,r.value=e.inputValue,t},wt.select=function(t,e){if(t.innerHTML="",e.inputPlaceholder){var n=document.createElement("option");n.innerHTML=e.inputPlaceholder,n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return t},wt.radio=function(t){return t.innerHTML="",t},wt.checkbox=function(t,e){var n=Q(E(),"checkbox");return n.value=1,n.id=V.checkbox,n.checked=Boolean(e.inputValue),t.querySelector("span").innerHTML=e.inputPlaceholder,t},wt.textarea=function(t,e){if(t.value=e.inputValue,mt(t,e),"MutationObserver"in window){var n=parseInt(window.getComputedStyle(z()).width),r=parseInt(window.getComputedStyle(z()).paddingLeft)+parseInt(window.getComputedStyle(z()).paddingRight);new MutationObserver((function(){var e=t.offsetWidth+r;z().style.width=n<e?"".concat(e,"px"):null})).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};var St=function(){for(var t=b(),e=0;e<t.length;e++)Z(t[e])},It=function(){for(var t=z(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),r=0;r<n.length;r++)n[r].style.backgroundColor=e},Ct=function(t,e){t.innerHTML="",t.innerHTML=e.iconHtml?kt(e.iconHtml):"success"===e.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===e.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':kt({question:"?",warning:"!",info:"i"}[e.icon])},kt=function(t){return'<div class="'.concat(V["icon-content"],'">').concat(t,"</div>")},At=[],Nt=function(t,e){t.className="".concat(V.popup," ").concat(lt(t)?e.showClass.popup:""),e.toast?(at([document.documentElement,document.body],V["toast-shown"]),at(t,V.toast)):at(t,V.modal),M(t,e,"popup"),"string"==typeof e.customClass&&at(t,e.customClass),e.icon&&at(t,V["icon-".concat(e.icon)])};function xt(){var t=z();t||he.fire(),t=z();var e=A(),n=C();J(e),J(n,"inline-block"),at([t,e],V.loading),n.disabled=!0,t.setAttribute("data-loading",!0),t.setAttribute("aria-busy",!0),t.focus()}function Dt(){if(Lt.timeout)return function(){var t=D(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";var n=parseInt(window.getComputedStyle(t).width),r=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(r,"%")}(),Lt.timeout.stop()}function Rt(){if(Lt.timeout){var t=Lt.timeout.start();return nt(t),t}}function Pt(t){return Object.prototype.hasOwnProperty.call(Mt,t)}function Ot(t){return Ut[t]}var Lt={},Mt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconHtml:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:void 0,target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showCancelButton:!1,preConfirm:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusCancel:!1,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",showLoaderOnConfirm:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,onBeforeOpen:void 0,onOpen:void 0,onRender:void 0,onClose:void 0,onAfterClose:void 0,onDestroy:void 0,scrollbarPadding:!0},Ft=["title","titleText","text","html","icon","customClass","allowOutsideClick","allowEscapeKey","showConfirmButton","showCancelButton","confirmButtonText","confirmButtonAriaLabel","confirmButtonColor","cancelButtonText","cancelButtonAriaLabel","cancelButtonColor","buttonsStyling","reverseButtons","imageUrl","imageWidth","imageHeight","imageAlt","progressSteps","currentProgressStep"],Ut={animation:'showClass" and "hideClass'},jt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusCancel","heightAuto","keydownListenerCapture"],qt=Object.freeze({isValidParameter:Pt,isUpdatableParameter:function(t){return-1!==Ft.indexOf(t)},isDeprecatedParameter:Ot,argsToParams:function(e){var n={};return"object"!==t(e[0])||y(e[0])?["title","html","icon"].forEach((function(r,i){var o=e[i];"string"==typeof o||y(o)?n[r]=o:void 0!==o&&p("Unexpected type of ".concat(r,'! Expected "string" or "Element", got ').concat(t(o)))})):i(n,e[0]),n},isVisible:function(){return lt(z())},clickConfirm:Tt,clickCancel:function(){return k()&&k().click()},getContainer:H,getPopup:z,getTitle:_,getContent:E,getHtmlContainer:function(){return g(V["html-container"])},getImage:T,getIcon:w,getIcons:b,getCloseButton:R,getActions:A,getConfirmButton:C,getCancelButton:k,getHeader:N,getFooter:x,getFocusableElements:P,getValidationMessage:I,isLoading:function(){return z().hasAttribute("data-loading")},fire:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(this,e)},mixin:function(t){return function(n){function a(){return e(this,a),u(this,o(a).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(a,n),r(a,[{key:"_main",value:function(e){return c(o(a.prototype),"_main",this).call(this,i({},t,e))}}]),a}(this)},queue:function(t){var e=this;function n(t,e){At=[],t(e)}At=t;var r=[];return new Promise((function(t){!function i(o,s){o<At.length?(document.body.setAttribute("data-swal2-queue-step",o),e.fire(At[o]).then((function(e){void 0!==e.value?(r.push(e.value),i(o+1,s)):n(t,{dismiss:e.dismiss})}))):n(t,{value:r})}(0)}))},getQueueStep:_t,insertQueueStep:function(t,e){return e&&e<At.length?At.splice(e,0,t):At.push(t)},deleteQueueStep:function(t){void 0!==At[t]&&At.splice(t,1)},showLoading:xt,enableLoading:xt,getTimerLeft:function(){return Lt.timeout&&Lt.timeout.getTimerLeft()},stopTimer:Dt,resumeTimer:Rt,toggleTimer:function(){var t=Lt.timeout;return t&&(t.running?Dt:Rt)()},increaseTimer:function(t){if(Lt.timeout){var e=Lt.timeout.increase(t);return nt(e,!0),e}},isTimerRunning:function(){return Lt.timeout&&Lt.timeout.isRunning()}});function Bt(){var t=vt.innerParams.get(this);if(t){var e=vt.domCache.get(this);t.showConfirmButton||(Z(e.confirmButton),t.showCancelButton||Z(e.actions)),ut([e.popup,e.actions],V.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.cancelButton.disabled=!1}}function Vt(){return!!window.MSInputMethodContext&&!!document.documentMode}function Wt(){var t=H(),e=z();t.style.removeProperty("align-items"),e.offsetTop<0&&(t.style.alignItems="flex-start")}var Ht={swalPromiseResolve:new WeakMap};function zt(t,e,n,r){n?Qt(t,r):(new Promise((function(t){var e=window.scrollX,n=window.scrollY;Lt.restoreFocusTimeout=setTimeout((function(){Lt.previousActiveElement&&Lt.previousActiveElement.focus?(Lt.previousActiveElement.focus(),Lt.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),void 0!==e&&void 0!==n&&window.scrollTo(e,n)})).then((function(){return Qt(t,r)})),Lt.keydownTarget.removeEventListener("keydown",Lt.keydownHandler,{capture:Lt.keydownListenerCapture}),Lt.keydownHandlerAdded=!1),e.parentNode&&e.parentNode.removeChild(e),O()&&(null!==K.previousBodyPadding&&(document.body.style.paddingRight="".concat(K.previousBodyPadding,"px"),K.previousBodyPadding=null),function(){if(L(document.body,V.iosfix)){var t=parseInt(document.body.style.top,10);ut(document.body,V.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}}(),"undefined"!=typeof window&&Vt()&&window.removeEventListener("resize",Wt),h(document.body.children).forEach((function(t){t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")}))),ut([document.documentElement,document.body],[V.shown,V["height-auto"],V["no-backdrop"],V["toast-shown"],V["toast-column"]])}function Gt(t){var e=z();if(e){var n=vt.innerParams.get(this);if(n&&!L(e,n.hideClass.popup)){var r=Ht.swalPromiseResolve.get(this);ut(e,n.showClass.popup),at(e,n.hideClass.popup);var i=H();ut(i,n.showClass.backdrop),at(i,n.hideClass.backdrop),function(t,e,n){var r=H(),i=dt&&et(e),o=n.onClose,s=n.onAfterClose;null!==o&&"function"==typeof o&&o(e),i?Kt(t,e,r,s):zt(t,r,G(),s)}(this,e,n),r(t||{})}}}var Kt=function(t,e,n,r){Lt.swalCloseEventFinishedCallback=zt.bind(null,t,n,G(),r),e.addEventListener(dt,(function(t){t.target===e&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback)}))},Qt=function(t,e){setTimeout((function(){"function"==typeof e&&e(),t._destroy()}))};function Yt(t,e,n){var r=vt.domCache.get(t);e.forEach((function(t){r[t].disabled=n}))}function Xt(t,e){if(!t)return!1;if("radio"===t.type)for(var n=t.parentNode.parentNode.querySelectorAll("input"),r=0;r<n.length;r++)n[r].disabled=e;else t.disabled=e}var $t=function(){function t(n,r){e(this,t),this.callback=n,this.remaining=r,this.running=!1,this.start()}return r(t,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}},{key:"increase",value:function(t){var e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),t}(),Jt={email:function(t,e){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address")},url:function(t,e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")}};function Zt(t){var e=z();if(t.target===e){var n=H();e.removeEventListener(dt,Zt),n.style.overflowY="auto"}}function te(t,e){t.closePopup({value:e})}function ee(t,e,n){var r=P();if(0<r.length)return(e+=n)===r.length?e=0:-1===e&&(e=r.length-1),r[e].focus();z().focus()}var ne,re={select:function(t,e,n){var r=ct(t,V.select);e.forEach((function(t){var e=t[0],i=t[1],o=document.createElement("option");o.value=e,o.innerHTML=i,n.inputValue.toString()===e.toString()&&(o.selected=!0),r.appendChild(o)})),r.focus()},radio:function(t,e,n){var r=ct(t,V.radio);e.forEach((function(t){var e=t[0],i=t[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=V.radio,o.value=e,n.inputValue.toString()===e.toString()&&(o.checked=!0);var a=document.createElement("span");a.innerHTML=i,a.className=V.label,s.appendChild(o),s.appendChild(a),r.appendChild(s)}));var i=r.querySelectorAll("input");i.length&&i[0].focus()}},ie=function(t,e,n){e.showLoaderOnConfirm&&xt(),e.preConfirm?(t.resetValidationMessage(),Promise.resolve().then((function(){return e.preConfirm(n,e.validationMessage)})).then((function(e){lt(I())||!1===e?t.hideLoading():te(t,void 0===e?n:e)}))):te(t,n)},oe=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Left","Right","Up","Down"],se=["Escape","Esc"],ae=!1,ue=function(t){for(var e in t)t[e]=new WeakMap},ce=Object.freeze({hideLoading:Bt,disableLoading:Bt,getInput:function(t){var e=vt.innerParams.get(t||this),n=vt.domCache.get(t||this);return n?Q(n.content,e.input):null},close:Gt,closePopup:Gt,closeModal:Gt,closeToast:Gt,enableButtons:function(){Yt(this,["confirmButton","cancelButton"],!1)},disableButtons:function(){Yt(this,["confirmButton","cancelButton"],!0)},enableInput:function(){return Xt(this.getInput(),!1)},disableInput:function(){return Xt(this.getInput(),!0)},showValidationMessage:function(t){var e=vt.domCache.get(this);e.validationMessage.innerHTML=t;var n=window.getComputedStyle(e.popup);e.validationMessage.style.marginLeft="-".concat(n.getPropertyValue("padding-left")),e.validationMessage.style.marginRight="-".concat(n.getPropertyValue("padding-right")),J(e.validationMessage);var r=this.getInput();r&&(r.setAttribute("aria-invalid",!0),r.setAttribute("aria-describedBy",V["validation-message"]),Y(r),at(r,V.inputerror))},resetValidationMessage:function(){var t=vt.domCache.get(this);t.validationMessage&&Z(t.validationMessage);var e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),ut(e,V.inputerror))},getProgressSteps:function(){return vt.domCache.get(this).progressSteps},_main:function(e){!function(t){for(var e in t)Pt(i=e)||U('Unknown parameter "'.concat(i,'"')),t.toast&&-1!==jt.indexOf(r=e)&&U('The parameter "'.concat(r,'" is incompatible with toasts')),Ot(n=e)&&f(n,Ot(n));var n,r,i}(e),Lt.currentInstance&&Lt.currentInstance._destroy(),Lt.currentInstance=this;var n=function(t){var e=i({},Mt.showClass,t.showClass),n=i({},Mt.hideClass,t.hideClass),r=i({},Mt,t);return r.showClass=e,r.hideClass=n,!1===t.animation&&(r.showClass={popup:"",backdrop:"swal2-backdrop-show swal2-noanimation"},r.hideClass={}),r}(e);(function(t){var e,n;(e=t).inputValidator||Object.keys(Jt).forEach((function(t){e.input===t&&(e.inputValidator=Jt[t])})),t.showLoaderOnConfirm&&!t.preConfirm&&U("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),t.animation=q(t.animation),(n=t).target&&("string"!=typeof n.target||document.querySelector(n.target))&&("string"==typeof n.target||n.target.appendChild)||(U('Target parameter is not valid, defaulting to "body"'),n.target="body"),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),function(t){var e;if((e=H())&&(e.parentNode.removeChild(e),ut([document.documentElement,document.body],[V["no-backdrop"],V["toast-shown"],V["has-column"]])),rt())p("SweetAlert2 requires document to initialize");else{var n=document.createElement("div");n.className=V.container,n.innerHTML=ht;var r,i,o,s,a,u,c,l,h,f,d,y="string"==typeof(r=t.target)?document.querySelector(r):r;y.appendChild(n),i=t,(o=z()).setAttribute("role",i.toast?"alert":"dialog"),o.setAttribute("aria-live",i.toast?"polite":"assertive"),i.toast||o.setAttribute("aria-modal","true"),"rtl"===window.getComputedStyle(y).direction&&at(H(),V.rtl),s=E(),a=ct(s,V.input),u=ct(s,V.file),c=s.querySelector(".".concat(V.range," input")),l=s.querySelector(".".concat(V.range," output")),h=ct(s,V.select),f=s.querySelector(".".concat(V.checkbox," input")),d=ct(s,V.textarea),a.oninput=it,u.onchange=it,h.onchange=it,f.onchange=it,d.oninput=it,c.oninput=function(t){it(t),l.value=c.value},c.onchange=function(t){it(t),c.nextSibling.value=c.value}}}(t)})(n),Object.freeze(n),Lt.timeout&&(Lt.timeout.stop(),delete Lt.timeout),clearTimeout(Lt.restoreFocusTimeout);var r=function(t){var e={popup:z(),container:H(),content:E(),actions:A(),confirmButton:C(),cancelButton:k(),closeButton:R(),validationMessage:I(),progressSteps:S()};return vt.domCache.set(t,e),e}(this);return Et(this,n),vt.innerParams.set(this,n),function(e,n,r){return new Promise((function(i){var o=function(t){e.closePopup({dismiss:t})};Ht.swalPromiseResolve.set(e,i),function(t,e,n){var r=D();Z(r),e.timer&&(t.timeout=new $t((function(){n("timer"),delete t.timeout}),e.timer),e.timerProgressBar&&(J(r),setTimeout((function(){nt(e.timer)}))))}(Lt,r,o),n.confirmButton.onclick=function(){return function(t,e){t.disableButtons(),e.input?function(t,e){var n=function(t,e){var n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return function(t){return t.checked?1:0}(n);case"radio":return function(t){return t.checked?t.value:null}(n);case"file":return function(t){return t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null}(n);default:return e.inputAutoTrim?n.value.trim():n.value}}(t,e);e.inputValidator?(t.disableInput(),Promise.resolve().then((function(){return e.inputValidator(n,e.validationMessage)})).then((function(r){t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):ie(t,e,n)}))):t.getInput().checkValidity()?ie(t,e,n):(t.enableButtons(),t.showValidationMessage(e.validationMessage))}(t,e):ie(t,e,!0)}(e,r)},n.cancelButton.onclick=function(){return function(t,e){t.disableButtons(),e(B.cancel)}(e,o)},n.closeButton.onclick=function(){return o(B.close)},function(t,e,n){vt.innerParams.get(t).toast?function(t,e,n){e.popup.onclick=function(){var e=vt.innerParams.get(t);e.showConfirmButton||e.showCancelButton||e.showCloseButton||e.input||n(B.close)}}(t,e,n):(function(t){t.popup.onmousedown=function(){t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(ae=!0)}}}(e),function(t){t.container.onmousedown=function(){t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,e.target!==t.popup&&!t.popup.contains(e.target)||(ae=!0)}}}(e),function(t,e,n){e.container.onclick=function(r){var i=vt.innerParams.get(t);ae?ae=!1:r.target===e.container&&q(i.allowOutsideClick)&&n(B.backdrop)}}(t,e,n))}(e,n,o),function(t,e,n,r){e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=function(e){return function(t,e,n){var r=vt.innerParams.get(t);r.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?function(t,e,n){if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(-1!==["textarea","file"].indexOf(n.input))return;Tt(),e.preventDefault()}}(t,e,r):"Tab"===e.key?function(t){for(var e=t.target,n=P(),r=-1,i=0;i<n.length;i++)if(e===n[i]){r=i;break}ee(0,r,t.shiftKey?-1:1),t.stopPropagation(),t.preventDefault()}(e):-1!==oe.indexOf(e.key)?function(){var t=C(),e=k();document.activeElement===t&&lt(e)?e.focus():document.activeElement===e&&lt(t)&&t.focus()}():-1!==se.indexOf(e.key)&&function(t,e,n){q(e.allowEscapeKey)&&(t.preventDefault(),n(B.esc))}(e,r,n)}(t,e,r)},e.keydownTarget=n.keydownListenerCapture?window:z(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)}(e,Lt,r,o),r.toast&&(r.input||r.footer||r.showCloseButton)?at(document.body,V["toast-column"]):ut(document.body,V["toast-column"]),function(e,n){"select"===n.input||"radio"===n.input?function(e,n){function r(t){return re[n.input](i,function(t){var e=[];return"undefined"!=typeof Map&&t instanceof Map?t.forEach((function(t,n){e.push([n,t])})):Object.keys(t).forEach((function(n){e.push([n,t[n]])})),e}(t),n)}var i=E();d(n.inputOptions)?(xt(),n.inputOptions.then((function(t){e.hideLoading(),r(t)}))):"object"===t(n.inputOptions)?r(n.inputOptions):p("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(t(n.inputOptions)))}(e,n):-1!==["text","email","number","tel","textarea"].indexOf(n.input)&&d(n.inputValue)&&function(t,e){var n=t.getInput();Z(n),e.inputValue.then((function(r){n.value="number"===e.input?parseFloat(r)||0:"".concat(r),J(n),n.focus(),t.hideLoading()})).catch((function(e){p("Error in inputValue promise: ".concat(e)),n.value="",J(n),n.focus(),t.hideLoading()}))}(e,n)}(e,r),function(t){var e=H(),n=z();"function"==typeof t.onBeforeOpen&&t.onBeforeOpen(n),function(t,e,n){at(t,n.showClass.backdrop),J(e),at(e,n.showClass.popup),at([document.documentElement,document.body],V.shown),n.heightAuto&&n.backdrop&&!n.toast&&at([document.documentElement,document.body],V["height-auto"])}(e,n,t),function(t,e){dt&&et(e)?(t.style.overflowY="hidden",e.addEventListener(dt,Zt)):t.style.overflowY="auto"}(e,n),O()&&function(t,e){!function(){if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!L(document.body,V.iosfix)){var t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),at(document.body,V.iosfix),function(){var t,e=H();e.ontouchstart=function(n){var r;t=n.target===e||!((r=e).scrollHeight>r.clientHeight)&&"INPUT"!==n.target.tagName},e.ontouchmove=function(e){t&&(e.preventDefault(),e.stopPropagation())}}()}}(),"undefined"!=typeof window&&Vt()&&(Wt(),window.addEventListener("resize",Wt)),h(document.body.children).forEach((function(t){t===H()||function(t,e){if("function"==typeof t.contains)return t.contains(e)}(t,H())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),e&&null===K.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(K.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(K.previousBodyPadding+function(){var t=document.createElement("div");t.className=V["scrollbar-measure"],document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}(),"px")),setTimeout((function(){t.scrollTop=0}))}(e,t.scrollbarPadding),G()||Lt.previousActiveElement||(Lt.previousActiveElement=document.activeElement),"function"==typeof t.onOpen&&setTimeout((function(){return t.onOpen(n)}))}(r),function(t,e){e.toast||(q(e.allowEnterKey)?e.focusCancel&&lt(t.cancelButton)?t.cancelButton.focus():e.focusConfirm&&lt(t.confirmButton)?t.confirmButton.focus():ee(0,-1,1):document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur())}(n,r),n.container.scrollTop=0}))}(this,r,n)},update:function(t){var e=z(),n=vt.innerParams.get(this);if(!e||L(e,n.hideClass.popup))return U("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");var r={};Object.keys(t).forEach((function(e){he.isUpdatableParameter(e)?r[e]=t[e]:U('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js'))}));var o=i({},n,r);Et(this,o),vt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:i({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){var t=vt.domCache.get(this),e=vt.innerParams.get(this);e&&(t.popup&&Lt.swalCloseEventFinishedCallback&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback),Lt.deferDisposalTimer&&(clearTimeout(Lt.deferDisposalTimer),delete Lt.deferDisposalTimer),"function"==typeof e.onDestroy&&e.onDestroy(),delete this.params,delete Lt.keydownHandler,delete Lt.keydownTarget,ue(vt),ue(Ht))}});function le(){if("undefined"!=typeof window){"undefined"==typeof Promise&&p("This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)"),ne=this;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Object.freeze(this.constructor.argsToParams(e));Object.defineProperties(this,{params:{value:r,writable:!1,enumerable:!0,configurable:!0}});var i=this._main(this.params);vt.promise.set(this,i)}}le.prototype.then=function(t){return vt.promise.get(this).then(t)},le.prototype.finally=function(t){return vt.promise.get(this).finally(t)},i(le.prototype,ce),i(le,qt),Object.keys(ce).forEach((function(t){le[t]=function(){if(ne)return ne[t].apply(ne,arguments)}})),le.DismissReason=B,le.version="9.7.1";var he=le;return he.default=he})),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;width:auto;padding:.625em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.swal2-popup.swal2-toast .swal2-title{-webkit-box-flex:1;flex-grow:1;-webkit-box-pack:start;justify-content:flex-start;margin:0 .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{-webkit-box-pack:start;justify-content:flex-start;font-size:1em}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex-basis:auto!important;width:auto;height:auto;margin:0 .3125em}.swal2-popup.swal2-toast .swal2-styled{margin:0 .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(50,100,150,.4)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:2em 2em;transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;-webkit-transform-origin:0 1.5em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:-webkit-box;display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:.625em;overflow-x:hidden;-webkit-transition:background-color .1s;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{-webkit-box-align:start;align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{-webkit-box-align:start;align-items:flex-start;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-center{-webkit-box-align:center;align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{-webkit-box-align:center;align-items:center;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{-webkit-box-align:center;align-items:center;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-bottom{-webkit-box-align:end;align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{-webkit-box-align:end;align-items:flex-end;-webkit-box-pack:start;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{-webkit-box-align:end;align-items:flex-end;-webkit-box-pack:end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-self:stretch;-webkit-box-pack:center;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-content:center;-webkit-box-pack:center;justify-content:center}.swal2-container.swal2-grow-column{-webkit-box-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{-webkit-box-align:center;align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{-webkit-box-align:start;align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{-webkit-box-align:end;align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:-webkit-box!important;display:flex!important;-webkit-box-flex:1;flex:1;align-content:center;-webkit-box-pack:center;justify-content:center}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:.3125em;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:-webkit-box;display:flex;z-index:1;flex-wrap:wrap;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;width:100%;margin:1.25em auto 0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.1)),to(rgba(0,0,0,.1)));background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(rgba(0,0,0,.2)));background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-actions.swal2-loading .swal2-styled.swal2-confirm{box-sizing:border-box;width:2.5em;height:2.5em;margin:.46875em;padding:0;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border:.25em solid transparent;border-radius:100%;border-color:transparent;background-color:transparent!important;color:transparent;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-actions.swal2-loading .swal2-styled.swal2-cancel{margin-right:30px;margin-left:30px}.swal2-actions.swal2-loading :not(.swal2-styled).swal2-confirm::after{content:"";display:inline-block;width:15px;height:15px;margin-left:5px;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border:3px solid #999;border-radius:50%;border-right-color:transparent;box-shadow:1px 1px 1px #fff}.swal2-styled{margin:.3125em;padding:.625em 2em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#3085d6;color:#fff;font-size:1.0625em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#aaa;color:#fff;font-size:1.0625em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(50,100,150,.4)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{-webkit-box-pack:center;justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar{position:absolute;bottom:0;left:0;width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;-webkit-box-pack:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;-webkit-transition:color .1s ease-out;transition:color .1s ease-out;border:none;border-radius:0;outline:initial;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{-webkit-transform:none;transform:none;background:0 0;color:#f27474}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;-webkit-box-pack:center;justify-content:center;margin:0;padding:0;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;-webkit-transition:border-color .3s,box-shadow .3s;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 3px #c4e6f5}.swal2-file::-webkit-input-placeholder,.swal2-input::-webkit-input-placeholder,.swal2-textarea::-webkit-input-placeholder{color:#ccc}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::-ms-input-placeholder,.swal2-input::-ms-input-placeholder,.swal2-textarea::-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{margin:0 .4em}.swal2-validation-message{display:none;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;-webkit-box-pack:center;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;-webkit-box-flex:1;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:3.75em 3.75em;transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 3.75em;transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{-webkit-box-align:center;align-items:center;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;width:2em;height:2em;border-radius:2em;background:#3085d6;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#3085d6}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;width:2.5em;height:.4em;margin:0 -1px;background:#3085d6}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{-webkit-transition:none;transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-moz-document url-prefix(){.swal2-close:focus{outline:2px solid rgba(50,100,150,.4)}}@-webkit-keyframes swal2-toast-show{0%{-webkit-transform:translateY(-.625em) rotateZ(2deg);transform:translateY(-.625em) rotateZ(2deg)}33%{-webkit-transform:translateY(0) rotateZ(-2deg);transform:translateY(0) rotateZ(-2deg)}66%{-webkit-transform:translateY(.3125em) rotateZ(2deg);transform:translateY(.3125em) rotateZ(2deg)}100%{-webkit-transform:translateY(0) rotateZ(0);transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{-webkit-transform:translateY(-.625em) rotateZ(2deg);transform:translateY(-.625em) rotateZ(2deg)}33%{-webkit-transform:translateY(0) rotateZ(-2deg);transform:translateY(0) rotateZ(-2deg)}66%{-webkit-transform:translateY(.3125em) rotateZ(2deg);transform:translateY(.3125em) rotateZ(2deg)}100%{-webkit-transform:translateY(0) rotateZ(0);transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{-webkit-transform:rotateZ(1deg);transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{-webkit-transform:rotateZ(1deg);transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{-webkit-transform:scale(.7);transform:scale(.7)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes swal2-show{0%{-webkit-transform:scale(.7);transform:scale(.7)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}100%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(.5);transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}100%{-webkit-transform:scale(.5);transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}100%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}100%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}50%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}80%{margin-top:-.375em;-webkit-transform:scale(1.15);transform:scale(1.15)}100%{margin-top:0;-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}50%{margin-top:1.625em;-webkit-transform:scale(.4);transform:scale(.4);opacity:0}80%{margin-top:-.375em;-webkit-transform:scale(1.15);transform:scale(1.15)}100%{margin-top:0;-webkit-transform:scale(1);transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}100%{-webkit-transform:rotateX(0);transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}100%{-webkit-transform:rotateX(0);transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;-webkit-transform:translateY(-50%);transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}body.swal2-toast-column .swal2-toast{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:stretch;align-items:stretch}body.swal2-toast-column .swal2-toast .swal2-actions{-webkit-box-flex:1;flex:1;align-self:stretch;height:2.2em;margin-top:.3125em}body.swal2-toast-column .swal2-toast .swal2-loading{-webkit-box-pack:center;justify-content:center}body.swal2-toast-column .swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}body.swal2-toast-column .swal2-toast .swal2-validation-message{font-size:1em}')}function fire(){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,(function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,o="ArrayBuffer"in t;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<s.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=h(t),e=p(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=p(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),f(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),f(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),f(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];E.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=E,t.fetch=function(t,e){return new Promise((function(n,i){var o=new w(t,e),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new d;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL"),n(new E("response"in s?s.response:s.responseText,t))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&r&&(s.responseType="blob"),o.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),s.send(void 0===o._bodyInit?null:o._bodyInit)}))},t.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function v(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&r&&a(t))this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=m(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=function(t){var e=t.toUpperCase();return-1<c.indexOf(e)?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.Math==Math&&t}function r(t){try{return!!t()}catch(t){return!0}}function i(t){return"object"==typeof t?null!==t:"function"==typeof t}function o(t){return v?m.createElement(t):{}}function s(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}function a(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function u(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function c(e,n){try{_(f,e,n)}catch(t){f[e]=n}return n}function l(t,e){return I.call(t,e)}function h(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++C+k).toString(36)}function p(t){return l(x,t)||(x[t]=A&&l(D,t)?D[t]:R("Symbol."+t)),x[t]}var f=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),d=!1,y=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),m=f.document,v=i(m)&&i(m.createElement),g=!y&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})),b=Object.defineProperty,w={f:y?b:function(t,e,n){if(s(t),e=a(e,!0),s(n),g)try{return b(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},_=y?function(t,e,n){return w.f(t,e,u(1,n))}:function(t,e,n){return t[e]=n,t},E="__core-js_shared__",T=f[E]||c(E,{}),S=e((function(t){(t.exports=function(t,e){return T[t]||(T[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.2",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),I={}.hasOwnProperty,C=0,k=Math.random(),A=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())})),N=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,x=S("wks"),D=f.Symbol,R=N?D:D&&D.withoutSetter||h,P={};P[p("toStringTag")]="z";var O="[object z]"===String(P),L=Function.toString;function M(t){return W[t]||(W[t]=h(t))}"function"!=typeof T.inspectSource&&(T.inspectSource=function(t){return L.call(t)});var F,U,j,q=T.inspectSource,B=f.WeakMap,V="function"==typeof B&&/native code/.test(q(B)),W=S("keys"),H={};if(V){var z=new(0,f.WeakMap),G=z.get,K=z.has,Q=z.set;F=function(t,e){return Q.call(z,t,e),e},U=function(t){return G.call(z,t)||{}},j=function(t){return K.call(z,t)}}else{var Y=M("state");H[Y]=!0,F=function(t,e){return _(t,Y,e),e},U=function(t){return l(t,Y)?t[Y]:{}},j=function(t){return l(t,Y)}}function X(t){return Z.call(t).slice(8,-1)}var $={set:F,get:U,has:j,enforce:function(t){return j(t)?U(t):F(t,{})},getterFor:function(t){return function(e){var n;if(!i(e)||(n=U(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},J=e((function(t){var e=$.get,n=$.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||l(i,"name")||_(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==f?(s?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=i:_(t,e,i)):a?t[e]=i:c(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||q(this)}))})),Z={}.toString,tt=p("toStringTag"),et="Arguments"==X(function(){return arguments}()),nt=O?X:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),tt))?n:et?X(e):"Object"==(r=X(e))&&"function"==typeof e.callee?"Arguments":r};function rt(t){return isNaN(t=+t)?0:(0<t?wt:bt)(t)}function it(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function ot(t){return function(e,n){var r,i,o=String(it(e)),s=rt(n),a=o.length;return s<0||a<=s?t?"":void 0:(r=o.charCodeAt(s))<55296||56319<r||s+1===a||(i=o.charCodeAt(s+1))<56320||57343<i?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}}function st(t){return Ct(it(t))}function at(t){return"function"==typeof t?t:void 0}function ut(t,e){return arguments.length<2?at(Nt[t])||at(f[t]):Nt[t]&&Nt[t][e]||f[t]&&f[t][e]}function ct(t){return 0<t?xt(rt(t),9007199254740991):0}function lt(t){return function(e,n,r){var i,o=st(e),s=ct(o.length),a=function(t,e){var n=rt(t);return n<0?Dt(n+e,0):Rt(n,e)}(r,s);if(t&&n!=n){for(;a<s;)if((i=o[a++])!=i)return!0}else for(;a<s;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}}function ht(t,e){var n,r=st(t),i=0,o=[];for(n in r)!l(H,n)&&l(r,n)&&o.push(n);for(;e.length>i;)l(r,n=e[i++])&&(~Pt(o,n)||o.push(n));return o}function pt(t,e){for(var n=Ut(e),r=w.f,i=At.f,o=0;o<n.length;o++){var s=n[o];l(t,s)||r(t,s,i(e,s))}}function ft(t,e){var n=Bt[qt(t)];return n==Wt||n!=Vt&&("function"==typeof e?r(e):!!e)}function dt(t,e){var n,r,i,o,s,a=t.target,u=t.global,l=t.stat;if(n=u?f:l?f[a]||c(a,{}):(f[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=zt(n,r))&&s.value:n[r],!Ht(u?r:a+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;pt(o,i)}(t.sham||i&&i.sham)&&_(o,"sham",!0),J(n,r,o,t)}}function yt(t){return Object(it(t))}O||J(Object.prototype,"toString",O?{}.toString:function(){return"[object "+nt(this)+"]"},{unsafe:!0});var mt,vt,gt,bt=Math.ceil,wt=Math.floor,_t={codeAt:ot(!1),charAt:ot(!0)},Et={}.propertyIsEnumerable,Tt=Object.getOwnPropertyDescriptor,St={f:Tt&&!Et.call({1:2},1)?function(t){var e=Tt(this,t);return!!e&&e.enumerable}:Et},It="".split,Ct=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==X(t)?It.call(t,""):Object(t)}:Object,kt=Object.getOwnPropertyDescriptor,At={f:y?kt:function(t,e){if(t=st(t),e=a(e,!0),g)try{return kt(t,e)}catch(t){}if(l(t,e))return u(!St.f.call(t,e),t[e])}},Nt=f,xt=Math.min,Dt=Math.max,Rt=Math.min,Pt=(lt(!0),lt(!1)),Ot=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lt=Ot.concat("length","prototype"),Mt={f:Object.getOwnPropertyNames||function(t){return ht(t,Lt)}},Ft={f:Object.getOwnPropertySymbols},Ut=ut("Reflect","ownKeys")||function(t){var e=Mt.f(s(t)),n=Ft.f;return n?e.concat(n(t)):e},jt=/#|\.prototype\./,qt=ft.normalize=function(t){return String(t).replace(jt,".").toLowerCase()},Bt=ft.data={},Vt=ft.NATIVE="N",Wt=ft.POLYFILL="P",Ht=ft,zt=At.f,Gt=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Kt=M("IE_PROTO"),Qt=Object.prototype,Yt=Gt?Object.getPrototypeOf:function(t){return l(t=yt(t),Kt)?t[Kt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Qt:null},Xt=p("iterator"),$t=!1;function Jt(){}function Zt(t){return"<script>"+t+"</"+se+">"}[].keys&&("next"in(gt=[].keys())?(vt=Yt(Yt(gt)))!==Object.prototype&&(mt=vt):$t=!0),null==mt&&(mt={}),l(mt,Xt)||_(mt,Xt,(function(){return this}));var te,ee={IteratorPrototype:mt,BUGGY_SAFARI_ITERATORS:$t},ne=Object.keys||function(t){return ht(t,Ot)},re=y?Object.defineProperties:function(t,e){s(t);for(var n,r=ne(e),i=r.length,o=0;o<i;)w.f(t,n=r[o++],e[n]);return t},ie=ut("document","documentElement"),oe="prototype",se="script",ae=M("IE_PROTO"),ue=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch(t){}ue=te?function(t){t.write(Zt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(te):function(){var t,e=o("iframe");return e.style.display="none",ie.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Zt("document.F=Object")),t.close(),t.F}();for(var t=Ot.length;t--;)delete ue[oe][Ot[t]];return ue()};function ce(t,e,n){t&&!l(t=n?t:t.prototype,ye)&&de(t,ye,{configurable:!0,value:e})}function le(){return this}function he(){return this}function pe(t,e,n,r,i,o,s){function a(t){if(t===i&&m)return m;if(!we&&t in d)return d[t];switch(t){case"keys":case Ee:case Te:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){var r=e+" Iterator";t.prototype=fe(ve,{next:u(1,n)}),ce(t,r,!1),me[r]=le}(n,e,r);var c,l,h,p=e+" Iterator",f=!1,d=t.prototype,y=d[_e]||d["@@iterator"]||i&&d[i],m=!we&&y||a(i),v="Array"==e&&d.entries||y;if(v&&(c=Yt(v.call(new t)),be!==Object.prototype&&c.next&&(Yt(c)!==be&&(ge?ge(c,be):"function"!=typeof c[_e]&&_(c,_e,he)),ce(c,p,!0))),i==Ee&&y&&y.name!==Ee&&(f=!0,m=function(){return y.call(this)}),d[_e]!==m&&_(d,_e,m),me[e]=m,i)if(l={values:a(Ee),keys:o?m:a("keys"),entries:a(Te)},s)for(h in l)!we&&!f&&h in d||J(d,h,l[h]);else dt({target:e,proto:!0,forced:we||f},l);return l}H[ae]=!0;var fe=Object.create||function(t,e){var n;return null!==t?(Jt[oe]=s(t),n=new Jt,Jt[oe]=null,n[ae]=t):n=ue(),void 0===e?n:re(n,e)},de=w.f,ye=p("toStringTag"),me={},ve=ee.IteratorPrototype,ge=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return s(n),function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),be=ee.IteratorPrototype,we=ee.BUGGY_SAFARI_ITERATORS,_e=p("iterator"),Ee="values",Te="entries",Se=_t.charAt,Ie="String Iterator",Ce=$.set,ke=$.getterFor(Ie);pe(String,"String",(function(t){Ce(this,{type:Ie,string:String(t),index:0})}),(function(){var t,e=ke(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Se(n,r),e.index+=t.length,{value:t,done:!1})}));var Ae={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ne=p("unscopables"),xe=Array.prototype;function De(t){xe[Ne][t]=!0}null==xe[Ne]&&w.f(xe,Ne,{configurable:!0,value:fe(null)});var Re="Array Iterator",Pe=$.set,Oe=$.getterFor(Re),Le=pe(Array,"Array",(function(t,e){Pe(this,{type:Re,target:st(t),index:0,kind:e})}),(function(){var t=Oe(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");me.Arguments=me.Array,De("keys"),De("values"),De("entries");var Me=p("iterator"),Fe=p("toStringTag"),Ue=Le.values;for(var je in Ae){var qe=f[je],Be=qe&&qe.prototype;if(Be){if(Be[Me]!==Ue)try{_(Be,Me,Ue)}catch(qa){Be[Me]=Ue}if(Be[Fe]||_(Be,Fe,je),Ae[je])for(var Ve in Le)if(Be[Ve]!==Le[Ve])try{_(Be,Ve,Le[Ve])}catch(qa){Be[Ve]=Le[Ve]}}}function We(t,e,n){for(var r in e)J(t,r,e[r],n);return t}function He(t){var e=ut(t);y&&e&&!e[Je]&&(0,w.f)(e,Je,{configurable:!0,get:function(){return this}})}function ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Ge(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Ke(t){return void 0!==t&&(me.Array===t||tn[Ze]===t)}function Qe(t,e,n){if(ze(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}function Ye(t){if(null!=t)return t[en]||t["@@iterator"]||me[nt(t)]}function Xe(t,e,n,r){try{return r?e(s(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&s(i.call(t)),e}}var $e=f.Promise,Je=p("species"),Ze=p("iterator"),tn=Array.prototype,en=p("iterator"),nn=e((function(t){function e(t,e){this.stopped=t,this.result=e}(t.exports=function(t,n,r,i,o){var a,u,c,l,h,p,f,d=Qe(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(u=Ye(t)))throw TypeError("Target is not iterable");if(Ke(u)){for(c=0,l=ct(t.length);c<l;c++)if((h=i?d(s(f=t[c])[0],f[1]):d(t[c]))&&h instanceof e)return h;return new e(!1)}a=u.call(t)}for(p=a.next;!(f=p.call(a)).done;)if("object"==typeof(h=Xe(a,d,f.value,i))&&h&&h instanceof e)return h;return new e(!1)}).stop=function(t){return new e(!0,t)}})),rn=p("iterator"),on=!1;try{var sn=0,an={next:function(){return{done:!!sn++}},return:function(){on=!0}};an[rn]=function(){return this},Array.from(an,(function(){throw 2}))}catch(qa){}function un(t,e){if(!e&&!on)return!1;var n=!1;try{var r={};r[rn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function cn(t,e){var n,r=s(t).constructor;return void 0===r||null==(n=s(r)[vn])?e:ze(n)}function ln(t){if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}}function hn(t){return function(){ln(t)}}function pn(t){ln(t.data)}function fn(t){f.postMessage(t+"",wn.protocol+"//"+wn.host)}var dn,yn,mn,vn=p("species"),gn=ut("navigator","userAgent")||"",bn=/(iphone|ipod|ipad).*applewebkit/i.test(gn),wn=f.location,_n=f.setImmediate,En=f.clearImmediate,Tn=f.process,Sn=f.MessageChannel,In=f.Dispatch,Cn=0,kn={},An="onreadystatechange";_n&&En||(_n=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++Cn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},dn(Cn),Cn},En=function(t){delete kn[t]},"process"==X(Tn)?dn=function(t){Tn.nextTick(hn(t))}:In&&In.now?dn=function(t){In.now(hn(t))}:Sn&&!bn?(mn=(yn=new Sn).port2,yn.port1.onmessage=pn,dn=Qe(mn.postMessage,mn,1)):!f.addEventListener||"function"!=typeof postMessage||f.importScripts||r(fn)?dn=An in o("script")?function(t){ie.appendChild(o("script"))[An]=function(){ie.removeChild(this),ln(t)}}:function(t){setTimeout(hn(t),0)}:(dn=fn,f.addEventListener("message",pn,!1)));var Nn,xn,Dn,Rn,Pn,On,Ln,Mn,Fn={set:_n,clear:En},Un=At.f,jn=Fn.set,qn=f.MutationObserver||f.WebKitMutationObserver,Bn=f.process,Vn=f.Promise,Wn="process"==X(Bn),Hn=Un(f,"queueMicrotask"),zn=Hn&&Hn.value;function Gn(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=ze(e),this.reject=ze(n)}function Kn(t,e){if(s(t),i(e)&&e.constructor===t)return e;var n=Jn.f(t);return(0,n.resolve)(e),n.promise}function Qn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}zn||(Nn=function(){var t,e;for(Wn&&(t=Bn.domain)&&t.exit();xn;){e=xn.fn,xn=xn.next;try{e()}catch(t){throw xn?Rn():Dn=void 0,t}}Dn=void 0,t&&t.enter()},Rn=Wn?function(){Bn.nextTick(Nn)}:qn&&!bn?(Pn=!0,On=document.createTextNode(""),new qn(Nn).observe(On,{characterData:!0}),function(){On.data=Pn=!Pn}):Vn&&Vn.resolve?(Ln=Vn.resolve(void 0),Mn=Ln.then,function(){Mn.call(Ln,Nn)}):function(){jn.call(f,Nn)});var Yn,Xn,$n=zn||function(t){var e={fn:t,next:void 0};Dn&&(Dn.next=e),xn||(xn=e,Rn()),Dn=e},Jn={f:function(t){return new Gn(t)}},Zn=f.process,tr=Zn&&Zn.versions,er=tr&&tr.v8;function nr(t){var e;return!(!i(t)||"function"!=typeof(e=t.then))&&e}function rr(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;$n((function(){for(var i=e.value,o=1==e.state,s=0;r.length>s;){var a,u,c,l=r[s++],h=o?l.ok:l.fail,p=l.resolve,f=l.reject,d=l.domain;try{h?(o||(2===e.rejection&&Rr(t,e),e.rejection=1),!0===h?a=i:(d&&d.enter(),a=h(i),d&&(d.exit(),c=!0)),a===l.promise?f(br("Promise-chain cycle")):(u=nr(a))?u.call(a,p,f):p(a)):f(i)}catch(i){d&&!c&&d.exit(),f(i)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&xr(t,e)}))}}function ir(t,e,n){var r,i;Cr?((r=wr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),f.dispatchEvent(r)):r={promise:e,reason:n},(i=f["on"+t])?i(r):t===kr&&function(t,e){var n=f.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function or(t,e,n,r){return function(i){t(e,n,i,r)}}function sr(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,rr(t,e,!0))}er?Xn=(Yn=er.split("."))[0]+Yn[1]:gn&&(!(Yn=gn.match(/Edge\/(\d+)/))||74<=Yn[1])&&(Yn=gn.match(/Chrome\/(\d+)/))&&(Xn=Yn[1]);var ar,ur,cr,lr,hr=Xn&&+Xn,pr=Fn.set,fr=p("species"),dr="Promise",yr=$.get,mr=$.set,vr=$.getterFor(dr),gr=$e,br=f.TypeError,wr=f.document,_r=f.process,Er=ut("fetch"),Tr=Jn.f,Sr=Tr,Ir="process"==X(_r),Cr=!!(wr&&wr.createEvent&&f.dispatchEvent),kr="unhandledrejection",Ar=Ht(dr,(function(){if(q(gr)===String(gr)){if(66===hr)return!0;if(!Ir&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=hr&&/native code/.test(gr))return!1;function t(t){t((function(){}),(function(){}))}var e=gr.resolve(1);return(e.constructor={})[fr]=t,!(e.then((function(){}))instanceof t)})),Nr=Ar||!un((function(t){gr.all(t).catch((function(){}))})),xr=function(t,e){pr.call(f,(function(){var n,r=e.value;if(Dr(e)&&(n=Qn((function(){Ir?_r.emit("unhandledRejection",r,t):ir(kr,t,r)})),e.rejection=Ir||Dr(e)?2:1,n.error))throw n.value}))},Dr=function(t){return 1!==t.rejection&&!t.parent},Rr=function(t,e){pr.call(f,(function(){Ir?_r.emit("rejectionHandled",t):ir("rejectionhandled",t,e.value)}))},Pr=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw br("Promise can't be resolved itself");var i=nr(n);i?$n((function(){var r={done:!1};try{i.call(n,or(Pr,t,r,e),or(sr,t,r,e))}catch(n){sr(t,r,n,e)}})):(e.value=n,e.state=1,rr(t,e,!1))}catch(n){sr(t,{done:!1},n,e)}}};Ar&&(gr=function(t){Ge(this,gr,dr),ze(t),ar.call(this);var e=yr(this);try{t(or(Pr,this,e),or(sr,this,e))}catch(t){sr(this,e,t)}},(ar=function(t){mr(this,{type:dr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=We(gr.prototype,{then:function(t,e){var n=vr(this),r=Tr(cn(this,gr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ir?_r.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&rr(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),ur=function(){var t=new ar,e=yr(t);this.promise=t,this.resolve=or(Pr,t,e),this.reject=or(sr,t,e)},Jn.f=Tr=function(t){return t===gr||t===cr?new ur(t):Sr(t)},"function"==typeof $e&&(lr=$e.prototype.then,J($e.prototype,"then",(function(t,e){var n=this;return new gr((function(t,e){lr.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Er&&dt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Kn(gr,Er.apply(f,arguments))}}))),dt({global:!0,wrap:!0,forced:Ar},{Promise:gr}),ce(gr,dr,!1),He(dr),cr=ut(dr),dt({target:dr,stat:!0,forced:Ar},{reject:function(t){var e=Tr(this);return e.reject.call(void 0,t),e.promise}}),dt({target:dr,stat:!0,forced:Ar},{resolve:function(t){return Kn(this,t)}}),dt({target:dr,stat:!0,forced:Nr},{all:function(t){var e=this,n=Tr(e),r=n.resolve,i=n.reject,o=Qn((function(){var n=ze(e.resolve),o=[],s=0,a=1;nn(t,(function(t){var u=s++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Tr(e),r=n.reject,i=Qn((function(){var i=ze(e.resolve);nn(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),dt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Jn.f(e),r=n.resolve,i=n.reject,o=Qn((function(){var n=ze(e.resolve),i=[],o=0,s=1;nn(t,(function(t){var a=o++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[a]={status:"fulfilled",value:t},--s||r(i))}),(function(t){u||(u=!0,i[a]={status:"rejected",reason:t},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}}),dt({target:"Promise",proto:!0,real:!0,forced:!!$e&&r((function(){$e.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=cn(this,ut("Promise")),n="function"==typeof t;return this.then(n?function(n){return Kn(e,t()).then((function(){return n}))}:t,n?function(n){return Kn(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof $e||$e.prototype.finally||J($e.prototype,"finally",ut("Promise").prototype.finally);var Or=$.set,Lr=$.getterFor("AggregateError"),Mr=function(t,e){var n=this;if(!(n instanceof Mr))return new Mr(t,e);ge&&(n=ge(new Error(e),Yt(n)));var r=[];return nn(t,r.push,r),y?Or(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&_(n,"message",String(e)),n};Mr.prototype=fe(Error.prototype,{constructor:u(5,Mr),message:u(5,""),name:u(5,"AggregateError")}),y&&w.f(Mr.prototype,"errors",{get:function(){return Lr(this).errors},configurable:!0}),dt({global:!0},{AggregateError:Mr}),dt({target:"Promise",stat:!0},{try:function(t){var e=Jn.f(this),n=Qn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Fr="No one promise resolved";function Ur(t,e){var n;return Vr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Vr(n.prototype)?i(n)&&null===(n=n[Wr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function jr(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=5==t||o;return function(a,u,c,l){for(var h,p,f=yt(a),d=Ct(f),y=Qe(u,c,3),m=ct(d.length),v=0,g=l||Ur,b=e?g(a,m):n?g(a,0):void 0;v<m;v++)if((s||v in d)&&(p=y(h=d[v],v,f),t))if(e)b[v]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:Hr.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}}function qr(t){throw t}function Br(t,e){var n=[][t],i=!!l(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=l(e,0)?e[0]:qr,s=l(e,1)?e[1]:void 0;return!!n&&!r((function(){if(i&&!y)return!0;function t(t){i?Gr(e,t,{enumerable:!0,get:qr}):e[t]=1}var e={length:-1};t(1),t(2147483646),t(4294967294),n.call(e,o,s)}))}dt({target:"Promise",stat:!0},{any:function(t){var e=this,n=Jn.f(e),r=n.resolve,i=n.reject,o=Qn((function(){var n=ze(e.resolve),o=[],s=0,a=1,u=!1;nn(t,(function(t){var c=s++,l=!1;o.push(void 0),a++,n.call(e,t).then((function(t){l||u||(u=!0,r(t))}),(function(t){l||u||(l=!0,o[c]=t,--a||i(new(ut("AggregateError"))(o,Fr)))}))})),--a||i(new(ut("AggregateError"))(o,Fr))}));return o.error&&i(o.value),n.promise}});var Vr=Array.isArray||function(t){return"Array"==X(t)},Wr=p("species"),Hr=[].push,zr={forEach:jr(0),map:jr(1),filter:jr(2),some:jr(3),every:jr(4),find:jr(5),findIndex:jr(6)},Gr=Object.defineProperty,Kr=zr.find,Qr="find",Yr=!0,Xr=Br(Qr);function $r(t,e,n){return Qe(Jr,f[t].prototype[e],n)}Qr in[]&&Array(1)[Qr]((function(){Yr=!1})),dt({target:"Array",proto:!0,forced:Yr||!Xr},{find:function(t,e){return Kr(this,t,1<arguments.length?e:void 0)}}),De(Qr);var Jr=Function.call,Zr=($r("Array","find"),zr.findIndex),ti="findIndex",ei=!0,ni=Br(ti);function ri(t,e,n){var r=a(e);r in t?w.f(t,r,u(0,n)):t[r]=n}ti in[]&&Array(1)[ti]((function(){ei=!1})),dt({target:"Array",proto:!0,forced:ei||!ni},{findIndex:function(t,e){return Zr(this,t,1<arguments.length?e:void 0)}}),De(ti),$r("Array","findIndex"),dt({target:"Array",stat:!0,forced:!un((function(t){Array.from(t)}))},{from:function(t,e,n){var r,i,o,s,a,u=yt(t),c="function"==typeof this?this:Array,l=arguments.length,h=1<l?e:void 0,p=void 0!==h,f=Ye(u),d=0;if(p&&(h=Qe(h,2<l?n:void 0,2)),null==f||c==Array&&Ke(f))for(i=new c(r=ct(u.length));d<r;d++)ri(i,d,p?h(u[d],d):u[d]);else for(a=(s=f.call(u)).next,i=new c;!(o=a.call(s)).done;d++)ri(i,d,p?Xe(s,h,[o.value,d],!0):o.value);return i.length=d,i}});var ii,oi=zr.some,si=!!(ii=[].some)&&r((function(){ii.call(null,(function(){throw 1}),1)})),ai=Br("some");dt({target:"Array",proto:!0,forced:!si||!ai},{some:function(t,e){return oi(this,t,1<arguments.length?e:void 0)}}),$r("Array","some");var ui,ci="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,li=w.f,hi=f.Int8Array,pi=hi&&hi.prototype,fi=f.Uint8ClampedArray,di=fi&&fi.prototype,yi=hi&&Yt(hi),mi=pi&&Yt(pi),vi=Object.prototype,gi=p("toStringTag"),bi=h("TYPED_ARRAY_TAG"),wi=ci&&!!ge&&"Opera"!==nt(f.opera),_i={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(ui in _i)f[ui]||(wi=!1);if((!wi||"function"!=typeof yi||yi===Function.prototype)&&(yi=function(){throw TypeError("Incorrect invocation")},wi))for(ui in _i)f[ui]&&ge(f[ui],yi);if((!wi||!mi||mi===vi)&&(mi=yi.prototype,wi))for(ui in _i)f[ui]&&ge(f[ui].prototype,mi);if(wi&&Yt(di)!==mi&&ge(di,mi),y&&!l(mi,gi))for(ui in li(mi,gi,{get:function(){return i(this)?this[bi]:void 0}}),_i)f[ui]&&_(f[ui],bi,ui);function Ei(){return Ii.call(Ai(this))}var Ti=p("iterator"),Si=f.Uint8Array,Ii=Le.values,Ci=Le.keys,ki=Le.entries,Ai=function(t){if(function(t){return i(t)&&l(_i,nt(t))}(t))return t;throw TypeError("Target is not a typed array")},Ni=function(t,e,n){if(y){if(n)for(var r in _i){var i=f[r];i&&l(i.prototype,t)&&delete i.prototype[t]}mi[t]&&!n||J(mi,t,n?e:wi&&pi[t]||e)}},xi=Si&&Si.prototype[Ti],Di=!!xi&&("values"==xi.name||null==xi.name);Ni("entries",(function(){return ki.call(Ai(this))})),Ni("keys",(function(){return Ci.call(Ai(this))})),Ni("values",Ei,!Di),Ni(Ti,Ei,!Di);var Ri=Object.assign,Pi=Object.defineProperty,Oi=!Ri||r((function(){if(y&&1!==Ri({b:1},Ri(Pi({},"a",{enumerable:!0,get:function(){Pi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Ri({},t)[n]||ne(Ri({},e)).join("")!=r}))?function(t,e){for(var n=yt(t),r=arguments.length,i=1,o=Ft.f,s=St.f;i<r;)for(var a,u=Ct(arguments[i++]),c=o?ne(u).concat(o(u)):ne(u),l=c.length,h=0;h<l;)a=c[h++],y&&!s.call(u,a)||(n[a]=u[a]);return n}:Ri;function Li(t){return function(e){for(var n,r=st(e),i=ne(r),o=i.length,s=0,a=[];s<o;)n=i[s++],y&&!Mi.call(r,n)||a.push(t?[n,r[n]]:r[n]);return a}}dt({target:"Object",stat:!0,forced:Object.assign!==Oi},{assign:Oi});var Mi=St.f,Fi={entries:Li(!0),values:Li(!1)},Ui=Fi.entries;dt({target:"Object",stat:!0},{entries:function(t){return Ui(t)}});var ji=Fi.values;function qi(t){if(function(t){var e;return i(t)&&(void 0!==(e=t[Vi])?!!e:"RegExp"==X(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t}function Bi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Wi]=!1,"/./"[e](n)}catch(t){}}return!1}dt({target:"Object",stat:!0},{values:function(t){return ji(t)}});var Vi=p("match"),Wi=p("match");dt({target:"String",proto:!0,forced:!Bi("includes")},{includes:function(t,e){return!!~String(it(this)).indexOf(qi(t),1<arguments.length?e:void 0)}}),$r("String","includes");var Hi,zi=At.f,Gi="".startsWith,Ki=Math.min,Qi=Bi("startsWith");function Yi(t){if(!i(t))return!1;var e=t[$i];return void 0!==e?!!e:Vr(t)}dt({target:"String",proto:!0,forced:!(!Qi&&(Hi=zi(String.prototype,"startsWith"))&&!Hi.writable||Qi)},{startsWith:function(t,e){var n=String(it(this));qi(t);var r=ct(Ki(1<arguments.length?e:void 0,n.length)),i=String(t);return Gi?Gi.call(n,i,r):n.slice(r,r+i.length)===i}}),$r("String","startsWith"),dt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(it(this)),n="",r=rt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),$r("String","repeat");var Xi=p("species"),$i=p("isConcatSpreadable"),Ji=9007199254740991,Zi="Maximum allowed index exceeded",to=51<=hr||!r((function(){var t=[];return t[$i]=!1,t.concat()[0]!==t})),eo=51<=hr||!r((function(){var t=[];return(t.constructor={})[Xi]=function(){return{foo:1}},1!==t.concat(Boolean).foo}));function no(t){var e=Nt.Symbol||(Nt.Symbol={});l(e,t)||po(e,t,{value:ho.f(t)})}function ro(t,e){var n=Ao[t]=fe(Eo[vo]);return bo(n,{type:mo,tag:t,description:e}),y||(n.description=e),n}function io(t,e){s(t);var n=st(e),r=ne(n).concat(jo(n));return fo(r,(function(e){y&&!Uo.call(n,e)||Fo(t,e,n[e])})),t}function oo(t,e){var n=st(t),r=a(e,!0);if(n!==_o||!l(Ao,r)||l(No,r)){var i=So(n,r);return!i||!l(Ao,r)||l(n,yo)&&n[yo][r]||(i.enumerable=!0),i}}function so(t){var e=Co(st(t)),n=[];return fo(e,(function(t){l(Ao,t)||l(H,t)||n.push(t)})),n}dt({target:"Array",proto:!0,forced:!to||!eo},{concat:function(t){var e,n,r,i,o,s=yt(this),a=Ur(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(Yi(o=-1===e?s:arguments[e])){if(i=ct(o.length),Ji<u+i)throw TypeError(Zi);for(n=0;n<i;n++,u++)n in o&&ri(a,u,o[n])}else{if(Ji<=u)throw TypeError(Zi);ri(a,u++,o)}return a.length=u,a}});var ao=Mt.f,uo={}.toString,co="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],lo={f:function(t){return co&&"[object Window]"==uo.call(t)?function(t){try{return ao(t)}catch(t){return co.slice()}}(t):ao(st(t))}},ho={f:p},po=w.f,fo=zr.forEach,yo=M("hidden"),mo="Symbol",vo="prototype",go=p("toPrimitive"),bo=$.set,wo=$.getterFor(mo),_o=Object[vo],Eo=f.Symbol,To=ut("JSON","stringify"),So=At.f,Io=w.f,Co=lo.f,ko=St.f,Ao=S("symbols"),No=S("op-symbols"),xo=S("string-to-symbol-registry"),Do=S("symbol-to-string-registry"),Ro=S("wks"),Po=f.QObject,Oo=!Po||!Po[vo]||!Po[vo].findChild,Lo=y&&r((function(){return 7!=fe(Io({},"a",{get:function(){return Io(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=So(_o,e);r&&delete _o[e],Io(t,e,n),r&&t!==_o&&Io(_o,e,r)}:Io,Mo=N?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Eo},Fo=function(t,e,n){t===_o&&Fo(No,e,n),s(t);var r=a(e,!0);return s(n),l(Ao,r)?(n.enumerable?(l(t,yo)&&t[yo][r]&&(t[yo][r]=!1),n=fe(n,{enumerable:u(0,!1)})):(l(t,yo)||Io(t,yo,u(1,{})),t[yo][r]=!0),Lo(t,r,n)):Io(t,r,n)},Uo=function(t){var e=a(t,!0),n=ko.call(this,e);return!(this===_o&&l(Ao,e)&&!l(No,e))&&(!(n||!l(this,e)||!l(Ao,e)||l(this,yo)&&this[yo][e])||n)},jo=function(t){var e=t===_o,n=Co(e?No:st(t)),r=[];return fo(n,(function(t){!l(Ao,t)||e&&!l(_o,t)||r.push(Ao[t])})),r};A||(J((Eo=function(t){if(this instanceof Eo)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=h(e),r=function(t){this===_o&&r.call(No,t),l(this,yo)&&l(this[yo],n)&&(this[yo][n]=!1),Lo(this,n,u(1,t))};return y&&Oo&&Lo(_o,n,{configurable:!0,set:r}),ro(n,e)})[vo],"toString",(function(){return wo(this).tag})),J(Eo,"withoutSetter",(function(t){return ro(h(t),t)})),St.f=Uo,w.f=Fo,At.f=oo,Mt.f=lo.f=so,Ft.f=jo,ho.f=function(t){return ro(p(t),t)},y&&(Io(Eo[vo],"description",{configurable:!0,get:function(){return wo(this).description}}),J(_o,"propertyIsEnumerable",Uo,{unsafe:!0}))),dt({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Eo}),fo(ne(Ro),(function(t){no(t)})),dt({target:mo,stat:!0,forced:!A},{for:function(t){var e=String(t);if(l(xo,e))return xo[e];var n=Eo(e);return xo[e]=n,Do[n]=e,n},keyFor:function(t){if(!Mo(t))throw TypeError(t+" is not a symbol");if(l(Do,t))return Do[t]},useSetter:function(){Oo=!0},useSimple:function(){Oo=!1}}),dt({target:"Object",stat:!0,forced:!A,sham:!y},{create:function(t,e){return void 0===e?fe(t):io(fe(t),e)},defineProperty:Fo,defineProperties:io,getOwnPropertyDescriptor:oo}),dt({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:so,getOwnPropertySymbols:jo}),dt({target:"Object",stat:!0,forced:r((function(){Ft.f(1)}))},{getOwnPropertySymbols:function(t){return Ft.f(yt(t))}}),To&&dt({target:"JSON",stat:!0,forced:!A||r((function(){var t=Eo();return"[null]"!=To([t])||"{}"!=To({a:t})||"{}"!=To(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],s=1;s<arguments.length;)o.push(arguments[s++]);if((i(r=e)||void 0!==t)&&!Mo(t))return Vr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Mo(e))return e}),o[1]=e,To.apply(null,o)}}),Eo[vo][go]||_(Eo[vo],go,Eo[vo].valueOf),ce(Eo,mo),H[yo]=!0,no("asyncIterator");var qo=w.f,Bo=f.Symbol;if(y&&"function"==typeof Bo&&!("description"in Bo.prototype&&void 0===Bo().description)){var Vo={},Wo=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof Wo?new Bo(e):void 0===e?Bo():Bo(e);return""===e&&(Vo[n]=!0),n};pt(Wo,Bo);var Ho=Wo.prototype=Bo.prototype;Ho.constructor=Wo;var zo=Ho.toString,Go="Symbol(test)"==String(Bo("test")),Ko=/^Symbol\((.*)\)[^)]+$/;qo(Ho,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=zo.call(t);if(l(Vo,t))return"";var n=Go?e.slice(7,-1):e.replace(Ko,"$1");return""===n?void 0:n}}),dt({global:!0,forced:!0},{Symbol:Wo})}function Qo(t,e,n){function o(t){var e=l[t];J(l,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(a&&!i(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!i(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(a&&!i(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})}var s=-1!==t.indexOf("Map"),a=-1!==t.indexOf("Weak"),u=s?"set":"add",c=f[t],l=c&&c.prototype,h=c,p={};if(Ht(t,"function"!=typeof c||!(a||l.forEach&&!r((function(){(new c).entries().next()})))))h=n.getConstructor(e,t,s,u),$o.REQUIRED=!0;else if(Ht(t,!0)){var d=new h,y=d[u](a?{}:-0,1)!=d,m=r((function(){d.has(1)})),v=un((function(t){new c(t)})),g=!a&&r((function(){for(var t=new c,e=5;e--;)t[u](e,e);return!t.has(-0)}));v||(((h=e((function(e,n){Ge(e,h,t);var r=function(t,e,n){var r,o;return ge&&"function"==typeof(r=e.constructor)&&r!==n&&i(o=r.prototype)&&o!==n.prototype&&ge(t,o),t}(new c,e,h);return null!=n&&nn(n,r[u],r,s),r}))).prototype=l).constructor=h),(m||g)&&(o("delete"),o("has"),s&&o("get")),(g||y)&&o(u),a&&l.clear&&delete l.clear}return p[t]=h,dt({global:!0,forced:h!=c},p),ce(h,t),a||n.setStrong(h,t,s),h}function Yo(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return ze(this),(r=void 0!==u)&&ze(u),null==t?new this:(i=[],r?(o=0,s=Qe(u,2<a?n:void 0,2),nn(t,(function(t){i.push(s(t,o++))}))):nn(t,i.push,i),new this(i))}no("hasInstance"),no("isConcatSpreadable"),no("iterator"),no("match"),no("matchAll"),no("replace"),no("search"),no("species"),no("split"),no("toPrimitive"),no("toStringTag"),no("unscopables"),ce(Math,"Math",!0),ce(f.JSON,"JSON",!0),no("asyncDispose"),no("dispose"),no("observable"),no("patternMatch"),no("replaceAll"),ho.f("iterator");var Xo=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),$o=e((function(t){function e(t){n(t,r,{value:{objectID:"O"+ ++o,weakData:{}}})}var n=w.f,r=h("meta"),o=0,s=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,r)){if(!s(t))return"F";if(!n)return"E";e(t)}return t[r].objectID},getWeakData:function(t,n){if(!l(t,r)){if(!s(t))return!0;if(!n)return!1;e(t)}return t[r].weakData},onFreeze:function(t){return Xo&&a.REQUIRED&&s(t)&&!l(t,r)&&e(t),t}};H[r]=!0})),Jo=w.f,Zo=$o.fastKey,ts=$.set,es=$.getterFor,ns={getConstructor:function(t,e,n,r){function i(t,e,n){var r,i,o=s(t),u=a(t,e);return u?u.value=n:(o.last=u={index:i=Zo(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=u),r&&(r.next=u),y?o.size++:t.size++,"F"!==i&&(o.index[i]=u)),t}var o=t((function(t,i){Ge(t,o,e),ts(t,{type:e,index:fe(null),first:void 0,last:void 0,size:0}),y||(t.size=0),null!=i&&nn(i,t[r],t,n)})),s=es(e),a=function(t,e){var n,r=s(t),i=Zo(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return We(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,y?t.size=0:this.size=0},delete:function(t){var e=s(this),n=a(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),y?e.size--:this.size--}return!!n},forEach:function(t,e){for(var n,r=s(this),i=Qe(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!a(this,t)}}),We(o.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return i(this,0===t?0:t,e)}}:{add:function(t){return i(this,t=0===t?0:t,t)}}),y&&Jo(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=es(e),o=es(r);pe(t,e,(function(t,e){ts(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}}),n?"entries":"values",!n,!0),He(e)}};function rs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}function is(){for(var t,e=s(this),n=ze(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function os(t){return Map.prototype.entries.call(t)}function ss(t,e,n){var r,i=s(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}function as(t){return Set.prototype.values.call(t)}Qo("Map",(function(t){return function(e){return t(this,arguments.length?e:void 0)}}),ns),dt({target:"Map",stat:!0},{from:Yo}),dt({target:"Map",stat:!0},{of:rs}),dt({target:"Map",proto:!0,real:!0,forced:d},{deleteAll:function(){return is.apply(this,arguments)}}),dt({target:"Map",proto:!0,real:!0,forced:d},{every:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3);return!nn(r,(function(t,e){if(!i(e,t,n))return nn.stop()}),void 0,!0,!0).stopped}}),dt({target:"Map",proto:!0,real:!0,forced:d},{filter:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3),o=new(cn(n,ut("Map"))),a=ze(o.set);return nn(r,(function(t,e){i(e,t,n)&&a.call(o,t,e)}),void 0,!0,!0),o}}),dt({target:"Map",proto:!0,real:!0,forced:d},{find:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3);return nn(r,(function(t,e){if(i(e,t,n))return nn.stop(e)}),void 0,!0,!0).result}}),dt({target:"Map",proto:!0,real:!0,forced:d},{findKey:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3);return nn(r,(function(t,e){if(i(e,t,n))return nn.stop(t)}),void 0,!0,!0).result}}),dt({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;ze(e);var r=ze(n.has),i=ze(n.get),o=ze(n.set);return nn(t,(function(t){var s=e(t);r.call(n,s)?i.call(n,s).push(t):o.call(n,s,[t])})),n}}),dt({target:"Map",proto:!0,real:!0,forced:d},{includes:function(t){return nn(os(s(this)),(function(e,n){if(function(t,e){return t===e||t!=t&&e!=e}(n,t))return nn.stop()}),void 0,!0,!0).stopped}}),dt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;ze(e);var r=ze(n.set);return nn(t,(function(t){r.call(n,e(t),t)})),n}}),dt({target:"Map",proto:!0,real:!0,forced:d},{keyOf:function(t){return nn(os(s(this)),(function(e,n){if(n===t)return nn.stop(e)}),void 0,!0,!0).result}}),dt({target:"Map",proto:!0,real:!0,forced:d},{mapKeys:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3),o=new(cn(n,ut("Map"))),a=ze(o.set);return nn(r,(function(t,e){a.call(o,i(e,t,n),e)}),void 0,!0,!0),o}}),dt({target:"Map",proto:!0,real:!0,forced:d},{mapValues:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3),o=new(cn(n,ut("Map"))),a=ze(o.set);return nn(r,(function(t,e){a.call(o,t,i(e,t,n))}),void 0,!0,!0),o}}),dt({target:"Map",proto:!0,real:!0,forced:d},{merge:function(t){for(var e=s(this),n=ze(e.set),r=0;r<arguments.length;)nn(arguments[r++],n,e,!0);return e}}),dt({target:"Map",proto:!0,real:!0,forced:d},{reduce:function(t,e){var n=s(this),r=os(n),i=arguments.length<2,o=i?void 0:e;if(ze(t),nn(r,(function(e,r){o=i?(i=!1,r):t(o,r,e,n)}),void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),dt({target:"Map",proto:!0,real:!0,forced:d},{some:function(t,e){var n=s(this),r=os(n),i=Qe(t,1<arguments.length?e:void 0,3);return nn(r,(function(t,e){if(i(e,t,n))return nn.stop()}),void 0,!0,!0).stopped}}),dt({target:"Map",proto:!0,real:!0,forced:d},{update:function(t,e,n){var r=s(this),i=arguments.length;ze(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var a=o?r.get(t):ze(2<i?n:void 0)(t,r);return r.set(t,e(a,t,r)),r}}),dt({target:"Map",proto:!0,real:!0,forced:d},{upsert:ss}),dt({target:"Map",proto:!0,real:!0,forced:d},{updateOrInsert:ss}),Qo("Set",(function(t){return function(e){return t(this,arguments.length?e:void 0)}}),ns),dt({target:"Set",stat:!0},{from:Yo}),dt({target:"Set",stat:!0},{of:rs}),dt({target:"Set",proto:!0,real:!0,forced:d},{addAll:function(){return(function(){for(var t=s(this),e=ze(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}).apply(this,arguments)}}),dt({target:"Set",proto:!0,real:!0,forced:d},{deleteAll:function(){return is.apply(this,arguments)}}),dt({target:"Set",proto:!0,real:!0,forced:d},{every:function(t,e){var n=s(this),r=as(n),i=Qe(t,1<arguments.length?e:void 0,3);return!nn(r,(function(t){if(!i(t,t,n))return nn.stop()}),void 0,!1,!0).stopped}}),dt({target:"Set",proto:!0,real:!0,forced:d},{difference:function(t){var e=s(this),n=new(cn(e,ut("Set")))(e),r=ze(n.delete);return nn(t,(function(t){r.call(n,t)})),n}}),dt({target:"Set",proto:!0,real:!0,forced:d},{filter:function(t,e){var n=s(this),r=as(n),i=Qe(t,1<arguments.length?e:void 0,3),o=new(cn(n,ut("Set"))),a=ze(o.add);return nn(r,(function(t){i(t,t,n)&&a.call(o,t)}),void 0,!1,!0),o}}),dt({target:"Set",proto:!0,real:!0,forced:d},{find:function(t,e){var n=s(this),r=as(n),i=Qe(t,1<arguments.length?e:void 0,3);return nn(r,(function(t){if(i(t,t,n))return nn.stop(t)}),void 0,!1,!0).result}}),dt({target:"Set",proto:!0,real:!0,forced:d},{intersection:function(t){var e=s(this),n=new(cn(e,ut("Set"))),r=ze(e.has),i=ze(n.add);return nn(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}}),dt({target:"Set",proto:!0,real:!0,forced:d},{isDisjointFrom:function(t){var e=s(this),n=ze(e.has);return!nn(t,(function(t){if(!0===n.call(e,t))return nn.stop()})).stopped}}),dt({target:"Set",proto:!0,real:!0,forced:d},{isSubsetOf:function(t){var e=function(t){var e=Ye(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return s(e.call(t))}(this),n=s(t),r=n.has;return"function"!=typeof r&&(n=new(ut("Set"))(t),r=ze(n.has)),!nn(e,(function(t){if(!1===r.call(n,t))return nn.stop()}),void 0,!1,!0).stopped}}),dt({target:"Set",proto:!0,real:!0,forced:d},{isSupersetOf:function(t){var e=s(this),n=ze(e.has);return!nn(t,(function(t){if(!1===n.call(e,t))return nn.stop()})).stopped}}),dt({target:"Set",proto:!0,real:!0,forced:d},{join:function(t){var e=as(s(this)),n=void 0===t?",":String(t),r=[];return nn(e,r.push,r,!1,!0),r.join(n)}}),dt({target:"Set",proto:!0,real:!0,forced:d},{map:function(t,e){var n=s(this),r=as(n),i=Qe(t,1<arguments.length?e:void 0,3),o=new(cn(n,ut("Set"))),a=ze(o.add);return nn(r,(function(t){a.call(o,i(t,t,n))}),void 0,!1,!0),o}}),dt({target:"Set",proto:!0,real:!0,forced:d},{reduce:function(t,e){var n=s(this),r=as(n),i=arguments.length<2,o=i?void 0:e;if(ze(t),nn(r,(function(e){o=i?(i=!1,e):t(o,e,e,n)}),void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),dt({target:"Set",proto:!0,real:!0,forced:d},{some:function(t,e){var n=s(this),r=as(n),i=Qe(t,1<arguments.length?e:void 0,3);return nn(r,(function(t){if(i(t,t,n))return nn.stop()}),void 0,!1,!0).stopped}}),dt({target:"Set",proto:!0,real:!0,forced:d},{symmetricDifference:function(t){var e=s(this),n=new(cn(e,ut("Set")))(e),r=ze(n.delete),i=ze(n.add);return nn(t,(function(t){r.call(n,t)||i.call(n,t)})),n}}),dt({target:"Set",proto:!0,real:!0,forced:d},{union:function(t){var e=s(this),n=new(cn(e,ut("Set")))(e);return nn(t,ze(n.add),n),n}});var us=Math.floor;dt({target:"Number",stat:!0},{isInteger:function(t){return!i(t)&&isFinite(t)&&us(t)===t}});var cs=function(t,e){return(cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ls(t,e){function n(){this.constructor=t}cs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var hs=function(){return(hs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ps(t,e,n,r){return new(n=n||Promise)((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function fs(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ds(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function ys(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ms(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ys(arguments[e]));return t}function vs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function gs(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function bs(t){try{return Es.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ws=function(t,e){if(!t)throw _s(e)},_s=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},Es={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gs(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ts(t){return Ss(void 0,t)}function Ss(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Ss(t[n],e[n]));return t}var Is=(Cs.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},Cs);function Cs(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function ks(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function As(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ks())}function Ns(){return"object"==typeof navigator&&"ReactNative"===navigator.product}var xs,Ds=(ls(Rs,xs=Error),Rs);function Rs(t,e){var n=xs.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Ps.prototype.create),n}var Ps=(Os.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(Ls,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Ds(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},Os);function Os(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ls=/\{\$([^}]+)}/g;function Ms(t){return JSON.parse(t)}function Fs(t){return JSON.stringify(t)}function Us(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Ms(bs(o[0])||""),n=Ms(bs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function js(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qs(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Bs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var Ws=(Hs.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Hs.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},Hs.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Hs.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Hs);function Hs(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function zs(t,e){var n=new Gs(t,e);return n.subscribe.bind(n)}var Gs=(Ks.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},Ks.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},Ks.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},Ks.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Qs),void 0===r.error&&(r.error=Qs),void 0===r.complete&&(r.complete=Qs);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},Ks.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Ks.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Ks.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},Ks.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},Ks);function Ks(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function Qs(){}function Ys(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Xs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function $s(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Xs(t,e,r)+"must be a valid function.")}function Js(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Xs(t,e,r)+"must be a valid context object.")}function Zs(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ta=(ea.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ea.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ea.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ea);function ea(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var na="[DEFAULT]",ra=(ia.prototype.get=function(t){void 0===t&&(t=na);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Is;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ia.prototype.getImmediate=function(t){var e=hs({identifier:na,optional:!1},t),n=e.optional,r=this.normalizeInstanceIdentifier(e.identifier);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},ia.prototype.getComponent=function(){return this.component},ia.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(function(t){return"EAGER"===t.instantiationMode}(this.component=t))try{this.getOrInitializeService(na)}catch(t){}try{for(var r=ds(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ys(i.value,2),s=o[1],a=this.normalizeInstanceIdentifier(o[0]);try{var u=this.getOrInitializeService(a);s.resolve(u)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ia.prototype.clearInstance=function(t){void 0===t&&(t=na),this.instancesDeferred.delete(t),this.instances.delete(t)},ia.prototype.delete=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},ia.prototype.isComponentSet=function(){return null!=this.component},ia.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===na?void 0:t}(t)),this.instances.set(t,e)),e||null},ia.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:na:t},ia);function ia(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var oa,sa,aa=(ua.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ua.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ua.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ra(t,this);return this.providers.set(t,e),e},ua.prototype.getProviders=function(){return Array.from(this.providers.values())},ua);function ua(t){this.name=t,this.providers=new Map}function ca(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function la(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case oa.DEBUG:case oa.VERBOSE:console.log.apply(console,ca(["["+i+"]  "+t.name+":"],n));break;case oa.INFO:console.info.apply(console,ca(["["+i+"]  "+t.name+":"],n));break;case oa.WARN:console.warn.apply(console,ca(["["+i+"]  "+t.name+":"],n));break;case oa.ERROR:console.error.apply(console,ca(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(sa=oa=oa||{})[sa.DEBUG=0]="DEBUG",sa[sa.VERBOSE=1]="VERBOSE",sa[sa.INFO=2]="INFO",sa[sa.WARN=3]="WARN",sa[sa.ERROR=4]="ERROR",sa[sa.SILENT=5]="SILENT";var ha,pa=oa.INFO,fa=(Object.defineProperty(da.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in oa))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(da.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),da.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,ca([this,oa.DEBUG],t))},da.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,ca([this,oa.VERBOSE],t))},da.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,ca([this,oa.INFO],t))},da.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,ca([this,oa.WARN],t))},da.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,ca([this,oa.ERROR],t))},da);function da(t){this.name=t,this._logLevel=pa,this._logHandler=la}var ya,ma=((ha={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ha["bad-app-name"]="Illegal App name: '{$appName}",ha["duplicate-app"]="Firebase App named '{$appName}' already exists",ha["app-deleted"]="Firebase App named '{$appName}' already deleted",ha["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ha),va=new Ps("app","Firebase",ma),ga="@firebase/app",ba="[DEFAULT]",wa=((ya={})[ga]="fire-core",ya["@firebase/analytics"]="fire-analytics",ya["@firebase/auth"]="fire-auth",ya["@firebase/database"]="fire-rtdb",ya["@firebase/functions"]="fire-fn",ya["@firebase/installations"]="fire-iid",ya["@firebase/messaging"]="fire-fcm",ya["@firebase/performance"]="fire-perf",ya["@firebase/remote-config"]="fire-rc",ya["@firebase/storage"]="fire-gcs",ya["@firebase/firestore"]="fire-fst",ya["fire-js"]="fire-js",ya["firebase-wrapper"]="fire-js-all",ya),_a=new fa("@firebase/app"),Ea=(Object.defineProperty(Ta.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ta.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Ta.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Ta.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},Ta.prototype._getService=function(t,e){return void 0===e&&(e=ba),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ta.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ba),this.container.getProvider(t).clearInstance(e)},Ta.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){_a.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ta.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ta.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw va.create("app-deleted",{appName:this.name_})},Ta);function Ta(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ts(t),this.container=new aa(e.name),this._addComponent(new ta("app",(function(){return o}),"PUBLIC"));try{for(var s=ds(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next())this._addComponent(a.value)}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Ea.prototype.name&&Ea.prototype.options||Ea.prototype.delete||console.log("dc");var Sa=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=ba);var s=o.name;if("string"!=typeof s||!s)throw va.create("bad-app-name",{appName:String(s)});if(js(e,s))throw va.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=wa[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void _a.warn(u.join(" "))}o(new ta(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},apps:null,SDK_VERSION:"7.9.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function i(t){if(!js(e,t=t||ba))throw va.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return _a.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw va.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&Ss(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,u).apply(this,o.multipleInstances?t:[])}}try{for(var l=ds(Object.keys(e)),h=l.next();!h.done;h=l.next())e[h.value]._addComponent(o)}catch(a){s={error:a}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(Ea);return e.INTERNAL=hs(hs({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ss(e,t)},createSubscribe:zs,ErrorFactory:Ps,deepExtend:Ss}),e}(),Ia=(Ca.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e;return"VERSION"===(null===(e=t.getComponent())||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},Ca);function Ca(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){_a.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ka=self.firebase.SDK_VERSION;ka&&0<=ka.indexOf("LITE")&&_a.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Aa=Sa.initializeApp;Sa.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&_a.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Aa.apply(void 0,t)};var Na,xa=Sa;(Na=xa).INTERNAL.registerComponent(new ta("platform-logger",(function(t){return new Ia(t)}),"PRIVATE")),Na.registerVersion(ga,"0.5.4",void 0),Na.registerVersion("fire-js",""),xa.registerVersion("firebase","7.9.1","app"),(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function i(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;i.prototype.c=function(t){s(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},i.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new i;return e.prototype.o=function(t){var e=this.f();t.La(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.La(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.La=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=r(t),s=i.next();!s.done;s=i.next())o(s.value).La(e,n)}))},e.all=function(t){var n=r(t),i=n.next();return i.done?o([]):new e((function(t,e){function r(e){return function(n){s[e]=n,0==--a&&t(s)}}for(var s=[],a=0;s.push(void 0),a++,o(i.value).La(r(s.length-1),e),!(i=n.next()).done;);}))},e}));var i=i||{},o=this||self;function s(t){return"string"==typeof t}function a(t){return"boolean"==typeof t}var u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return null===t}function f(t){return"array"==h(t)}function d(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==h(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function C(t){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function k(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");C.call(this,n+t[r])}function A(t,e){throw new k("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function N(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function D(){this.b=this.a=null}S(C,Error),C.prototype.name="CustomError",S(k,C),k.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var R=new N((function(){return new P}),(function(t){t.reset()}));function P(){this.next=this.b=this.a=null}function O(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||o).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var s=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){s="<object could not be stringified>"}else s=void 0===t?"undefined":null===t?"null":typeof t;A("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,s)}}D.prototype.add=function(t,e){var n=R.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},P.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},P.prototype.reset=function(){this.next=this.b=this.a=null};var L=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},M=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},F=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=s(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},U=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function j(t,e){return 0<=L(t,e)}function q(t,e){var n;return(n=0<=(e=L(t,e)))&&Array.prototype.splice.call(t,e,1),n}function B(t,e){!function(t,e){for(var n=s(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function V(t){return Array.prototype.concat.apply([],arguments)}function W(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function H(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function z(t){for(var e in t)return!1;return!0}function G(t){var e,n={};for(e in t)n[e]=t[e];return n}var K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<K.length;o++)n=K[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Y(t,e){this.a=t===J&&e||"",this.b=$}function X(t){return t instanceof Y&&t.constructor===Y&&t.b===$?t.a:(A("expected object of type Const, got '"+t+"'"),"type_error:Const")}Y.prototype.qa=!0,Y.prototype.pa=function(){return this.a},Y.prototype.toString=function(){return"Const{"+this.a+"}"};var $={},J={},Z=new Y(J,"");function tt(){this.a="",this.b=ot}function et(t){return t instanceof tt&&t.constructor===tt&&t.b===ot?t.a:(A("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function nt(t,e){var n=X(t);if(!it.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return st(t=n.replace(rt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof Y?X(t):encodeURIComponent(String(t))})))}tt.prototype.qa=!0,tt.prototype.pa=function(){return this.a.toString()},tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var rt=/%{(\w+)}/g,it=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ot={};function st(t){var e=new tt;return e.a=t,e}var at=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},ut=/&/g,ct=/</g,lt=/>/g,ht=/"/g,pt=/'/g,ft=/\x00/g,dt=/[\x00&<>"']/;function yt(t,e){return-1!=t.indexOf(e)}function mt(t,e){return t<e?-1:e<t?1:0}function vt(){this.a="",this.b=Et}function gt(t){return t instanceof vt&&t.constructor===vt&&t.b===Et?t.a:(A("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}vt.prototype.qa=!0,vt.prototype.pa=function(){return this.a.toString()},vt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var bt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function wt(t){return t instanceof vt?t:(t="object"==typeof t&&t.qa?t.pa():String(t),bt.test(t)||(t="about:invalid#zClosurez"),Tt(t))}var _t,Et={};function Tt(t){var e=new vt;return e.a=t,e}Tt("about:blank");t:{var St=o.navigator;if(St){var It=St.userAgent;if(It){_t=It;break t}}_t=""}function Ct(t){return yt(_t,t)}function kt(){this.a="",this.b=Nt}function At(t){return t instanceof kt&&t.constructor===kt&&t.b===Nt?t.a:(A("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}kt.prototype.qa=!0,kt.prototype.pa=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nt={};function xt(t){var e=new kt;return e.a=t,e}xt("<!DOCTYPE html>");var Dt,Rt,Pt=xt("");function Ot(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Lt(t){return dt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(ut,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ct,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(lt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ht,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(pt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ft,"&#0;"))),t}function Mt(t){o.setTimeout((function(){throw t}),0)}function Ft(t,e){Rt||function(){if(o.Promise&&o.Promise.resolve){var t=o.Promise.resolve(void 0);Rt=function(){t.then(qt)}}else Rt=function(){var t=qt;!y(o.setImmediate)||o.Window&&o.Window.prototype&&!Ct("Edge")&&o.Window.prototype.setImmediate==o.setImmediate?(Dt=Dt||function(){var t=o.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ct("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=st(X(Z));O(t,"HTMLIFrameElement"),t.src=et(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(At(Pt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||Ct("Trident")||Ct("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){o.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}())(t):o.setImmediate(t)}}(),Ut||(Rt(),Ut=!0),jt.add(t,e)}xt("<br>");var Ut=!1,jt=new D;function qt(){for(var t;n=e=void 0,n=null,(e=jt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Mt(t)}x(R,t)}var e,n;Ut=!1}function Bt(t,e){if(this.a=Vt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){te(n,Wt,t)}),(function(t){if(!(t instanceof ae))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}te(n,Ht,t)}))}catch(t){te(this,Ht,t)}}var Vt=0,Wt=2,Ht=3;function zt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}zt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Gt=new N((function(){return new zt}),(function(t){t.reset()}));function Kt(t,e,n){var r=Gt.get();return r.g=t,r.b=e,r.f=n,r}function Qt(t){if(t instanceof Bt)return t;var e=new Bt(l);return te(e,Wt,t),e}function Yt(t){return new Bt((function(e,n){n(t)}))}function Xt(t,e,n){ee(t,e,n,null)||Ft(E(e,t))}function $t(t){return new Bt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Xt(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Jt(t,e){t.b||t.a!=Wt&&t.a!=Ht||ne(t),t.f?t.f.next=e:t.b=e,t.f=e}function Zt(t,e,n,r){var i=Kt(null,null,null);return i.a=new Bt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ae?o(e):t(i)}catch(e){o(e)}}:o})),Jt(i.a.c=t,i),i.a}function te(t,e,n){t.a==Vt&&(t===n&&(e=Ht,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ee(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ne(t),e!=Ht||n instanceof ae||function(t,e){t.g=!0,Ft((function(){t.g&&se.call(null,e)}))}(t,n)))}function ee(t,e,n,r){if(t instanceof Bt)return Jt(t,Kt(e||l,n||null,r)),!0;if(I(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(y(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function ne(t){t.h||(t.h=!0,Ft(t.Zb,t))}function re(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function ie(t,e,n,r){if(n==Ht&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,oe(e,n,r);else try{e.c?e.g.call(e.f):oe(e,n,r)}catch(t){se.call(null,t)}x(Gt,e)}function oe(t,e,n){e==Wt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Bt.prototype.then=function(t,e,n){return Zt(this,y(t)?t:null,y(e)?e:null,n)},Bt.prototype.$goog_Thenable=!0,(t=Bt.prototype).ka=function(t,e){return(t=Kt(t,t,e)).c=!0,Jt(this,t),this},t.s=function(t,e){return Zt(this,null,t,e)},t.cancel=function(t){this.a==Vt&&Ft((function(){!function t(e,n){if(e.a==Vt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Vt&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):re(r),ie(r,o,Ht,n)))}e.c=null}else te(e,Ht,n)}(this,new ae(t))}),this)},t.Oc=function(t){this.a=Vt,te(this,Wt,t)},t.Pc=function(t){this.a=Vt,te(this,Ht,t)},t.Zb=function(){for(var t;t=re(this);)ie(this,t,this.a,this.i);this.h=!1};var se=Mt;function ae(t){C.call(this,t)}function ue(){this.va=this.va,this.la=this.la}function ce(t){!t.va&&(t.va=!0,t.za(),0)&&(t[v]||(t[v]=++g))}function le(t){return le[" "](t),t}S(ae,C),ue.prototype.va=!(ae.prototype.name="cancel"),ue.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},le[" "]=l;var he,pe,fe=Ct("Opera"),de=Ct("Trident")||Ct("MSIE"),ye=Ct("Edge"),me=ye||de,ve=Ct("Gecko")&&!(yt(_t.toLowerCase(),"webkit")&&!Ct("Edge"))&&!(Ct("Trident")||Ct("MSIE"))&&!Ct("Edge"),ge=yt(_t.toLowerCase(),"webkit")&&!Ct("Edge");function be(){var t=o.document;return t?t.documentMode:void 0}t:{var we="",_e=(pe=_t,ve?/rv:([^\);]+)(\)|;)/.exec(pe):ye?/Edge\/([\d\.]+)/.exec(pe):de?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pe):ge?/WebKit\/(\S+)/.exec(pe):fe?/(?:Version)[ \/]?(\S+)/.exec(pe):void 0);if(_e&&(we=_e?_e[1]:""),de){var Ee=be();if(null!=Ee&&Ee>parseFloat(we)){he=String(Ee);break t}}he=we}var Te,Se={};function Ie(t){return function(e,n){var r=Se;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=at(String(he)).split("."),r=at(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=mt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||mt(0==s[2].length,0==a[2].length)||mt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}()}(t)}Te=o.document&&de?be():void 0;var Ce=Object.freeze||function(t){return t},ke=!de||9<=Number(Te),Ae=de&&!Ie("9"),Ne=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{o.addEventListener("test",l,e),o.removeEventListener("test",l,e)}catch(t){}return t}();function xe(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function De(t,e){if(xe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ve){t:{try{le(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:Re[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}xe.prototype.preventDefault=function(){this.Mb=!1},S(De,xe);var Re=Ce({2:"touch",3:"pen",4:"mouse"});De.prototype.preventDefault=function(){De.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ae)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},De.prototype.f=function(){return this.a};var Pe="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Le(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Oe,this.ta=this.Ka=!1}function Me(t){t.ta=!0,t.listener=null,t.proxy=null,t.src=null,t.Pa=null}function Fe(t){this.src=t,this.a={},this.b=0}function Ue(t,e){var n=e.type;n in t.a&&q(t.a[n],e)&&(Me(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ta&&o.listener==e&&o.capture==!!n&&o.Pa==r)return i}return-1}Fe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=je(t,e,r,i);return-1<s?(e=t[s],n||(e.Ka=!1)):((e=new Le(e,this.src,o,!!r,i)).Ka=n,t.push(e)),e};var qe="closure_lm_"+(1e6*Math.random()|0),Be={};function Ve(t,e,n,r,i){if(r&&r.once)He(t,e,n,r,i);else if(f(e))for(var o=0;o<e.length;o++)Ve(t,e[o],n,r,i);else n=Ze(n),t&&t[Pe]?en(t,e,n,m(r)?!!r.capture:!!r,i):We(t,e,n,!1,r,i)}function We(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=m(i)?!!i.capture:!!i,a=$e(t);if(a||(t[qe]=a=new Fe(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=Xe,e=ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ne||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ke(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function He(t,e,n,r,i){if(f(e))for(var o=0;o<e.length;o++)He(t,e[o],n,r,i);else n=Ze(n),t&&t[Pe]?nn(t,e,n,m(r)?!!r.capture:!!r,i):We(t,e,n,!0,r,i)}function ze(t,e,n,r,i){if(f(e))for(var o=0;o<e.length;o++)ze(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Ze(n),t&&t[Pe]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=je(o=t.a[e],n,r,i))&&(Me(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&$e(t))&&(e=t.a[e.toString()],t=-1,e&&(t=je(e,n,r,i)),(n=-1<t?e[t]:null)&&Ge(n))}function Ge(t){if("number"!=typeof t&&t&&!t.ta){var e=t.src;if(e&&e[Pe])Ue(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ke(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=$e(e))?(Ue(n,t),0==n.b&&(n.src=null,e[qe]=null)):Me(t)}}}function Ke(t){return t in Be?Be[t]:Be[t]="on"+t}function Qe(t,e,n,r){var i=!0;if((t=$e(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ta&&(o=Ye(o,r),i=i&&!1!==o)}return i}function Ye(t,e){var n=t.listener,r=t.Pa||t.src;return t.Ka&&Ge(t),n.call(r,e)}function Xe(t,e){if(t.ta)return!0;if(ke)return Ye(t,new De(e,this));if(!e)t:{e=["window","event"];for(var n=o,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new De(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var s=Qe(r[i],t,!0,e);n=n&&s}for(i=0;i<r.length;i++)e.b=r[i],s=Qe(r[i],t,!1,e),n=n&&s}return n}function $e(t){return(t=t[qe])instanceof Fe?t:null}var Je="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ze(t){return y(t)?t:(t[Je]||(t[Je]=function(e){return t.handleEvent(e)}),t[Je])}function tn(){ue.call(this),this.u=new Fe(this),(this.Sb=this).Xa=null}function en(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function nn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function rn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ta&&s.capture==n){var a=s.listener,u=s.Pa||s.src;s.Ka&&Ue(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Mb}function on(t,e,n){if(y(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:o.setTimeout(t,e||0)}function sn(t){var e=null;return new Bt((function(n,r){-1==(e=on((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw o.clearTimeout(e),t}))}function an(t){if(t.U&&"function"==typeof t.U)return t.U();if(s(t))return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function un(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(d(t)||s(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ln(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];hn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)hn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function hn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(tn,ue),tn.prototype[Pe]=!0,tn.prototype.addEventListener=function(t,e,n,r){Ve(this,t,e,n,r)},tn.prototype.removeEventListener=function(t,e,n,r){ze(this,t,e,n,r)},tn.prototype.dispatchEvent=function(t){var e,n=this.Xa;if(n)for(e=[];n;n=n.Xa)e.push(n);n=this.Sb;var r=t.type||t;if(s(t))t=new xe(t,n);else if(t instanceof xe)t.target=t.target||n;else{var i=t;Q(t=new xe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=rn(a,r,!0,t)&&i}if(i=rn(a=t.b=n,r,!0,t)&&i,i=rn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=rn(a=t.b=e[o],r,!1,t)&&i;return i},tn.prototype.za=function(){if(tn.qb.za.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Me(n[r]);delete e.a[t],e.b--}}this.Xa=null},(t=cn.prototype).U=function(){ln(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return ln(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return hn(this.b,t)?this.b[t]:e},t.set=function(t,e){hn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof fn?(this.h=void 0!==e?e:t.h,dn(this,t.f),this.i=t.i,this.b=t.b,yn(this,t.l),this.c=t.c,mn(this,Ln(t.a)),this.g=t.g):t&&(n=String(t).match(pn))?(this.h=!!e,dn(this,n[1]||"",!0),this.i=_n(n[2]||""),this.b=_n(n[3]||"",!0),yn(this,n[4]),this.c=_n(n[5]||"",!0),mn(this,n[6]||"",!0),this.g=_n(n[7]||"")):(this.h=!!e,this.a=new Nn(null,this.h))}function dn(t,e,n){t.f=n?_n(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function mn(t,e,n){e instanceof Nn?(t.a=e,function(t,e){e&&!t.f&&(xn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Rn(this,e),On(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=En(e,kn)),t.a=new Nn(e,t.h))}function vn(t,e,n){t.a.set(e,n)}function gn(t,e){return t.a.get(e)}function bn(t){return t instanceof fn?new fn(t):new fn(t,void 0)}function wn(t,e){var n=new fn(null,void 0);return dn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function _n(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function En(t,e,n){return s(t)?(t=encodeURI(t).replace(e,Tn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Tn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}fn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(En(e,Sn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(En(e,Sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(En(n,"/"==n.charAt(0)?Cn:In,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",En(n,An)),t.join("")},fn.prototype.resolve=function(t){var e=new fn(this),n=!!t.f;n?dn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)yn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(yt(i,"./")||yt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?mn(e,Ln(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Sn=/[#\/\?@]/g,In=/[#\?:]/g,Cn=/[#\?]/g,kn=/[#\?@]/g,An=/#/g;function Nn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function xn(t){t.a||(t.a=new cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Dn(t){var e=un(t);if(void 0===e)throw Error("Keys are undefined");var n=new Nn(null,void 0);t=an(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];f(o)?On(n,i,o):n.add(i,o)}return n}function Rn(t,e){xn(t),e=Mn(t,e),hn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,hn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ln(t)))}function Pn(t,e){return xn(t),e=Mn(t,e),hn(t.a.b,e)}function On(t,e,n){Rn(t,e),0<n.length&&(t.c=null,t.a.set(Mn(t,e),W(n)),t.b+=n.length)}function Ln(t){var e=new Nn;return e.c=t.c,t.a&&(e.a=new cn(t.a),e.b=t.b),e}function Mn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(t=Nn.prototype).add=function(t,e){xn(this),this.c=null,t=Mn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){xn(this),this.a.forEach((function(n,r){M(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){xn(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.U=function(t){xn(this);var e=[];if(s(t))Pn(this,t)&&(e=V(e,this.a.get(Mn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=V(e,t[n])}return e},t.set=function(t,e){return xn(this),this.c=null,Pn(this,t=Mn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Fn=!de||9<=Number(Te);function Un(t){var e=document;return s(t)?e.getElementById(t):t}function jn(t,e){H(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:qn.hasOwnProperty(n)?t.setAttribute(qn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var qn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Bn(t){if(t&&"number"==typeof t.length){if(m(t))return"function"==typeof t.item||"string"==typeof t.item;if(y(t))return"function"==typeof t.item}return!1}function Vn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(f(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Gn(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Gn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Wn,t,e),e.join("")}function Wn(){}var Hn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},zn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Gn(t,e){e.push('"',t.replace(zn,(function(t){var e=Hn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Hn[t]=e),e})),'"')}function Kn(){var t=hr();return de&&!!Te&&11==Te||/Edge\/\d+/.test(t)}function Qn(){return o.window&&o.window.location.href||self&&self.location&&self.location.href||""}function Yn(t,e){e=e||o.window;var n="about:blank";t&&(n=gt(wt(t)).toString()),e.location.href=n}function Xn(t){return!!((t=(t||hr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function $n(t){t=t||o.window;try{t.close()}catch(t){}}function Jn(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=hr().toLowerCase(),r&&(e.target=r,yt(n,"crios/")&&(e.target="_blank")),ur(hr())==ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof vt?n:wt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((Ct("iPhone")&&!Ct("iPod")&&!Ct("iPad")||Ct("iPad")||Ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(O(s=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof vt||e instanceof vt||(e="object"==typeof e&&e.qa?e.pa():String(e),bt.test(e)||(e="about:invalid#zClosurez"),e=Tt(e)),s.href=gt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=gt(e).toString(),s&&(me&&yt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Lt(t)+'">'),s.document.write(At(t)),s.document.close())):(s=r.open(gt(e).toString(),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr=/^[^@]+@[^@]+$/;function er(){var t=null;return new Bt((function(e){"complete"==o.document.readyState?e():(t=function(){e()},He(window,"load",t))})).s((function(e){throw ze(window,"load",t),e}))}function nr(t){return t=t||hr(),!("file:"!==mr()&&"ionic:"!==mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function rr(){var t=o.window;try{return!(!t||t==t.top)}catch(t){return!1}}function ir(){return void 0!==o.WorkerGlobalScope&&"function"==typeof o.importScripts}function or(){return xa.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":xa.INTERNAL.hasOwnProperty("node")?"Node":ir()?"Worker":"Browser"}function sr(){var t=or();return"ReactNative"===t||"Node"===t}var ar="Firefox";function ur(t){var e=t.toLowerCase();return yt(e,"opera/")||yt(e,"opr/")||yt(e,"opios/")?"Opera":yt(e,"iemobile")?"IEMobile":yt(e,"msie")||yt(e,"trident/")?"IE":yt(e,"edge/")?"Edge":yt(e,"firefox/")?ar:yt(e,"silk/")?"Silk":yt(e,"blackberry")?"Blackberry":yt(e,"webos")?"Webos":!yt(e,"safari/")||yt(e,"chrome/")||yt(e,"crios/")||yt(e,"android")?!yt(e,"chrome/")&&!yt(e,"crios/")||yt(e,"edge/")?yt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var cr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function lr(t,e){e=e||[];var n,r=[],i={};for(n in cr)i[cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=or())?r=ur(i=hr()):"Worker"===r&&(r=ur(i=hr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function hr(){return o.navigator&&o.navigator.userAgent||""}function pr(t,e){t=t.split("."),e=e||o;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function fr(){try{var t=o.localStorage,e=_r();if(t)return t.setItem(e,"1"),t.removeItem(e),!Kn()||!!o.indexedDB}catch(t){return ir()&&!!o.indexedDB}return!1}function dr(){return(yr()||"chrome-extension:"===mr()||nr())&&!sr()&&fr()&&!ir()}function yr(){return"http:"===mr()||"https:"===mr()}function mr(){return o.location&&o.location.protocol||null}function vr(t){return!Xn(t=t||hr())&&ur(t)!=ar}function gr(t){return void 0===t?null:Vn(t)}function br(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function wr(t){if(null!==t)return JSON.parse(t)}function _r(t){return t||Math.floor(1e9*Math.random()).toString()}function Er(t){return"Safari"!=ur(t=t||hr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Tr(){var t=o.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Sr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=hr(),e=or(),this.b=Xn(t)||"ReactNative"===e}function Ir(){var t=o.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Cr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function kr(){return!(!pr("fireauth.oauthhelper",o)&&!pr("fireauth.iframe",o))}Sr.prototype.get=function(){var t=o.navigator;return!t||"boolean"!=typeof t.onLine||!yr()&&"chrome-extension:"!==mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ar,Nr={};function xr(t){Nr[t]||(Nr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Dr={};Object.defineProperty(Dr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Dr,"abcd",{configurable:!0,enumerable:!0,value:2}),Ar=2==Dr.abcd}catch(t){Ar=!1}function Rr(t,e,n){Ar?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Pr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Rr(t,n,e[n])}function Or(t){var e={};return Pr(e,t),e}function Lr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Rr(e,n,Lr(t[n]));return e}function Mr(t){var e={},n=t[Ur],r=t[jr];if(!(t=t[qr])||t!=Fr&&!n)throw Error("Invalid provider user info!");e[Vr]=r||null,e[Br]=n||null,Rr(this,Hr,t),Rr(this,Wr,Lr(e))}var Fr="EMAIL_SIGNIN",Ur="email",jr="newEmail",qr="requestType",Br="email",Vr="fromEmail",Wr="data",Hr="operation";function zr(t,e){this.code=Kr+t,this.message=e||Qr[t]||""}function Gr(t){var e=t&&t.code;return e?new zr(e.substring(Kr.length),t.message):null}S(zr,Error),zr.prototype.A=function(){return{code:this.code,message:this.message}},zr.prototype.toJSON=function(){return this.A()};var Kr="auth/",Qr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Yr(t){var e=gn(t=bn(t),Xr)||null,n=gn(t,$r)||null,r=gn(t,ti)||null;if(r=r&&ni[r]||null,!e||!n||!r)throw new zr("argument-error",Xr+", "+$r+"and "+ti+" are required in a valid action code URL.");Pr(this,{apiKey:e,operation:r,code:n,continueUrl:gn(t,Jr)||null,languageCode:gn(t,Zr)||null,tenantId:gn(t,ei)||null})}var Xr="apiKey",$r="oobCode",Jr="continueUrl",Zr="languageCode",ti="mode",ei="tenantId",ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Fr,verifyEmail:"VERIFY_EMAIL"};function ri(t){try{return new Yr(t)}catch(t){return null}}function ii(t){var e=t[ci];if(void 0===e)throw new zr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new zr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[oi];if(n&&"object"==typeof n){e=n[pi];var r=n[li];if(n=n[hi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new zr("argument-error",li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new zr("argument-error",hi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new zr("argument-error",pi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new zr("missing-android-pkg-name")}}else if(void 0!==n)throw new zr("argument-error",oi+" property must be a non null object when specified.");if(this.f=null,(e=t[ui])&&"object"==typeof e){if("string"==typeof(e=e[fi])&&e.length)this.f=e;else if(void 0!==e)throw new zr("argument-error",fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new zr("argument-error",ui+" property must be a non null object when specified.");if(void 0!==(e=t[ai])&&"boolean"!=typeof e)throw new zr("argument-error",ai+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[si])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new zr("argument-error",si+" property must be a non empty string when specified.");this.i=t||null}var oi="android",si="dynamicLinkDomain",ai="handleCodeInApp",ui="iOS",ci="url",li="installApp",hi="minimumVersion",pi="packageName",fi="bundleId";function di(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var yi=null,mi=null;function vi(t){this.f=t.sub,this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function gi(t){return(t=bi(t))&&t.sub&&t.iss&&t.aud&&t.exp?new vi(t):null}function bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=mi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!yi){yi={},mi={};for(var t=0;t<65;t++)yi[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),62<=(mi[yi[t]]=t)&&(mi["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}vi.prototype.R=function(){return this.c},vi.prototype.g=function(){return this.b};var wi,_i={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ei(t){for(var e in _i)if(_i[e].id===t)return{firebaseEndpoint:(t=_i[e]).cb,secureTokenEndpoint:t.ib};return null}wi=Ei("__EID__")?"__EID__":void 0;var Ti="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Si=["client_id","response_type","scope","redirect_uri","state"],Ii={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Si},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Si},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Si},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ti},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Ci(t){for(var e in Ii)if(Ii[e].Fa==t)return Ii[e];return null}function ki(t){var e={};e["facebook.com"]=Ri,e["google.com"]=Oi,e["github.com"]=Pi,e["twitter.com"]=Li;var n=t&&t[Ni];try{if(n)return e[n]?new e[n](t):new Di(t);if(void 0!==t[Ai])return new xi(t)}catch(t){}return null}var Ai="idToken",Ni="providerId";function xi(t){var e=t[Ni];if(!e&&t[Ai]){var n=gi(t[Ai]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Rr(this,"providerId",e),Rr(this,"isNewUser",n)}function Di(t){xi.call(this,t),Rr(this,"profile",Lr((t=wr(t.rawUserInfo||"{}"))||{}))}function Ri(t){if(Di.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Pi(t){if(Di.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Rr(this,"username",this.profile&&this.profile.login||null)}function Oi(t){if(Di.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Li(t){if(Di.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Rr(this,"username",t.screenName||null)}function Mi(t){var e=bn(t),n=gn(e,"link"),r=gn(bn(n),"link");return gn(bn(e=gn(e,"deep_link_id")),"link")||e||r||n||t}function Fi(){}function Ui(t,e){return t.then((function(t){if(t[Is]){var n=gi(t[Is]);if(!n||e!=n.f)throw new zr("user-mismatch");return t}throw new zr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==Kr+"user-not-found"?new zr("user-mismatch"):t}))}function ji(t,e){if(!e)throw new zr("internal-error","failed to construct a credential");this.a=e,Rr(this,"providerId",t),Rr(this,"signInMethod",t)}function qi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Bi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ji(t.providerId,t.pendingToken)}catch(t){}return null}function Vi(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Rr(this,"idToken",e.idToken),e.accessToken&&Rr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Rr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new zr("internal-error","failed to construct a credential");Rr(this,"accessToken",e.oauthToken),Rr(this,"secret",e.oauthTokenSecret)}Rr(this,"providerId",t),Rr(this,"signInMethod",n)}function Wi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Dn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Hi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Vi(t.providerId,e,t.signInMethod)}catch(t){}}return null}function zi(t,e){this.Fc=e||[],Pr(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.eb=(Ci(t)||{}).Ea||null,this.bb=null}function Gi(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new zr("argument-error",'SAML provider IDs must be prefixed with "saml."');zi.call(this,t,[])}function Ki(t){zi.call(this,t,Si),this.a=[]}function Qi(){Ki.call(this,"facebook.com")}function Yi(t){if(!t)throw new zr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Qi).credential({accessToken:e})}function Xi(){Ki.call(this,"github.com")}function $i(t){if(!t)throw new zr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Xi).credential({accessToken:e})}function Ji(){Ki.call(this,"google.com"),this.ya("profile")}function Zi(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new Ji).credential({idToken:n,accessToken:e})}function to(){zi.call(this,"twitter.com",Ti)}function eo(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new zr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Vi("twitter.com",n,"twitter.com")}function no(t,e,n){this.a=t,this.c=e,Rr(this,"providerId","password"),Rr(this,"signInMethod",n===io.EMAIL_LINK_SIGN_IN_METHOD?io.EMAIL_LINK_SIGN_IN_METHOD:io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ro(t){return t&&t.email&&t.password?new no(t.email,t.password,t.signInMethod):null}function io(){Pr(this,{providerId:"password",isOAuthProvider:!1})}function oo(t,e){if(!(e=so(e)))throw new zr("argument-error","Invalid email link!");return new no(t,e.code,io.EMAIL_LINK_SIGN_IN_METHOD)}function so(t){return(t=ri(t=Mi(t)))&&t.operation===Fr?t:null}function ao(t){if(!(t.Va&&t.Ua||t.Ha&&t.ba))throw new zr("internal-error");this.a=t,Rr(this,"providerId","phone"),Rr(this,"signInMethod","phone")}function uo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return M(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new ao(e)}return null}function co(t){return t.a.Ha&&t.a.ba?{temporaryProof:t.a.Ha,phoneNumber:t.a.ba}:{sessionInfo:t.a.Va,code:t.a.Ua}}function lo(t){try{this.a=t||xa.auth()}catch(t){throw new zr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Pr(this,{providerId:"phone",isOAuthProvider:!1})}function ho(t,e){if(!t)throw new zr("missing-verification-id");if(!e)throw new zr("missing-verification-code");return new ao({Va:t,Ua:e})}function po(t){if(t.temporaryProof&&t.phoneNumber)return new ao({Ha:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Zi(o,n);case"facebook.com":return Yi(n);case"github.com":return $i(n);case"twitter.com":return eo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ji(e,s):new Vi(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Ki(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function fo(t){if(!t.isOAuthProvider)throw new zr("invalid-oauth-provider")}function yo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new zr("invalid-auth-event");if(this.g&&this.a)throw new zr("invalid-auth-event");if(this.g&&!this.f)throw new zr("invalid-auth-event")}function mo(t){return(t=t||{}).type?new yo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&Gr(t.error),t.postBody,t.tenantId):null}function vo(){this.b=null,this.a=[]}S(Di,xi),S(Ri,Di),S(Pi,Di),S(Oi,Di),S(Li,Di),ji.prototype.na=function(t){return Ws(t,qi(this))},ji.prototype.b=function(t,e){var n=qi(this);return n.idToken=e,Hs(t,n)},ji.prototype.f=function(t,e){return Ui(zs(t,qi(this)),e)},ji.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Vi.prototype.na=function(t){return Ws(t,Wi(this))},Vi.prototype.b=function(t,e){var n=Wi(this);return n.idToken=e,Hs(t,n)},Vi.prototype.f=function(t,e){return Ui(zs(t,Wi(this)),e)},Vi.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},zi.prototype.Ga=function(t){return this.zb=G(t),this},S(Gi,zi),S(Ki,zi),Ki.prototype.ya=function(t){return j(this.a,t)||this.a.push(t),this},Ki.prototype.Hb=function(){return W(this.a)},Ki.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new zr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Vi(this.providerId,n,this.providerId)},S(Qi,Ki),Rr(Qi,"PROVIDER_ID","facebook.com"),Rr(Qi,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Xi,Ki),Rr(Xi,"PROVIDER_ID","github.com"),Rr(Xi,"GITHUB_SIGN_IN_METHOD","github.com"),S(Ji,Ki),Rr(Ji,"PROVIDER_ID","google.com"),Rr(Ji,"GOOGLE_SIGN_IN_METHOD","google.com"),S(to,zi),Rr(to,"PROVIDER_ID","twitter.com"),Rr(to,"TWITTER_SIGN_IN_METHOD","twitter.com"),no.prototype.na=function(t){return this.signInMethod==io.EMAIL_LINK_SIGN_IN_METHOD?wa(t,Zs,{email:this.a,oobCode:this.c}):wa(t,ma,{email:this.a,password:this.c})},no.prototype.b=function(t,e){return this.signInMethod==io.EMAIL_LINK_SIGN_IN_METHOD?wa(t,ta,{idToken:e,email:this.a,oobCode:this.c}):wa(t,la,{idToken:e,email:this.a,password:this.c})},no.prototype.f=function(t,e){return Ui(this.na(t),e)},no.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Pr(io,{PROVIDER_ID:"password"}),Pr(io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Pr(io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ao.prototype.na=function(t){return t.Wa(co(this))},ao.prototype.b=function(t,e){var n=co(this);return n.idToken=e,wa(t,ga,n)},ao.prototype.f=function(t,e){var n=co(this);return n.operation="REAUTH",Ui(t=wa(t,ba,n),e)},ao.prototype.A=function(){var t={providerId:"phone"};return this.a.Va&&(t.verificationId=this.a.Va),this.a.Ua&&(t.verificationCode=this.a.Ua),this.a.Ha&&(t.temporaryProof=this.a.Ha),this.a.ba&&(t.phoneNumber=this.a.ba),t},lo.prototype.Wa=function(t,e){var n=this.a.b;return Qt(e.verify()).then((function(r){if(!s(r))throw new zr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return wa(t,ua,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new zr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Pr(lo,{PROVIDER_ID:"phone"}),Pr(lo,{PHONE_SIGN_IN_METHOD:"phone"}),yo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},yo.prototype.R=function(){return this.h},yo.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var go,bo=null;function wo(t){var e="unauthorized-domain",n=void 0,r=bn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ot("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ot("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",zr.call(this,e,n)}function _o(t,e,n){zr.call(this,t,n),(t=e||{}).Ab&&Rr(this,"email",t.Ab),t.ba&&Rr(this,"phoneNumber",t.ba),t.credential&&Rr(this,"credential",t.credential),t.Qb&&Rr(this,"tenantId",t.Qb)}function Eo(t){if(t.code){var e=t.code||"";0==e.indexOf(Kr)&&(e=e.substring(Kr.length));var n={credential:po(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new zr(e,t.message||void 0);return new _o(e,n,t.message)}return null}function To(){}function So(){}function Io(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Co(){}function ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.fc,this),this.a.onerror=_(this.Ib,this),this.a.onprogress=_(this.gc,this),this.a.ontimeout=_(this.kc,this)}function Ao(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function No(t,e,n){this.reset(t,e,n,void 0,void 0)}function xo(t){this.f=t,this.b=this.c=this.a=null}function Do(t,e){this.name=t,this.value=e}S(wo,zr),S(_o,zr),_o.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Q(t,e),t},_o.prototype.toJSON=function(){return this.A()},To.prototype.c=null,S(So,To),So.prototype.a=function(){var t=Io(this);return t?new ActiveXObject(t):new XMLHttpRequest},So.prototype.b=function(){var t={};return Io(this)&&(t[0]=!0,t[1]=!0),t},go=new So,S(Co,To),Co.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ko;throw Error("Unsupported browser")},Co.prototype.b=function(){return{}},(t=ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ao(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Ao(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Ao(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},No.prototype.a=null,No.prototype.reset=function(t,e,n,r,i){delete this.a},Do.prototype.toString=function(){return this.name};var Ro=new Do("SEVERE",1e3),Po=new Do("WARNING",900),Oo=new Do("CONFIG",700),Lo=new Do("FINE",500);xo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(A("Root logger has no level set."),null)}(this).value)for(y(e)&&(e=e()),t=new No(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Mo,Fo={},Uo=null;function jo(t){var e;if(Uo||(Uo=new xo(""),(Fo[""]=Uo).c=Oo),!(e=Fo[t])){e=new xo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=jo(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,Fo[t]=e}return e}function qo(t,e){t&&t.log(Lo,e,void 0)}function Bo(t){this.f=t}function Vo(t){tn.call(this),this.o=t,this.readyState=Wo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=jo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(Bo,To),Bo.prototype.a=function(){return new Vo(this.f)},Bo.prototype.b=(Mo={},function(){return Mo}),S(Vo,tn);var Wo=0;function Ho(t){t.c.read().then(t.ec.bind(t)).catch(t.Oa.bind(t))}function zo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,Go(t)}function Go(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ko(t){tn.call(this),this.headers=new cn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=Qo,this.v=this.P=!1}(t=Vo.prototype).open=function(t,e){if(this.readyState!=Wo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,Go(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,zo(this,!1)),this.readyState=Wo},t.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,Go(this)),this.a&&(this.readyState=3,Go(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==o.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Ho(this)):t.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?zo(this,!0):Go(this),3==this.readyState&&Ho(this)}},t.ic=function(t){this.a&&(this.response=this.responseText=t,zo(this,!0))},t.hc=function(t){this.a&&(this.response=t,zo(this,!0))},t.Oa=function(t){var e=this.h;e&&e.log(Po,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&zo(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Po,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Po,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},S(Ko,tn);var Qo="";Ko.prototype.b=jo("goog.net.XhrIo");var Yo=/^https?$/i,Xo=["POST","PUT"];function $o(t){return"content-type"==t.toLowerCase()}function Jo(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Zo(t),es(t)}function Zo(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ts(t){if(t.c&&void 0!==i)if(t.w[1]&&4==rs(t)&&2==is(t))qo(t.b,os(t,"Local request error detected and ignored"));else if(t.i&&4==rs(t))on(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==rs(t)){qo(t.b,os(t,"Request complete")),t.c=!1;try{var e,n=is(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var s;if(s=0===n){var a=String(t.l).match(pn)[1]||null;if(!a&&o.self&&o.self.location){var u=o.self.location.protocol;a=u.substr(0,u.length-1)}s=!Yo.test(a?a.toLowerCase():"")}e=s}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<rs(t)?t.a.statusText:""}catch(e){qo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+is(t)+"]",Zo(t)}}finally{es(t)}}}function es(t,e){if(t.a){ns(t);var n=t.a,r=t.w[0]?l:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ro,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ns(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(o.clearTimeout(t.o),t.o=null)}function rs(t){return t.a?t.a.readyState:0}function is(t){try{return 2<rs(t)?t.a.status:-1}catch(t){return-1}}function os(t,e){return e+" ["+t.O+" "+t.l+" "+is(t)+"]"}function ss(t){var e=vs;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function as(t,e,n){t.a=!0,t.c=n,t.f=!e,hs(t)}function us(t){if(t.a){if(!t.u)throw new ps(t);t.u=!1}}function cs(t,e,n,r){t.g.push([e,n,r]),t.a&&hs(t)}function ls(t){return U(t.g,(function(t){return y(t[1])}))}function hs(t){if(t.h&&t.a&&ls(t)){var e=t.h,n=ys[e];n&&(o.clearTimeout(n.a),delete ys[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),s=i[0],a=i[1];if(i=i[2],s=t.f?a:s)try{var u=s.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(I(e)||"function"==typeof o.Promise&&e instanceof o.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,ls(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof ss?(cs(e,u,r),e.w=!0):e.then(u,r)),n&&(e=new ds(e),ys[e.a]=e,t.h=e.a)}function ps(){C.call(this)}function fs(){C.call(this)}function ds(t){this.a=o.setTimeout(_(this.c,this),0),this.b=t}(t=Ko.prototype).Ia=function(){void 0!==i&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",qo(this.b,os(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(qo(this.b,os(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),es(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),es(this,!0)),Ko.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?ts(this):this.yc())},t.yc=function(){ts(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Qo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ro,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return qo(this.b,"Can not get response: "+t.message),null}},ss.prototype.cancel=function(t){if(this.a)this.c instanceof ss&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new fs(this),us(this),as(this,!1,t))}},ss.prototype.m=function(t,e){this.i=!1,as(this,t,e)},ss.prototype.then=function(t,e,n){var r,i,o=new Bt((function(t,e){r=t,i=e}));return cs(this,r,(function(t){t instanceof fs?o.cancel():i(t)})),o.then(t,e,n)},ss.prototype.$goog_Thenable=!0,S(ps,C),ps.prototype.message="Deferred has already fired",ps.prototype.name="AlreadyCalledError",S(fs,C),fs.prototype.message="Deferred was canceled",fs.prototype.name="CanceledError",ds.prototype.c=function(){throw delete ys[this.a],this.b};var ys={};function ms(t){var e,n=document,r=et(t).toString(),i=document.createElement("SCRIPT"),s={Nb:i,Ia:void 0},a=new ss(s);return e=window.setTimeout((function(){gs(i,!0);var t=new _s(ws,"Timeout reached for loading script "+r);us(a),as(a,!1,t)}),5e3),s.Ia=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(gs(i,!1,e),us(a),as(a,!0,null))},i.onerror=function(){gs(i,!0,e);var t=new _s(bs,"Error while loading script "+r);us(a),as(a,!1,t)},Q(s={},{type:"text/javascript",charset:"UTF-8"}),jn(i,s),function(t,e){O(t,"HTMLScriptElement"),t.src=et(e),null===c&&(c=(e=(e=o.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""),(e=c)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function vs(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&gs(t,!0,this.Ia)}}function gs(t,e,n){null!=n&&o.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var bs=0,ws=1;function _s(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),C.call(this,n),this.code=t}function Es(t){this.f=t}function Ts(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Cs,this.g=G(t.secureTokenHeaders||ks),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||As,this.a=G(t.firebaseHeaders||Ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==or(),!(n=o.XMLHttpRequest||n&&xa.INTERNAL.node&&xa.INTERNAL.node.XMLHttpRequest)&&!ir())throw new zr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=ir()?new Bo(self):sr()?new Es(n):new Co,this.b=null}S(_s,C),S(Es,To),Es.prototype.a=function(){return new this.f},Es.prototype.b=function(){return{}};var Ss,Is="idToken",Cs=new Sr(3e4,6e4),ks={"Content-Type":"application/x-www-form-urlencoded"},As=new Sr(3e4,6e4),Ns={"Content-Type":"application/json"};function xs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ds(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Rs(t,e,n,r,i,s,a){(t=function(){var t=hr();return!((t="Chrome"!=ur(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30||de&&Te&&!(9<Te))}()||ir()?_(t.o,t):(Ss=Ss||new Bt((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(o[Os]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){cs(t,null,e,void 0)}(ms(nt(Ps,{onload:Os})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)})),_(t.m,t)))(e,n,r,i,s,a)}Ts.prototype.R=function(){return this.b},Ts.prototype.o=function(t,e,n,r,i,a){if(ir()&&(void 0===o.fetch||void 0===o.Headers||void 0===o.Request))throw new zr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Ko(this.f);if(a){u.g=Math.max(0,a);var c=setTimeout((function(){u.dispatchEvent("timeout")}),a)}en(u,"complete",(function(){c&&clearTimeout(c);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return qo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),nn(u,"ready",(function(){c&&clearTimeout(c),ce(this)})),nn(u,"timeout",(function(){c&&clearTimeout(c),ce(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():go.a(),t.w=function(t){return t.c||(t.c=t.b())}(t.B?t.B:go),t.a.onreadystatechange=_(t.Lb,t);try{qo(t.b,os(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return qo(t.b,os(t,"Error opening Xhr: "+e.message)),void Jo(t,e)}e=r||"";var a=new cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||s(t))M(t,e,void 0);else for(var n=un(t),r=an(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){a.set(e,t)})),i=function(t){t:{for(var e=$o,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:s(t)?t.charAt(e):t[e]}(a.X()),r=o.FormData&&e instanceof o.FormData,!j(Xo,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{ns(t),0<t.g&&(t.v=function(t){return de&&Ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),qo(t.b,os(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ia,t)):t.o=on(t.Ia,t.g,t)),qo(t.b,os(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){qo(t.b,os(t,"Send error: "+e.message)),Jo(t,e)}}(u,t,n,r,i)};var Ps=new Y(J,"https://apis.google.com/js/client.js?onload=%{onload}"),Os="__fcb"+Math.floor(1e6*Math.random()).toString();function Ls(t){if(!s(t=t.email)||!tr.test(t))throw new zr("invalid-email")}function Ms(t){"email"in t&&Ls(t)}function Fs(t){if(!t[Is])throw new zr("internal-error")}function Us(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new zr("internal-error")}else{if(!t.sessionInfo)throw new zr("missing-verification-id");if(!t.code)throw new zr("missing-verification-code")}}Ts.prototype.m=function(t,e,n,r,i){var o=this;Ss.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ts.prototype.ob=function(){return wa(this,ha,{})},Ts.prototype.rb=function(t,e){return wa(this,ca,{idToken:t,email:e})},Ts.prototype.sb=function(t,e){return wa(this,la,{idToken:t,password:e})};var js={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function qs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new zr("internal-error")}function Bs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Pn(t=new Nn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Vs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Eo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Eo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Eo(t)):t.errorMessage&&(e=_a(t.errorMessage)),e)throw e;if(!t[Is])throw new zr("internal-error")}function Ws(t,e){return e.returnIdpCredential=!0,wa(t,pa,e)}function Hs(t,e){return e.returnIdpCredential=!0,wa(t,da,e)}function zs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,wa(t,fa,e)}function Gs(t){if(!t.oobCode)throw new zr("invalid-action-code")}(t=Ts.prototype).tb=function(t,e){var n={idToken:t},r=[];return H(js,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),wa(this,ca,n)},t.kb=function(t,e){return Q(t={requestType:"PASSWORD_RESET",email:t},e),wa(this,ia,t)},t.lb=function(t,e){return Q(t={requestType:"EMAIL_SIGNIN",email:t},e),wa(this,na,t)},t.jb=function(t,e){return Q(t={requestType:"VERIFY_EMAIL",idToken:t},e),wa(this,ra,t)},t.Wa=function(t){return wa(this,va,t)},t.ab=function(t,e){return wa(this,aa,{oobCode:t,newPassword:e})},t.Ma=function(t){return wa(this,Qs,{oobCode:t})},t.Ya=function(t){return wa(this,Ks,{oobCode:t})};var Ks={endpoint:"setAccountInfo",D:Gs,fa:"email",F:!0},Qs={endpoint:"resetPassword",D:Gs,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new zr("internal-error")},F:!0},Ys={endpoint:"signupNewUser",D:function(t){if(Ls(t),!t.password)throw new zr("weak-password")},K:Fs,T:!0,F:!0},Xs={endpoint:"createAuthUri",F:!0},$s={endpoint:"deleteAccount",V:["idToken"]},Js={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!f(t.deleteProvider))throw new zr("internal-error")}},Zs={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Ls,K:Fs,T:!0,F:!0},ta={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Ls,K:Fs,T:!0},ea={endpoint:"getAccountInfo"},na={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new zr("internal-error");Ls(t)},fa:"email",F:!0},ra={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new zr("internal-error")},fa:"email",F:!0},ia={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new zr("internal-error");Ls(t)},fa:"email",F:!0},oa={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},sa={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new zr("internal-error")}},aa={endpoint:"resetPassword",D:Gs,fa:"email",F:!0},ua={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ca={endpoint:"setAccountInfo",V:["idToken"],D:Ms,T:!0},la={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ms(t),!t.password)throw new zr("weak-password")},K:Fs,T:!0},ha={endpoint:"signupNewUser",K:Fs,T:!0,F:!0},pa={endpoint:"verifyAssertion",D:qs,Ra:Bs,K:Vs,T:!0,F:!0},fa={endpoint:"verifyAssertion",D:qs,Ra:Bs,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new zr("user-not-found");if(t.errorMessage)throw _a(t.errorMessage);if(!t[Is])throw new zr("internal-error")},T:!0,F:!0},da={endpoint:"verifyAssertion",D:function(t){if(qs(t),!t.idToken)throw new zr("internal-error")},Ra:Bs,K:Vs,T:!0},ya={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new zr("invalid-custom-token")},K:Fs,T:!0,F:!0},ma={endpoint:"verifyPassword",D:function(t){if(Ls(t),!t.password)throw new zr("wrong-password")},K:Fs,T:!0,F:!0},va={endpoint:"verifyPhoneNumber",D:Us,K:Fs,F:!0},ga={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new zr("internal-error");Us(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Eo(t);Fs(t)}},ba={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Us,K:Fs,F:!0};function wa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return Yt(new zr("internal-error"));var r,i=e.Kb||"POST";return Qt(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var s=bn(t.h+e);vn(s,"key",t.c),o&&vn(s,"cb",T().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&vn(s,u,r[u]);return new Bt((function(e,o){Rs(t,s.toString(),(function(t){t?t.error?o(Ea(t,i||{})):e(t):o(new zr("network-request-failed"))}),n,a?void 0:Vn(br(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Ra?e.Ra(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new zr("internal-error");return r[e.fa]}))}function _a(t){return Ea({error:{errors:[{message:t}],code:400,message:t}})}function Ea(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new zr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Q(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new zr(r[i],e);return!e&&t&&(e=gr(t)),new zr("internal-error",e)}function Ta(t){this.b=t,this.a=null,this.gb=function(t){return(ka=ka||new Bt((function(t,e){function n(){Tr(),pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Tr(),e(Error("Network Error"))},timeout:Ia.get()})}if(pr("gapi.iframes.Iframe"))t();else if(pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();o[r]=function(){pr("gapi.load")?n():e(Error("Network Error"))},Qt(ms(r=nt(Sa,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw ka=null,t}))).then((function(){return new Bt((function(e,n){pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ca.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Sa=new Y(J,"https://apis.google.com/js/api.js?onload=%{onload}"),Ia=new Sr(3e4,6e4),Ca=new Sr(5e3,15e3),ka=null;function Aa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=wn(this.i,"/__/auth/iframe"),vn(this.a,"apiKey",this.g),vn(this.a,"appName",this.h),this.b=null,this.c=[]}function Na(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Da(t){try{return xa.app(t).auth().Ca()}catch(t){return[]}}function Ra(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Pa(t){var e=Qn();return function(t){return wa(t,oa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=bn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(s=0==o.indexOf("chrome-extension://")?bn(o).b==s&&"chrome-extension"==a:("http"==a||"https"==a)&&(Zn.test(o)?s==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)))){t=!0;break t}}t=!1}if(!t)throw new wo(Qn())}))}function Oa(t){return t.l||(t.l=er().then((function(){if(!t.o){var e=t.c,n=t.h,r=Da(t.b),i=new Aa(t.u,t.f,t.b);i.f=e,i.b=n,i.c=W(r||[]),t.o=i.toString()}t.i=new Ta(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.gb.then((function(){t.a.register("authEvent",e,pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=mo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Qt(n)}return n.status="ERROR",Qt(n)}))}(t)}))),t.l}function La(t){return t.m||(t.v=t.c?lr(t.c,Da(t.b)):null,t.m=new Ts(t.f,Ei(t.h),t.v)),t.m}function Ma(t,e,n,r,i,o,s,a,u,c,l){return(t=new Na(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=G(u||null),t.f=c,t.nb(l).toString()}function Fa(t){if(this.a=t||xa.INTERNAL.reactNative&&xa.INTERNAL.reactNative.AsyncStorage,!this.a)throw new zr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ua(t){this.b=t,this.a={},this.f=_(this.c,this)}Aa.prototype.toString=function(){return this.f?vn(this.a,"v",this.f):Rn(this.a.a,"v"),this.b?vn(this.a,"eid",this.b):Rn(this.a.a,"eid"),this.c.length?vn(this.a,"fw",this.c.join(",")):Rn(this.a.a,"fw"),this.a.toString()},Na.prototype.nb=function(t){return this.h=t,this},Na.prototype.toString=function(){var t=wn(this.o,"/__/auth/handler");if(vn(t,"apiKey",this.m),vn(t,"appName",this.c),vn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=xa.app(this.c).auth().ha()}catch(t){n=null}for(var r in e.bb=n,vn(t,"providerId",this.a.providerId),n=br((e=this.a).zb))n[r]=n[r].toString();r=e.Fc,n=G(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.eb&&e.bb&&!n[e.eb]&&(n[e.eb]=e.bb),z(n)||vn(t,"customParameters",gr(n))}if("function"==typeof this.a.Hb&&(e=this.a.Hb()).length&&vn(t,"scopes",e.join(",")),this.l?vn(t,"redirectUrl",this.l):Rn(t.a,"redirectUrl"),this.g?vn(t,"eventId",this.g):Rn(t.a,"eventId"),this.i?vn(t,"v",this.i):Rn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!gn(t,s)&&vn(t,s,this.b[s]);return this.h?vn(t,"tid",this.h):Rn(t.a,"tid"),this.f?vn(t,"eid",this.f):Rn(t.a,"eid"),(s=Da(this.c)).length&&vn(t,"fw",s.join(",")),t.toString()},(t=Ra.prototype).Fb=function(t,e,n){var r=new zr("popup-closed-by-user"),i=new zr("web-storage-unsupported"),o=this,s=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return Oa(t).then((function(){return function(t,e){return t.gb.then((function(){return new Bt((function(n){t.a.send(e.type,e,n,pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&$n(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new Bt((function(e){return function n(){sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return sn(n).then((function(){e(r)}))}))},t.Ob=function(){var t=hr();return!vr(t)&&!Er(t)},t.Jb=function(){return!1},t.Db=function(t,e,n,r,i,o,s,a){if(!t)return Yt(new zr("popup-blocked"));if(s&&!vr())return this.ia().s((function(e){$n(t),i(e)})),r(),Qt();this.a||(this.a=Pa(La(this)));var u=this;return this.a.then((function(){var e=u.ia().s((function(e){throw $n(t),i(e),e}));return r(),e})).then((function(){fo(n),s||Yn(Ma(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Eb=function(t,e,n,r){this.a||(this.a=Pa(La(this)));var i=this;return this.a.then((function(){fo(e),Yn(Ma(i.u,i.f,i.b,t,e,Qn(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ia=function(){var t=this;return Oa(this).then((function(){return t.i.gb})).s((function(){throw t.a=null,new zr("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(t){this.g.push(t)},t.Na=function(t){B(this.g,(function(e){return e==t}))},(t=Fa.prototype).get=function(t){return Qt(this.a.getItem(t)).then((function(t){return t&&wr(t)}))},t.set=function(t,e){return Qt(this.a.setItem(t,gr(e)))},t.S=function(t){return Qt(this.a.removeItem(t))},t.$=function(){},t.ea=function(){};var ja,qa=[];function Ba(t,e,n){z(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Va(t){this.a=t}function Wa(t){this.c=t,this.b=!1,this.a=[]}function Ha(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Yt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Bt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return za(t,c),e})).s((function(e){throw za(t,c),e}))}function za(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),B(t.a,(function(t){return t==e}))}}function Ga(){if(!Qa())throw new zr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=o.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;ir()&&self?(this.l=function(){var t=ir()?self:null;if(M(qa,(function(n){n.b==t&&(e=n)})),!e){var e=new Ua(t);qa.push(e)}return e}(),Ba(this.l,"keyChanged",(function(e,n){return Za(t).then((function(e){return 0<e.length&&M(t.a,(function(t){t(e)})),{keyProcessed:j(e,n.key)}}))})),Ba(this.l,"ping",(function(){return Qt(["keyChanged"])}))):function(){var t=o.navigator;return t&&t.serviceWorker?Qt().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Qt(null)}().then((function(e){(t.h=e)&&(t.g=new Wa(new Va(e)),Ha(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&j(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Ka(t){return t.m||(t.m=function t(e){return new Bt((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new Bt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){r(t)}))}}))}(t)),t.m}function Qa(){try{return!!o.indexedDB}catch(t){return!1}}function Ya(t){return t.objectStore("firebaseLocalStorage")}function Xa(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function $a(t){return new Bt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Ja(t,e){return t.g&&t.h&&function(){var t=o.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Ha(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Qt()}function Za(t){return Ka(t).then((function(t){var e=Ya(Xa(t,!1));return e.getAll?$a(e.getAll()):new Bt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function tu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function eu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Qt().then((function(){if(Qa()){var t=_r(),r="__sak"+t;return ja=ja||new Ga,(n=ja).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){M(e.a,(function(e){e(t)}))})),t}))}function nu(){this.a={},this.type="inMemory"}function ru(){if(!function(){var t="Node"==or();if(!(t=iu()||t&&xa.INTERNAL.node&&xa.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==or())throw new zr("internal-error","The LocalStorage compatibility library was not found.");throw new zr("web-storage-unsupported")}this.a=iu()||xa.INTERNAL.node.localStorage,this.type="localStorage"}function iu(){try{var t=o.localStorage,e=_r();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ou(){this.type="nullStorage"}function su(){if(!function(){var t="Node"==or();if(!(t=au()||t&&xa.INTERNAL.node&&xa.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==or())throw new zr("internal-error","The SessionStorage compatibility library was not found.");throw new zr("web-storage-unsupported")}this.a=au()||xa.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function au(){try{var t=o.sessionStorage,e=_r();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function uu(){var t={};t.Browser=hu,t.Node=pu,t.ReactNative=fu,t.Worker=du,this.a=t[or()]}Ua.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];M(r,(function(e){i.push(Qt().then((function(){return e(t.origin,t.data.data)})))})),$t(i).then((function(r){var i=[];M(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),M(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Va.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Wa.prototype.close=function(){for(;0<this.a.length;)za(this,this.a[0]);this.b=!0},(t=Ga.prototype).set=function(t,e){var n,r=!1,i=this;return Ka(this).then((function(e){return $a((e=Ya(Xa(n=e,!0))).get(t))})).then((function(o){var s=Ya(Xa(n,!0));return o?(o.value=e,$a(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,$a(s.add(o)))})).then((function(){return i.c[t]=e,Ja(i,t)})).ka((function(){r&&i.b--}))},t.get=function(t){return Ka(this).then((function(e){return $a(Ya(Xa(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.S=function(t){var e=!1,n=this;return Ka(this).then((function(r){return e=!0,n.b++,$a(Ya(Xa(r,!0)).delete(t))})).then((function(){return delete n.c[t],Ja(n,t)})).ka((function(){e&&n.b--}))},t.$=function(t){0==this.a.length&&function(t){tu(t),function e(){t.f=setTimeout((function(){t.i=Za(t).then((function(e){0<e.length&&M(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ea=function(t){B(this.a,(function(e){return e==t})),0==this.a.length&&tu(this)},(t=eu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.S=function(t){return this.b.then((function(e){return e.S(t)}))},t.$=function(t){this.a.push(t)},t.ea=function(t){B(this.a,(function(e){return e==t}))},(t=nu.prototype).get=function(t){return Qt(this.a[t])},t.set=function(t,e){return this.a[t]=e,Qt()},t.S=function(t){return delete this.a[t],Qt()},t.$=function(){},t.ea=function(){},(t=ru.prototype).get=function(t){var e=this;return Qt().then((function(){return wr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Qt().then((function(){var r=gr(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Qt().then((function(){e.a.removeItem(t)}))},t.$=function(t){o.window&&Ve(o.window,"storage",t)},t.ea=function(t){o.window&&ze(o.window,"storage",t)},(t=ou.prototype).get=function(){return Qt(null)},t.set=function(){return Qt()},t.S=function(){return Qt()},t.$=function(){},t.ea=function(){},(t=su.prototype).get=function(t){var e=this;return Qt().then((function(){return wr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Qt().then((function(){var r=gr(e);null===r?n.S(t):n.a.setItem(t,r)}))},t.S=function(t){var e=this;return Qt().then((function(){e.a.removeItem(t)}))},t.$=function(){},t.ea=function(){};var cu,lu,hu={C:ru,Ta:su},pu={C:ru,Ta:su},fu={C:Fa,Ta:ou},du={C:ru,Ta:ou},yu={ad:"local",NONE:"none",cd:"session"};function mu(){var t=!(Er(hr())||!rr()),e=vr(),n=fr();this.m=t,this.h=e,this.l=n,this.a={},t=cu=cu||new uu;try{this.g=!Kn()&&kr()||!o.indexedDB?new t.a.C:new eu(ir()?new nu:new t.a.C)}catch(t){this.g=new nu,this.h=!0}try{this.i=new t.a.Ta}catch(t){this.i=new nu}this.u=new nu,this.f=_(this.Pb,this),this.b={}}function vu(){return lu=lu||new mu}function gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function bu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function wu(t,e,n){return n=bu(e,n),"local"==e.C&&(t.b[n]=null),gu(t,e.C).S(n)}function _u(t){t.c&&(clearInterval(t.c),t.c=null)}function Eu(t){this.a=t,this.b=vu()}(t=mu.prototype).get=function(t,e){return gu(this,t.C).get(bu(t,e))},t.set=function(t,e,n){var r=bu(t,n),i=this,o=gu(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=bu(t,e),this.l&&(this.b[t]=o.localStorage.getItem(t)),z(this.a)&&(gu(this,"local").$(this.f),this.h||(Kn()||!kr())&&o.indexedDB||!this.l||function(t){_u(t),t.c=setInterval((function(){for(var e in t.a){var n=o.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new De({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=bu(t,e),this.a[t]&&(B(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),z(this.a)&&(gu(this,"local").ea(this.f),_u(this))},t.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=o.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?gu(this,"local").ea(this.f):_u(this),this.m)if(n=o.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?o.localStorage.setItem(e,r):o.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var s=this;n=function(){void 0===t.a.a&&s.b[e]===o.localStorage.getItem(e)||(s.b[e]=o.localStorage.getItem(e),s.$a(e))},de&&Te&&10==Te&&o.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else M(t,_(this.$a,this))},t.$a=function(t){this.a[t]&&M(this.a[t],(function(t){t()}))};var Tu,Su={name:"authEvent",C:"local"};function Iu(){this.a=vu()}function Cu(t,e){this.b=ku,this.f=o.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=o.Int32Array?new Int32Array(64):Array(64),void 0!==Tu||(Tu=o.Int32Array?new Int32Array(Ou):Ou),this.reset()}S(Cu,(function(){this.b=-1}));for(var ku=64,Au=ku-1,Nu=[],xu=0;xu<Au;xu++)Nu[xu]=0;var Du=V(128,Nu);function Ru(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Tu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Pu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(s(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ru(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ru(t),i=0)}}t.c=i,t.g+=n}Cu.prototype.reset=function(){this.g=this.c=0,this.a=o.Int32Array?new Int32Array(this.h):W(this.h)};var Ou=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Lu(){Cu.call(this,8,Mu)}S(Lu,Cu);var Mu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Fu(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Iu,this.g=new Eu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Uu(t){return new zr("invalid-cordova-configuration",t)}function ju(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function qu(t){return t.f||(t.f=t.ia().then((function(){return new Bt((function(e){t.Aa((function n(r){return e(r),t.Na(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Bu(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Mi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=wr(gn(o=bn(i),"firebaseError")||null))?Gr(o):null)?new yo(r.c,r.b,null,null,o,null,r.R()):new yo(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}ju(t,i)}))}var n=new yo("unknown",null,null,null,new zr("no-auth-event")),r=!1,i=sn(500).then((function(){return Bu(t).then((function(){r||ju(t,n)}))})),s=o.handleOpenURL;o.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(pr("BuildInfo.packageName",o).toLowerCase()+"://")&&e({url:t}),"function"==typeof s)try{s(t)}catch(t){console.error(t)}},bo=bo||new vo,function(t){var e=bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=pr("universalLinks.subscribe",o))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Bu(t){var e=null;return function(t){return t.b.get(Su,t.a).then((function(t){return mo(t)}))}(t.g).then((function(n){return e=n,wu((n=t.g).b,Su,n.a)})).then((function(){return e}))}function Vu(t){this.a=t,this.b=vu()}(t=Fu.prototype).ia=function(){return this.Da?this.Da:this.Da=(nr(void 0)?er().then((function(){return new Bt((function(t,e){var n=o.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Yt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof pr("universalLinks.subscribe",o))throw Uu("cordova-universal-links-plugin-fix is not installed");if(void 0===pr("BuildInfo.packageName",o))throw Uu("cordova-plugin-buildinfo is not installed");if("function"!=typeof pr("cordova.plugins.browsertab.openUrl",o))throw Uu("cordova-plugin-browsertab is not installed");if("function"!=typeof pr("cordova.InAppBrowser.open",o))throw Uu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new zr("cordova-not-ready")}))},t.Fb=function(t,e){return e(new zr("operation-not-supported-in-this-environment")),Qt()},t.Db=function(){return Yt(new zr("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(t,e,n,r){if(this.c)return Yt(new zr("redirect-operation-pending"));var i=this,s=o.document,a=null,u=null,c=null,l=null;return this.c=Qt().then((function(){return fo(e),qu(i)})).then((function(){return function(t,e,n,r,i){var s=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new yo(e,r,null,s,new zr("no-auth-event"),null,i),u=pr("BuildInfo.packageName",o);if("string"!=typeof u)throw new zr("invalid-cordova-configuration");var c=pr("BuildInfo.displayName",o),l={};if(hr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!hr().toLowerCase().match(/android/))return Yt(new zr("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),s=function(t){var e=new Lu;Pu(e,t),t=[];var n=8*e.g;Pu(e,Du,e.c<56?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ru(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return F(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(s),l.sessionId=s;var h=Ma(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Su,a.A(),e)})).then((function(){var e=pr("cordova.plugins.browsertab.isAvailable",o);if("function"!=typeof e)throw new zr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=pr("cordova.plugins.browsertab.openUrl",o)))throw new zr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=pr("cordova.InAppBrowser.open",o)))throw new zr("invalid-cordova-configuration");e=hr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Bt((function(t,e){u=function(){var e=pr("cordova.plugins.browsertab.close",o);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(u),l=function(){Ir()&&c()},s.addEventListener("resume",c=function(){a=a||sn(2e3).then((function(){e(new zr("redirect-cancelled-by-user"))}))},!1),hr().toLowerCase().match(/android/)||s.addEventListener("visibilitychange",l,!1)})).s((function(t){return Bu(i).then((function(){throw t}))}))})).ka((function(){c&&s.removeEventListener("resume",c,!1),l&&s.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Na(u),i.c=null}))},t.Aa=function(t){this.b.push(t),qu(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new yo("unknown",null,null,null,new zr("no-auth-event")),t(e))}))},t.Na=function(t){B(this.b,(function(e){return e==t}))};var Wu={name:"pendingRedirect",C:"session"};function Hu(t){return wu(t.b,Wu,t.a)}function zu(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=_(this.o,this),this.b=new oc,this.w=new lc,this.g=new Vu(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Gu(this.B,this.u,this.m,wi)}function Gu(t,e,n,r){var i=xa.SDK_VERSION||null;return nr()?new Fu(t,e,n,i,r):new Ra(t,e,n,i,r)}function Ku(t){t.f||(t.f=!0,t.a.Aa(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function Qu(t){t.a.Ob()&&Ku(t).s((function(e){var n=new yo("unknown",null,null,null,new zr("operation-not-supported-in-this-environment"));tc(e)&&t.o(n)})),t.a.Jb()||sc(t.b)}function Yu(t,e){j(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Wu,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Hu(t.g).then((function(){Ku(t).s((function(e){var n=new yo("unknown",null,null,null,new zr("operation-not-supported-in-this-environment"));tc(e)&&t.o(n)}))})):Qu(t)})).s((function(){Qu(t)}))}function Xu(t,e){B(t.h,(function(t){return t==e}))}zu.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=Gu(this.B,this.u,this.m),this.i={}},zu.prototype.o=function(t){if(!t)throw new zr("invalid-auth-event");if(6e5<=T()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=T())),e=!0;break}}return sc(this.b),e};var $u=new Sr(2e3,1e4),Ju=new Sr(3e4,6e4);function Zu(t,e,n,r,i,o,s){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.Aa(t.l))}),(function(){t.reset()}),i,o,s)}function tc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function ec(t,e,n,r,i){var o;return function(t){return t.b.set(Wu,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(tc(e))throw new zr("operation-not-supported-in-this-environment");return o=e,Hu(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new Bt((function(){})):Hu(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function nc(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),$u.get())}zu.prototype.oa=function(){return this.b.oa()};var rc={};function ic(t,e,n){var r=e+":"+n;return rc[r]||(rc[r]=new zu(t,e,n)),rc[r]}function oc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function sc(t){t.g||(t.g=!0,cc(t,!1,null,null))}function ac(t){t.g&&!t.i&&cc(t,!1,null,null)}function uc(t,e){if(t.b=function(){return Qt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function cc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Yt(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):uc(t,n):uc(t,{user:null}),t.f=[],t.c=[]}function lc(){}function hc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function pc(t,e){this.a=e,Rr(this,"verificationId",t)}function fc(t,e,n,r){return new lo(t).Wa(e,n).then((function(t){return new pc(t,r)}))}function dc(t){var e=bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new zr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Pr(this,{token:t,expirationTime:Cr(1e3*e.exp),authTime:Cr(1e3*e.auth_time),issuedAtTime:Cr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function yc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function mc(t){this.f=t,this.b=this.a=null,this.c=0}function vc(t,e){var n=e[Is],r=e.refreshToken;e=gc(e.expiresIn),t.b=n,t.c=e,t.a=r}function gc(t){return T()+1e3*parseInt(t,10)}function bc(t,e){this.a=t||null,this.b=e||null,Pr(this,{lastSignInTime:Cr(e||null),creationTime:Cr(t||null)})}function wc(t,e,n,r,i,o){Pr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _c(t,e){for(var n in xe.call(this,t),e)this[n]=e[n]}function Ec(t,e,n){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=xa.SDK_VERSION?lr(xa.SDK_VERSION):null,this.a=new Ts(this.l,Ei(wi),t),this.b=new mc(this.a),Nc(this,e[Is]),vc(this.b,e),Rr(this,"refreshToken",this.b.a),Rc(this,n||{}),tn.call(this),this.J=!1,this.o&&dr()&&(this.i=ic(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new yc((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-T()-3e5;return 0<e?e:0}))}(this),this.W=_(this.Ja,this);var r=this;this.ga=null,this.xa=function(t){r.ua(t.g)},this.Z=null,this.P=[],this.wa=function(t){Sc(r,t.c)},this.Y=null}function Tc(t,e){t.Z&&ze(t.Z,"languageCodeChanged",t.xa),(t.Z=e)&&Ve(e,"languageCodeChanged",t.xa)}function Sc(t,e){t.P=e,Ds(t.a,xa.SDK_VERSION?lr(xa.SDK_VERSION,t.P):null)}function Ic(t,e){t.Y&&ze(t.Y,"frameworkChanged",t.wa),(t.Y=e)&&Ve(e,"frameworkChanged",t.wa)}function Cc(e){try{return xa.app(e.m).auth()}catch(t){throw new zr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function kc(t){t.B||t.w.b||(t.w.start(),ze(t,"tokenChanged",t.W),Ve(t,"tokenChanged",t.W))}function Ac(t){ze(t,"tokenChanged",t.W),t.w.stop()}function Nc(t,e){t.ma=e,Rr(t,"_lat",e)}function xc(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return $t(e).then((function(){return t}))}function Dc(t){t.i&&!t.J&&(t.J=!0,Yu(t.i,t))}function Rc(t,e){Pr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new bc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Pc(){}function Oc(t){return Qt().then((function(){if(t.B)throw new zr("app-deleted")}))}function Lc(t){return F(t.providerData,(function(t){return t.providerId}))}function Mc(t,e){e&&(Fc(t,e.providerId),t.providerData.push(e))}function Fc(t,e){B(t.providerData,(function(t){return t.providerId==e}))}function Uc(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Rr(t,e,n)}function jc(t,e){t!=e&&(Pr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Rr(t,"metadata",e.metadata?function(t){return new bc(t.a,t.b)}(e.metadata):new bc),M(e.providerData,(function(e){Mc(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Rr(t,"refreshToken",t.b.a))}function qc(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return wa(t.a,ea,{idToken:e}).then(_(t.zc,t))}(t,e).then((function(){return n||Uc(t,"isAnonymous",!1),e}))}))}function Bc(t,e){e[Is]&&t.ma!=e[Is]&&(vc(t.b,e),t.dispatchEvent(new _c("tokenChanged")),Nc(t,e[Is]),Uc(t,"refreshToken",t.b.a))}function Vc(t,e){return qc(t).then((function(){if(j(Lc(t),e))return xc(t).then((function(){throw new zr("provider-already-linked")}))}))}function Wc(t,e,n){return Or({user:t,credential:po(e),additionalUserInfo:e=ki(e),operationType:n})}function Hc(t,e){return Bc(t,e),t.reload().then((function(){return t}))}function zc(t,e,n,r,i){if(!dr())return Yt(new zr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Yt(t.h);var o=Ci(n.providerId),s=_r(t.uid+":::"),a=null;(!vr()||rr())&&t.o&&n.isOAuthProvider&&(a=Ma(t.o,t.l,t.m,e,n,null,s,xa.SDK_VERSION||null,null,null,t.tenantId));var u=Jn(a,o&&o.sa,o&&o.ra);return r=r().then((function(){if(Kc(t),!i)return t.G().then((function(){}))})).then((function(){return Zu(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Bt((function(n,r){t.ja(e,null,new zr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.c=nc(t.i,t,e,u,s)}))})).then((function(t){return u&&$n(u),t?Or(t):null})).s((function(t){throw u&&$n(u),t})),Qc(t,r,i)}function Gc(t,e,n,r,i){if(!dr())return Yt(new zr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Yt(t.h);var o=null,s=_r(t.uid+":::");return r=r().then((function(){if(Kc(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=s,xc(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set($c,t.A(),e.a)),e})).then((function(){return ec(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.da)return Jc(t.da);throw o})).then((function(){if(o)throw o})),Qc(t,r,i)}function Kc(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new zr("internal-error");throw new zr("auth-domain-config-required")}}function Qc(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Yt(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new _c("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){q(t.I,r)})),r}function Yc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Is]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-T())/1e3;var r=new Ec(e,n,t);return t.providerData&&M(t.providerData,(function(t){t&&Mc(r,Or(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function Xc(t){this.a=t,this.b=vu()}oc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},oc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(cc(this,!0,null,t.a),Qt()):e.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.R(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){cc(t,a,e,null)})).s((function(e){cc(t,a,null,e)}))}(this,t,e):Yt(new zr("invalid-auth-event")):(cc(this,!1,null,null),Qt())}else Yt(new zr("invalid-auth-event"))},oc.prototype.oa=function(){var t=this;return new Bt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new zr("timeout");t.a&&t.a.cancel(),t.a=sn(Ju.get()).then((function(){t.b||(t.g=!0,cc(t,!0,null,e))}))}(t))}))},lc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Qt()):e.Ba(n,r)?function(t,e){var n=t.b,r=t.c;e.Ba(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):Yt(new zr("invalid-auth-event"))}else Yt(new zr("invalid-auth-event"))},pc.prototype.confirm=function(t){return t=ho(this.verificationId,t),this.a(t)},yc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return t=o.document,e=null,Ir()||!t?Qt():new Bt((function(n){e=function(){Ir()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}));var t,e})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},yc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},mc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},mc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Yt(new zr("user-token-expired")):t||!this.b||T()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Bt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Rs(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Ea(t)):t.access_token&&t.refresh_token?n(t):r(new zr("internal-error")):r(new zr("network-request-failed"))}),"POST",Dn(e).toString(),t.g,t.u.get()):r(new zr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=gc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Qt(null):Qt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},bc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(_c,xe),S(Ec,tn),Ec.prototype.ua=function(t){this.ga=t,xs(this.a,t)},Ec.prototype.ha=function(){return this.ga},Ec.prototype.Ca=function(){return W(this.P)},Ec.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Rr(Ec.prototype,"providerId","firebase"),(t=Ec.prototype).reload=function(){var t=this;return Qc(this,Oc(this).then((function(){return qc(t).then((function(){return xc(t)})).then(Pc)})))},t.dc=function(t){return this.G(t).then((function(t){return new dc(t)}))},t.G=function(t){var e=this;return Qc(this,Oc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new zr("internal-error");return t.accessToken!=e.ma&&(Nc(e,t.accessToken),e.dispatchEvent(new _c("tokenChanged"))),Uc(e,"refreshToken",t.refreshToken),t.accessToken})))},t.zc=function(t){if(!(t=t.users)||!t.length)throw new zr("internal-error");Rc(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?F(t,(function(t){return new wc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Mc(this,e[n]);Uc(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},t.Ac=function(t){return xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(t)},t.hb=function(t){var e=this,n=null;return Qc(this,t.f(this.a,this.uid).then((function(t){return Bc(e,t),n=Wc(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.rc=function(t){return xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(t)},t.fb=function(t){var e=this,n=null;return Qc(this,Vc(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Wc(e,t,"link"),Hc(e,t)})).then((function(){return n})))},t.sc=function(t,e){var n=this;return Qc(this,Vc(this,"phone").then((function(){return fc(Cc(n),t,e,_(n.fb,n))})))},t.Bc=function(t,e){var n=this;return Qc(this,Qt().then((function(){return fc(Cc(n),t,e,_(n.hb,n))})),!0)},t.rb=function(t){var e=this;return Qc(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Bc(e,t),e.reload()})))},t.Sc=function(t){var e=this;return Qc(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Bc(e,t),e.reload()})))},t.sb=function(t){var e=this;return Qc(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Bc(e,t),e.reload()})))},t.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oc(this);var e=this;return Qc(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Bc(e,t),Uc(e,"displayName",t.displayName||null),Uc(e,"photoURL",t.photoUrl||null),M(e.providerData,(function(t){"password"===t.providerId&&(Rr(t,"displayName",e.displayName),Rr(t,"photoURL",e.photoURL))})),xc(e)})).then(Pc))},t.Qc=function(t){var e=this;return Qc(this,qc(this).then((function(n){return j(Lc(e),t)?function(t,e,n){return wa(t,Js,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return M(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),M(Lc(e),(function(t){n[t]||Fc(e,t)})),n[lo.PROVIDER_ID]||Rr(e,"phoneNumber",null),xc(e)})):xc(e).then((function(){throw new zr("no-such-provider")}))})))},t.delete=function(){var t=this;return Qc(this,this.G().then((function(e){return wa(t.a,$s,{idToken:e})})).then((function(){t.dispatchEvent(new _c("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Tc(t,null),Ic(t,null),t.I=[],t.B=!0,Ac(t),Rr(t,"refreshToken",null),t.i&&Xu(t.i,t)}))},t.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},t.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?_(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?_(this.Cb,this):null},t.tc=function(t){var e=this;return zc(this,"linkViaPopup",t,(function(){return Vc(e,t.providerId).then((function(){return xc(e)}))}),!1)},t.Cc=function(t){return zc(this,"reauthViaPopup",t,(function(){return Qt()}),!0)},t.uc=function(t){var e=this;return Gc(this,"linkViaRedirect",t,(function(){return Vc(e,t.providerId)}),!1)},t.Dc=function(t){return Gc(this,"reauthViaRedirect",t,(function(){return Qt()}),!0)},t.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qc(this,this.G().then((function(n){return Hs(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Wc(i,t,"link"),Hc(i,t)})).then((function(){return o})))},t.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qc(this,Qt().then((function(){return Ui(zs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Wc(i,t,"reauthenticate"),Bc(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(t){var e=this,n=null;return Qc(this,this.G().then((function(e){return n=e,void 0===t||z(t)?{}:di(new ii(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Q(t,this.metadata.A()),M(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var $c={name:"redirectUser",C:"session"};function Jc(t){return wu(t.b,$c,t.a)}function Zc(t){this.a=t,this.b=vu(),this.c=null,this.f=function(t){var e=nl("local"),n=nl("session"),r=nl("none");return function(t,e,n){var r=bu(e,n),i=gu(t,e.C);return t.get(e,n).then((function(s){var a=null;try{a=wr(o.localStorage.getItem(r))}catch(s){}if(a&&!s)return o.localStorage.removeItem(r),t.set(e,a,n);a&&s&&"localStorage"!=i.type&&o.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(el,t.a).then((function(t){return t?nl(t):e}))}))}))})).then((function(e){return t.c=e,tl(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nl("local"),this.a,_(this.g,this))}function tl(t,e){var n,r=[];for(n in yu)yu[n]!==e&&r.push(wu(t.b,nl(yu[n]),t.a));return r.push(wu(t.b,el,t.a)),function(t){return new Bt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Xt(t[a],E(o,a),s);else e(i)}))}(r)}Zc.prototype.g=function(){var t=this,e=nl("local");sl(this,(function(){return Qt().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return tl(t,"local").then((function(){t.c=e}))}))}))};var el={name:"persistence",C:"session"};function nl(t){return{name:"authUser",C:t}}function rl(t,e){return sl(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function il(t){return sl(t,(function(){return wu(t.b,t.c,t.a)}))}function ol(t,e){return sl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yc(t||{})}))}))}function sl(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Rr(this,"settings",new hc),Rr(this,"app",t),!yl(this).options||!yl(this).options.apiKey)throw new zr("invalid-api-key");t=xa.SDK_VERSION?lr(xa.SDK_VERSION):null,this.b=new Ts(yl(this).options&&yl(this).options.apiKey,Ei(wi),t),this.O=[],this.m=[],this.J=[],this.Ub=xa.INTERNAL.createSubscribe(_(this.oc,this)),this.W=void 0,this.Vb=xa.INTERNAL.createSubscribe(_(this.pc,this)),fl(this,null),this.h=new Zc(yl(this).options.apiKey+":"+yl(this).name),this.w=new Xc(yl(this).options.apiKey+":"+yl(this).name),this.Y=bl(this,function(t){var e=yl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get($c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Yc(t||{})}))}(t.w,yl(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),Jc(t.w)}));return bl(t,e)}(t).then((function(){return ol(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return rl(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:il(t.h)}))):null})).then((function(e){fl(t,e||null)}));return bl(t,n)}(this)),this.i=bl(this,function(t){return t.Y.then((function(){return hl(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(nl("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=_(this.Nc,this),this.ub=_(this.aa,this),this.wa=_(this.bc,this),this.xa=_(this.mc,this),this.Ja=_(this.nc,this),this.a=null,function(t){var e=yl(t).options.authDomain,n=yl(t).options.apiKey;e&&dr()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=ic(e,n,yl(t).name),Yu(t.a,t),ml(t)&&Dc(ml(t)),t.B){Dc(t.B);var r=t.B;r.ua(t.ha()),Tc(r,t),Sc(r=t.B,t.I),Ic(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.vc,this),this.o=0,tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.ua(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function ul(t){xe.call(this,"languageCodeChanged"),this.g=t}function cl(t){xe.call(this,"frameworkChanged"),this.c=t}function ll(t){return t.Tb||Yt(new zr("auth-domain-config-required"))}function hl(t){if(!dr())return Yt(new zr("operation-not-supported-in-this-environment"));var e=ll(t).then((function(){return t.a.oa()})).then((function(t){return t?Or(t):null}));return bl(t,e)}function pl(t,e){var n={};return n.apiKey=yl(t).options.apiKey,n.authDomain=yl(t).options.authDomain,n.appName=yl(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Ec(t,e);return n&&(i.da=n),r&&Sc(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Ca())})).then((function(e){return ml(t)&&e.uid==ml(t).uid?jc(ml(t),e):(fl(t,e),Dc(e)),t.aa(e)})).then((function(){gl(t)}))}function fl(t,e){ml(t)&&(function(t,e){B(t.O,(function(t){return t==e}))}(ml(t),t.ub),ze(ml(t),"tokenChanged",t.wa),ze(ml(t),"userDeleted",t.xa),ze(ml(t),"userInvalidated",t.Ja),Ac(ml(t))),e&&(e.O.push(t.ub),Ve(e,"tokenChanged",t.wa),Ve(e,"userDeleted",t.xa),Ve(e,"userInvalidated",t.Ja),0<t.o&&kc(e)),Rr(t,"currentUser",e),e&&(e.ua(t.ha()),Tc(e,t),Sc(e,t.I),Ic(e,t))}function dl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=po(e),r=ki(e),pl(t,e)})).then((function(){return Or({user:ml(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function yl(t){return t.app}function ml(t){return t.currentUser}function vl(t){return ml(t)&&ml(t)._lat||null}function gl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](vl(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](vl(t))}}function bl(t,e){return t.O.push(e),e.ka((function(){q(t.O,e)})),e}function wl(){}function _l(){this.a={},this.b=1e12}Zc.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new zr("invalid-persistence-type"),n=new zr("unsupported-persistence-type");t:{for(r in yu)if(yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(or()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!fr()&&"none"!==t)throw n}}(t),sl(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,tl(n,t)})).then((function(){if(n.c=nl(t),e)return n.b.set(n.c,e,n.a)})):Qt()}))},S(al,tn),S(ul,xe),S(cl,xe),(t=al.prototype).mb=function(t){return bl(this,t=this.h.mb(t))},t.ua=function(t){this.Z===t||this.l||(this.Z=t,xs(this.b,this.Z),this.dispatchEvent(new ul(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var t=o.navigator;this.ua(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.vc=function(t){this.I.push(t),Ds(this.b,xa.SDK_VERSION?lr(xa.SDK_VERSION,this.I):null),this.dispatchEvent(new cl(this.I))},t.Ca=function(){return W(this.I)},t.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:yl(this).options.apiKey,authDomain:yl(this).options.authDomain,appName:yl(this).name,currentUser:ml(this)&&ml(this).A()}},t.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ac,this):null},t.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=Ws(i.b,t).then((function(t){return o=po(t),s=ki(t),t}));return bl(this,t=i.Y.then((function(){return a})).then((function(t){return pl(i,t)})).then((function(){return Or({user:ml(i),credential:o,additionalUserInfo:s,operationType:"signIn"})})))},t.Lc=function(t){if(!dr())return Yt(new zr("operation-not-supported-in-this-environment"));var e=this,n=Ci(t.providerId),r=_r(),i=null;(!vr()||rr())&&yl(this).options.authDomain&&t.isOAuthProvider&&(i=Ma(yl(this).options.authDomain,yl(this).options.apiKey,yl(this).name,"signInViaPopup",t,null,r,xa.SDK_VERSION||null,null,null,this.R()));var o=Jn(i,n&&n.sa,n&&n.ra);return bl(this,n=ll(this).then((function(n){return Zu(n,o,"signInViaPopup",t,r,!!i,e.R())})).then((function(){return new Bt((function(t,n){e.ja("signInViaPopup",null,new zr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=r,e.c=nc(e.a,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&$n(o),t?Or(t):null})).s((function(t){throw o&&$n(o),t})))},t.Mc=function(t){if(!dr())return Yt(new zr("operation-not-supported-in-this-environment"));var e=this;return bl(this,ll(this).then((function(){return function(t){return sl(t,(function(){return t.b.set(el,t.c.C,t.a)}))}(e.h)})).then((function(){return ec(e.a,"signInViaRedirect",t,void 0,e.R())})))},t.oa=function(){var t=this;return hl(this).then((function(e){return t.a&&ac(t.a.b),e})).s((function(e){throw t.a&&ac(t.a.b),e}))},t.Rc=function(t){if(!t)return Yt(new zr("null-user"));if(this.P!=t.tenantId)return Yt(new zr("tenant-id-mismatch"));var e=this,n={};n.apiKey=yl(this).options.apiKey,n.authDomain=yl(this).options.authDomain,n.appName=yl(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Is]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-T())/1e3,e=new Ec(e,o),n&&(e.da=n),r&&Sc(e,r),jc(e,t),e}(t,n,e.w,e.Ca());return bl(this,this.i.then((function(){if(yl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ml(e)&&t.uid==ml(e).uid?(jc(ml(e),t),e.aa(t)):(fl(e,r),Dc(r),e.aa(r))})).then((function(){gl(e)})))},t.pb=function(){var t=this;return bl(this,this.i.then((function(){return t.a&&ac(t.a.b),ml(t)?(fl(t,null),il(t.h).then((function(){gl(t)}))):Qt()})))},t.Nc=function(){var t=this;return ol(this.h,yl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ml(t)&&e){n=ml(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jc(ml(t),e),ml(t).G();(ml(t)||e)&&(fl(t,e),e&&(Dc(e),e.da=t.w),t.a&&Yu(t.a,t),gl(t))}}))},t.aa=function(t){return rl(this.h,t)},t.bc=function(){gl(this),this.aa(ml(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ml(e))}))},t.pc=function(t){var e=this;!function(t,e){t.J.push(e),bl(t,t.i.then((function(){!t.l&&j(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(vl(t)))})))}(this,(function(){t.next(ml(e))}))},t.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){y(t)?t(ml(r)):y(t.next)&&t.next(ml(r))})),this.Ub(t,e,n)},t.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),y(t)?t(ml(r)):y(t.next)&&t.next(ml(r))})),this.Vb(t,e,n)},t.cc=function(t){var e=this;return bl(this,this.i.then((function(){return ml(e)?ml(e).G(t).then((function(t){return{accessToken:t}})):null})))},t.Hc=function(t){var e=this;return this.i.then((function(){return dl(e,wa(e.b,ya,{token:t}))})).then((function(t){var n=t.user;return Uc(n,"isAnonymous",!1),e.aa(n),t}))},t.Ic=function(t,e){var n=this;return this.i.then((function(){return dl(n,wa(n.b,ma,{email:t,password:e}))}))},t.Xb=function(t,e){var n=this;return this.i.then((function(){return dl(n,wa(n.b,Ys,{email:t,password:e}))}))},t.Sa=function(t){var e=this;return this.i.then((function(){return dl(e,t.na(e.b))}))},t.Gc=function(t){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(t)},t.ob=function(){var t=this;return this.i.then((function(){var e=ml(t);return e&&e.isAnonymous?Or({user:e,credential:null,additionalUserInfo:Or({providerId:null,isNewUser:!1}),operationType:"signIn"}):dl(t,t.b.ob()).then((function(e){var n=e.user;return Uc(n,"isAnonymous",!0),t.aa(n),e}))}))},t.getUid=function(){return ml(this)&&ml(this).uid||null},t.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&ml(this)&&kc(ml(this))},t.Ec=function(t){var e=this;M(this.m,(function(n){n==t&&e.o--})),this.o<0&&(this.o=0),0==this.o&&ml(this)&&Ac(ml(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),bl(this,this.i.then((function(){e.l||j(e.m,t)&&t(vl(e))})))},t.removeAuthTokenListener=function(t){B(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(nl("local"),t.a,this.ma),this.a&&(Xu(this.a,this),ac(this.a.b)),Promise.resolve()},t.$b=function(t){return bl(this,function(t,e){return wa(t,Xs,{identifier:e,continueUri:yr()?Qn():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.qc=function(t){return!!so(t)},t.lb=function(t,e){var n=this;return bl(this,Qt().then((function(){var t=new ii(e);if(!t.c)throw new zr("argument-error",ai+" must be true when sending sign in link to email");return di(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},t.Uc=function(t){return this.Ma(t).then((function(t){return t.data.email}))},t.ab=function(t,e){return bl(this,this.b.ab(t,e).then((function(){})))},t.Ma=function(t){return bl(this,this.b.Ma(t).then((function(t){return new Mr(t)})))},t.Ya=function(t){return bl(this,this.b.Ya(t).then((function(){})))},t.kb=function(t,e){var n=this;return bl(this,Qt().then((function(){return void 0===e||z(e)?{}:di(new ii(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},t.Kc=function(t,e){return bl(this,fc(this,t,e,_(this.Sa,this)))},t.Jc=function(t,e){var n=this;return bl(this,Qt().then((function(){var r=e||Qn(),i=oo(t,r);if(!(r=so(r)))throw new zr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new zr("tenant-id-mismatch");return n.Sa(i)})))},wl.prototype.render=function(){},wl.prototype.reset=function(){},wl.prototype.getResponse=function(){},wl.prototype.execute=function(){};var El=null;function Tl(t,e){return(e=Sl(e))&&t.a[e]||null}function Sl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Un(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ve(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function kl(){}_l.prototype.render=function(t,e){return this.a[this.b.toString()]=new Il(t,e),this.b++},_l.prototype.reset=function(t){var e=Tl(this,t);t=Sl(t),e&&t&&(e.delete(),delete this.a[t])},_l.prototype.getResponse=function(t){return(t=Tl(this,t))?t.getResponse():null},_l.prototype.execute=function(t){(t=Tl(this,t))&&t.execute()},Il.prototype.getResponse=function(){return Cl(this),this.b},Il.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},Il.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,ze(this.f,"click",this.i)},kl.prototype.g=function(){return Qt(El=El||new _l)},kl.prototype.c=function(){};var Al=null;function Nl(){this.b=o.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xl=new Y(J,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Sr(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new Bt((function(n,r){var i=setTimeout((function(){r(new zr("network-request-failed"))}),Dl.get());!o.grecaptcha||t!==e.f&&!e.b?(o[e.a]=function(){if(o.grecaptcha){e.f=t;var s=o.grecaptcha.render;o.grecaptcha.render=function(t,n){return t=s(t,n),e.b++,t},clearTimeout(i),n(o.grecaptcha)}else clearTimeout(i),r(new zr("internal-error"));delete o[e.a]},Qt(ms(nt(xl,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new zr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(o.grecaptcha))}))},Nl.prototype.c=function(){this.b--};var Rl=null;function Pl(t,e,n,r,i,s,a){if(Rr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a=a?Al=Al||new kl:Rl=Rl||new Nl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ml])throw new zr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Fl],!o.document)throw new zr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Un(e)||!this.i&&Un(e).hasChildNodes())throw new zr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ts(t,s||null,i||null),this.v=r||function(){return null};var u=this;this.l=[];var c=this.a[Ol];this.a[Ol]=function(t){if(Ul(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=pr(c,o);"function"==typeof e&&e(t)}};var l=this.a[Ll];this.a[Ll]=function(){if(Ul(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=pr(l,o);"function"==typeof t&&t()}}}var Ol="callback",Ll="expired-callback",Ml="sitekey",Fl="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.ka((function(){q(t.h,e)})),e}function ql(t){if(t.B)throw new zr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||xa.app()}catch(t){throw new zr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new zr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ca()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=xa.SDK_VERSION?lr(xa.SDK_VERSION,o):null,Pl.call(this,n,t,e,(function(){try{var e=i.b.auth().ha()}catch(t){e=null}return e}),o,Ei(wi),r)}function Vl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new zr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],i<0||i>=Wl.length)throw new zr("internal-error","Argument validator received an unsupported number of arguments.");n=Wl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new zr("argument-error",t+" failed: "+r)}(t=Pl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=jl(this,Qt().then((function(){if(yr()&&!ir())return er();throw new zr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,wa(t.o,sa,{})})).then((function(e){t.a[Ml]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return jl(this,this.Da().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=Un(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Fn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Lt(a.name),'"'),a.type){o.push(' type="',Lt(a.type),'"');var u={};Q(u,a),delete u.type,a=u}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(s(a)?o.className=a:f(a)?o.className=a.join(" "):jn(o,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(s(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!d(o)||m(o)&&0<o.nodeType?r(o):M(Bn(o)?W(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return jl(this,this.render().then((function(e){return new Bt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){B(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Un(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Bl,Pl);var Wl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hl(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:s}}function zl(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:a}}function Gl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:m}}function Kl(t,e){return{name:t||"",M:"a function",optional:!!e,N:y}}function Ql(t,e){return{name:t||"",M:"null",optional:!!e,N:p}}function Yl(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){return!!e&&!(!e.na||t&&e.providerId!==t)}}}function Xl(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&s(t.type)&&y(t.verify))}}}function $l(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=eh(r,t[n],e[n].j)}}function Zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Vl(t,[n],[r],!0),this[e]=r}),r,n,e[n].Za),enumerable:!0})}}function th(t,e,n,r){t[e]=eh(e,n,r)}function eh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Vl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(al.prototype,{Ya:{name:"applyActionCode",j:[Hl("code")]},Ma:{name:"checkActionCode",j:[Hl("code")]},ab:{name:"confirmPasswordReset",j:[Hl("code"),Hl("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Hl("email"),Hl("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Hl("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Hl("emailLink")]},wc:{name:"onAuthStateChanged",j:[$l(Gl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[$l(Gl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Hl("email"),$l(Gl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Hl("email"),Gl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Hl("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[Yl()]},Hc:{name:"signInWithCustomToken",j:[Hl("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Hl("email"),Hl("password")]},Jc:{name:"signInWithEmailLink",j:[Hl("email"),Hl("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[$l({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Ec)}},Ql(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Hl("code")]}}),Zl(al.prototype,{lc:{name:"languageCode",Za:$l(Hl(),Ql(),"languageCode")},ti:{name:"tenantId",Za:$l(Hl(),Ql(),"tenantId")}}),(al.Persistence=yu).LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",Jl(Ec.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},fb:{name:"linkWithCredential",j:[Yl()]},sc:{name:"linkWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},hb:{name:"reauthenticateWithCredential",j:[Yl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Hl("phoneNumber"),Xl()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[$l(Gl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hl(null,!0)]},Qc:{name:"unlink",j:[Hl("provider")]},rb:{name:"updateEmail",j:[Hl("email")]},sb:{name:"updatePassword",j:[Hl("password")]},Sc:{name:"updatePhoneNumber",j:[Yl("phone")]},tb:{name:"updateProfile",j:[Gl("profile")]}}),Jl(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Bt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Zl(hc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:zl("appVerificationDisabledForTesting")}}),Jl(pc.prototype,{confirm:{name:"confirm",j:[Hl("verificationCode")]}}),th(Fi,"fromJSON",(function(t){t=s(t)?JSON.parse(t):t;for(var e,n=[Hi,ro,uo,Bi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$l(Hl(),Gl(),"json")]),th(io,"credential",(function(t,e){return new no(t,e)}),[Hl("email"),Hl("password")]),Jl(no.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Qi.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(Qi,"credential",Yi,[$l(Hl(),Gl(),"token")]),th(io,"credentialWithLink",oo,[Hl("email"),Hl("emailLink")]),Jl(Xi.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(Xi,"credential",$i,[$l(Hl(),Gl(),"token")]),Jl(Ji.prototype,{ya:{name:"addScope",j:[Hl("scope")]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(Ji,"credential",Zi,[$l(Hl(),$l(Gl(),Ql()),"idToken"),$l(Hl(),Ql(),"accessToken",!0)]),Jl(to.prototype,{Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),th(to,"credential",eo,[$l(Hl(),Gl(),"token"),Hl("secret",!0)]),Jl(Ki.prototype,{ya:{name:"addScope",j:[Hl("scope")]},credential:{name:"credential",j:[$l(Hl(),$l(Gl(),Ql()),"optionsOrIdToken"),$l(Hl(),Ql(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(Vi.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(ji.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),th(lo,"credential",ho,[Hl("verificationId"),Hl("verificationCode")]),Jl(lo.prototype,{Wa:{name:"verifyPhoneNumber",j:[Hl("phoneNumber"),Xl()]}}),Jl(ao.prototype,{A:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(zr.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(_o.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(wo.prototype,{toJSON:{name:"toJSON",j:[Hl(null,!0)]}}),Jl(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),th(Yr,"parseLink",ri,[Hl("link")]),function(){if(void 0===xa||!xa.INTERNAL||!xa.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:Fi,Error:zr};th(t,"EmailAuthProvider",io,[]),th(t,"FacebookAuthProvider",Qi,[]),th(t,"GithubAuthProvider",Xi,[]),th(t,"GoogleAuthProvider",Ji,[]),th(t,"TwitterAuthProvider",to,[]),th(t,"OAuthProvider",Ki,[Hl("providerId")]),th(t,"SAMLAuthProvider",Gi,[Hl("providerId")]),th(t,"PhoneAuthProvider",lo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof al)}}]),th(t,"RecaptchaVerifier",Bl,[$l(Hl(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof xa.app.App)}}]),th(t,"ActionCodeURL",Yr,[]),xa.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),xa.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.cc,t),addAuthTokenListener:_(t.Wb,t),removeAuthTokenListener:_(t.Ec,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),xa.registerVersion("@firebase/auth","0.13.5"),xa.INTERNAL.extendNamespace({User:Ec})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Da=(Ra.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Fs(e))},Ra.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Ms(e)},Ra.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ra.prototype.prefixedName_=function(t){return this.prefix_+t},Ra.prototype.toString=function(){return this.domStorage_.toString()},Ra);function Ra(t){this.domStorage_=t,this.prefix_="firebase:"}var Pa=(Oa.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Oa.prototype.get=function(t){return js(this.cache_,t)?this.cache_[t]:null},Oa.prototype.remove=function(t){delete this.cache_[t]},Oa);function Oa(){this.cache_={},this.isInMemoryStorage=!0}function La(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Da(e)}}catch(t){}return new Pa}function Ma(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;ws(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new Ws;n.update(e);var r=n.digest();return Es.encodeByteArray(r)}function Fa(t,e){ws(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Xa.logLevel=oa.VERBOSE,Za=Xa.log.bind(Xa),e&&Ya.set("logging_enabled",!0)):"function"==typeof t?Za=t:(Za=null,Ya.remove("logging_enabled"))}function Ua(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===tu&&(tu=!1,null===Za&&!0===Ya.get("logging_enabled")&&Fa(!0)),Za){var n=Ja.apply(null,t);Za(n)}}function ja(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ua.apply(void 0,ms([t],e))}}function qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ja.apply(void 0,ms(t));Xa.error(n)}function Ba(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ja.apply(void 0,ms(t));throw Xa.error(n),new Error(n)}function Va(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ja.apply(void 0,ms(t));Xa.warn(n)}function Wa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Ha(t,e){return t===e?0:t<e?-1:1}function za(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Fs(e))}function Ga(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,n<i+e?n:i+e));return r}var Ka,Qa=La("localStorage"),Ya=La("sessionStorage"),Xa=new fa("@firebase/database"),$a=(Ka=1,function(){return Ka++}),Ja=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ja.apply(null,i):n+="object"==typeof i?Fs(i):i,n+=" "}return n},Za=null,tu=!0,eu="[MIN_NAME]",nu="[MAX_NAME]",ru=function(t,e){if(t===e)return 0;if(t===eu||e===nu)return-1;if(e===eu||t===nu)return 1;var n=lu(t),r=lu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},iu=function(t){if("object"!=typeof t||null===t)return Fs(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Fs(e[i]),r+=":",r+=iu(t[e[i]]);return r+"}"};function ou(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function su(t){var e,n,r,i,o;ws(!Wa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function au(t){try{t()}catch(e){setTimeout((function(){throw Va("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}}function uu(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var cu=new RegExp("^-?(0*)\\d{1,10}$"),lu=function(t){if(cu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},hu=(Object.defineProperty(pu,"Empty",{get:function(){return new pu("")},enumerable:!0,configurable:!0}),pu.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},pu.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},pu.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new pu(this.pieces_,t)},pu.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},pu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},pu.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},pu.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},pu.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new pu(t,0)},pu.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof pu)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new pu(e,0)},pu.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},pu.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return pu.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},pu.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=ru(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},pu.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},pu.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},pu);function pu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var fu=(Object.defineProperty(du,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(du,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),du.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Zs(t),this.checkValid_()},du.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Zs(t),0<this.parts_.length&&(this.byteLength_-=1)},du.prototype.checkValid_=function(){if(this.byteLength_>du.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+du.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>du.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+du.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},du.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},du);function du(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Zs(this.parts_[n]);this.checkValid_()}var yu="firebaseio.com",mu="websocket",vu="long_polling",gu=(bu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},bu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},bu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},bu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},bu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Qa.set("host:"+this.host,this.internalHost))},bu.prototype.connectionURL=function(t,e){var n;if(ws("string"==typeof t,"typeof type must == string"),ws("object"==typeof e,"typeof params must == object"),t===mu)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==vu)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ou(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},bu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},bu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},bu);function bu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Qa.get("host:"+t)||this.host}function wu(t){var e=Ru(t),n=e.namespace;return"firebase"===e.domain&&Ba(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Ba("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Va("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gu(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new hu(e.pathString)}}function _u(t){return"string"==typeof t&&0!==t.length&&!Pu.test(t)}function Eu(t){return"string"==typeof t&&0!==t.length&&!Ou.test(t)}function Tu(t){return null===t||"string"==typeof t||"number"==typeof t&&!Wa(t)||t&&"object"==typeof t&&js(t,".sv")}function Su(t,e,n,r,i){i&&void 0===n||Mu(Xs(t,e,i),n,r)}function Iu(t,e,n,r,i){if(!i||void 0!==n){var o=Xs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ou(n,(function(t,e){var n=new hu(t);if(Mu(o,e,r.child(n)),".priority"===n.getBack()&&!Tu(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_u(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(hu.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function Cu(t,e,n,r){if(!r||void 0!==n){if(Wa(n))throw new Error(Xs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Tu(n))throw new Error(Xs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function ku(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Xs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Au(t,e,n,r){if(!(r&&void 0===n||_u(n)))throw new Error(Xs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Nu(t,e,n,r){if(!(r&&void 0===n||Eu(n)))throw new Error(Xs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function xu(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Du(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_u(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return Eu(t=t&&t.replace(/^\/*\.info(\/|$)/,"/"))}(r))throw new Error(Xs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Ru=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=ds(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Va("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=t.length;var f=e.split(".");3===f.length?(n=f[1],o=r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Pu=/[\[\].#$\/\u0000-\u001F\u007F]/,Ou=/[\[\].#$\u0000-\u001F\u007F]/,Lu=10485760,Mu=function(t,e,n){var r=n instanceof hu?new fu(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Wa(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>Lu/3&&Zs(e)>Lu)throw new Error(t+"contains a string greater than "+Lu+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(ou(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!_u(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Mu(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Fu=(Uu.prototype.cancel=function(t){Ys("OnDisconnect.cancel",0,1,arguments.length),$s("OnDisconnect.cancel",1,t,!0);var e=new Is;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Uu.prototype.remove=function(t){Ys("OnDisconnect.remove",0,1,arguments.length),xu("OnDisconnect.remove",this.path_),$s("OnDisconnect.remove",1,t,!0);var e=new Is;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Uu.prototype.set=function(t,e){Ys("OnDisconnect.set",1,2,arguments.length),xu("OnDisconnect.set",this.path_),Su("OnDisconnect.set",1,t,this.path_,!1),$s("OnDisconnect.set",2,e,!0);var n=new Is;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Uu.prototype.setWithPriority=function(t,e,n){Ys("OnDisconnect.setWithPriority",2,3,arguments.length),xu("OnDisconnect.setWithPriority",this.path_),Su("OnDisconnect.setWithPriority",1,t,this.path_,!1),Cu("OnDisconnect.setWithPriority",2,e,!1),$s("OnDisconnect.setWithPriority",3,n,!0);var r=new Is;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Uu.prototype.update=function(t,e){if(Ys("OnDisconnect.update",1,2,arguments.length),xu("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Va("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Iu("OnDisconnect.update",1,t,this.path_,!1),$s("OnDisconnect.update",2,e,!0);var i=new Is;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Uu);function Uu(t,e){this.repo_=t,this.path_=e}var ju=(qu.prototype.toJSON=function(){return Ys("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},qu);function qu(t,e){this.committed=t,this.snapshot=e}var Bu,Vu,Wu,Hu=(Bu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Vu=0,Wu=[],function(t){var e,n=t===Vu;Vu=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=Bu.charAt(t%64),t=Math.floor(t/64);ws(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===Wu[e];e--)Wu[e]=0;Wu[e]++}else for(e=0;e<12;e++)Wu[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Bu.charAt(Wu[e]);return ws(20===i.length,"nextPushId: Length should be 20."),i}),zu=(Gu.Wrap=function(t,e){return new Gu(t,e)},Gu);function Gu(t,e){this.name=t,this.node=e}var Ku,Qu=(Yu.prototype.getCompare=function(){return this.compare.bind(this)},Yu.prototype.indexedValueChanged=function(t,e){var n=new zu(eu,t),r=new zu(eu,e);return 0!==this.compare(n,r)},Yu.prototype.minPost=function(){return zu.MIN},Yu);function Yu(){}var Xu,$u=(ls(Ju,Xu=Qu),Object.defineProperty(Ju,"__EMPTY_NODE",{get:function(){return Ku},set:function(t){Ku=t},enumerable:!0,configurable:!0}),Ju.prototype.compare=function(t,e){return ru(t.name,e.name)},Ju.prototype.isDefinedOn=function(t){throw _s("KeyIndex.isDefinedOn not expected to be called.")},Ju.prototype.indexedValueChanged=function(t,e){return!1},Ju.prototype.minPost=function(){return zu.MIN},Ju.prototype.maxPost=function(){return new zu(nu,Ku)},Ju.prototype.makePost=function(t,e){return ws("string"==typeof t,"KeyIndex indexValue must always be a string."),new zu(t,Ku)},Ju.prototype.toString=function(){return".key"},Ju);function Ju(){return null!==Xu&&Xu.apply(this,arguments)||this}var Zu,tc=new $u;function ec(t){return"number"==typeof t?"number:"+su(t):"string:"+t}function nc(t){if(t.isLeafNode()){var e=t.val();ws("string"==typeof e||"number"==typeof e||"object"==typeof e&&js(e,".sv"),"Priority must be a string or number.")}else ws(t===Zu||t.isEmpty(),"priority of unexpected type.");ws(t===Zu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var rc,ic,oc,sc,ac=(Object.defineProperty(uc,"__childrenNodeConstructor",{get:function(){return rc},set:function(t){rc=t},enumerable:!0,configurable:!0}),uc.prototype.isLeafNode=function(){return!0},uc.prototype.getPriority=function(){return this.priorityNode_},uc.prototype.updatePriority=function(t){return new uc(this.value_,t)},uc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:uc.__childrenNodeConstructor.EMPTY_NODE},uc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:uc.__childrenNodeConstructor.EMPTY_NODE},uc.prototype.hasChild=function(){return!1},uc.prototype.getPredecessorChildName=function(t,e){return null},uc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:uc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},uc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(ws(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,uc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},uc.prototype.isEmpty=function(){return!1},uc.prototype.numChildren=function(){return 0},uc.prototype.forEachChild=function(t,e){return!1},uc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},uc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+ec(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?su(this.value_):this.value_,this.lazyHash_=Ma(t)}return this.lazyHash_},uc.prototype.getValue=function(){return this.value_},uc.prototype.compareTo=function(t){return t===uc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof uc.__childrenNodeConstructor?-1:(ws(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},uc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=uc.VALUE_TYPE_ORDER.indexOf(e),i=uc.VALUE_TYPE_ORDER.indexOf(n);return ws(0<=r,"Unknown leaf type: "+e),ws(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},uc.prototype.withIndex=function(){return this},uc.prototype.isIndexed=function(){return!0},uc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},uc.VALUE_TYPE_ORDER=["object","boolean","number","string"],uc);function uc(t,e){void 0===e&&(e=uc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ws(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nc(this.priorityNode_)}function cc(){return null!==sc&&sc.apply(this,arguments)||this}var lc=new(ls(cc,sc=Qu),cc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?ru(t.name,e.name):i},cc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},cc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},cc.prototype.minPost=function(){return zu.MIN},cc.prototype.maxPost=function(){return new zu(nu,new ac("[PRIORITY-POST]",oc))},cc.prototype.makePost=function(t,e){var n=ic(t);return new zu(e,new ac("[PRIORITY-POST]",n))},cc.prototype.toString=function(){return".priority"},cc),hc=(pc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},pc.prototype.hasNext=function(){return 0<this.nodeStack_.length},pc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},pc);function pc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var fc=(dc.prototype.copy=function(t,e,n,r,i){return new dc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},dc.prototype.count=function(){return this.left.count()+1+this.right.count()},dc.prototype.isEmpty=function(){return!1},dc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},dc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},dc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},dc.prototype.minKey=function(){return this.min_().key},dc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},dc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},dc.prototype.removeMin_=function(){if(this.left.isEmpty())return vc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},dc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return vc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},dc.prototype.isRed_=function(){return this.color},dc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},dc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},dc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},dc.prototype.rotateLeft_=function(){var t=this.copy(null,null,dc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},dc.prototype.rotateRight_=function(){var t=this.copy(null,null,dc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},dc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},dc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},dc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},dc.RED=!0,dc.BLACK=!1,dc);function dc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:dc.RED,this.left=null!=r?r:vc.EMPTY_NODE,this.right=null!=i?i:vc.EMPTY_NODE}var yc=(mc.prototype.copy=function(t,e,n,r,i){return this},mc.prototype.insert=function(t,e,n){return new fc(t,e,null)},mc.prototype.remove=function(t,e){return this},mc.prototype.count=function(){return 0},mc.prototype.isEmpty=function(){return!0},mc.prototype.inorderTraversal=function(t){return!1},mc.prototype.reverseTraversal=function(t){return!1},mc.prototype.minKey=function(){return null},mc.prototype.maxKey=function(){return null},mc.prototype.check_=function(){return 0},mc.prototype.isRed_=function(){return!1},mc);function mc(){}var vc=(gc.prototype.insert=function(t,e){return new gc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,fc.BLACK,null,null))},gc.prototype.remove=function(t){return new gc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,fc.BLACK,null,null))},gc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},gc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},gc.prototype.isEmpty=function(){return this.root_.isEmpty()},gc.prototype.count=function(){return this.root_.count()},gc.prototype.minKey=function(){return this.root_.minKey()},gc.prototype.maxKey=function(){return this.root_.maxKey()},gc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},gc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},gc.prototype.getIterator=function(t){return new hc(this.root_,null,this.comparator_,!1,t)},gc.prototype.getIteratorFrom=function(t,e){return new hc(this.root_,t,this.comparator_,!1,e)},gc.prototype.getReverseIteratorFrom=function(t,e){return new hc(this.root_,t,this.comparator_,!0,e)},gc.prototype.getReverseIterator=function(t){return new hc(this.root_,null,this.comparator_,!0,t)},gc.EMPTY_NODE=new yc,gc);function gc(t,e){void 0===e&&(e=gc.EMPTY_NODE),this.comparator_=t,this.root_=e}var bc=Math.log(2),wc=(_c.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},_c);function _c(t){this.count=parseInt(Math.log(t+1)/bc,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}var Ec,Tc,Sc=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0==a)return null;if(1==a)return o=t[e],s=n?n(o):o,new fc(s,o.node,fc.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new fc(s,o.node,fc.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(1+o,a),l=t[o],h=n?n(l):l;u(new fc(h,l.node,r,null,c))},u=function(t){r=r?r.left=t:o=t},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,fc.BLACK):(a(h,fc.BLACK),a(h,fc.RED))}return o}(new wc(t.length));return new vc(r||e,o)},Ic={},Cc=(Object.defineProperty(kc,"Default",{get:function(){return ws(lc,"ChildrenNode.ts has not been loaded"),Ec=Ec||new kc({".priority":Ic},{".priority":lc})},enumerable:!0,configurable:!0}),kc.prototype.get=function(t){var e=qs(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof vc?e:null},kc.prototype.hasIndex=function(t){return js(this.indexSet_,t.toString())},kc.prototype.addIndex=function(t,e){ws(t!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(zu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Sc(r,t.getCompare()):Ic;var a=t.toString(),u=hs({},this.indexSet_);u[a]=t;var c=hs({},this.indexes_);return c[a]=n,new kc(c,u)},kc.prototype.addToIndexes=function(t,e){var n=this;return new kc(Vs(this.indexes_,(function(r,i){var o=qs(n.indexSet_,i);if(ws(o,"Missing index implementation for "+i),r===Ic){if(o.isDefinedOn(t.node)){for(var s=[],a=e.getIterator(zu.Wrap),u=a.getNext();u;)u.name!==t.name&&s.push(u),u=a.getNext();return s.push(t),Sc(s,o.getCompare())}return Ic}var c=e.get(t.name),l=r;return c&&(l=l.remove(new zu(t.name,c))),l.insert(t,t.node)})),this.indexSet_)},kc.prototype.removeFromIndexes=function(t,e){return new kc(Vs(this.indexes_,(function(n){if(n===Ic)return n;var r=e.get(t.name);return r?n.remove(new zu(t.name,r)):n})),this.indexSet_)},kc);function kc(t,e){this.indexes_=t,this.indexSet_=e}function Ac(t,e){return ru(t.name,e.name)}function Nc(t,e){return ru(t,e)}var xc,Dc=(Object.defineProperty(Rc,"EMPTY_NODE",{get:function(){return Tc=Tc||new Rc(new vc(Nc),null,Cc.Default)},enumerable:!0,configurable:!0}),Rc.prototype.isLeafNode=function(){return!1},Rc.prototype.getPriority=function(){return this.priorityNode_||Tc},Rc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Rc(this.children_,t,this.indexMap_)},Rc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Tc:e},Rc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Rc.prototype.hasChild=function(t){return null!==this.children_.get(t)},Rc.prototype.updateImmediateChild=function(t,e){if(ws(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n,r=new zu(t,e),i=void 0;n=e.isEmpty()?(i=this.children_.remove(t),this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,e),this.indexMap_.addToIndexes(r,this.children_));var o=i.isEmpty()?Tc:this.priorityNode_;return new Rc(i,o,n)},Rc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;ws(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Rc.prototype.isEmpty=function(){return this.children_.isEmpty()},Rc.prototype.numChildren=function(){return this.children_.count()},Rc.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(lc,(function(o,s){e[o]=s.val(t),n++,i&&Rc.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o=[];for(var s in e)o[s]=e[s];return o}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},Rc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+ec(this.getPriority().val())+":"),this.forEachChild(lc,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Ma(t)}return this.lazyHash_},Rc.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new zu(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Rc.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Rc.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new zu(e,this.children_.get(e)):null},Rc.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Rc.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new zu(e,this.children_.get(e)):null},Rc.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},Rc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Rc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,zu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Rc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Rc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,zu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Rc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lc?-1:0},Rc.prototype.withIndex=function(t){if(t===tc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Rc(this.children_,this.priorityNode_,e)},Rc.prototype.isIndexed=function(t){return t===tc||this.indexMap_.hasIndex(t)},Rc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(lc),r=e.getIterator(lc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Rc.prototype.resolveIndex_=function(t){return t===tc?null:this.indexMap_.get(t.toString())},Rc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Rc);function Rc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&nc(this.priorityNode_),this.children_.isEmpty()&&ws(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Pc(){return xc.call(this,new vc(Nc),Dc.EMPTY_NODE,Cc.Default)||this}var Oc,Lc=new(ls(Pc,xc=Dc),Pc.prototype.compareTo=function(t){return t===this?0:1},Pc.prototype.equals=function(t){return t===this},Pc.prototype.getPriority=function(){return this},Pc.prototype.getImmediateChild=function(t){return Dc.EMPTY_NODE},Pc.prototype.isEmpty=function(){return!1},Pc);function Mc(t,e){if(void 0===e&&(e=null),null===t)return Dc.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),ws(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ac(t,Mc(e));if(t instanceof Array){var n=Dc.EMPTY_NODE;return ou(t,(function(e,r){if(js(t,e)&&"."!==e.substring(0,1)){var i=Mc(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Mc(e))}var r=[],i=!1;if(ou(t,(function(t,e){if("."!==t.substring(0,1)){var n=Mc(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new zu(t,n)))}})),0===r.length)return Dc.EMPTY_NODE;var o=Sc(r,Ac,(function(t){return t.name}),Nc);if(i){var s=Sc(r,lc.getCompare());return new Dc(o,Mc(e),new Cc({".priority":s},{".priority":lc}))}return new Dc(o,Mc(e),Cc.Default)}function Fc(){return null!==Oc&&Oc.apply(this,arguments)||this}Object.defineProperties(zu,{MIN:{value:new zu(eu,Dc.EMPTY_NODE)},MAX:{value:new zu(nu,Lc)}}),$u.__EMPTY_NODE=Dc.EMPTY_NODE,ac.__childrenNodeConstructor=Dc,Zu=Lc,oc=Lc,ic=Mc;var Uc,jc=new(ls(Fc,Oc=Qu),Fc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ru(t.name,e.name):n},Fc.prototype.isDefinedOn=function(t){return!0},Fc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Fc.prototype.minPost=function(){return zu.MIN},Fc.prototype.maxPost=function(){return zu.MAX},Fc.prototype.makePost=function(t,e){var n=Mc(t);return new zu(e,n)},Fc.prototype.toString=function(){return".value"},Fc),qc=(ls(Bc,Uc=Qu),Bc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Bc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Bc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?ru(t.name,e.name):i},Bc.prototype.makePost=function(t,e){var n=Mc(t),r=Dc.EMPTY_NODE.updateChild(this.indexPath_,n);return new zu(e,r)},Bc.prototype.maxPost=function(){var t=Dc.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new zu(nu,t)},Bc.prototype.toString=function(){return this.indexPath_.slice().join("/")},Bc);function Bc(t){var e=Uc.call(this)||this;return e.indexPath_=t,ws(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Vc=(Wc.prototype.val=function(){return Ys("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Wc.prototype.exportVal=function(){return Ys("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Wc.prototype.toJSON=function(){return Ys("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Wc.prototype.exists=function(){return Ys("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Wc.prototype.child=function(t){Ys("DataSnapshot.child",0,1,arguments.length),Nu("DataSnapshot.child",1,t=String(t),!1);var e=new hu(t),n=this.ref_.child(e);return new Wc(this.node_.getChild(e),n,lc)},Wc.prototype.hasChild=function(t){Ys("DataSnapshot.hasChild",1,1,arguments.length),Nu("DataSnapshot.hasChild",1,t,!1);var e=new hu(t);return!this.node_.getChild(e).isEmpty()},Wc.prototype.getPriority=function(){return Ys("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Wc.prototype.forEach=function(t){var e=this;return Ys("DataSnapshot.forEach",1,1,arguments.length),$s("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(n,r){return t(new Wc(r,e.ref_.child(n),lc))}))},Wc.prototype.hasChildren=function(){return Ys("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Wc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),Wc.prototype.numChildren=function(){return Ys("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Wc.prototype.getRef=function(){return Ys("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Wc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Wc);function Wc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Hc=(zc.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},zc.prototype.getEventType=function(){return this.eventType},zc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},zc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Fs(this.snapshot.exportVal())},zc);function zc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Gc=(Kc.prototype.getPath=function(){return this.path},Kc.prototype.getEventType=function(){return"cancel"},Kc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Kc.prototype.toString=function(){return this.path.toString()+":cancel"},Kc);function Kc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Qc=(Yc.prototype.respondsTo=function(t){return"value"===t},Yc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Hc("value",this,new Vc(t.snapshotNode,e.getRef(),n))},Yc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ws(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Yc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Gc(this,t,e):null},Yc.prototype.matches=function(t){return t instanceof Yc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Yc.prototype.hasAnyCallback=function(){return null!==this.callback_},Yc);function Yc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Xc,$c=(Jc.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return js(this.callbacks_,e="children_removed"===e?"child_removed":e)},Jc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Gc(this,t,e):null},Jc.prototype.createEvent=function(t,e){ws(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Hc(t.type,this,new Vc(t.snapshotNode,n,r),t.prevName)},Jc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ws(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Jc.prototype.matches=function(t){var e=this;if(t instanceof Jc){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every((function(n){return t.callbacks_[n]===e.callbacks_[n]}));var o=n[0],s=r[0];return!(s!==o||t.callbacks_[o]&&this.callbacks_[s]&&t.callbacks_[o]!==this.callbacks_[s])}}}return!1},Jc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Jc);function Jc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Zc=(Object.defineProperty(tl,"__referenceConstructor",{get:function(){return ws(Xc,"Reference.ts has not been loaded"),Xc},set:function(t){Xc=t},enumerable:!0,configurable:!0}),tl.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===tc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==eu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==nu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===lc){if(null!=e&&!Tu(e)||null!=n&&!Tu(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ws(t.getIndex()instanceof qc||t.getIndex()===jc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},tl.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},tl.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},tl.prototype.getQueryParams=function(){return this.queryParams_},tl.prototype.getRef=function(){return Ys("Query.ref",0,0,arguments.length),new tl.__referenceConstructor(this.repo,this.path)},tl.prototype.on=function(t,e,n,r){Ys("Query.on",2,4,arguments.length),ku("Query.on",1,t,!1),$s("Query.on",2,e,!1);var i=tl.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},tl.prototype.onValueEvent=function(t,e,n){var r=new Qc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},tl.prototype.onChildEvent=function(t,e,n){var r=new $c(t,e,n);this.repo.addEventCallbackForQuery(this,r)},tl.prototype.off=function(t,e,n){Ys("Query.off",0,3,arguments.length),ku("Query.off",1,t,!0),$s("Query.off",2,e,!0),Js("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Qc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new $c(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},tl.prototype.once=function(t,e,n,r){var i=this;Ys("Query.once",1,4,arguments.length),ku("Query.once",1,t,!1),$s("Query.once",2,e,!0);var o=tl.getCancelAndContextArgs_("Query.once",n,r),s=!0,a=new Is;a.promise.catch((function(){}));var u=function(n){s&&(s=!1,i.off(t,u),e&&e.bind(o.context)(n),a.resolve(n))};return this.on(t,u,(function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),a.reject(e)})),a.promise},tl.prototype.limitToFirst=function(t){if(Ys("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new tl(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},tl.prototype.limitToLast=function(t){if(Ys("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new tl(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},tl.prototype.orderByChild=function(t){if(Ys("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Nu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new hu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new qc(e),r=this.queryParams_.orderBy(n);return tl.validateQueryEndpoints_(r),new tl(this.repo,this.path,r,!0)},tl.prototype.orderByKey=function(){Ys("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(tc);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.orderByPriority=function(){Ys("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(lc);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.orderByValue=function(){Ys("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(jc);return tl.validateQueryEndpoints_(t),new tl(this.repo,this.path,t,!0)},tl.prototype.startAt=function(t,e){void 0===t&&(t=null),Ys("Query.startAt",0,2,arguments.length),Su("Query.startAt",1,t,this.path,!0),Au("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(tl.validateLimit_(n),tl.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new tl(this.repo,this.path,n,this.orderByCalled_)},tl.prototype.endAt=function(t,e){void 0===t&&(t=null),Ys("Query.endAt",0,2,arguments.length),Su("Query.endAt",1,t,this.path,!0),Au("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(tl.validateLimit_(n),tl.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new tl(this.repo,this.path,n,this.orderByCalled_)},tl.prototype.equalTo=function(t,e){if(Ys("Query.equalTo",1,2,arguments.length),Su("Query.equalTo",1,t,this.path,!1),Au("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},tl.prototype.toString=function(){return Ys("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},tl.prototype.toJSON=function(){return Ys("Query.toJSON",0,1,arguments.length),this.toString()},tl.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},tl.prototype.queryIdentifier=function(){var t=this.queryObject(),e=iu(t);return"{}"===e?"default":e},tl.prototype.isEqual=function(t){if(Ys("Query.isEqual",1,1,arguments.length),!(t instanceof tl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},tl.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,$s(t,3,r.cancel,!0),r.context=n,Js(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Xs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(tl.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),tl);function tl(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var el=(nl.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},nl.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new nl);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},nl.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(lc,(function(t,e){n.remember(new hu(t),e)})),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},nl.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new hu(t.toString()+"/"+n);r.forEachTree(i,e)}))},nl.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},nl);function nl(){this.value=null,this.children=new Map}function rl(t,e){return t&&"object"==typeof t?(ws(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}var il,ol,sl=function(t,e){var n,r=rl(t.getPriority().val(),e);if(t.isLeafNode()){var i=t,o=rl(i.getValue(),e);return o!==i.getValue()||r!==i.getPriority().val()?new ac(o,Mc(r)):t}var s=t;return r!==(n=s).getPriority().val()&&(n=n.updatePriority(new ac(r))),s.forEachChild(lc,(function(t,r){var i=sl(r,e);i!==r&&(n=n.updateImmediateChild(t,i))})),n};(ol=il=il||{})[ol.OVERWRITE=0]="OVERWRITE",ol[ol.MERGE=1]="MERGE",ol[ol.ACK_USER_WRITE=2]="ACK_USER_WRITE",ol[ol.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var al=(ul.User=new ul(!0,!1,null,!1),ul.Server=new ul(!1,!0,null,!1),ul.forServerTaggedQuery=function(t){return new ul(!1,!0,t,!0)},ul);function ul(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,ws(!r||e,"Tagged queries must be from server.")}var cl,ll=(hl.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return ws(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new hu(t));return new hl(hu.Empty,e,this.revert)}return ws(this.path.getFront()===t,"operationForChild called for unrelated child."),new hl(this.path.popFront(),this.affectedTree,this.revert)},hl);function hl(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=il.ACK_USER_WRITE,this.source=al.User}var pl=(fl.fromObject=function(t){var e=fl.Empty;return ou(t,(function(t,n){e=e.set(new hu(t),n)})),e},fl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},fl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:hu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new hu(n).child(i.path),value:i.value}},fl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},fl.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):fl.Empty},fl.prototype.set=function(t,e){if(t.isEmpty())return new fl(e,this.children);var n=t.getFront(),r=(this.children.get(n)||fl.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new fl(this.value,i)},fl.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?fl.Empty:new fl(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?fl.Empty:new fl(this.value,i)}return this},fl.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},fl.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n,r=t.getFront(),i=(this.children.get(r)||fl.Empty).setTree(t.popFront(),e);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new fl(this.value,n)},fl.prototype.fold=function(t){return this.fold_(hu.Empty,t)},fl.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},fl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,hu.Empty,e)},fl.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},fl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,hu.Empty,e)},fl.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):fl.Empty},fl.prototype.foreach=function(t){this.foreach_(hu.Empty,t)},fl.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},fl.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},fl.Empty=new fl(null),fl);function fl(t,e){void 0===e&&(e=cl=cl||new vc(Ha)),this.value=t,this.children=e}var dl=(yl.prototype.operationForChild=function(t){return this.path.isEmpty()?new yl(this.source,hu.Empty):new yl(this.source,this.path.popFront())},yl);function yl(t,e){this.source=t,this.path=e,this.type=il.LISTEN_COMPLETE}var ml=(vl.prototype.operationForChild=function(t){return this.path.isEmpty()?new vl(this.source,hu.Empty,this.snap.getImmediateChild(t)):new vl(this.source,this.path.popFront(),this.snap)},vl);function vl(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=il.OVERWRITE}var gl=(bl.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new hu(t));return e.isEmpty()?null:e.value?new ml(this.source,hu.Empty,e.value):new bl(this.source,hu.Empty,e)}return ws(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new bl(this.source,this.path.popFront(),this.children)},bl.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},bl);function bl(t,e,n){this.source=t,this.path=e,this.children=n,this.type=il.MERGE}var wl=(_l.prototype.isFullyInitialized=function(){return this.fullyInitialized_},_l.prototype.isFiltered=function(){return this.filtered_},_l.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},_l.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},_l.prototype.getNode=function(){return this.node_},_l);function _l(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var El=(Tl.prototype.updateEventSnap=function(t,e,n){return new Tl(new wl(t,e,n),this.serverCache_)},Tl.prototype.updateServerSnap=function(t,e,n){return new Tl(this.eventCache_,new wl(t,e,n))},Tl.prototype.getEventCache=function(){return this.eventCache_},Tl.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Tl.prototype.getServerCache=function(){return this.serverCache_},Tl.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Tl.Empty=new Tl(new wl(Dc.EMPTY_NODE,!1,!1),new wl(Dc.EMPTY_NODE,!1,!1)),Tl);function Tl(t,e){this.eventCache_=t,this.serverCache_=e}var Sl=(Il.valueChange=function(t){return new Il(Il.VALUE,t)},Il.childAddedChange=function(t,e){return new Il(Il.CHILD_ADDED,e,t)},Il.childRemovedChange=function(t,e){return new Il(Il.CHILD_REMOVED,e,t)},Il.childChangedChange=function(t,e,n){return new Il(Il.CHILD_CHANGED,e,t,n)},Il.childMovedChange=function(t,e){return new Il(Il.CHILD_MOVED,e,t)},Il.CHILD_ADDED="child_added",Il.CHILD_REMOVED="child_removed",Il.CHILD_CHANGED="child_changed",Il.CHILD_MOVED="child_moved",Il.VALUE="value",Il);function Il(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Cl=(kl.prototype.updateChild=function(t,e,n,r,i,o){ws(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Sl.childRemovedChange(e,s)):ws(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Sl.childAddedChange(e,n)):o.trackChildChange(Sl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},kl.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(lc,(function(t,r){e.hasChild(t)||n.trackChildChange(Sl.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(lc,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Sl.childChangedChange(e,r,i))}else n.trackChildChange(Sl.childAddedChange(e,r))}))),e.withIndex(this.index_)},kl.prototype.updatePriority=function(t,e){return t.isEmpty()?Dc.EMPTY_NODE:t.updatePriority(e)},kl.prototype.filtersNodes=function(){return!1},kl.prototype.getIndexedFilter=function(){return this},kl.prototype.getIndex=function(){return this.index_},kl);function kl(t){this.index_=t}var Al=(Nl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ws(e===Sl.CHILD_ADDED||e===Sl.CHILD_CHANGED||e===Sl.CHILD_REMOVED,"Only child changes supported for tracking"),ws(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Sl.CHILD_ADDED&&i===Sl.CHILD_REMOVED)this.changeMap.set(n,Sl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Sl.CHILD_REMOVED&&i===Sl.CHILD_ADDED)this.changeMap.delete(n);else if(e===Sl.CHILD_REMOVED&&i===Sl.CHILD_CHANGED)this.changeMap.set(n,Sl.childRemovedChange(n,r.oldSnap));else if(e===Sl.CHILD_CHANGED&&i===Sl.CHILD_ADDED)this.changeMap.set(n,Sl.childAddedChange(n,t.snapshotNode));else{if(e!==Sl.CHILD_CHANGED||i!==Sl.CHILD_CHANGED)throw _s("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Sl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Nl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Nl);function Nl(){this.changeMap=new Map}function xl(){}var Dl=new(xl.prototype.getCompleteChild=function(t){return null},xl.prototype.getChildAfterChild=function(t,e,n){return null},xl),Rl=(Pl.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new wl(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Pl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Pl);function Pl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Ol=function(t,e){this.viewCache=t,this.changes=e},Ll=(Ml.prototype.assertIndexed=function(t){ws(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),ws(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Ml.prototype.applyOperation=function(t,e,n,r){var i,o,s=new Al;if(e.type===il.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(ws(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===il.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(ws(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===il.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==il.LISTEN_COMPLETE)throw _s("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var l=s.getChanges();return Ml.maybeAddValueEvent_(t,i,l),new Ol(i,l)},Ml.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Sl.valueChange(e.getCompleteEventSnap()))}},Ml.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(ws(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof Dc?u:Dc.EMPTY_NODE);s=this.filter_.updateFullNode(t.getEventCache().getNode(),c,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=e.getFront();if(".priority"===h){ws(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=f?this.filter_.updatePriority(p,f):o.getNode()}else{var d=e.popFront(),y=void 0;if(o.isCompleteForChild(h)){a=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=m?o.getNode().getImmediateChild(h).updateChild(d,m):o.getNode().getImmediateChild(h)}else y=n.calcCompleteChild(h,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),h,y,d,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Ml.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var p=e.popFront(),f=u.getNode().getImmediateChild(h).updateChild(p,n);a=".priority"===h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,p,Dl,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Rl(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},Ml.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Rl(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),p=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var d=c.getCompleteChild(l);f=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Dc.EMPTY_NODE}if(p.equals(f))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,f,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},Ml.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Ml.prototype.applyUserMerge_=function(t,e,n,r,i,o){var s=this,a=t;return n.foreach((function(n,u){var c=e.child(n);Ml.cacheHasChild_(t,c.getFront())&&(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),n.foreach((function(n,u){var c=e.child(n);Ml.cacheHasChild_(t,c.getFront())||(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),a},Ml.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},Ml.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:pl.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new hu(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),p=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new hu(e),p,r,i,o,s)}})),c},Ml.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=pl.Empty;return a.getNode().forEachChild(tc,(function(t,e){u=u.set(new hu(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=pl.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},Ml.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Dl,r)},Ml.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Rl(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();ws(l instanceof Dc,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}u=this.filter_.updateFullNode(a,c=c,i)}else{var h=e.getFront(),p=n.calcCompleteChild(h,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(h)&&(p=a.getImmediateChild(h)),(u=null!=p?this.filter_.updateChild(a,h,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,Dc.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(hu.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},Ml);function Ml(t){this.filter_=t}var Fl=(Ul.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===Sl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Sl.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,Sl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Sl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Sl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Sl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Sl.VALUE,t,n,e),i},Ul.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},Ul.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Ul.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw _s("Should only compare child_ events.");var n=new zu(t.childName,t.snapshotNode),r=new zu(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Ul);function Ul(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var jl,ql=(Bl.prototype.getQuery=function(){return this.query_},Bl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Bl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Bl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Bl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Bl.prototype.removeEventRegistration=function(t,e){var n=[];if(e){ws(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},Bl.prototype.applyOperation=function(t,e,n){t.type===il.MERGE&&null!==t.source.queryId&&(ws(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),ws(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),ws(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Bl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(lc,(function(t,e){n.push(Sl.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(Sl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Bl.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},Bl);function Bl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Cl(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ll(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Dc.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Dc.EMPTY_NODE,s.getNode(),null),c=new wl(a,o.isFullyInitialized(),r.filtersNodes()),l=new wl(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new El(l,c),this.eventGenerator_=new Fl(this.query_)}var Vl=(Object.defineProperty(Wl,"__referenceConstructor",{get:function(){return ws(jl,"Reference.ts has not been loaded"),jl},set:function(t){ws(!jl,"__referenceConstructor has already been defined"),jl=t},enumerable:!0,configurable:!0}),Wl.prototype.isEmpty=function(){return 0===this.views.size},Wl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return ws(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=ds(this.views.values()),c=u.next();!c.done;c=u.next())a=a.concat((s=c.value).applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Wl.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a,u=n.calcCompleteEventCache(i?r:null);a=!!u||(u=r instanceof Dc?n.calcCompleteEventChildren(r):Dc.EMPTY_NODE,!1);var c=new El(new wl(u,a,!1),new wl(r,i,!1));s=new ql(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},Wl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=ds(this.views.entries()),l=c.next();!l.done;l=c.next()){var h=ys(l.value,2),p=h[0],f=h[1];a=a.concat(f.removeEventRegistration(e,n)),f.isEmpty()&&(this.views.delete(p),f.getQuery().getQueryParams().loadsAllData()||s.push(f.getQuery()))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(f=this.views.get(o))&&(a=a.concat(f.removeEventRegistration(e,n)),f.isEmpty()&&(this.views.delete(o),f.getQuery().getQueryParams().loadsAllData()||s.push(f.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Wl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Wl.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=ds(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},Wl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=ds(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Wl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Wl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Wl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Wl.prototype.getCompleteView=function(){var t,e;try{for(var n=ds(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},Wl);function Wl(){this.views=new Map}var Hl=(zl.prototype.addWrite=function(t,e){if(t.isEmpty())return new zl(new pl(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=hu.relativePath(r,t);return i=i.updateChild(o,e),new zl(this.writeTree_.set(r,i))}var s=new pl(e);return new zl(this.writeTree_.setTree(t,s))},zl.prototype.addWrites=function(t,e){var n=this;return ou(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},zl.prototype.removeWrite=function(t){return t.isEmpty()?zl.Empty:new zl(this.writeTree_.setTree(t,pl.Empty))},zl.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},zl.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(hu.relativePath(e.path,t)):null},zl.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(lc,(function(e,n){t.push(new zu(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new zu(e,n.value))})),t},zl.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new zl(null!=e?new pl(e):this.writeTree_.subtree(t))},zl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},zl.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(ws(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(hu.Empty,this.writeTree_,t)},zl.Empty=new zl(new pl(null)),zl);function zl(t){this.writeTree_=t}var Gl=(Kl.prototype.childWrites=function(t){return new Ql(t,this)},Kl.prototype.addOverwrite=function(t,e,n,r){ws(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Kl.prototype.addMerge=function(t,e,n){ws(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Kl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Kl.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));ws(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(n<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ou(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0)},Kl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Kl.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);return!r&&i.isEmpty()?e:r||null!=e||i.hasCompleteWrite(hu.Empty)?Kl.layerTree_(this.allWrites_,(function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t).apply(a=e||Dc.EMPTY_NODE):null}var o=this.visibleWrites_.getCompleteNode(t);if(null!=o)return o;var s=this.visibleWrites_.childCompoundWrite(t);if(s.isEmpty())return e;if(null!=e||s.hasCompleteWrite(hu.Empty)){var a=e||Dc.EMPTY_NODE;return s.apply(a)}return null},Kl.prototype.calcCompleteEventChildren=function(t,e){var n=Dc.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(lc,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(lc,(function(t,e){var r=i.childCompoundWrite(new hu(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},Kl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){ws(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Kl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Kl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Kl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(hu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=h.getNext();p&&c.length<r;)0!==l(p,n)&&c.push(p),p=h.getNext();return c},Kl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Kl.prototype.resetTree_=function(){this.visibleWrites_=Kl.layerTree_(this.allWrites_,Kl.DefaultFilter_,hu.Empty),this.lastWriteId_=0<this.allWrites_.length?this.allWrites_[this.allWrites_.length-1].writeId:-1},Kl.DefaultFilter_=function(t){return t.visible},Kl.layerTree_=function(t,e,n){for(var r=Hl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=hu.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=hu.relativePath(s,n),r=r.addWrite(hu.Empty,o.snap.getChild(a)));else{if(!o.children)throw _s("WriteRecord should have .snap or .children");if(n.contains(s))a=hu.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=hu.relativePath(s,n)).isEmpty())r=r.addWrites(hu.Empty,o.children);else{var u=qs(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(hu.Empty,c)}}}}}return r},Kl);function Kl(){this.visibleWrites_=Hl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Ql=(Yl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Yl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Yl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Yl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Yl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Yl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Yl.prototype.child=function(t){return new Yl(this.treePath_.child(t),this.writeTree_)},Yl);function Yl(t,e){this.treePath_=t,this.writeTree_=e}var Xl=($l.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ml(al.User,t,e)):[]},$l.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=pl.fromObject(e);return this.applyOperationToSyncPoints_(new gl(al.User,t,r))},$l.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=pl.Empty;return null!=n.snap?r=r.set(hu.Empty,!0):ou(n.children,(function(t,e){r=r.set(new hu(t),e)})),this.applyOperationToSyncPoints_(new ll(n.path,r,e))}return[]},$l.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ml(al.Server,t,e))},$l.prototype.applyServerMerge=function(t,e){var n=pl.fromObject(e);return this.applyOperationToSyncPoints_(new gl(al.Server,t,n))},$l.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new dl(al.Server,t))},$l.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=$l.parseQueryKey_(r),o=i.path,s=i.queryId,a=hu.relativePath(o,t),u=new ml(al.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},$l.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=$l.parseQueryKey_(r),o=i.path,s=i.queryId,a=hu.relativePath(o,t),u=pl.fromObject(e),c=new gl(al.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},$l.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=$l.parseQueryKey_(n),i=r.path,o=r.queryId,s=hu.relativePath(i,t),a=new dl(al.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},$l.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,(function(t,e){var o=hu.relativePath(t,n);r=r||e.getCompleteServerCache(o),i=i||e.hasCompleteView()}));var o,s=this.syncPointTree_.get(n);s?(i=i||s.hasCompleteView(),r=r||s.getCompleteServerCache(hu.Empty)):(s=new Vl,this.syncPointTree_=this.syncPointTree_.set(n,s)),null!=r?o=!0:(o=!1,r=Dc.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild((function(t,e){var n=e.getCompleteServerCache(hu.Empty);n&&(r=r.updateImmediateChild(t,n))})));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=$l.makeQueryKey_(t);ws(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=$l.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var l=this.pendingWriteTree_.childWrites(n),h=s.addEventRegistration(t,e,l,r,o);if(!a&&!i){var p=s.viewForQuery(t);h=h.concat(this.setupListener_(t,p))}return h},$l.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(i,(function(t,e){return e.hasCompleteView()}));if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(h),f=0;f<p.length;++f){var d=p[f],y=d.getQuery(),m=this.createListenerForView_(d);this.listenProvider_.startListening($l.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening($l.queryForListening_(t),null):u.forEach((function(t){var e=r.queryToTagMap.get($l.makeQueryKey_(t));r.listenProvider_.stopListening($l.queryForListening_(t),e)}))),this.removeTags_(u)}return s},$l.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=hu.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},$l.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ou(n,(function(t,e){r=r.concat(e)})),r}))},$l.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=$l.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},$l.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},$l.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening($l.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)ws(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),ou(n,(function(t,e){r=r.concat(e)})),r})),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening($l.queryForListening_(c),this.tagForQuery_(c))}return o},$l.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Dc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},$l.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},$l.parseQueryKey_=function(t){var e=t.indexOf("$");return ws(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new hu(t.substr(0,e))}},$l.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},$l.prototype.tagForQuery_=function(t){var e=$l.makeQueryKey_(t);return this.queryToTagMap.get(e)},$l.getNextQueryTag_=function(){return $l.nextQueryTag_++},$l.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);ws(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},$l.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(hu.Empty))},$l.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(hu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(hu.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},$l.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(hu.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(hu.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},$l.nextQueryTag_=1,$l);function $l(t){this.listenProvider_=t,this.syncPointTree_=pl.Empty,this.pendingWriteTree_=new Gl,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Jl=(Zl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Zl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Zl);function Zl(){this.rootNode_=Dc.EMPTY_NODE}var th=(eh.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ua("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},eh.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},eh.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},eh.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';Va(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},eh);function eh(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}var nh=(rh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),js(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},rh.prototype.get=function(){return Ts(this.counters_)},rh);function rh(){this.counters_={}}var ih=(oh.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new nh),this.collections_[e]},oh.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},oh.collections_={},oh.reporters_={},oh);function oh(){}var sh=(ah.prototype.get=function(){var t=this.collection_.get(),e=hs({},t);return this.last_&&ou(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},ah);function ah(t){this.collection_=t,this.last_=null}var uh=(ch.prototype.includeStat=function(t){this.statsToReport_[t]=!0},ch.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;ou(e,(function(e,i){0<i&&js(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),uu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},ch);function ch(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new sh(t);var n=1e4+2e4*Math.random();uu(this.reportStats_.bind(this),Math.floor(n))}var lh=(hh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new ph(i)),e.add(r)}e&&this.eventLists_.push(e)},hh.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},hh.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},hh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},hh);function hh(){this.eventLists_=[],this.recursionDepth_=0}var ph=(fh.prototype.add=function(t){this.events_.push(t)},fh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Za&&Ua("event: "+e.toString()),au(n)}}},fh.prototype.getPath=function(){return this.path_},fh);function fh(t){this.path_=t,this.events_=[]}var dh=(yh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=ms(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},yh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},yh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},yh.prototype.validateEventType_=function(t){ws(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},yh);function yh(t){this.allowedEvents_=t,this.listeners_={},ws(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var mh,vh=(ls(gh,mh=dh),gh.getInstance=function(){return new gh},gh.prototype.getInitialEvent=function(t){return ws("visible"===t,"Unknown event type: "+t),[this.visible_]},gh);function gh(){var t,e,n=mh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var bh,wh=(ls(_h,bh=dh),_h.getInstance=function(){return new _h},_h.prototype.getInitialEvent=function(t){return ws("online"===t,"Unknown event type: "+t),[this.online_]},_h.prototype.currentlyOnline=function(){return this.online_},_h);function _h(){var t=bh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||As()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var Eh=(Th.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Th.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&au((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},Th);function Th(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Sh=(Ih.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Eh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ch((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ys(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ys(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(yu)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},Ih.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Ih.forceAllow=function(){Ih.forceAllow_=!0},Ih.forceDisallow=function(){Ih.forceDisallow_=!0},Ih.isAvailable=function(){return!!Ih.forceAllow_||!(Ih.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Ih.prototype.markConnectionHealthy=function(){},Ih.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Ih.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Ih.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Ih.prototype.send=function(t){var e=Fs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Ga(function(t){var e=gs(t);return Es.encodeByteArray(e,!0)}(e),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},Ih.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Ih.prototype.incrementIncomingBytes_=function(t){var e=Fs(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Ih);function Ih(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ja(t),this.stats_=ih.getCollection(e),this.urlFn=function(t){return e.connectionURL(vu,t)}}var Ch=(kh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ua("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},kh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},kh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},kh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},kh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},kh.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},kh.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ua("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},kh);function kh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=$a(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=kh.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){Ua("frame writing exception"),t.stack&&Ua(t.stack),Ua(t)}}var Ah="",Nh=null;"undefined"!=typeof MozWebSocket?Nh=MozWebSocket:"undefined"!=typeof WebSocket&&(Nh=WebSocket);var xh=(Dh.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(yu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(mu,r)},Dh.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qa.set("previous_websocket_failure",!0);try{this.mySock=new Nh(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var r=t.message||t.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},Dh.prototype.start=function(){},Dh.forceDisallow=function(){Dh.forceDisallow_=!0},Dh.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Nh&&!Dh.forceDisallow_},Dh.previouslyFailed=function(){return Qa.isInMemoryStorage||!0===Qa.get("previous_websocket_failure")},Dh.prototype.markConnectionHealthy=function(){Qa.remove("previous_websocket_failure")},Dh.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Ms(e);this.onMessage(n)}},Dh.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Dh.prototype.extractFrameCount_=function(t){if(ws(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Dh.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},Dh.prototype.send=function(t){this.resetKeepAlive();var e=Fs(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Ga(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Dh.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Dh.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Dh.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Dh.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Dh.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Dh.responsesRequiredToBeHealthy=2,Dh.healthyTimeout=3e4,Dh);function Dh(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ja(this.connId),this.stats_=ih.getCollection(e),this.connURL=Dh.connectionURL_(e,n,r)}var Rh=(Object.defineProperty(Ph,"ALL_TRANSPORTS",{get:function(){return[Sh,xh]},enumerable:!0,configurable:!0}),Ph.prototype.initTransports_=function(t){var e,n,r=xh&&xh.isAvailable(),i=r&&!xh.previouslyFailed();if(t.webSocketOnly&&(r||Va("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xh];else{var o=this.transports_=[];try{for(var s=ds(Ph.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Ph.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ph.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ph);function Ph(t){this.initTransports_(t)}var Oh=(Lh.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=uu((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},Lh.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Lh.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},Lh.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},Lh.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},Lh.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Lh.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Lh.prototype.onSecondaryMessageReceived_=function(t){var e=za("t",t),n=za("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Lh.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Lh.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Lh.prototype.onPrimaryMessageReceived_=function(t){var e=za("t",t),n=za("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Lh.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Lh.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Lh.prototype.onControl_=function(t){var e=za("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?qa("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qa("Unknown control packet command: "+e)}},Lh.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Va("Protocol version mismatch detected"),this.tryStartUpgrade_())},Lh.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Lh.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),uu((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},Lh.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Lh.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):uu((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Lh.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Lh.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Lh.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Lh.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Lh.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Lh.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Lh.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Lh);function Lh(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ja("c:"+this.id+":"),this.transportManager_=new Rh(e),this.log_("Connection created"),this.start_()}var Mh=(Fh.prototype.put=function(t,e,n,r){},Fh.prototype.merge=function(t,e,n,r){},Fh.prototype.refreshAuthToken=function(t){},Fh.prototype.onDisconnectPut=function(t,e,n){},Fh.prototype.onDisconnectMerge=function(t,e,n){},Fh.prototype.onDisconnectCancel=function(t,e){},Fh.prototype.reportStats=function(t){},Fh);function Fh(){}var Uh,jh=(ls(qh,Uh=Mh),qh.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Fs(i)),ws(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},qh.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ws(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),ws(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},qh.prototype.sendListen_=function(t){var e=this,n=t.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n.queryObject(),o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,a=o.s;qh.warnOnListenWarnings_(s,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==a&&e.removeListen_(r,i),t.onComplete&&t.onComplete(a,s))}))},qh.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&js(t,"w")){var n=qs(t,"w");Array.isArray(n)&&~n.indexOf("no_index")&&Va('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+e.getQueryParams().getIndex().toString()+'" at '+e.path.toString()+" to your security rules for better performance.")}},qh.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},qh.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){var e=Us(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},qh.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=function(t){var e=Us(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},qh.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),ws(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},qh.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},qh.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},qh.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},qh.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},qh.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},qh.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},qh.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},qh.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},qh.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},qh.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},qh.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Fs(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},qh.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):qa("Unrecognized action received from server: "+Fs(t)+"\nAre you using the latest client?")},qh.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},qh.prototype.scheduleConnect_=function(t){var e=this;ws(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},qh.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},qh.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},qh.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},qh.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+qh.nextConnectionId_++,i=this,o=this.lastSessionId,s=!1,a=null,u=function(){a?a.close():(s=!0,n())};this.realtime_={close:u,sendRequest:function(t){ws(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(u){s?Ua("getToken() completed but was canceled"):(Ua("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,a=new Oh(r,i.repoInfo_,t,e,n,(function(t){Va(t+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")}),o))})).then(null,(function(t){i.log_("Failed to get token: "+t),s||u()}))}},qh.prototype.interrupt=function(t){Ua("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},qh.prototype.resume=function(t){Ua("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Bs(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},qh.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},qh.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},qh.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return iu(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},qh.prototype.removeListen_=function(t,e){var n,r=new hu(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},qh.prototype.onAuthRevoked_=function(t,e){Ua("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},qh.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},qh.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=ds(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ds(s.values())),u=a.next();!u.done;u=a.next())this.sendListen_(u.value)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},qh.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Ah.replace(/\./g,"-")]=1,As()?t["framework.cordova"]=1:Ns()&&(t["framework.reactnative"]=1),this.reportStats(t)},qh.prototype.shouldReconnect_=function(){var t=wh.getInstance().currentlyOnline();return Bs(this.interruptReasons_)&&t},qh.nextPersistentConnectionId_=0,qh.nextConnectionId_=0,qh);function qh(t,e,n,r,i,o){var s=Uh.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=qh.nextPersistentConnectionId_++,s.log_=ja("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),vh.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&wh.getInstance().on("online",s.onOnline_,s),s}var Bh,Vh=(ls(Wh,Bh=Mh),Wh.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Wh.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ws(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Wh.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=Wh.getListenId_(t,n),a={};this.listens_[s]=a;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,(function(t,e){var u=e;404===t&&(t=u=null),null===t&&i.onDataUpdate_(o,u,!1,n),qs(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},Wh.prototype.unlisten=function(t,e){var n=Wh.getListenId_(t,e);delete this.listens_[n]},Wh.prototype.refreshAuthToken=function(t){},Wh.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&a.status<300){try{t=Ms(a.responseText)}catch(t){Va("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Va("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},Wh);function Wh(t,e,n){var r=Bh.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ja("p:rest:"),r.listens_={},r}var Hh="repo_interrupt",zh=(Gh.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Gh.prototype.name=function(){return this.repoInfo_.namespace},Gh.prototype.serverTime=function(){var t=this.infoData_.getNode(new hu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Gh.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},Gh.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new hu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Vs(e,(function(t){return Mc(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Mc(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Vs(e,(function(t){return Mc(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Mc(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},Gh.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Gh.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Gh.prototype.onServerInfoUpdate_=function(t){var e=this;ou(t,(function(t,n){e.updateInfo_(t,n)}))},Gh.prototype.updateInfo_=function(t,e){var n=new hu("/.info/"+t),r=Mc(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Gh.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Gh.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Mc(e,n),a=sl(s,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Va("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Gh.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(ou(e,(function(t,e){i=!1;var n=Mc(e);s[t]=sl(n,o)})),i)Ua("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Va("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=0<s.length?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),ou(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},Gh.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new el;return t.forEachTree(new hu(""),(function(t,r){n.remember(t,sl(r,e))})),n}(this.onDisconnect_,e),r=[];n.forEachTree(hu.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new el,this.eventQueue_.raiseEventsForChangedPath(hu.Empty,r)},Gh.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},Gh.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Mc(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},Gh.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Mc(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},Gh.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Bs(e))return Ua("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&ou(e,(function(e,n){var i=Mc(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},Gh.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Gh.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Gh.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Hh)},Gh.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Hh)},Gh.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new sh(this.stats_)),this.statsListener_.get()):this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);ou(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},Gh.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Gh.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ua.apply(void 0,ms([n],t))},Gh.prototype.callOnCompleteCallback=function(t,e,n){t&&au((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(Gh.prototype,"database",{get:function(){return this.__database||(this.__database=new hp(this))},enumerable:!0,configurable:!0}),Gh);function Gh(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new el,this.persistentConnection_=null;var o=new th(n,r);if(this.stats_=ih.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Vh(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Fs(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new jh(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=ih.getOrCreateReporter(t,(function(){return new uh(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Jl,this.infoSyncTree_=new Xl({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Xl({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}var Kh=(Qh.prototype.getStartPost=function(){return this.startPost_},Qh.prototype.getEndPost=function(){return this.endPost_},Qh.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Qh.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new zu(e,n))||(n=Dc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Qh.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Dc.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Dc.EMPTY_NODE);var i=this;return e.forEachChild(lc,(function(t,e){i.matches(new zu(t,e))||(r=r.updateImmediateChild(t,Dc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},Qh.prototype.updatePriority=function(t,e){return t},Qh.prototype.filtersNodes=function(){return!0},Qh.prototype.getIndexedFilter=function(){return this.indexedFilter_},Qh.prototype.getIndex=function(){return this.index_},Qh.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Qh.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Qh);function Qh(t){this.indexedFilter_=new Cl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Qh.getStartPost_(t),this.endPost_=Qh.getEndPost_(t)}var Yh=(Xh.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new zu(e,n))||(n=Dc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Xh.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Dc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Dc.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Dc.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Dc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Xh.prototype.updatePriority=function(t,e){return t},Xh.prototype.filtersNodes=function(){return!0},Xh.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Xh.prototype.getIndex=function(){return this.index_},Xh.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;ws(a.numChildren()===this.limit_,"");var u=new zu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),p=r.getChildAfterChild(this.index_,c,this.reverse_);null!=p&&(p.name===e||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,u);if(l&&!n.isEmpty()&&0<=f)return null!=i&&i.trackChildChange(Sl.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Sl.childRemovedChange(e,h));var d=a.updateImmediateChild(e,Dc.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(Sl.childAddedChange(p.name,p.node)),d.updateImmediateChild(p.name,p.node)):d}return n.isEmpty()?t:l&&0<=o(c,u)?(null!=i&&(i.trackChildChange(Sl.childRemovedChange(c.name,c.node)),i.trackChildChange(Sl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Dc.EMPTY_NODE)):t},Xh);function Xh(t){this.rangedFilter_=new Kh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var $h=(Jh.prototype.hasStart=function(){return this.startSet_},Jh.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Jh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Jh.prototype.getIndexStartValue=function(){return ws(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Jh.prototype.getIndexStartName=function(){return ws(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eu},Jh.prototype.hasEnd=function(){return this.endSet_},Jh.prototype.getIndexEndValue=function(){return ws(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Jh.prototype.getIndexEndName=function(){return ws(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nu},Jh.prototype.hasLimit=function(){return this.limitSet_},Jh.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Jh.prototype.getLimit=function(){return ws(this.limitSet_,"Only valid if limit has been set"),this.limit_},Jh.prototype.getIndex=function(){return this.index_},Jh.prototype.copy_=function(){var t=new Jh;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Jh.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Jh.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Jh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Jh.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Jh.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Jh.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Jh.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Jh.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Jh.prototype.getQueryObject=function(){var t=Jh.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==lc&&(e[t.INDEX]=this.index_.toString()),e},Jh.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Jh.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===lc},Jh.prototype.getNodeFilter=function(){return this.loadsAllData()?new Cl(this.getIndex()):this.hasLimit()?new Yh(this):new Kh(this)},Jh.prototype.toRestQueryStringParameters=function(){var t,e=Jh.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===lc?e.PRIORITY_INDEX:this.index_===jc?e.VALUE_INDEX:this.index_===tc?e.KEY_INDEX:(ws(this.index_ instanceof qc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Fs(t),this.startSet_&&(n[e.START_AT]=Fs(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Fs(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Fs(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Fs(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Jh.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Jh.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Jh.DEFAULT=new Jh,Jh);function Jh(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lc}var Zh,tp=(ls(ep,Zh=Zc),ep.prototype.getKey=function(){return Ys("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},ep.prototype.child=function(t){return Ys("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof hu||(null===this.path.getFront()?function(t,e,n,r){Nu("Reference.child",1,n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),!1)}(0,0,t):Nu("Reference.child",1,t,!1)),new ep(this.repo,this.path.child(t))},ep.prototype.getParent=function(){Ys("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new ep(this.repo,t)},ep.prototype.getRoot=function(){Ys("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},ep.prototype.databaseProp=function(){return this.repo.database},ep.prototype.set=function(t,e){Ys("Reference.set",1,2,arguments.length),xu("Reference.set",this.path),Su("Reference.set",1,t,this.path,!1),$s("Reference.set",2,e,!0);var n=new Is;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},ep.prototype.update=function(t,e){if(Ys("Reference.update",1,2,arguments.length),xu("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Va("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Iu("Reference.update",1,t,this.path,!1),$s("Reference.update",2,e,!0);var i=new Is;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},ep.prototype.setWithPriority=function(t,e,n){if(Ys("Reference.setWithPriority",2,3,arguments.length),xu("Reference.setWithPriority",this.path),Su("Reference.setWithPriority",1,t,this.path,!1),Cu("Reference.setWithPriority",2,e,!1),$s("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Is;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},ep.prototype.remove=function(t){return Ys("Reference.remove",0,1,arguments.length),xu("Reference.remove",this.path),$s("Reference.remove",1,t,!0),this.set(null,t)},ep.prototype.transaction=function(t,e,n){if(Ys("Reference.transaction",1,3,arguments.length),xu("Reference.transaction",this.path),$s("Reference.transaction",1,t,!1),$s("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Xs("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new Is;return"function"==typeof e&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,t,(function(t,n,i){t?r.reject(t):r.resolve(new ju(n,i)),"function"==typeof e&&e(t,n,i)}),n),r.promise},ep.prototype.setPriority=function(t,e){Ys("Reference.setPriority",1,2,arguments.length),xu("Reference.setPriority",this.path),Cu("Reference.setPriority",1,t,!1),$s("Reference.setPriority",2,e,!0);var n=new Is;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},ep.prototype.push=function(t,e){Ys("Reference.push",0,2,arguments.length),xu("Reference.push",this.path),Su("Reference.push",1,t,this.path,!0),$s("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Hu(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},ep.prototype.onDisconnect=function(){return xu("Reference.onDisconnect",this.path),new Fu(this.repo,this.path)},Object.defineProperty(ep.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(ep.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(ep.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(ep.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),ep);function ep(t,e){if(!(t instanceof zh))throw new Error("new Reference() no longer supported - use app.database().");return Zh.call(this,t,e,$h.DEFAULT,!1)||this}Zc.__referenceConstructor=tp,Vl.__referenceConstructor=tp;var np,rp,ip=function(){this.children={},this.childCount=0,this.value=null},op=(sp.prototype.subTree=function(t){for(var e=t instanceof hu?t:new hu(t),n=this,r=e.getFront();null!==r;)n=new sp(r,n,qs(n.node_.children,r)||new ip),r=(e=e.popFront()).getFront();return n},sp.prototype.getValue=function(){return this.node_.value},sp.prototype.setValue=function(t){ws(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},sp.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},sp.prototype.hasChildren=function(){return 0<this.node_.childCount},sp.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},sp.prototype.forEachChild=function(t){var e=this;ou(this.node_.children,(function(n,r){t(new sp(n,e,r))}))},sp.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},sp.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},sp.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},sp.prototype.path=function(){return new hu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},sp.prototype.name=function(){return this.name_},sp.prototype.parent=function(){return this.parent_},sp.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},sp.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=js(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},sp);function sp(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new ip),this.name_=t,this.parent_=e,this.node_=n}(rp=np=np||{})[rp.RUN=0]="RUN",rp[rp.SENT=1]="SENT",rp[rp.COMPLETED=2]="COMPLETED",rp[rp.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",rp[rp.NEEDS_ABORT=4]="NEEDS_ABORT",zh.MAX_TRANSACTION_RETRIES_=25,zh.prototype.transactionsInit_=function(){this.transactionQueueTree_=new op},zh.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new tp(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:$a(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Vc(s.currentInputSnapshot,new tp(this,s.path),lc);s.onComplete(null,!1,c)}}else{Mu("transaction failed: Data returned ",u,s.path),s.status=np.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(s),l.setValue(h);var p=void 0;"object"==typeof u&&null!==u&&js(u,".priority")?(p=qs(u,".priority"),ws(Tu(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Dc.EMPTY_NODE).getPriority().val(),p=p;var f=this.generateServerValues(),d=Mc(u,p),y=sl(d,f);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},zh.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Dc.EMPTY_NODE},zh.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);ws(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return t.status===np.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},zh.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];ws(u.status===np.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=np.SENT,u.retryCount++;var c=hu.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=np.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new tp(n,e[s].path),c=new Vc(a,u,lc);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)au(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===np.SENT_NEEDS_ABORT?np.NEEDS_ABORT:np.RUN;else for(Va("transaction at "+h.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=np.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),s)},zh.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},zh.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===np.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var s=t[o],a=hu.relativePath(e,s.path),u=!1,c=void 0;if(ws(null!==a,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===np.NEEDS_ABORT)u=!0,c=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===np.RUN)if(s.retryCount>=zh.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,i);s.currentInputSnapshot=l;var h=t[o].update(l.val());if(void 0!==h){Mu("transaction failed: Data returned ",h,s.path);var p=Mc(h);"object"==typeof h&&null!=h&&js(h,".priority")||(p=p.updatePriority(l.getPriority()));var f=s.currentWriteId,d=this.generateServerValues(),y=sl(p,d);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(f),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],u&&(t[o].status=np.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===c){var m=new tp(this,t[o].path),v=new Vc(t[o].currentInputSnapshot,m,lc);n.push(t[o].onComplete.bind(null,null,!1,v))}else n.push(t[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)au(n[o]);this.sendReadyTransactions_()}},zh.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},zh.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},zh.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},zh.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==np.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},zh.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},zh.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===np.SENT_NEEDS_ABORT||(e[o].status===np.SENT?(ws(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=np.SENT_NEEDS_ABORT,e[o].abortReason="set"):(ws(e[o].status===np.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)au(n[o])}};var ap,up="databaseURL",cp=(lp.getInstance=function(){return ap=ap||new lp},lp.prototype.interrupt=function(){var t,e,n,r;try{for(var i=ds(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ds(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next())this.repos_[s][u.value].interrupt()}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},lp.prototype.resume=function(){var t,e,n,r;try{for(var i=ds(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ds(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next())this.repos_[s][u.value].resume()}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},lp.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[up];void 0===r&&Ba("Can't determine Firebase Database URL.  Be sure to include "+up+" option when calling firebase.initializeApp().");var i=wu(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(o=(i=wu(r="http://"+s+"?ns="+o.namespace)).repoInfo),Du("Invalid Firebase Database URL",1,i),i.path.isEmpty()||Ba("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},lp.prototype.deleteRepo=function(t){var e=qs(this.repos_,t.app.name);e&&qs(e,t.repoInfo_.toURLString())===t||Ba("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},lp.prototype.createRepo=function(t,e,n){var r=qs(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=qs(r,t.toURLString());return i&&Ba("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new zh(t,this.useRestClient_,e,n),r[t.toURLString()]=i},lp.prototype.forceRestClient=function(t){this.useRestClient_=t},lp);function lp(){this.repos_={},this.useRestClient_=!1}var hp=(Object.defineProperty(pp.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),pp.prototype.ref=function(t){return this.checkDeleted_("ref"),Ys("database.ref",0,1,arguments.length),t instanceof tp?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},pp.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Ys(e,1,1,arguments.length);var n=wu(t);Du(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Ba(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},pp.prototype.checkDeleted_=function(t){null===this.repo_&&Ba("Cannot call "+t+" on a deleted database.")},pp.prototype.goOffline=function(){Ys("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},pp.prototype.goOnline=function(){Ys("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},pp.ServerValue={TIMESTAMP:{".sv":"timestamp"}},pp);function pp(t){(this.repo_=t)instanceof zh||Ba("Don't call new Database() directly - please use firebase.database()."),this.root_=new tp(t,hu.Empty),this.INTERNAL=new fp(this)}var fp=(dp.prototype.delete=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){return this.database.checkDeleted_("delete"),cp.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},dp);function dp(t){this.database=t}var yp=Object.freeze({__proto__:null,forceLongPolling:function(){xh.forceDisallow(),Sh.forceAllow()},forceWebSockets:function(){Sh.forceDisallow()},isWebSocketsAvailable:function(){return xh.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),mp=jh;jh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var vp,gp,bp=Object.freeze({__proto__:null,DataConnection:mp,RealTimeConnection:Oh,hijackHash:function(t){var e=jh.prototype.put;return jh.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jh.prototype.put=e}},ConnectionTarget:gu,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){cp.getInstance().forceRestClient(t)}}),wp=hp.ServerValue;vp=(gp=xa).SDK_VERSION,Ah=vp,gp.INTERNAL.registerComponent(new ta("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return cp.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:tp,Query:Zc,Database:hp,DataSnapshot:Vc,enableLogging:Fa,INTERNAL:yp,ServerValue:wp,TEST_ACCESS:bp}).setMultipleInstances(!0)),gp.registerVersion("@firebase/database","0.5.21");var _p,Ep="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Tp=Tp||{},Sp=Ep;function Ip(t){return"string"==typeof t}function Cp(t){return"number"==typeof t}function kp(t,e){t=t.split("."),e=e||Sp;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function Ap(){}function Np(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function xp(t){return"array"==Np(t)}function Dp(t){var e=Np(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Rp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Pp="closure_uid_"+(1e9*Math.random()>>>0),Op=0;function Lp(t,e,n){return t.call.apply(t.bind,arguments)}function Mp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Fp(t,e,n){return(Fp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lp:Mp).apply(null,arguments)}function Up(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}var jp=Date.now||function(){return+new Date};function qp(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,(t.prototype.constructor=t).xb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Bp(){this.j=this.j,this.i=this.i}Bp.prototype.j=!1,Bp.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[Pp]||(this[Pp]=++Op))},Bp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Vp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(Ip(t))return Ip(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Wp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=Ip(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Hp(){return Array.prototype.concat.apply([],arguments)}function zp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Gp(t){return/^[\s\xa0]*$/.test(t)}var Kp,Qp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Yp(t,e){return-1!=t.indexOf(e)}function Xp(t,e){return t<e?-1:e<t?1:0}t:{var $p=Sp.navigator;if($p){var Jp=$p.userAgent;if(Jp){Kp=Jp;break t}}Kp=""}function Zp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function tf(t){var e,n={};for(e in t)n[e]=t[e];return n}var ef="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ef.length;i++)e=ef[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function rf(t){return rf[" "](t),t}rf[" "]=Ap;var of,sf,af=Yp(Kp,"Opera"),uf=Yp(Kp,"Trident")||Yp(Kp,"MSIE"),cf=Yp(Kp,"Edge"),lf=cf||uf,hf=Yp(Kp,"Gecko")&&!(Yp(Kp.toLowerCase(),"webkit")&&!Yp(Kp,"Edge"))&&!(Yp(Kp,"Trident")||Yp(Kp,"MSIE"))&&!Yp(Kp,"Edge"),pf=Yp(Kp.toLowerCase(),"webkit")&&!Yp(Kp,"Edge");function ff(){var t=Sp.document;return t?t.documentMode:void 0}t:{var df="",yf=(sf=Kp,hf?/rv:([^\);]+)(\)|;)/.exec(sf):cf?/Edge\/([\d\.]+)/.exec(sf):uf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(sf):pf?/WebKit\/(\S+)/.exec(sf):af?/(?:Version)[ \/]?(\S+)/.exec(sf):void 0);if(yf&&(df=yf?yf[1]:""),uf){var mf=ff();if(null!=mf&&mf>parseFloat(df)){of=String(mf);break t}}of=df}var vf,gf={};function bf(t){return function(e,n){var r=gf;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=Qp(String(of)).split("."),r=Qp(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Xp(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Xp(0==s[2].length,0==a[2].length)||Xp(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}()}(t)}var wf=Sp.document;vf=wf&&uf?ff()||("CSS1Compat"==wf.compatMode?parseInt(of,10):5):void 0;var _f=!uf||9<=Number(vf),Ef=uf&&!bf("9"),Tf=function(){if(!Sp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Sp.addEventListener("test",Ap,e),Sp.removeEventListener("test",Ap,e)}catch(t){}return t}();function Sf(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function If(t,e){if(Sf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(hf){t:{try{rf(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=Ip(t.pointerType)?t.pointerType:Cf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Sf.prototype.b=function(){this.Ia=!1},qp(If,Sf);var Cf={2:"touch",3:"pen",4:"mouse"};If.prototype.b=function(){If.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ef)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var kf="closure_listenable_"+(1e6*Math.random()|0),Af=0;function Nf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Af,this.X=this.Z=!1}function xf(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Df(t){this.src=t,this.a={},this.b=0}function Rf(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Vp(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(xf(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Pf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Df.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Pf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Nf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Of="closure_lm_"+(1e6*Math.random()|0),Lf={};function Mf(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(xp(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Wf(r),e&&e[kf]?e.Aa(n,r,Rp(i)?!!i.capture:!!i,o):Ff(e,n,r,!0,i,o)}(t,e,n,r,i);if(xp(e)){for(var o=0;o<e.length;o++)Mf(t,e[o],n,r,i);return null}return n=Wf(n),t&&t[kf]?t.za(e,n,Rp(r)?!!r.capture:!!r,i):Ff(t,e,n,!1,r,i)}function Ff(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Rp(i)?!!i.capture:!!i;if(s&&!_f)return null;var a=Bf(t);if(a||(t[Of]=a=new Df(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=qf,e=_f?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)Tf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jf(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Uf(t){if(!Cp(t)&&t&&!t.X){var e=t.src;if(e&&e[kf])Rf(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jf(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Bf(e))?(Rf(n,t),0==n.b&&(n.src=null,e[Of]=null)):xf(t)}}}function jf(t){return t in Lf?Lf[t]:Lf[t]="on"+t}function qf(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Uf(t),n.call(r,e)}(t,_f?new If(e,this):e=new If(e||kp("window.event"),this))}function Bf(t){return(t=t[Of])instanceof Df?t:null}var Vf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wf(t){return"function"==Np(t)?t:(t[Vf]||(t[Vf]=function(e){return t.handleEvent(e)}),t[Vf])}function Hf(){Bp.call(this),this.c=new Df(this),(this.J=this).B=null}function zf(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Rf(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}qp(Hf,Bp),Hf.prototype[kf]=!0,(_p=Hf.prototype).addEventListener=function(t,e,n,r){Mf(this,t,e,n,r)},_p.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(xp(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Rp(i)?!!i.capture:!!i,r=Wf(r),e&&e[kf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Pf(s=e.a[n],r,i,o))&&(xf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Bf(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Pf(n,r,i,o)),(r=-1<e?n[e]:null)&&Uf(r))}(this,t,e,n,r)},_p.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(Ip(t))t=new Sf(t,n);else if(t instanceof Sf)t.target=t.target||n;else{var i=t;nf(t=new Sf(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=zf(s,r,!0,t)&&i}if(i=zf(s=t.a=n,r,!0,t)&&i,i=zf(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=zf(s=t.a=e[o],r,!1,t)&&i;return i},_p.G=function(){if(Hf.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)xf(n[r]);delete e.a[t],e.b--}}this.B=null},_p.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},_p.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Gf=Sp.JSON.stringify;function Kf(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Qf(){this.b=this.a=null}Kf.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Yf,Xf=new Kf((function(){return new $f}),(function(t){t.reset()}));function $f(){this.next=this.b=this.a=null}function Jf(t){Sp.setTimeout((function(){throw t}),0)}function Zf(t,e){Yf||function(){var t=Sp.Promise.resolve(void 0);Yf=function(){t.then(nd)}}(),td||(Yf(),td=!0),ed.add(t,e)}Qf.prototype.add=function(t,e){var n=Xf.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$f.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var td=!($f.prototype.reset=function(){this.next=this.b=this.a=null}),ed=new Qf;function nd(){for(var t;r=n=void 0,r=null,(n=ed).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){Jf(t)}var e=Xf;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;td=!1}function rd(t,e){Hf.call(this),this.b=t||1,this.a=e||Sp,this.f=Fp(this.fb,this),this.g=jp()}function id(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function od(t,e,n){if("function"==Np(t))n&&(t=Fp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Sp.setTimeout(t,e||0)}function sd(t,e,n){Bp.call(this),this.f=null!=n?Fp(t,n):t,this.c=e,this.b=Fp(this.$a,this),this.a=[]}function ad(t){t.U=od(t.b,t.c),t.f.apply(null,t.a)}function ud(t){Bp.call(this),this.b=t,this.a={}}qp(rd,Hf),(_p=rd.prototype).ba=!1,_p.L=null,_p.fb=function(){if(this.ba){var t=jp()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(id(this),this.start()))}},_p.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=jp())},_p.G=function(){rd.N.G.call(this),id(this),delete this.a},qp(sd,Bp),(_p=sd.prototype).ea=!1,_p.U=null,_p.Ta=function(t){this.a=arguments,this.U?this.ea=!0:ad(this)},_p.G=function(){sd.N.G.call(this),this.U&&(Sp.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},_p.$a=function(){this.U=null,this.ea&&(this.ea=!1,ad(this))},qp(ud,Bp);var cd=[];function ld(t,e,n,r){xp(n)||(n&&(cd[0]=n.toString()),n=cd);for(var i=0;i<n.length;i++){var o=Mf(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function hd(t){Zp(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Uf(t)}),t),t.a={}}function pd(){}ud.prototype.G=function(){ud.N.G.call(this),hd(this)},ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fd=new Hf;function dd(t){Sf.call(this,"serverreachability",t)}function yd(t){fd.dispatchEvent(new dd(fd,t))}function md(t){Sf.call(this,"statevent",t)}function vd(t){fd.dispatchEvent(new md(fd,t))}function gd(t){Sf.call(this,"timingevent",t)}function bd(t,e){if("function"!=Np(t))throw Error("Fn must not be null and must be a function");return Sp.setTimeout((function(){t()}),e)}qp(dd,Sf),qp(md,Sf),qp(gd,Sf);var wd={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},_d={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function Ed(){}function Td(){}Ed.prototype.a=null;var Sd,Id={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function Cd(){Sf.call(this,"d")}function kd(){Sf.call(this,"c")}function Ad(){}function Nd(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new ud(this),this.O=xd,this.P=new rd(t=lf?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}qp(Cd,Sf),qp(kd,Sf),qp(Ad,Ed),Sd=new Ad;var xd=45e3,Dd={},Rd={};function Pd(t,e,n){t.F=1,t.f=iy($d(e)),t.l=n,t.H=!0,Ld(t,null)}function Od(t,e,n,r){t.F=1,t.f=iy($d(e)),t.l=null,t.H=n,Ld(t,r)}function Ld(t,e){t.v=jp(),Ud(t),t.D=$d(t.f),ry(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new sd(Fp(t.Ja,t,t.a),t.J)),ld(t.I,t.a,"readystatechange",t.cb),e=t.h?tf(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),yd(1)}function Md(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=Fd(t,n);if(i==Rd){4==e&&(t.c=4,vd(14),r=!1);break}if(i==Dd){t.c=4,vd(15),r=!1;break}Wd(t,i)}4==e&&0==n.length&&(t.c=1,vd(16),r=!1),t.b=t.b&&r,r||(Vd(t),Bd(t))}function Fd(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?Rd:(n=Number(e.substring(n,r)),isNaN(n)?Dd:(r+=1)+n>e.length?Rd:(e=e.substr(r,n),t.A=r+n,e))}function Ud(t){t.R=jp()+t.O,jd(t,t.O)}function jd(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=bd(Fp(t.ab,t),e)}function qd(t){t.i&&(Sp.clearTimeout(t.i),t.i=null)}function Bd(t){t.g.Ca()||t.m||t.g.na(t)}function Vd(t){qd(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,id(t.P),hd(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Wd(t,e){try{t.g.Fa(t,e),yd(4)}catch(t){}}function Hd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Dp(t)||Ip(t))Wp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(Dp(t)||Ip(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(Ip(t))return t.split("");if(Dp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function zd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof zd)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gd(t,e){Qd(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Kd(t))}function Kd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Qd(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Qd(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Qd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(_p=Nd.prototype).setTimeout=function(t){this.O=t},_p.cb=function(t){t=t.target;var e=this.B;e&&3==Xy(t)?e.Ta():this.Ja(t)},_p.Ja=function(t){try{if(t==this.a)t:{var e=Xy(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!lf&&!this.a.aa())){this.m||4!=e||7==n||yd(8==n||r<=0?3:2),qd(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=$y(this.a,"X-HTTP-Initial-Response");if(s&&!Gp(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,vd(12),Vd(this),Bd(this);break t}this.s=!0,Wd(this,a)}this.H?(Md(this,e,o),lf&&this.b&&3==e&&(ld(this.I,this.P,"tick",this.bb),this.P.start())):Wd(this,o),4==e&&Vd(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Ud(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,vd(12)):(this.c=0,vd(13)),Vd(this),Bd(this)}}}catch(t){}},_p.bb=function(){if(this.a){var t=Xy(this.a),e=this.a.aa();this.A<e.length&&(qd(this),Md(this,t,e),this.b&&4!=t&&Ud(this))}},_p.cancel=function(){this.m=!0,Vd(this)},_p.ab=function(){this.i=null;var t=jp();0<=t-this.R?(2!=this.F&&(yd(3),vd(17)),Vd(this),this.c=2,Bd(this)):jd(this,this.R-t)},(_p=zd.prototype).C=function(){Kd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},_p.K=function(){return Kd(this),this.a.concat()},_p.get=function(t,e){return Qd(this.b,t)?this.b[t]:e},_p.set=function(t,e){Qd(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},_p.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xd(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Xd?(this.h=void 0!==e?e:t.h,Jd(this,t.f),this.j=t.j,Zd(this,t.b),ty(this,t.i),this.a=t.a,ey(this,gy(t.c)),this.g=t.g):t&&(n=String(t).match(Yd))?(this.h=!!e,Jd(this,n[1]||"",!0),this.j=oy(n[2]||""),Zd(this,n[3]||"",!0),ty(this,n[4]),this.a=oy(n[5]||"",!0),ey(this,n[6]||"",!0),this.g=oy(n[7]||"")):(this.h=!!e,this.c=new fy(null,this.h))}function $d(t){return new Xd(t)}function Jd(t,e,n){t.f=n?oy(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Zd(t,e,n){t.b=n?oy(e,!0):e}function ty(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function ey(t,e,n){e instanceof fy?(t.c=e,function(t,e){e&&!t.f&&(dy(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(yy(this,e),vy(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=sy(e,hy)),t.c=new fy(e,t.h))}function ny(t,e,n){t.c.set(e,n)}function ry(t,e,n){xp(n)||(n=[String(n)]),vy(t.c,e,n)}function iy(t){return ny(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^jp()).toString(36)),t}function oy(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sy(t,e,n){return Ip(t)?(t=encodeURI(t).replace(e,ay),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ay(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(sy(e,uy,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(sy(e,uy,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(sy(n,"/"==n.charAt(0)?ly:cy,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",sy(n,py)),t.join("")},Xd.prototype.resolve=function(t){var e=$d(this),n=!!t.f;n?Jd(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Zd(e,t.b):n=null!=t.i;var r=t.a;if(n)ty(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(Yp(i,"./")||Yp(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?ey(e,gy(t.c)):n=!!t.g,n&&(e.g=t.g),e};var uy=/[#\/\?@]/g,cy=/[#\?:]/g,ly=/[#\?]/g,hy=/[#\?@]/g,py=/#/g;function fy(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function dy(t){t.a||(t.a=new zd,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function yy(t,e){dy(t),e=by(t,e),Qd(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Gd(t.a,e))}function my(t,e){return dy(t),e=by(t,e),Qd(t.a.b,e)}function vy(t,e,n){yy(t,e),0<n.length&&(t.c=null,t.a.set(by(t,e),zp(n)),t.b+=n.length)}function gy(t){var e=new fy;return e.c=t.c,t.a&&(e.a=new zd(t.a),e.b=t.b),e}function by(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function wy(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function _y(t){var e=t.a.F.a;if(null!=e)vd(4),e?(vd(10),cm(t.a,t,!1)):(vd(11),cm(t.a,t,!0));else{t.b=new Nd(t,void 0,void 0),t.b.h=t.h,e=dm(e=t.a,e.Y()?t.f:null,t.i),vd(4),ry(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&ny(e,n,r),Od(t.b,e,!1,t.f)}}function Ey(){this.a=this.b=null}function Ty(){this.a=new zd}function Sy(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[Pp]||(t[Pp]=++Op)):e.charAt(0)+t}function Iy(t,e){this.b=t,this.a=e}function Cy(t){this.g=t||ky,t=Sp.PerformanceNavigationTiming?0<(t=Sp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Sp.ka&&Sp.ka.Da&&Sp.ka.Da()&&Sp.ka.Da().yb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Ty),this.b=null,this.c=[]}(_p=fy.prototype).add=function(t,e){dy(this),this.c=null,t=by(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},_p.forEach=function(t,e){dy(this),this.a.forEach((function(n,r){Wp(n,(function(n){t.call(e,n,r,this)}),this)}),this)},_p.K=function(){dy(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},_p.C=function(t){dy(this);var e=[];if(Ip(t))my(this,t)&&(e=Hp(e,this.a.get(by(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=Hp(e,t[n])}return e},_p.set=function(t,e){return dy(this),this.c=null,my(this,t=by(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},_p.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},_p.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},qp((function(){}),(function(){})),(_p=wy.prototype).M=null,_p.$=function(t){return this.a.$(t)},_p.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},_p.Ca=function(){return!1},_p.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=$y(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=$y(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void pm(e,2)}this.f=r[0]}else(e=this.a).m=this.c,pm(e,2)}else 1==this.M&&(this.g?vd(6):"11111"==e?(vd(5),this.g=!0,(!uf||10<=Number(vf))&&(this.c=200,this.b.cancel(),vd(11),cm(this.a,this,!0))):(vd(7),this.g=!1))},_p.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,_y(this)):1==this.M&&(this.g?(vd(11),cm(this.a,this,!0)):(vd(10),cm(this.a,this,!1)));else{0==this.M?vd(8):1==this.M&&vd(9);var t=this.a;t.m=this.c,pm(t,2)}},_p.Y=function(){return this.a.Y()},_p.ma=function(){return this.a.ma()},Ty.prototype.add=function(t){this.a.set(Sy(t),t)},Ty.prototype.C=function(){return this.a.C()};var ky=10;function Ay(t,e){!t.a&&(Yp(e,"spdy")||Yp(e,"quic")||Yp(e,"h2"))&&(t.f=t.g,t.a=new Ty,t.b&&(Ry(t,t.b),t.b=null))}function Ny(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function xy(t){return t.b?1:t.a?t.a.a.c:0}function Dy(t,e){return t.b?t.b==e:!!t.a&&(e=Sy(e),Qd(t.a.a.b,e))}function Ry(t,e){t.a?t.a.add(e):t.b=e}function Py(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Sy(e),n=Qd(t.a.a.b,n)),n&&Gd(t.a.a,Sy(e)))}function Oy(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return zp(t.c);var e=t.c;return Wp(t.a.C(),(function(t){e=e.concat(t.j)})),e}function Ly(){}function My(){this.a=new Ly}function Fy(t,e,n){var r=n||"";try{Hd(t,(function(t,n){var i=t;Rp(t)&&(i=Gf(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Uy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Cy.prototype.cancel=function(){this.c=Oy(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Wp(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},Ly.prototype.stringify=function(t){return Sp.JSON.stringify(t,void 0)},Ly.prototype.parse=function(t){return Sp.JSON.parse(t,void 0)};var jy=Sp.JSON.parse;function qy(t){Hf.call(this),this.headers=new zd,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=By,this.D=this.F=!1}qp(qy,Hf);var By="",Vy=/^https?$/i,Wy=["POST","PUT"];function Hy(t){return"content-type"==t.toLowerCase()}function zy(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Gy(t),Qy(t)}function Gy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ky(t){if(t.b&&void 0!==Tp&&(!t.s[1]||4!=Xy(t)||2!=t.T()))if(t.l&&4==Xy(t))od(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Xy(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(Yd)[1]||null;if(!o&&Sp.self&&Sp.self.location){var s=Sp.self.location.protocol;o=s.substr(0,s.length-1)}i=!Vy.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Xy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",Gy(t)}}finally{Qy(t)}}}function Qy(t,e){if(t.a){Yy(t);var n=t.a,r=t.s[0]?Ap:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Yy(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Sp.clearTimeout(t.m),t.m=null)}function Xy(t){return t.a?t.a.readyState:0}function $y(t,e){return t.a?t.a.getResponseHeader(e):null}function Jy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return Zp(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),Ip(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return ny(t,e,n),t}function Zy(t){this.f=[],this.F=new Ey,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!kp("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=kp("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=kp("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=kp("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=kp("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.zb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Cy(t&&t.concurrentRequestLimit),this.ja=new My,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function tm(t){if(em(t),3==t.u){var e=t.P++,n=$d(t.B);ny(n,"SID",t.H),ny(n,"RID",e),ny(n,"TYPE","terminate"),om(t,n),(e=new Nd(t,e,void 0)).F=2,e.f=iy($d(n)),n=!1,Sp.navigator&&Sp.navigator.sendBeacon&&(n=Sp.navigator.sendBeacon(e.f.toString(),"")),!n&&Sp.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=jp(),Ud(e)}fm(t)}function em(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(Sp.clearTimeout(t.l),t.l=null),lm(t),t.b.cancel(),t.h&&(Cp(t.h)&&Sp.clearTimeout(t.h),t.h=null)}function nm(t,e){t.f.push(new Iy(t.Qa++,e)),3==t.u&&rm(t)}function rm(t){Ny(t.b)||t.h||(t.h=!0,Zf(t.Ha,t),t.A=0)}function im(t,e){var n;n=e?e.W:t.P++;var r=$d(t.B);ny(r,"SID",t.H),ny(r,"RID",n),ny(r,"AID",t.O),om(t,r),t.g&&t.i&&Jy(r,t.g,t.i),n=new Nd(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=sm(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),Ry(t.b,n),Pd(n,r,e)}function om(t,e){t.c&&Hd({},(function(t,n){ny(e,n,t)}))}function sm(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Fp(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{Fy(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function am(t){t.a||t.l||(t.S=1,Zf(t.Ga,t),t.v=0)}function um(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=bd(Fp(t.Ga,t),hm(t,t.v)),t.v++,0))}function cm(t,e,n){var r=e.l;r&&Ay(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=dm(t,null,t.ha),rm(t)}function lm(t){null!=t.s&&(Sp.clearTimeout(t.s),t.s=null)}function hm(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function pm(t,e){if(2==e){var n=null;t.c&&(n=null);var r=Fp(t.eb,t);n||(n=new Xd("//www.google.com/images/cleardot.gif"),Sp.location&&"http"==Sp.location.protocol||Jd(n,"https"),iy(n)),function(t,e){var n=new pd;if(Sp.Image){var r=new Image;r.onload=Up(Uy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Up(Uy,n,r,"TestLoadImage: error",!1,e),r.onabort=Up(Uy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Up(Uy,n,r,"TestLoadImage: timeout",!1,e),Sp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else vd(2);t.u=0,t.c&&t.c.ta(e),fm(t),em(t)}function fm(t){t.u=0,t.m=-1,t.c&&(0==Oy(t.b).length&&0==t.f.length||(t.b.c.length=0,zp(t.f),t.f.length=0),t.c.sa())}function dm(t,e,n){var r=function(t){return t instanceof Xd?$d(t):new Xd(t,void 0)}(n);if(""!=r.b)e&&Zd(r,e+"."+r.b),ty(r,r.i);else{var i=Sp.location;r=function(t,e,n,r){var i=new Xd(null,void 0);return t&&Jd(i,t),e&&Zd(i,e),n&&ty(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Zp(t.V,(function(t,e){ny(r,e,t)})),n=t.I,(e=t.j)&&n&&ny(r,e,n),ny(r,"VER",t.wa),om(t,r),r}function ym(){}function mm(){if(uf&&!(10<=Number(vf)))throw Error("Environmental error: no available transport.")}function vm(t,e){Hf.call(this),this.a=new Zy(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Gp(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gp(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new wm(this)}function gm(t){Cd.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function bm(){kd.call(this),this.status=1}function wm(t){this.a=t}(_p=qy.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Sd),this.a.onreadystatechange=Fp(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void zy(this,t)}t=n||"";var i=new zd(this.headers);r&&Hd(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Hy,n=t.length,r=Ip(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:Ip(t)?t.charAt(e):t[e]}(i.K()),n=Sp.FormData&&t instanceof Sp.FormData,0<=Vp(Wy,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Yy(this),0<this.o&&((this.D=function(t){return uf&&bf(9)&&Cp(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Fp(this.Ba,this)):this.m=od(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){zy(this,t)}},_p.Ba=function(){void 0!==Tp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},_p.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qy(this))},_p.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Qy(this,!0)),qy.N.G.call(this)},_p.Ea=function(){this.j||(this.w||this.l||this.g?Ky(this):this.Za())},_p.Za=function(){Ky(this)},_p.T=function(){try{return 2<Xy(this)?this.a.status:-1}catch(t){return-1}},_p.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},_p.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jy(e)}},_p.ya=function(){return this.h},_p.Xa=function(){return Ip(this.f)?this.f:String(this.f)},(_p=Zy.prototype).wa=8,_p.u=1,_p.Ca=function(){return 0==this.u},_p.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new Nd(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?nf(r=tf(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&Ip(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=sm(this,n,e),ny(i=$d(this.B),"RID",t),ny(i,"CVER",22),this.o&&this.j&&ny(i,"X-HTTP-Session-Id",this.j),om(this,i),this.g&&r&&Jy(i,this.g,r),Ry(this.b,n),this.W?(ny(i,"$req",e),ny(i,"SID","null"),n.S=!0,Pd(n,i,null)):Pd(n,i,e),this.u=2}}else 3==this.u&&(t?im(this,t):0==this.f.length||Ny(this.b)||im(this))},_p.Ga=function(){this.l=null,this.a=new Nd(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=$d(this.pa);ny(t,"RID","rpc"),ny(t,"SID",this.H),ny(t,"CI",this.ia?"0":"1"),ny(t,"AID",this.O),om(this,t),ny(t,"TYPE","xmlhttp"),this.g&&this.i&&Jy(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),Od(this.a,t,!0,this.ga)},_p.Fa=function(t,e){if(0!=this.u&&(this.a==t||Dy(this.b,t)))if(this.m=t.o,!t.s&&Dy(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(xp(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;lm(this),this.a.cancel(),this.a=null}um(this),vd(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=bd(Fp(this.Ya,this),6e3));if(xy(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else pm(this,11)}else if(!t.s&&this.a!=t||lm(this),!Gp(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&Cp(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=$y(r,"X-Client-Wire-Protocol"))&&Ay(this.b,i),this.j&&(r=$y(r,"X-HTTP-Session-Id")))&&(this.I=r,ny(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=dm(this,this.Y()?this.ga:null,this.ha),r.s?(Py(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(qd(r),Ud(r)),this.a=r):am(this),0<this.f.length&&rm(this)}else"stop"!=r[0]&&"close"!=r[0]||pm(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?pm(this,7):tm(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},_p.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,um(this),vd(19))},_p.na=function(t){var e=null;if(this.a==t){lm(this),this.a=null;var n=2}else{if(!Dy(this.b,t))return;e=t.j,Py(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=jp()-t.v,fd.dispatchEvent(new gd(fd,t.l?t.l.length:0,e,this.A)),rm(this)):am(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(xy(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=bd(Fp(t.Ha,t,e),hm(t,t.A)),t.A++,0)))}(this,t)||2==n&&um(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:pm(this,5);break;case 4:pm(this,10);break;case 3:pm(this,6);break;default:pm(this,2)}}},_p.eb=function(t){vd(t?2:1)},_p.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new qy(this.Ka)).F=this.R,t},_p.ma=function(){return!!this.c&&!0},_p.Y=function(){return this.R},(_p=ym.prototype).va=function(){},_p.ua=function(){},_p.ta=function(){},_p.sa=function(){},_p.Sa=function(){},mm.prototype.a=function(t,e){return new vm(t,e)},qp(vm,Hf),(_p=vm.prototype).addEventListener=function(t,e,n,r){vm.N.addEventListener.call(this,t,e,n,r)},_p.removeEventListener=function(t,e,n,r){vm.N.removeEventListener.call(this,t,e,n,r)},_p.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;vd(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new wy(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Jy(e,t.g,t.i)),(t=t.w).i=n,e=dm(t.a,null,t.i),vd(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,_y(t)):(ry(e,"MODE","init"),!t.a.o&&t.a.j&&ry(e,"X-HTTP-Session-Id",t.a.j),t.b=new Nd(t,void 0,void 0),t.b.h=t.h,Od(t.b,e,!1,null),t.M=0)},_p.close=function(){tm(this.a)},_p.Wa=function(t){if(Ip(t)){var e={};e.__data__=t,nm(this.a,e)}else this.h?((e={}).__data__=Gf(t),nm(this.a,e)):nm(this.a,t)},_p.G=function(){this.a.c=null,delete this.f,tm(this.a),delete this.a,vm.N.G.call(this)},qp(gm,Cd),qp(bm,kd),qp(wm,ym),wm.prototype.va=function(){this.a.dispatchEvent("a")},wm.prototype.ua=function(t){this.a.dispatchEvent(new gm(t))},wm.prototype.ta=function(t){this.a.dispatchEvent(new bm(t))},wm.prototype.sa=function(){this.a.dispatchEvent("b")};var _m=Up((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),mm);mm.prototype.createWebChannel=mm.prototype.a,vm.prototype.send=vm.prototype.Wa,vm.prototype.open=vm.prototype.Va,vm.prototype.close=vm.prototype.close,wd.NO_ERROR=0,wd.TIMEOUT=8,wd.HTTP_ERROR=6,_d.COMPLETE="complete",(Td.EventType=Id).OPEN="a",Id.CLOSE="b",Id.ERROR="c",Id.MESSAGE="d",Hf.prototype.listen=Hf.prototype.za,qy.prototype.listenOnce=qy.prototype.Aa,qy.prototype.getLastError=qy.prototype.Xa,qy.prototype.getLastErrorCode=qy.prototype.ya,qy.prototype.getStatus=qy.prototype.T,qy.prototype.getResponseJson=qy.prototype.Ua,qy.prototype.getResponseText=qy.prototype.aa,qy.prototype.send=qy.prototype.ca;var Em,Tm,Sm={createWebChannelTransport:_m,ErrorCode:wd,EventType:_d,WebChannel:Td,XhrIo:qy},Im=Sm.createWebChannelTransport,Cm=Sm.ErrorCode,km=Sm.EventType,Am=Sm.WebChannel,Nm=Sm.XhrIo,xm=xa.SDK_VERSION,Dm=new fa("@firebase/firestore");function Rm(){return Dm.logLevel===oa.DEBUG?Em.DEBUG:Dm.logLevel===oa.SILENT?Em.SILENT:Em.ERROR}function Pm(t){switch(t){case Em.DEBUG:Dm.logLevel=oa.DEBUG;break;case Em.ERROR:Dm.logLevel=oa.ERROR;break;case Em.SILENT:Dm.logLevel=oa.SILENT;break;default:Dm.error("Firestore ("+xm+"): Invalid value passed to `setLogLevel`")}}function Om(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Dm.logLevel<=oa.DEBUG){var i=n.map(Mm);Dm.debug.apply(Dm,vs(["Firestore ("+xm+") ["+t+"]: "+e],i))}}function Lm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Dm.logLevel<=oa.ERROR){var r=e.map(Mm);Dm.error.apply(Dm,vs(["Firestore ("+xm+"): "+t],r))}}function Mm(t){if("string"==typeof t)return t;var e=B_.t();try{return e.i(t)}catch(e){return t}}function Fm(t){var e="FIRESTORE ("+xm+") INTERNAL ASSERTION FAILED: "+t;throw Lm(e),new Error(e)}function Um(t,e){t||Fm(e)}(Tm=Em=Em||{})[Tm.DEBUG=0]="DEBUG",Tm[Tm.ERROR=1]="ERROR",Tm[Tm.SILENT=2]="SILENT";var jm=(qm.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return Um(20===e.length,"Invalid auto ID: "+e),e},qm);function qm(){}function Bm(t,e){return t<e?-1:e<t?1:0}function Vm(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Wm(t){return t+"\0"}function Hm(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}function zm(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var Gm,Km="(default)",Qm=(Object.defineProperty(uv.prototype,"o",{get:function(){return this.database===Km},enumerable:!0,configurable:!0}),uv.prototype.isEqual=function(t){return t instanceof uv&&t.projectId===this.projectId&&t.database===this.database},uv.prototype.h=function(t){return Bm(this.projectId,t.projectId)||Bm(this.database,t.database)},uv),Ym=(av.prototype.l=function(){return null!=this.uid},av.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},av.prototype.isEqual=function(t){return t.uid===this.uid},av.UNAUTHENTICATED=new av(null),av.m=new av("google-credentials-uid"),av.p=new av("first-party-uid"),av),Xm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$m=(ls(sv,Gm=Error),sv),Jm=(ov.prototype.getToken=function(){return Promise.resolve(null)},ov.prototype.I=function(){},ov.prototype.T=function(t){Um(!this._,"Can only call setChangeListener() once."),(this._=t)(Ym.UNAUTHENTICATED)},ov.prototype.R=function(){Um(null!==this._,"removeChangeListener() when no listener registered"),this._=null},ov),Zm=(iv.prototype.getToken=function(){var t=this;Um(null!=this.A,"getToken cannot be called after listener removed.");var e=this.P,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.P!==e)throw new $m(Xm.ABORTED,"getToken aborted due to token change.");return n?(Um("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new zm(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},iv.prototype.I=function(){this.forceRefresh=!0},iv.prototype.T=function(t){Um(!this._,"Can only call setChangeListener() once."),this._=t,this.D&&t(this.currentUser)},iv.prototype.R=function(){Um(null!=this.A,"removeChangeListener() called twice"),Um(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.A),this.A=null,this._=null},iv.prototype.S=function(){var t=this.auth&&this.auth.getUid();return Um(null===t||"string"==typeof t,"Received invalid UID: "+t),new Ym(t)},iv),tv=(Object.defineProperty(rv.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.C.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),rv),ev=(nv.prototype.getToken=function(){return Promise.resolve(new tv(this.C,this.V))},nv.prototype.T=function(t){t(Ym.p)},nv.prototype.R=function(){},nv.prototype.I=function(){},nv);function nv(t,e){this.C=t,this.V=e}function rv(t,e){this.C=t,this.V=e,this.type="FirstParty",this.user=Ym.p}function iv(t){var e=this;this.A=null,this.currentUser=Ym.UNAUTHENTICATED,this.D=!1,this.P=0,this._=null,this.forceRefresh=!1,this.A=function(){e.P++,e.currentUser=e.S(),e.D=!0,e._&&e._(e.currentUser)},this.P=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.A):(this.A(null),t.get().then((function(t){e.auth=t,e.A&&e.auth.addAuthTokenListener(e.A)}),(function(){})))}function ov(){this._=null}function sv(t,e){var n=Gm.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function av(t){this.uid=t}function uv(t,e){this.projectId=t,this.database=e||Km}function cv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lv(t,e){return void 0!==t?t:e}function hv(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function pv(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fv(t){for(var e in Um(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dv(t,e){if(0!==e.length)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Dv(e.length,"argument")+".")}function yv(t,e,n){if(e.length!==n)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires "+Dv(n,"argument")+", but was called with "+Dv(e.length,"argument")+".")}function mv(t,e,n){if(e.length<n)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Dv(n,"argument")+", but was called with "+Dv(e.length,"argument")+".")}function vv(t,e,n,r){if(e.length<n||e.length>r)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Dv(e.length,"argument")+".")}function gv(t,e,n,r){Tv(t,e,xv(n)+" argument",r)}function bv(t,e,n,r){void 0!==r&&gv(t,e,n,r)}function wv(t,e,n,r){Tv(t,e,n+" option",r)}function _v(t,e,n,r){void 0!==r&&wv(t,e,n,r)}function Ev(t,e,n,r,i){void 0!==r&&function(t,e,n,r){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Iv(u))}var c=Iv(r);throw new $m(Xm.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r)}function Tv(t,e,n,r){if(!("object"===e?Sv(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Iv(r);throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Sv(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Iv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Fm("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function Cv(t,e,n){if(void 0===n)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+xv(e)+" argument, but it was undefined.")}function kv(t,e,n){pv(e,(function(e,r){if(n.indexOf(e)<0)throw new $m(Xm.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Av(t,e,n,r){var i=Iv(r);return new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires its "+xv(n)+" argument to be a "+e+", but it was: "+i)}function Nv(t,e,n){if(n<=0)throw new $m(Xm.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+xv(e)+" argument to be a positive number, but it was: "+n+".")}function xv(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Dv(t,e){return t+" "+e+(1===t?"":"s")}var Rv,Pv,Ov=(Object.defineProperty(ng.prototype,"latitude",{get:function(){return this.O},enumerable:!0,configurable:!0}),Object.defineProperty(ng.prototype,"longitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),ng.prototype.isEqual=function(t){return this.O===t.O&&this.F===t.F},ng.prototype.j=function(t){return Bm(this.O,t.O)||Bm(this.F,t.F)},ng),Lv=(eg.now=function(){return eg.fromMillis(Date.now())},eg.fromDate=function(t){return eg.fromMillis(t.getTime())},eg.fromMillis=function(t){var e=Math.floor(t/1e3);return new eg(e,1e6*(t-1e3*e))},eg.prototype.toDate=function(){return new Date(this.toMillis())},eg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},eg.prototype.j=function(t){return this.seconds===t.seconds?Bm(this.nanoseconds,t.nanoseconds):Bm(this.seconds,t.seconds)},eg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},eg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},eg),Mv=(tg.U=function(t){var e=Math.floor(t/1e6);return new tg(new Lv(e,t%1e6*1e3))},tg.L=function(t){return new tg(t)},tg.B=function(){return tg.MIN},tg.prototype.h=function(t){return this.timestamp.j(t.timestamp)},tg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},tg.prototype.M=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},tg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},tg.prototype.q=function(){return this.timestamp},tg.MIN=new tg(new Lv(0,0)),tg),Fv=(Object.defineProperty(Zv.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Zv.prototype.isEqual=function(t){return 0===Zv.G(this,t)},Zv.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Zv?t.forEach((function(t){e.push(t)})):e.push(t),this.W(e)},Zv.prototype.limit=function(){return this.offset+this.length},Zv.prototype.K=function(t){return Um(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},Zv.prototype.H=function(){return Um(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},Zv.prototype.Y=function(){return Um(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Zv.prototype.X=function(){return this.get(this.length-1)},Zv.prototype.get=function(t){return Um(t<this.length,"Index out of range"),this.segments[this.offset+t]},Zv.prototype.J=function(){return 0===this.length},Zv.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Zv.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Zv.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Zv.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},Zv.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Zv),Uv=(ls(Jv,Pv=Fv),Jv.prototype.W=function(t,e,n){return new Jv(t,e,n)},Jv.prototype.nt=function(){return this.tt().join("/")},Jv.prototype.toString=function(){return this.nt()},Jv.it=function(t){if(0<=t.indexOf("//"))throw new $m(Xm.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Jv(t.split("/").filter((function(t){return 0<t.length})))},Jv.et=new Jv([]),Jv),jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qv=(ls($v,Rv=Fv),$v.prototype.W=function(t,e,n){return new $v(t,e,n)},$v.rt=function(t){return jv.test(t)},$v.prototype.nt=function(){return this.tt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),$v.rt(t)||(t="`"+t+"`"),t})).join(".")},$v.prototype.toString=function(){return this.nt()},$v.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},$v.st=function(){return new $v(["__name__"])},$v.ot=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new $m(Xm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new $m(Xm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new $m(Xm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new $m(Xm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $v(e)},$v.et=new $v([]),$v),Bv=(Xv.prototype.ct=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Xv.prototype.isEqual=function(t){return null!==t&&0===Uv.G(this.path,t.path)},Xv.prototype.toString=function(){return this.path.toString()},Xv.G=function(t,e){return Uv.G(t.path,e.path)},Xv.ht=function(t){return t.length%2==0},Xv.at=function(t){return new Xv(new Uv(t.slice()))},Xv.ft=function(t){return new Xv(Uv.it(t))},Xv.EMPTY=new Xv(new Uv([])),Xv),Vv=(Yv.prototype.lt=function(t,e){return new Yv(this.G,this.root.lt(t,e,this.G).copy(null,null,Hv.dt,null,null))},Yv.prototype.remove=function(t){return new Yv(this.G,this.root.remove(t,this.G).copy(null,null,Hv.dt,null,null))},Yv.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Yv.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Yv.prototype.J=function(){return this.root.J()},Object.defineProperty(Yv.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Yv.prototype.vt=function(){return this.root.vt()},Yv.prototype.wt=function(){return this.root.wt()},Yv.prototype.pt=function(t){return this.root.pt(t)},Yv.prototype.forEach=function(t){this.pt((function(e,n){return t(e,n),!1}))},Yv.prototype.toString=function(){var t=[];return this.pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},Yv.prototype.gt=function(t){return this.root.gt(t)},Yv.prototype.bt=function(){return new Wv(this.root,null,this.G,!1)},Yv.prototype.yt=function(t){return new Wv(this.root,t,this.G,!1)},Yv.prototype._t=function(){return new Wv(this.root,null,this.G,!0)},Yv.prototype.It=function(t){return new Wv(this.root,t,this.G,!0)},Yv),Wv=(Qv.prototype.Rt=function(){Um(0<this.Et.length,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},Qv.prototype.At=function(){return 0<this.Et.length},Qv.prototype.Dt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},Qv),Hv=(Kv.prototype.copy=function(t,e,n,r,i){return new Kv(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Kv.prototype.J=function(){return!1},Kv.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},Kv.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},Kv.prototype.min=function(){return this.left.J()?this:this.left.min()},Kv.prototype.vt=function(){return this.min().key},Kv.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},Kv.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Pt()},Kv.prototype.St=function(){if(this.left.J())return Kv.EMPTY;var t=this;return t.left.Ct()||t.left.left.Ct()||(t=t.Vt()),(t=t.copy(null,null,null,t.left.St(),null)).Pt()},Kv.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.J()||r.left.Ct()||r.left.left.Ct()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Ct()&&(r=r.Nt()),r.right.J()||r.right.Ct()||r.right.left.Ct()||(r=r.kt()),0===e(t,r.key)){if(r.right.J())return Kv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.St())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Pt()},Kv.prototype.Ct=function(){return this.color},Kv.prototype.Pt=function(){var t=this;return t.right.Ct()&&!t.left.Ct()&&(t=t.Ot()),t.left.Ct()&&t.left.left.Ct()&&(t=t.Nt()),t.left.Ct()&&t.right.Ct()&&(t=t.Ft()),t},Kv.prototype.Vt=function(){var t=this.Ft();return t.right.left.Ct()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ot()).Ft()),t},Kv.prototype.kt=function(){var t=this.Ft();return t.left.left.Ct()&&(t=(t=t.Nt()).Ft()),t},Kv.prototype.Ot=function(){var t=this.copy(null,null,Kv.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Kv.prototype.Nt=function(){var t=this.copy(null,null,Kv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Kv.prototype.Ft=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Kv.prototype.xt=function(){var t=this.jt();return Math.pow(2,t)<=this.size+1},Kv.prototype.jt=function(){if(this.Ct()&&this.left.Ct())throw Fm("Red node has red child("+this.key+","+this.value+")");if(this.right.Ct())throw Fm("Right child of ("+this.key+","+this.value+") is red");var t=this.left.jt();if(t!==this.right.jt())throw Fm("Black depths differ");return t+(this.Ct()?0:1)},Kv.EMPTY=null,Kv.RED=!0,Kv.dt=!1,Kv),zv=(Object.defineProperty(Gv.prototype,"key",{get:function(){throw Fm("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gv.prototype,"value",{get:function(){throw Fm("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gv.prototype,"color",{get:function(){throw Fm("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gv.prototype,"left",{get:function(){throw Fm("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gv.prototype,"right",{get:function(){throw Fm("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Gv.prototype.copy=function(t,e,n,r,i){return this},Gv.prototype.lt=function(t,e,n){return new Hv(t,e)},Gv.prototype.remove=function(t,e){return this},Gv.prototype.J=function(){return!0},Gv.prototype.pt=function(t){return!1},Gv.prototype.gt=function(t){return!1},Gv.prototype.vt=function(){return null},Gv.prototype.wt=function(){return null},Gv.prototype.Ct=function(){return!1},Gv.prototype.xt=function(){return!0},Gv.prototype.jt=function(){return 0},Gv);function Gv(){this.size=0}function Kv(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Kv.RED,this.left=null!=r?r:Kv.EMPTY,this.right=null!=i?i:Kv.EMPTY,this.size=this.left.size+1+this.right.size}function Qv(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function Yv(t,e){this.G=t,this.root=e||Hv.EMPTY}function Xv(t){this.path=t,Um(Xv.ht(t),"Invalid DocumentKey with an odd number of segments: "+t.tt().join("/"))}function $v(){return null!==Rv&&Rv.apply(this,arguments)||this}function Jv(){return null!==Pv&&Pv.apply(this,arguments)||this}function Zv(t,e,n){void 0===e?e=0:e>t.length&&Fm("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&Fm("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}function tg(t){this.timestamp=t}function eg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new $m(Xm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new $m(Xm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new $m(Xm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new $m(Xm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function ng(t,e){if(yv("GeoPoint",arguments,2),gv("GeoPoint","number",1,t),gv("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new $m(Xm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new $m(Xm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.O=t,this.F=e}Hv.EMPTY=new zv;var rg=(dg.Ut=function(t){var e=new dg(t.G);return t.forEach((function(t){e=e.add(t)})),e},dg.prototype.has=function(t){return null!==this.data.get(t)},dg.prototype.first=function(){return this.data.vt()},dg.prototype.last=function(){return this.data.wt()},Object.defineProperty(dg.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),dg.prototype.indexOf=function(t){return this.data.indexOf(t)},dg.prototype.forEach=function(t){this.data.pt((function(e,n){return t(e),!1}))},dg.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.At();){var r=n.Rt();if(0<=this.G(r.key,t[1]))return;e(r.key)}},dg.prototype.Bt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.At();)if(!t(n.Rt().key))return},dg.prototype.Mt=function(t){var e=this.data.yt(t);return e.At()?e.Rt().key:null},dg.prototype.bt=function(){return new ig(this.data.bt())},dg.prototype.yt=function(t){return new ig(this.data.yt(t))},dg.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},dg.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},dg.prototype.J=function(){return this.data.J()},dg.prototype.qt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},dg.prototype.isEqual=function(t){if(!(t instanceof dg))return!1;if(this.size!==t.size)return!1;for(var e=this.data.bt(),n=t.data.bt();e.At();){var r=e.Rt().key,i=n.Rt().key;if(0!==this.G(r,i))return!1}return!0},dg.prototype.tt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},dg.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},dg.prototype.copy=function(t){var e=new dg(this.G);return e.data=t,e},dg),ig=(fg.prototype.Rt=function(){return this.Qt.Rt().key},fg.prototype.At=function(){return this.Qt.At()},fg),og=(pg.prototype.Gt=function(t,e){return new Tb(e,t)},pg.prototype.Wt=function(t,e){return e},pg.prototype.zt=function(t){return null},pg.prototype.isEqual=function(t){return t instanceof pg},pg.instance=new pg,pg),sg=(hg.prototype.Gt=function(t,e){return this.apply(t)},hg.prototype.Wt=function(t,e){return this.apply(t)},hg.prototype.apply=function(t){for(var e=yg(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ab(e)},hg.prototype.zt=function(t){return null},hg.prototype.isEqual=function(t){return t instanceof hg&&Vm(t.elements,this.elements)},hg),ag=(lg.prototype.Gt=function(t,e){return this.apply(t)},lg.prototype.Wt=function(t,e){return this.apply(t)},lg.prototype.apply=function(t){for(var e=yg(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ab(e)},lg.prototype.zt=function(t){return null},lg.prototype.isEqual=function(t){return t instanceof lg&&Vm(t.elements,this.elements)},lg),ug=(cg.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof bb&&this.Kt instanceof bb){var r=n.Ht+this.Kt.Ht;return new bb(r)}return new wb(r=n.Ht+this.Kt.Ht)},cg.prototype.Wt=function(t,e){return Um(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},cg.prototype.zt=function(t){return t instanceof Zg?t:new bb(0)},cg.prototype.isEqual=function(t){return t instanceof cg&&this.Kt.isEqual(t.Kt)},cg);function cg(t){this.Kt=t}function lg(t){this.elements=t}function hg(t){this.elements=t}function pg(){}function fg(t){this.Qt=t}function dg(t){this.G=t,this.data=new Vv(this.G)}function yg(t){return t instanceof Ab?t.Ht.slice():[]}function mg(t,e){this.version=t,this.transformResults=e}var vg,gg,bg=(Eg.Jt=function(t){return new Eg(t)},Eg.Yt=function(t){var e=new rg(qv.G);return t.forEach((function(t){return e=e.add(t)})),new Eg(e)},Eg.prototype.Xt=function(t){var e=!1;return this.fields.forEach((function(n){n.$(t)&&(e=!0)})),e},Eg.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},Eg),wg=(_g.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},_g);function _g(t,e){this.field=t,this.transform=e}function Eg(t){this.fields=t}(gg=vg=vg||{})[gg.Set=0]="Set",gg[gg.$t=1]="__PRIVATE_Patch",gg[gg.Transform=2]="Transform",gg[gg.Zt=3]="__PRIVATE_Delete",gg[gg.Verify=4]="Verify";var Tg,Sg,Ig,Cg,kg,Ag,Ng,xg,Dg,Rg=(zg.exists=function(t){return new zg(void 0,t)},zg.updateTime=function(t){return new zg(t)},Object.defineProperty(zg.prototype,"tn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),zg.prototype.nn=function(t){return void 0!==this.updateTime?t instanceof xb&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof xb:(Um(this.tn,"Precondition should be empty"),!0)},zg.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},zg.NONE=new zg,zg),Pg=(Hg.prototype.in=function(t){null!=t&&Um(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Hg.en=function(t){return t instanceof xb?t.version:Mv.MIN},Hg),Og=(ls(Wg,Dg=Pg),Wg.prototype.Wt=function(t,e){return this.in(t),Um(null==e.transformResults,"Transform results received by SetMutation."),new xb(this.key,e.version,{hasCommittedMutations:!0},this.value)},Wg.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=Pg.en(t);return new xb(this.key,r,{un:!0},this.value)},Wg.prototype.sn=function(t){return null},Wg.prototype.isEqual=function(t){return t instanceof Wg&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.rn.isEqual(t.rn)},Wg),Lg=(ls(Vg,xg=Pg),Vg.prototype.Wt=function(t,e){if(this.in(t),Um(null==e.transformResults,"Transform results received by PatchMutation."),!this.rn.nn(t))return new Rb(this.key,e.version);var n=this.hn(t);return new xb(this.key,e.version,{hasCommittedMutations:!0},n)},Vg.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=Pg.en(t),i=this.hn(t);return new xb(this.key,r,{un:!0},i)},Vg.prototype.sn=function(t){return null},Vg.prototype.isEqual=function(t){return t instanceof Vg&&this.key.isEqual(t.key)&&this.on.isEqual(t.on)&&this.rn.isEqual(t.rn)},Vg.prototype.hn=function(t){var e;return e=t instanceof xb?t.data():kb.EMPTY,this.cn(e)},Vg.prototype.cn=function(t){var e=this;return this.on.fields.forEach((function(n){if(!n.J()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}})),t},Vg),Mg=(ls(Bg,Ng=Pg),Bg.prototype.Wt=function(t,e){if(this.in(t),Um(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.rn.nn(t))return new Rb(this.key,e.version);var n=this.an(t),r=this.fn(t,e.transformResults),i=e.version,o=this.ln(n.data(),r);return new xb(this.key,i,{hasCommittedMutations:!0},o)},Bg.prototype.Gt=function(t,e,n){if(this.in(t),!this.rn.nn(t))return t;var r=this.an(t),i=this.dn(n,t,e),o=this.ln(r.data(),i);return new xb(this.key,r.version,{un:!0},o)},Bg.prototype.sn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof xb?t.field(i.field):void 0,s=i.transform.zt(o||null);null!=s&&(e=null==e?kb.EMPTY.set(i.field,s):e.set(i.field,s))}return e},Bg.prototype.isEqual=function(t){return t instanceof Bg&&this.key.isEqual(t.key)&&Vm(this.fieldTransforms,t.fieldTransforms)&&this.rn.isEqual(t.rn)},Bg.prototype.an=function(t){return Um(t instanceof xb,"Unknown MaybeDocument type "+t),Um(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Bg.prototype.fn=function(t,e){var n=[];Um(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof xb&&(s=t.field(i.field)),n.push(o.Wt(s,e[r]))}return n},Bg.prototype.dn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof xb&&(u=e.field(s.field)),null===u&&n instanceof xb&&(u=n.field(s.field)),r.push(a.Gt(u,t))}return r},Bg.prototype.ln=function(t,e){Um(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},Bg),Fg=(ls(qg,Ag=Pg),qg.prototype.Wt=function(t,e){return this.in(t),Um(null==e.transformResults,"Transform results received by DeleteMutation."),new Db(this.key,e.version,{hasCommittedMutations:!0})},qg.prototype.Gt=function(t,e,n){return this.in(t),this.rn.nn(t)?(t&&Um(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Db(this.key,Mv.B())):t},qg.prototype.sn=function(t){return null},qg.prototype.isEqual=function(t){return t instanceof qg&&this.key.isEqual(t.key)&&this.rn.isEqual(t.rn)},qg),Ug=(ls(jg,kg=Pg),jg.prototype.Wt=function(t,e){Fm("VerifyMutation should only be used in Transactions.")},jg.prototype.Gt=function(t,e,n){Fm("VerifyMutation should only be used in Transactions.")},jg.prototype.sn=function(t){Fm("VerifyMutation should only be used in Transactions.")},jg.prototype.isEqual=function(t){return t instanceof jg&&this.key.isEqual(t.key)&&this.rn.isEqual(t.rn)},jg);function jg(t,e){var n=kg.call(this)||this;return n.key=t,n.rn=e,n.type=vg.Verify,n}function qg(t,e){var n=Ag.call(this)||this;return n.key=t,n.rn=e,n.type=vg.Zt,n}function Bg(t,e){var n=Ng.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=vg.Transform,n.rn=Rg.exists(!0),n}function Vg(t,e,n,r){var i=xg.call(this)||this;return i.key=t,i.data=e,i.on=n,i.rn=r,i.type=vg.$t,i}function Wg(t,e,n){var r=Dg.call(this)||this;return r.key=t,r.value=e,r.rn=n,r.type=vg.Set,r}function Hg(){}function zg(t,e){this.updateTime=t,this.exists=e,Um(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}(Sg=Tg=Tg||{})[Sg.vn=0]="__PRIVATE_NullValue",Sg[Sg.wn=1]="__PRIVATE_BooleanValue",Sg[Sg.mn=2]="__PRIVATE_NumberValue",Sg[Sg.pn=3]="__PRIVATE_TimestampValue",Sg[Sg.gn=4]="__PRIVATE_StringValue",Sg[Sg.bn=5]="__PRIVATE_BlobValue",Sg[Sg.yn=6]="__PRIVATE_RefValue",Sg[Sg._n=7]="__PRIVATE_GeoPointValue",Sg[Sg.ArrayValue=8]="ArrayValue",Sg[Sg.In=9]="__PRIVATE_ObjectValue",(Cg=Ig=Ig||{})[Cg.Tn=0]="__PRIVATE_Default",Cg[Cg.En=1]="__PRIVATE_Estimate",Cg[Cg.Rn=2]="__PRIVATE_Previous";var Gg,Kg,Qg,Yg=(ib.Dn=function(t,e){switch(t.serverTimestamps){case"estimate":return new ib(Ig.En,e);case"previous":return new ib(Ig.Rn,e);case"none":case void 0:return new ib(Ig.Tn,e);default:return Fm("fromSnapshotOptions() called with invalid options.")}},ib),Xg=(rb.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},rb.prototype.Pn=function(t){return Um(this.Sn!==t.Sn,"Default compareTo should not be used for values of same type."),Bm(this.Sn,t.Sn)},rb),$g=(ls(nb,Qg=Xg),nb.prototype.value=function(t){return null},nb.prototype.isEqual=function(t){return t instanceof nb},nb.prototype.h=function(t){return t instanceof nb?0:this.Pn(t)},nb.prototype.Cn=function(){return 4},nb.Vn=new nb,nb),Jg=(ls(eb,Kg=Xg),eb.prototype.value=function(t){return this.Ht},eb.prototype.isEqual=function(t){return t instanceof eb&&this.Ht===t.Ht},eb.prototype.h=function(t){return t instanceof eb?Bm(this,t):this.Pn(t)},eb.prototype.Cn=function(){return 4},eb.of=function(t){return t?eb.Nn:eb.kn},eb.Nn=new eb(!0),eb.kn=new eb(!1),eb),Zg=(ls(tb,Gg=Xg),tb.prototype.value=function(t){return this.Ht},tb.prototype.h=function(t){return t instanceof tb?(e=this.Ht)<(n=t.Ht)?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1:this.Pn(t);var e,n},tb.prototype.Cn=function(){return 8},tb);function tb(t){var e=Gg.call(this)||this;return e.Ht=t,e.Sn=Tg.mn,e}function eb(t){var e=Kg.call(this)||this;return e.Ht=t,e.Sn=Tg.wn,e}function nb(){var t=Qg.call(this)||this;return t.Sn=Tg.vn,t.Ht=null,t}function rb(){}function ib(t,e){this.An=t,this.timestampsInSnapshots=e}function ob(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var sb,ab,ub,cb,lb,hb,pb,fb,db,yb,mb,vb,gb,bb=(ls(Xb,gb=Zg),Xb.prototype.isEqual=function(t){return t instanceof Xb&&ob(this.Ht,t.Ht)},Xb),wb=(ls(Yb,vb=Zg),Yb.prototype.isEqual=function(t){return t instanceof Yb&&ob(this.Ht,t.Ht)},Yb.On=new Yb(NaN),Yb.POSITIVE_INFINITY=new Yb(1/0),Yb.NEGATIVE_INFINITY=new Yb(-1/0),Yb),_b=(ls(Qb,mb=Xg),Qb.prototype.value=function(t){return this.Ht},Qb.prototype.isEqual=function(t){return t instanceof Qb&&this.Ht===t.Ht},Qb.prototype.h=function(t){return t instanceof Qb?Bm(this.Ht,t.Ht):this.Pn(t)},Qb.prototype.Cn=function(){return 2*this.Ht.length},Qb),Eb=(ls(Kb,yb=Xg),Kb.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},Kb.prototype.isEqual=function(t){return t instanceof Kb&&this.Ht.isEqual(t.Ht)},Kb.prototype.h=function(t){return t instanceof Kb?this.Ht.j(t.Ht):t instanceof Tb?-1:this.Pn(t)},Kb.prototype.Cn=function(){return 16},Kb),Tb=(ls(Gb,db=Xg),Gb.prototype.value=function(t){return t&&t.An===Ig.En?new Eb(this.Fn).value(t):t&&t.An===Ig.Rn&&this.previousValue?this.previousValue.value(t):null},Gb.prototype.isEqual=function(t){return t instanceof Gb&&this.Fn.isEqual(t.Fn)},Gb.prototype.h=function(t){return t instanceof Gb?this.Fn.j(t.Fn):t instanceof Eb?1:this.Pn(t)},Gb.prototype.toString=function(){return"<ServerTimestamp localTime="+this.Fn.toString()+">"},Gb.prototype.Cn=function(){return 16+(this.previousValue?this.previousValue.Cn():0)},Gb),Sb=(ls(zb,fb=Xg),zb.prototype.value=function(t){return this.Ht},zb.prototype.isEqual=function(t){return t instanceof zb&&this.Ht.isEqual(t.Ht)},zb.prototype.h=function(t){return t instanceof zb?this.Ht.j(t.Ht):this.Pn(t)},zb.prototype.Cn=function(){return this.Ht.xn()},zb),Ib=(ls(Hb,pb=Xg),Hb.prototype.value=function(t){return this.key},Hb.prototype.isEqual=function(t){return t instanceof Hb&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},Hb.prototype.h=function(t){if(t instanceof Hb){var e=this.s.h(t.s);return 0!==e?e:Bv.G(this.key,t.key)}return this.Pn(t)},Hb.prototype.Cn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},Hb),Cb=(ls(Wb,hb=Xg),Wb.prototype.value=function(t){return this.Ht},Wb.prototype.isEqual=function(t){return t instanceof Wb&&this.Ht.isEqual(t.Ht)},Wb.prototype.h=function(t){return t instanceof Wb?this.Ht.j(t.Ht):this.Pn(t)},Wb.prototype.Cn=function(){return 16},Wb),kb=(ls(Vb,lb=Xg),Vb.prototype.value=function(t){var e={};return this.Ht.pt((function(n,r){e[n]=r.value(t)})),e},Vb.prototype.forEach=function(t){this.Ht.pt(t)},Vb.prototype.isEqual=function(t){if(t instanceof Vb){for(var e=this.Ht.bt(),n=t.Ht.bt();e.At()&&n.At();){var r=e.Rt(),i=n.Rt();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.At()&&!n.At()}return!1},Vb.prototype.h=function(t){if(t instanceof Vb){for(var e=this.Ht.bt(),n=t.Ht.bt();e.At()&&n.At();){var r=e.Rt(),i=n.Rt(),o=Bm(r.key,i.key)||r.value.h(i.value);if(o)return o}return Bm(e.At(),n.At())}return this.Pn(t)},Vb.prototype.set=function(t,e){if(Um(!t.J(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.jn(t.Y(),e);var n=this.child(t.Y());n instanceof Vb||(n=Vb.EMPTY);var r=n.set(t.K(),e);return this.jn(t.Y(),r)},Vb.prototype.delete=function(t){if(Um(!t.J(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new Vb(this.Ht.remove(t.Y()));var e=this.child(t.Y());if(e instanceof Vb){var n=e.delete(t.K());return new Vb(this.Ht.lt(t.Y(),n))}return this},Vb.prototype.contains=function(t){return null!==this.field(t)},Vb.prototype.field=function(t){Um(!t.J(),"Can't get field of empty path");var e=this;return t.forEach((function(t){e=e instanceof Vb?e.Ht.get(t):null})),e},Vb.prototype.on=function(){var t=new rg(qv.G);return this.Ht.forEach((function(e,n){var r=new qv([e]);if(n instanceof Vb){var i=n.on().fields;i.J()?t=t.add(r):i.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),bg.Jt(t)},Vb.prototype.Cn=function(){var t=0;return this.Ht.pt((function(e,n){t+=e.length+n.Cn()})),t},Vb.prototype.toString=function(){return this.Ht.toString()},Vb.prototype.child=function(t){return this.Ht.get(t)||void 0},Vb.prototype.jn=function(t,e){return new Vb(this.Ht.lt(t,e))},Vb.EMPTY=new Vb(new Vv(Bm)),Vb),Ab=(ls(Bb,cb=Xg),Bb.prototype.value=function(t){return this.Ht.map((function(e){return e.value(t)}))},Bb.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},Bb.prototype.forEach=function(t){this.Ht.forEach(t)},Bb.prototype.isEqual=function(t){if(t instanceof Bb){if(this.Ht.length!==t.Ht.length)return!1;for(var e=0;e<this.Ht.length;e++)if(!this.Ht[e].isEqual(t.Ht[e]))return!1;return!0}return!1},Bb.prototype.h=function(t){if(t instanceof Bb){for(var e=Math.min(this.Ht.length,t.Ht.length),n=0;n<e;n++){var r=this.Ht[n].h(t.Ht[n]);if(r)return r}return Bm(this.Ht.length,t.Ht.length)}return this.Pn(t)},Bb.prototype.Cn=function(){return this.Ht.reduce((function(t,e){return t+e.Cn()}),0)},Bb.prototype.toString=function(){return"["+this.Ht.map((function(t){return t.toString()})).join(",")+"]"},Bb),Nb=(qb.Un=function(t,e){return Bv.G(t.key,e.key)},qb),xb=(ls(jb,ub=Nb),jb.prototype.field=function(t){if(this.Ln)return this.Ln.field(t);this.Bn||(this.Bn=new Map);var e=t.nt(),n=this.Bn.get(e);if(void 0===n){var r=this.Mn(t);n=void 0===r?null:this.converter(r),this.Bn.set(e,n)}return n},jb.prototype.data=function(){var t=this;if(!this.Ln){var e=kb.EMPTY;pv(this.proto.fields||{},(function(n,r){e=e.set(new qv([n]),t.converter(r))})),this.Ln=e,this.Bn=void 0}return this.Ln},jb.prototype.value=function(){return this.data().value()},jb.prototype.isEqual=function(t){return t instanceof jb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.un===t.un&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},jb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.un+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(jb.prototype,"hasPendingWrites",{get:function(){return this.un||this.hasCommittedMutations},enumerable:!0,configurable:!0}),jb.prototype.Mn=function(t){Um(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},jb.qn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):Fm("Trying to compare documents on fields that don't exist")},jb),Db=(ls(Ub,ab=Nb),Ub.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ub.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ub.prototype.isEqual=function(t){return t instanceof Ub&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Ub),Rb=(ls(Fb,sb=Nb),Fb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Fb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Fb.prototype.isEqual=function(t){return t instanceof Fb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Fb),Pb=Number,Ob=Pb.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Lb=Pb.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Mb=Pb.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Fb(){return null!==sb&&sb.apply(this,arguments)||this}function Ub(t,e,n){var r=ab.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function jb(t,e,n,r,i,o){var s=ub.call(this,t,e)||this;return s.Ln=r,s.proto=i,s.converter=o,Um(void 0!==s.Ln||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.un=!!n.un,s.hasCommittedMutations=!!n.hasCommittedMutations,s}function qb(t,e){this.key=t,this.version=e}function Bb(t){var e=cb.call(this)||this;return e.Ht=t,e.Sn=Tg.ArrayValue,e}function Vb(t){var e=lb.call(this)||this;return e.Ht=t,e.Sn=Tg.In,e}function Wb(t){var e=hb.call(this)||this;return e.Ht=t,e.Sn=Tg._n,e}function Hb(t,e){var n=pb.call(this)||this;return n.s=t,n.key=e,n.Sn=Tg.yn,n}function zb(t){var e=fb.call(this)||this;return e.Ht=t,e.Sn=Tg.bn,e}function Gb(t,e){var n=db.call(this)||this;return n.Fn=t,n.previousValue=e,n.Sn=Tg.pn,n}function Kb(t){var e=yb.call(this)||this;return e.Ht=t,e.Sn=Tg.pn,e}function Qb(t){var e=mb.call(this)||this;return e.Ht=t,e.Sn=Tg.gn,e}function Yb(){return null!==vb&&vb.apply(this,arguments)||this}function Xb(){return null!==gb&&gb.apply(this,arguments)||this}function $b(t){return null==t}function Jb(t){return Mb(t)&&t<=Lb&&Ob<=t}var Zb,tw,ew=(nw.prototype.canonicalId=function(){if(null===this.Qn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";$b(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Qn=t}return this.Qn},nw.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),$b(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},nw.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},nw.prototype.Gn=function(){return Bv.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},nw);function nw(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Qn=null}(tw=Zb=Zb||{}).Wn="F",tw.zn="L";var rw,iw,ow,sw,aw,uw,cw,lw,hw,pw,fw=(Mw.$n=function(t){return new Mw(t)},Object.defineProperty(Mw.prototype,"orderBy",{get:function(){if(null===this.Jn){var t=this.Zn(),e=this.ti();if(null!==t&&null===e)this.Jn=t.ut()?[Sw]:[new Tw(t),Sw];else{Um(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.Jn=[]),r=0,i=this.Kn;r<i.length;r++){var o=i[r];this.Jn.push(o),o.field.ut()&&(n=!0)}n||this.Jn.push((0<this.Kn.length?this.Kn[this.Kn.length-1].dir:_w.ASCENDING)===_w.ASCENDING?Sw:Iw)}}return this.Jn},enumerable:!0,configurable:!0}),Mw.prototype.ni=function(t){Um(null==this.Zn()||!(t instanceof yw)||!t.ii()||t.field.isEqual(this.Zn()),"Query must only have one inequality field."),Um(!this.Gn(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new Mw(this.path,this.collectionGroup,this.Kn.slice(),e,this.limit,this.Hn,this.startAt,this.endAt)},Mw.prototype.ei=function(t){Um(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.Kn.concat([t]);return new Mw(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.Hn,this.startAt,this.endAt)},Mw.prototype.ri=function(t){return new Mw(this.path,this.collectionGroup,this.Kn.slice(),this.filters.slice(),t,Zb.Wn,this.startAt,this.endAt)},Mw.prototype.ui=function(t){return new Mw(this.path,this.collectionGroup,this.Kn.slice(),this.filters.slice(),t,Zb.zn,this.startAt,this.endAt)},Mw.prototype.si=function(t){return new Mw(this.path,this.collectionGroup,this.Kn.slice(),this.filters.slice(),this.limit,this.Hn,t,this.endAt)},Mw.prototype.oi=function(t){return new Mw(this.path,this.collectionGroup,this.Kn.slice(),this.filters.slice(),this.limit,this.Hn,this.startAt,t)},Mw.prototype.hi=function(t){return new Mw(t,null,this.Kn.slice(),this.filters.slice(),this.limit,this.Hn,this.startAt,this.endAt)},Mw.prototype.ci=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Kn.length||1===this.Kn.length&&this.Kn[0].field.ut())},Mw.prototype.canonicalId=function(){return this.ai().canonicalId()+"|lt:"+this.Hn},Mw.prototype.toString=function(){return"Query(target="+this.ai().toString()+"; limitType="+this.Hn+")"},Mw.prototype.isEqual=function(t){return this.ai().isEqual(t.ai())&&this.Hn===t.Hn},Mw.prototype.fi=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.ut()}return Um(n,"orderBy used that doesn't compare on key field"),0},Mw.prototype.matches=function(t){return this.li(t)&&this.di(t)&&this.vi(t)&&this.wi(t)},Mw.prototype.mi=function(){return!$b(this.limit)&&this.Hn===Zb.Wn},Mw.prototype.pi=function(){return!$b(this.limit)&&this.Hn===Zb.zn},Mw.prototype.ti=function(){return 0<this.Kn.length?this.Kn[0].field:null},Mw.prototype.Zn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof yw&&n.ii())return n.field}return null},Mw.prototype.gi=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof yw&&0<=t.indexOf(r.op))return r.op}return null},Mw.prototype.Gn=function(){return this.ai().Gn()},Mw.prototype.bi=function(){return null!==this.collectionGroup},Mw.prototype.ai=function(){if(!this.Yn)if(this.Hn===Zb.Wn)this.Yn=new ew(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Tw(r.field,r.dir===_w.DESCENDING?_w.ASCENDING:_w.DESCENDING))}var i=this.endAt?new Ew(this.endAt.position,!this.endAt.before):null,o=this.startAt?new Ew(this.startAt.position,!this.startAt.before):null;this.Yn=new ew(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.Yn},Mw.prototype.li=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):Bv.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},Mw.prototype.di=function(t){for(var e=0,n=this.Kn;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},Mw.prototype.vi=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Mw.prototype.wi=function(t){return!(this.startAt&&!this.startAt.yi(this.orderBy,t)||this.endAt&&this.endAt.yi(this.orderBy,t))},Mw.prototype.Xn=function(t){Um(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Mw),dw=(Lw.it=function(t){switch(t){case"<":return Lw.LESS_THAN;case"<=":return Lw.LESS_THAN_OR_EQUAL;case"==":return Lw.EQUAL;case">=":return Lw.GREATER_THAN_OR_EQUAL;case">":return Lw.GREATER_THAN;case"array-contains":return Lw.ARRAY_CONTAINS;case"in":return Lw.IN;case"array-contains-any":return Lw.ARRAY_CONTAINS_ANY;default:return Fm("Unknown FieldFilter operator: "+t)}},Lw.prototype.toString=function(){return this.name},Lw.prototype.isEqual=function(t){return this.name===t.name},Lw.LESS_THAN=new Lw("<"),Lw.LESS_THAN_OR_EQUAL=new Lw("<="),Lw.EQUAL=new Lw("=="),Lw.GREATER_THAN=new Lw(">"),Lw.GREATER_THAN_OR_EQUAL=new Lw(">="),Lw.ARRAY_CONTAINS=new Lw("array-contains"),Lw.IN=new Lw("in"),Lw.ARRAY_CONTAINS_ANY=new Lw("array-contains-any"),Lw),yw=(ls(Ow,pw=function(){}),Ow.create=function(t,e,n){if(t.ut())return e===dw.IN?(Um(n instanceof Ab,"Comparing on key with IN, but filter value not an ArrayValue"),Um(n.Ht.every((function(t){return t instanceof Ib})),"Comparing on key with IN, but an array value was not a RefValue"),new vw(t,n)):(Um(n instanceof Ib,"Comparing on key, but filter value not a RefValue"),Um(e!==dw.ARRAY_CONTAINS&&e!==dw.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new mw(t,e,n));if(n.isEqual($g.Vn)){if(e!==dw.EQUAL)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Ow(t,e,n)}if(n.isEqual(wb.On)){if(e!==dw.EQUAL)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Ow(t,e,n)}return e===dw.ARRAY_CONTAINS?new gw(t,n):e===dw.IN?(Um(n instanceof Ab,"IN filter has invalid value: "+n.toString()),new bw(t,n)):e===dw.ARRAY_CONTAINS_ANY?(Um(n instanceof Ab,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new ww(t,n)):new Ow(t,e,n)},Ow.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.Sn===e.Sn&&this._i(e.h(this.value))},Ow.prototype._i=function(t){switch(this.op){case dw.LESS_THAN:return t<0;case dw.LESS_THAN_OR_EQUAL:return t<=0;case dw.EQUAL:return 0===t;case dw.GREATER_THAN:return 0<t;case dw.GREATER_THAN_OR_EQUAL:return 0<=t;default:return Fm("Unknown FieldFilter operator: "+this.op)}},Ow.prototype.ii=function(){return 0<=[dw.LESS_THAN,dw.LESS_THAN_OR_EQUAL,dw.GREATER_THAN,dw.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Ow.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},Ow.prototype.isEqual=function(t){return t instanceof Ow&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},Ow.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},Ow),mw=(ls(Pw,hw=yw),Pw.prototype.matches=function(t){var e=Bv.G(t.key,this.value.key);return this._i(e)},Pw),vw=(ls(Rw,lw=yw),Rw.prototype.matches=function(t){return this.value.Ht.some((function(e){return t.key.isEqual(e.key)}))},Rw),gw=(ls(Dw,cw=yw),Dw.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ab&&e.contains(this.value)},Dw),bw=(ls(xw,uw=yw),xw.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},xw),ww=(ls(Nw,aw=yw),Nw.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ab&&n.Ht.some((function(t){return e.value.contains(t)}))},Nw),_w=(Aw.prototype.toString=function(){return this.name},Aw.ASCENDING=new Aw("asc"),Aw.DESCENDING=new Aw("desc"),Aw),Ew=(kw.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},kw.prototype.yi=function(t,e){Um(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())Um(o instanceof Ib,"Bound has a non-key value where the key path is being used."),n=Bv.G(o.key,e.key);else{var s=e.field(i.field);Um(null!==s,"Field should exist since document matched the orderBy already."),n=o.h(s)}if(i.dir===_w.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},kw.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},kw),Tw=(Cw.prototype.compare=function(t,e){var n=this.Ii?xb.Un(t,e):xb.qn(this.field,t,e);switch(this.dir){case _w.ASCENDING:return n;case _w.DESCENDING:return-1*n;default:return Fm("Unknown direction: "+this.dir)}},Cw.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},Cw.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},Cw.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Cw),Sw=new Tw(qv.st(),_w.ASCENDING),Iw=new Tw(qv.st(),_w.DESCENDING);function Cw(t,e){this.field=t,void 0===e&&(e=_w.ASCENDING),this.dir=e,this.Ii=t.ut()}function kw(t,e){this.position=t,this.before=e}function Aw(t){this.name=t}function Nw(t,e){var n=aw.call(this,t,dw.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}function xw(t,e){var n=uw.call(this,t,dw.IN,e)||this;return n.value=e,n}function Dw(t,e){return cw.call(this,t,dw.ARRAY_CONTAINS,e)||this}function Rw(t,e){var n=lw.call(this,t,dw.IN,e)||this;return n.value=e,n}function Pw(){return null!==hw&&hw.apply(this,arguments)||this}function Ow(t,e,n){var r=pw.call(this)||this;return r.field=t,r.op=e,r.value=n,r}function Lw(t){this.name=t}function Mw(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Zb.Wn),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Kn=n,this.filters=r,this.limit=i,this.Hn=o,this.startAt=s,this.endAt=a,this.Jn=null,this.Yn=null,this.startAt&&this.Xn(this.startAt),this.endAt&&this.Xn(this.endAt)}(iw=rw=rw||{})[iw.Ti=0]="__PRIVATE_Unknown",iw[iw.Ei=1]="__PRIVATE_Online",iw[iw.Ri=2]="__PRIVATE_Offline",(sw=ow=ow||{})[sw.Ai=0]="__PRIVATE_RemoteStore",sw[sw.Di=1]="__PRIVATE_SharedClientState";var Fw,Uw,jw=(qw.fromBase64String=function(t){return new qw(B_.t().atob(t))},qw.fromUint8Array=function(t){return new qw(Bw(t))},qw.prototype.toBase64=function(){return B_.t().btoa(this.Pi)},qw.prototype.toUint8Array=function(){return Vw(this.Pi)},qw.prototype.Cn=function(){return 2*this.Pi.length},qw.prototype.isEqual=function(t){return this.Pi===t.Pi},qw.Si=new qw(""),qw);function qw(t){this.Pi=t}function Bw(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function Vw(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(Uw=Fw=Fw||{})[Uw.Ci=0]="__PRIVATE_Listen",Uw[Uw.Vi=1]="__PRIVATE_ExistenceFilterMismatch",Uw[Uw.Ni=2]="__PRIVATE_LimboResolution";var Ww,Hw,zw=(Qw.prototype.Fi=function(t){return new Qw(this.target,this.targetId,this.ki,t,this.Oi,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Qw.prototype.xi=function(t,e){return new Qw(this.target,this.targetId,this.ki,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Qw.prototype.ji=function(t){return new Qw(this.target,this.targetId,this.ki,this.sequenceNumber,this.Oi,t,this.resumeToken)},Qw.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.ki===t.ki&&this.sequenceNumber===t.sequenceNumber&&this.Oi.isEqual(t.Oi)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},Qw),Gw=(Kw.prototype.isEqual=function(t){return t&&t.count===this.count},Kw);function Kw(t){this.count=t}function Qw(t,e,n,r,i,o,s){void 0===i&&(i=Mv.MIN),void 0===o&&(o=Mv.MIN),void 0===s&&(s=jw.Si),this.target=t,this.targetId=e,this.ki=n,this.sequenceNumber=r,this.Oi=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Yw(t){switch(t){case Xm.OK:return Fm("Treated status OK as error");case Xm.CANCELLED:case Xm.UNKNOWN:case Xm.DEADLINE_EXCEEDED:case Xm.RESOURCE_EXHAUSTED:case Xm.INTERNAL:case Xm.UNAVAILABLE:case Xm.UNAUTHENTICATED:return!1;case Xm.INVALID_ARGUMENT:case Xm.NOT_FOUND:case Xm.ALREADY_EXISTS:case Xm.PERMISSION_DENIED:case Xm.FAILED_PRECONDITION:case Xm.ABORTED:case Xm.OUT_OF_RANGE:case Xm.UNIMPLEMENTED:case Xm.DATA_LOSS:return!0;default:return Fm("Unknown status code: "+t)}}function Xw(t){if(void 0===t)return Lm("GRPC error has no .code"),Xm.UNKNOWN;switch(t){case Ww.OK:return Xm.OK;case Ww.CANCELLED:return Xm.CANCELLED;case Ww.UNKNOWN:return Xm.UNKNOWN;case Ww.DEADLINE_EXCEEDED:return Xm.DEADLINE_EXCEEDED;case Ww.RESOURCE_EXHAUSTED:return Xm.RESOURCE_EXHAUSTED;case Ww.INTERNAL:return Xm.INTERNAL;case Ww.UNAVAILABLE:return Xm.UNAVAILABLE;case Ww.UNAUTHENTICATED:return Xm.UNAUTHENTICATED;case Ww.INVALID_ARGUMENT:return Xm.INVALID_ARGUMENT;case Ww.NOT_FOUND:return Xm.NOT_FOUND;case Ww.ALREADY_EXISTS:return Xm.ALREADY_EXISTS;case Ww.PERMISSION_DENIED:return Xm.PERMISSION_DENIED;case Ww.FAILED_PRECONDITION:return Xm.FAILED_PRECONDITION;case Ww.ABORTED:return Xm.ABORTED;case Ww.OUT_OF_RANGE:return Xm.OUT_OF_RANGE;case Ww.UNIMPLEMENTED:return Xm.UNIMPLEMENTED;case Ww.DATA_LOSS:return Xm.DATA_LOSS;default:return Fm("Unknown status code: "+t)}}(Hw=Ww=Ww||{})[Hw.OK=0]="OK",Hw[Hw.CANCELLED=1]="CANCELLED",Hw[Hw.UNKNOWN=2]="UNKNOWN",Hw[Hw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hw[Hw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hw[Hw.NOT_FOUND=5]="NOT_FOUND",Hw[Hw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hw[Hw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hw[Hw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hw[Hw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hw[Hw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hw[Hw.ABORTED=10]="ABORTED",Hw[Hw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hw[Hw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hw[Hw.INTERNAL=13]="INTERNAL",Hw[Hw.UNAVAILABLE=14]="UNAVAILABLE",Hw[Hw.DATA_LOSS=15]="DATA_LOSS";var $w=new Vv(Bv.G);function Jw(){return $w}function Zw(){return Jw()}var t_=new Vv(Bv.G);function e_(){return t_}var n_=new Vv(Bv.G);function r_(){return n_}var i_=new rg(Bv.G);function o_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=i_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var s_=new rg(Bm);function a_(){return s_}var u_,c_,l_,h_,p_=(f_.Bi=function(t){return new f_(t.G)},f_.prototype.has=function(t){return null!=this.Ui.get(t)},f_.prototype.get=function(t){return this.Ui.get(t)},f_.prototype.first=function(){return this.Li.vt()},f_.prototype.last=function(){return this.Li.wt()},f_.prototype.J=function(){return this.Li.J()},f_.prototype.indexOf=function(t){var e=this.Ui.get(t);return e?this.Li.indexOf(e):-1},Object.defineProperty(f_.prototype,"size",{get:function(){return this.Li.size},enumerable:!0,configurable:!0}),f_.prototype.forEach=function(t){this.Li.pt((function(e,n){return t(e),!1}))},f_.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ui.lt(t.key,t),e.Li.lt(t,null))},f_.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ui.remove(t),this.Li.remove(e)):this},f_.prototype.isEqual=function(t){if(!(t instanceof f_))return!1;if(this.size!==t.size)return!1;for(var e=this.Li.bt(),n=t.Li.bt();e.At();){var r=e.Rt().key,i=n.Rt().key;if(!r.isEqual(i))return!1}return!0},f_.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},f_.prototype.copy=function(t,e){var n=new f_;return n.G=this.G,n.Ui=t,n.Li=e,n},f_);function f_(t){this.G=t?function(e,n){return t(e,n)||Bv.G(e.key,n.key)}:function(t,e){return Bv.G(t.key,e.key)},this.Ui=e_(),this.Li=new Vv(this.G)}function d_(t,e,n,r){this.ae=t,this.removedTargetIds=e,this.key=n,this.fe=r}function y_(t,e){this.targetId=t,this.le=e}(c_=u_=u_||{})[c_.Mi=0]="__PRIVATE_Added",c_[c_.qi=1]="__PRIVATE_Removed",c_[c_.Qi=2]="__PRIVATE_Modified",c_[c_.Gi=3]="__PRIVATE_Metadata",(h_=l_=l_||{})[h_.Wi=0]="__PRIVATE_Local",h_[h_.zi=1]="__PRIVATE_Synced";var m_,v_,g_=(I_.prototype.track=function(t){var e=t.doc.key,n=this.Ki.get(e);n?t.type!==u_.Mi&&n.type===u_.Gi?this.Ki=this.Ki.lt(e,t):t.type===u_.Gi&&n.type!==u_.qi?this.Ki=this.Ki.lt(e,{type:n.type,doc:t.doc}):t.type===u_.Qi&&n.type===u_.Qi?this.Ki=this.Ki.lt(e,{type:u_.Qi,doc:t.doc}):t.type===u_.Qi&&n.type===u_.Mi?this.Ki=this.Ki.lt(e,{type:u_.Mi,doc:t.doc}):t.type===u_.qi&&n.type===u_.Mi?this.Ki=this.Ki.remove(e):t.type===u_.qi&&n.type===u_.Qi?this.Ki=this.Ki.lt(e,{type:u_.qi,doc:n.doc}):t.type===u_.Mi&&n.type===u_.qi?this.Ki=this.Ki.lt(e,{type:u_.Qi,doc:t.doc}):Fm("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.Ki=this.Ki.lt(e,t)},I_.prototype.Hi=function(){var t=[];return this.Ki.pt((function(e,n){t.push(n)})),t},I_),b_=(S_.Zi=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:u_.Mi,doc:t})})),new S_(t,e,p_.Bi(e),i,n,r,!0,!1)},Object.defineProperty(S_.prototype,"hasPendingWrites",{get:function(){return!this.Yi.J()},enumerable:!0,configurable:!0}),S_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Xi===t.Xi&&this.Yi.isEqual(t.Yi)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Ji.isEqual(t.Ji)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},S_),w_=(T_.re=function(t,e){var n,r=((n={})[t]=__.ue(t,e),n);return new T_(Mv.MIN,r,a_(),Jw(),o_())},T_),__=(E_.ue=function(t,e){return new E_(jw.Si,e,o_(),o_(),o_())},E_);function E_(t,e,n,r,i){this.resumeToken=t,this.se=e,this.oe=n,this.he=r,this.ce=i}function T_(t,e,n,r,i){this.Oi=t,this.te=e,this.ne=n,this.ie=r,this.ee=i}function S_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ji=n,this.docChanges=r,this.Yi=i,this.fromCache=o,this.Xi=s,this.$i=a}function I_(){this.Ki=new Vv(Bv.G)}function C_(t,e,n,r){void 0===n&&(n=jw.Si),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}(v_=m_=m_||{})[v_.de=0]="__PRIVATE_NoChange",v_[v_.Mi=1]="__PRIVATE_Added",v_[v_.qi=2]="__PRIVATE_Removed",v_[v_.ve=3]="__PRIVATE_Current",v_[v_.we=4]="__PRIVATE_Reset";var k_=(Object.defineProperty(x_.prototype,"se",{get:function(){return this.be},enumerable:!0,configurable:!0}),Object.defineProperty(x_.prototype,"resumeToken",{get:function(){return this.ge},enumerable:!0,configurable:!0}),Object.defineProperty(x_.prototype,"_e",{get:function(){return 0!==this.me},enumerable:!0,configurable:!0}),Object.defineProperty(x_.prototype,"Ie",{get:function(){return this.ye},enumerable:!0,configurable:!0}),x_.prototype.Te=function(t){0<t.Cn()&&(this.ye=!0,this.ge=t)},x_.prototype.Ee=function(){var t=o_(),e=o_(),n=o_();return this.pe.forEach((function(r,i){switch(i){case u_.Mi:t=t.add(r);break;case u_.Qi:e=e.add(r);break;case u_.qi:n=n.add(r);break;default:Fm("Encountered invalid change type: "+i)}})),new __(this.ge,this.be,t,e,n)},x_.prototype.Re=function(){this.ye=!1,this.pe=R_()},x_.prototype.Ae=function(t,e){this.ye=!0,this.pe=this.pe.lt(t,e)},x_.prototype.De=function(t){this.ye=!0,this.pe=this.pe.remove(t)},x_.prototype.Pe=function(){this.me+=1},x_.prototype.Se=function(){this.me-=1},x_.prototype.Ce=function(){this.ye=!0,this.be=!0},x_),A_=(N_.prototype.xe=function(t){for(var e=0,n=t.ae;e<n.length;e++){var r=n[e];t.fe instanceof xb?this.je(r,t.fe):t.fe instanceof Db&&this.Ue(r,t.key,t.fe)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Ue(r=o[i],t.key,t.fe)},N_.prototype.Le=function(t){var e=this;this.Be(t,(function(n){var r=e.Me(n);switch(t.state){case m_.de:e.qe(n)&&r.Te(t.resumeToken);break;case m_.Mi:r.Se(),r._e||r.Re(),r.Te(t.resumeToken);break;case m_.qi:r.Se(),r._e||e.removeTarget(n),Um(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case m_.ve:e.qe(n)&&(r.Ce(),r.Te(t.resumeToken));break;case m_.we:e.qe(n)&&(e.Qe(n),r.Te(t.resumeToken));break;default:Fm("Unknown target watch change state: "+t.state)}}))},N_.prototype.Be=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):hv(this.Ne,e)},N_.prototype.Ge=function(t){var e=t.targetId,n=t.le.count,r=this.We(e);if(r){var i=r.target;if(i.Gn())if(0===n){var o=new Bv(i.path);this.Ue(e,o,new Db(o,Mv.B()))}else Um(1===n,"Single document existence filter with count: "+n);else this.ze(e)!==n&&(this.Qe(e),this.Fe=this.Fe.add(e))}},N_.prototype.Ke=function(t){var e=this,n={};hv(this.Ne,(function(r,i){var o=e.We(r);if(o){if(i.se&&o.target.Gn()){var s=new Bv(o.target.path);null!==e.ke.get(s)||e.He(r,s)||e.Ue(r,s,new Db(s,t))}i.Ie&&(n[r]=i.Ee(),i.Re())}}));var r=o_();this.Oe.forEach((function(t,n){var i=!0;n.Bt((function(t){var n=e.We(t);return!n||n.ki===Fw.Ni||(i=!1)})),i&&(r=r.add(t))}));var i=new w_(t,n,this.Fe,this.ke,r);return this.ke=Jw(),this.Oe=D_(),this.Fe=new rg(Bm),i},N_.prototype.je=function(t,e){if(this.qe(t)){var n=this.He(t,e.key)?u_.Qi:u_.Mi;this.Me(t).Ae(e.key,n),this.ke=this.ke.lt(e.key,e),this.Oe=this.Oe.lt(e.key,this.Je(e.key).add(t))}},N_.prototype.Ue=function(t,e,n){if(this.qe(t)){var r=this.Me(t);this.He(t,e)?r.Ae(e,u_.qi):r.De(e),this.Oe=this.Oe.lt(e,this.Je(e).delete(t)),n&&(this.ke=this.ke.lt(e,n))}},N_.prototype.removeTarget=function(t){delete this.Ne[t]},N_.prototype.ze=function(t){var e=this.Me(t).Ee();return this.Ve.Ye(t).size+e.oe.size-e.ce.size},N_.prototype.Pe=function(t){this.Me(t).Pe()},N_.prototype.Me=function(t){return this.Ne[t]||(this.Ne[t]=new k_),this.Ne[t]},N_.prototype.Je=function(t){var e=this.Oe.get(t);return e||(e=new rg(Bm),this.Oe=this.Oe.lt(t,e)),e},N_.prototype.qe=function(t){var e=null!==this.We(t);return e||Om("WatchChangeAggregator","Detected inactive target",t),e},N_.prototype.We=function(t){var e=this.Ne[t];return e&&e._e?null:this.Ve.Xe(t)},N_.prototype.Qe=function(t){var e=this;Um(!this.Ne[t]._e,"Should only reset active targets"),this.Ne[t]=new k_,this.Ve.Ye(t).forEach((function(n){e.Ue(t,n,null)}))},N_.prototype.He=function(t,e){return this.Ve.Ye(t).has(e)},N_);function N_(t){this.Ve=t,this.Ne={},this.ke=Jw(),this.Oe=D_(),this.Fe=new rg(Bm)}function x_(){this.me=0,this.pe=R_(),this.ge=jw.Si,this.be=!1,this.ye=!0}function D_(){return new Vv(Bv.G)}function R_(){return new Vv(Bv.G)}var P_,O_,L_=((P_={})[_w.ASCENDING.name]="ASCENDING",P_[_w.DESCENDING.name]="DESCENDING",P_),M_=((O_={})[dw.LESS_THAN.name]="LESS_THAN",O_[dw.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",O_[dw.GREATER_THAN.name]="GREATER_THAN",O_[dw.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",O_[dw.EQUAL.name]="EQUAL",O_[dw.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",O_[dw.IN.name]="IN",O_[dw.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",O_),F_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function U_(t,e){Um(!$b(t),e+" is missing")}function j_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):Fm("can't parse "+t)}var q_=(W_.prototype.$e=function(t){var e=void 0===t.code?Xm.UNKNOWN:Xw(t.code);return new $m(e,t.message||"")},W_.prototype.Ze=function(t){return this.options.tr||$b(t)?t:{value:t}},W_.prototype.nr=function(t){var e;return $b(e="object"==typeof t?t.value:t)?null:e},W_.prototype.q=function(t){return this.options.tr?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},W_.prototype.L=function(t){if("string"==typeof t)return this.ir(t);Um(!!t,"Cannot deserialize null or undefined timestamp.");var e=j_(t.seconds||"0");return new Lv(e,t.nanos||0)},W_.prototype.ir=function(t){var e=0,n=F_.exec(t);if(Um(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Lv(o,e)},W_.prototype.er=function(t){return this.options.tr?t.toBase64():t.toUint8Array()},W_.prototype.rr=function(t){return this.options.tr?(Um(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),jw.fromBase64String(t||"")):(Um(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),jw.fromUint8Array(t||new Uint8Array))},W_.prototype.ur=function(t){return"string"==typeof t?(Um(this.options.tr,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X_.fromBase64String(t)):(Um(!this.options.tr,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X_.fromUint8Array(t))},W_.prototype.toVersion=function(t){return this.q(t.q())},W_.prototype.fromVersion=function(t){return Um(!!t,"Trying to deserialize version that isn't set"),Mv.L(this.L(t))},W_.prototype.sr=function(t,e){return this.or(t).child("documents").child(e).nt()},W_.prototype.hr=function(t){var e=Uv.it(t);return Um(this.cr(e),"Tried to deserialize invalid key "+e.toString()),e},W_.prototype.ar=function(t){return this.sr(this.s,t.path)},W_.prototype.lr=function(t){var e=this.hr(t);return Um(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),Um(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new Bv(this.dr(e))},W_.prototype.vr=function(t){return this.sr(this.s,t)},W_.prototype.wr=function(t){var e=this.hr(t);return 4===e.length?Uv.et:this.dr(e)},Object.defineProperty(W_.prototype,"mr",{get:function(){return new Uv(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),W_.prototype.or=function(t){return new Uv(["projects",t.projectId,"databases",t.database])},W_.prototype.dr=function(t){return Um(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},W_.prototype.cr=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},W_.prototype.pr=function(t){if(t instanceof $g)return{nullValue:"NULL_VALUE"};if(t instanceof Jg)return{booleanValue:t.value()};if(t instanceof bb)return{integerValue:""+t.value()};if(t instanceof wb){var e=t.value();if(this.options.tr){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof _b?{stringValue:t.value()}:t instanceof kb?{mapValue:this.gr(t)}:t instanceof Ab?{arrayValue:this.br(t)}:t instanceof Eb?{timestampValue:this.q(t.Ht)}:t instanceof Cb?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Sb?{bytesValue:this.er(t.value())}:t instanceof Ib?{referenceValue:this.sr(t.s,t.key.path)}:Fm("Unknown FieldValue "+JSON.stringify(t))},W_.prototype.yr=function(t){var e=this;if("nullValue"in t)return $g.Vn;if("booleanValue"in t)return Jg.of(t.booleanValue);if("integerValue"in t)return new bb(j_(t.integerValue));if("doubleValue"in t){if(this.options.tr){if("NaN"===t.doubleValue)return wb.On;if("Infinity"===t.doubleValue)return wb.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return wb.NEGATIVE_INFINITY}return new wb(t.doubleValue)}if("stringValue"in t)return new _b(t.stringValue);if("mapValue"in t)return this._r(t.mapValue.fields||{});if("arrayValue"in t)return U_(t.arrayValue,"arrayValue"),new Ab((t.arrayValue.values||[]).map((function(t){return e.yr(t)})));if("timestampValue"in t)return U_(t.timestampValue,"timestampValue"),new Eb(this.L(t.timestampValue));if("geoPointValue"in t)return U_(t.geoPointValue,"geoPointValue"),new Cb(new Ov(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){U_(t.bytesValue,"bytesValue");var n=this.ur(t.bytesValue);return new Sb(n)}if("referenceValue"in t){U_(t.referenceValue,"referenceValue");var r=this.hr(t.referenceValue),i=new Qm(r.get(1),r.get(3)),o=new Bv(this.dr(r));return new Ib(i,o)}return Fm("Unknown Value proto "+JSON.stringify(t))},W_.prototype.Ir=function(t,e){return{name:this.ar(t),fields:this.Tr(e)}},W_.prototype.Er=function(t){return Um(!t.un,"Can't serialize documents with mutations."),{name:this.ar(t.key),fields:this.Tr(t.data()),updateTime:this.q(t.version.q())}},W_.prototype.Rr=function(t,e){var n=this,r=this.lr(t.name),i=this.fromVersion(t.updateTime);return new xb(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.yr(t)}))},W_.prototype.Tr=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.pr(r)})),n},W_.prototype._r=function(t){var e=this,n=kb.EMPTY;return pv(t,(function(t,r){n=n.set(new qv([t]),e.yr(r))})),n},W_.prototype.gr=function(t){return{fields:this.Tr(t)}},W_.prototype.br=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.pr(t))})),{values:n}},W_.prototype.Ar=function(t){var e=this;Um(!!t.found,"Tried to deserialize a found document from a missing document."),U_(t.found.name,"doc.found.name"),U_(t.found.updateTime,"doc.found.updateTime");var n=this.lr(t.found.name),r=this.fromVersion(t.found.updateTime);return new xb(n,r,{},void 0,t.found,(function(t){return e.yr(t)}))},W_.prototype.Dr=function(t){Um(!!t.missing,"Tried to deserialize a missing document from a found document."),Um(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.lr(t.missing),n=this.fromVersion(t.readTime);return new Db(e,n)},W_.prototype.Pr=function(t){return"found"in t?this.Ar(t):"missing"in t?this.Dr(t):Fm("invalid batch get response: "+JSON.stringify(t))},W_.prototype.Sr=function(t){switch(t){case m_.Mi:return"ADD";case m_.ve:return"CURRENT";case m_.de:return"NO_CHANGE";case m_.qi:return"REMOVE";case m_.we:return"RESET";default:return Fm("Unknown WatchTargetChangeState: "+t)}},W_.prototype.Cr=function(t){if(t instanceof y_)return{filter:{count:t.le.count,targetId:t.targetId}};if(t instanceof d_){if(t.fe instanceof xb){var e=t.fe;return{documentChange:{document:{name:this.ar(e.key),fields:this.Tr(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.ae,removedTargetIds:t.removedTargetIds}}}if(t.fe instanceof Db)return{documentDelete:{document:this.ar((e=t.fe).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.fe)return{documentRemove:{document:this.ar(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof C_){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Ww.OK;switch(t){case Xm.OK:return Ww.OK;case Xm.CANCELLED:return Ww.CANCELLED;case Xm.UNKNOWN:return Ww.UNKNOWN;case Xm.DEADLINE_EXCEEDED:return Ww.DEADLINE_EXCEEDED;case Xm.RESOURCE_EXHAUSTED:return Ww.RESOURCE_EXHAUSTED;case Xm.INTERNAL:return Ww.INTERNAL;case Xm.UNAVAILABLE:return Ww.UNAVAILABLE;case Xm.UNAUTHENTICATED:return Ww.UNAUTHENTICATED;case Xm.INVALID_ARGUMENT:return Ww.INVALID_ARGUMENT;case Xm.NOT_FOUND:return Ww.NOT_FOUND;case Xm.ALREADY_EXISTS:return Ww.ALREADY_EXISTS;case Xm.PERMISSION_DENIED:return Ww.PERMISSION_DENIED;case Xm.FAILED_PRECONDITION:return Ww.FAILED_PRECONDITION;case Xm.ABORTED:return Ww.ABORTED;case Xm.OUT_OF_RANGE:return Ww.OUT_OF_RANGE;case Xm.UNIMPLEMENTED:return Ww.UNIMPLEMENTED;case Xm.DATA_LOSS:return Ww.DATA_LOSS;default:return Fm("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Sr(t.state),targetIds:t.targetIds,resumeToken:this.er(t.resumeToken),cause:n}}}return Fm("Unrecognized watch change: "+JSON.stringify(t))},W_.prototype.Vr=function(t){var e,n=this;if("targetChange"in t){U_(t.targetChange,"targetChange");var r=this.Nr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.rr(t.targetChange.resumeToken),s=t.targetChange.cause;e=new C_(r,i,o,s&&this.$e(s)||null)}else if("documentChange"in t){U_(t.documentChange,"documentChange");var a=t.documentChange;U_(a.document,"documentChange.name"),U_(a.document.name,"documentChange.document.name"),U_(a.document.updateTime,"documentChange.document.updateTime");var u=this.lr(a.document.name),c=this.fromVersion(a.document.updateTime),l=new xb(u,c,{},void 0,a.document,(function(t){return n.yr(t)})),h=a.removedTargetIds||[];e=new d_(a.targetIds||[],h,l.key,l)}else if("documentDelete"in t){U_(t.documentDelete,"documentDelete");var p=t.documentDelete;U_(p.document,"documentDelete.document"),u=this.lr(p.document),c=p.readTime?this.fromVersion(p.readTime):Mv.B(),l=new Db(u,c),e=new d_([],h=p.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){U_(t.documentRemove,"documentRemove");var f=t.documentRemove;U_(f.document,"documentRemove"),u=this.lr(f.document),e=new d_([],h=f.removedTargetIds||[],u,null)}else{if(!("filter"in t))return Fm("Unknown change type "+JSON.stringify(t));U_(t.filter,"filter");var d=t.filter;U_(d.targetId,"filter.targetId");var y=new Gw(d.count||0);e=new y_(d.targetId,y)}return e},W_.prototype.Nr=function(t){return"NO_CHANGE"===t?m_.de:"ADD"===t?m_.Mi:"REMOVE"===t?m_.qi:"CURRENT"===t?m_.ve:"RESET"===t?m_.we:Fm("Got unexpected TargetChange.state: "+t)},W_.prototype.kr=function(t){if(!("targetChange"in t))return Mv.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Mv.MIN:e.readTime?this.fromVersion(e.readTime):Mv.MIN},W_.prototype.Or=function(t){var e,n=this;if(t instanceof Og)e={update:this.Ir(t.key,t.value)};else if(t instanceof Fg)e={delete:this.ar(t.key)};else if(t instanceof Lg)e={update:this.Ir(t.key,t.data),updateMask:this.Fr(t.on)};else if(t instanceof Mg)e={transform:{document:this.ar(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.xr(t)}))}};else{if(!(t instanceof Ug))return Fm("Unknown mutation type "+t.type);e={verify:this.ar(t.key)}}return t.rn.tn||(e.currentDocument=this.jr(t.rn)),e},W_.prototype.Ur=function(t){var e=this,n=t.currentDocument?this.Lr(t.currentDocument):Rg.NONE;if(t.update){U_(t.update.name,"name");var r=this.lr(t.update.name),i=this._r(t.update.fields||{});if(t.updateMask){var o=this.Br(t.updateMask);return new Lg(r,i,o,n)}return new Og(r,i,n)}if(t.delete)return r=this.lr(t.delete),new Fg(r,n);if(t.transform){r=this.lr(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.Mr(t)}));return Um(!0===n.exists,'Transforms only support precondition "exists == true"'),new Mg(r,s)}return t.verify?(r=this.lr(t.verify),new Ug(r,n)):Fm("unknown mutation proto: "+JSON.stringify(t))},W_.prototype.jr=function(t){return Um(!t.tn,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fm("Unknown precondition")},W_.prototype.Lr=function(t){return void 0!==t.updateTime?Rg.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Rg.exists(t.exists):Rg.NONE},W_.prototype.qr=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e);r.isEqual(Mv.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map((function(t){return n.yr(t)}))),new mg(r,i)},W_.prototype.Qr=function(t,e){var n=this;return t&&0<t.length?(Um(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.qr(t,e)}))):[]},W_.prototype.xr=function(t){var e=this,n=t.transform;if(n instanceof og)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof sg)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map((function(t){return e.pr(t)}))}};if(n instanceof ag)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map((function(t){return e.pr(t)}))}};if(n instanceof ug)return{fieldPath:t.field.nt(),increment:this.pr(n.Kt)};throw Fm("Unknown transform: "+t.transform)},W_.prototype.Mr=function(t){var e=this,n=null;if("setToServerValue"in t)Um("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=og.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new sg(r.map((function(t){return e.yr(t)})))}else if("removeAllFromArray"in t)n=new ag((r=t.removeAllFromArray.values||[]).map((function(t){return e.yr(t)})));else if("increment"in t){var i=this.yr(t.increment);Um(i instanceof Zg,"NUMERIC_ADD transform requires a NumberValue"),n=new ug(i)}else Fm("Unknown transform proto: "+JSON.stringify(t));var o=qv.ot(t.fieldPath);return new wg(o,n)},W_.prototype.Gr=function(t){return{documents:[this.vr(t.path)]}},W_.prototype.Wr=function(t){var e=t.documents.length;return Um(1===e,"DocumentsTarget contained other than 1 document: "+e),fw.$n(this.wr(t.documents[0])).ai()},W_.prototype.zr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(Um(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.vr(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(Um(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.vr(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.Kr(t.filters);r&&(e.structuredQuery.where=r);var i=this.Hr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.Ze(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Jr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Jr(t.endAt)),e},W_.prototype.Yr=function(t){var e=this.wr(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Um(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.Xr(n.where));var a=[];n.orderBy&&(a=this.$r(n.orderBy));var u=null;n.limit&&(u=this.nr(n.limit));var c=null;n.startAt&&(c=this.Zr(n.startAt));var l=null;return n.endAt&&(l=this.Zr(n.endAt)),new fw(e,i,a,s,u,Zb.Wn,c,l).ai()},W_.prototype.tu=function(t){var e=this.nu(t.ki);return null==e?null:{"goog-listen-tags":e}},W_.prototype.nu=function(t){switch(t){case Fw.Ci:return null;case Fw.Vi:return"existence-filter-mismatch";case Fw.Ni:return"limbo-document";default:return Fm("Unrecognized query purpose: "+t)}},W_.prototype.ai=function(t){var e,n=t.target;return(e=n.Gn()?{documents:this.Gr(n)}:{query:this.zr(n)}).targetId=t.targetId,0<t.resumeToken.Cn()&&(e.resumeToken=this.er(t.resumeToken)),e},W_.prototype.Kr=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof yw?e.iu(t):Fm("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},W_.prototype.Xr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.eu(t)]:void 0!==t.fieldFilter?[this.ru(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.Xr(t)})).reduce((function(t,e){return t.concat(e)})):Fm("Unknown filter: "+JSON.stringify(t)):[]},W_.prototype.Hr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.uu(t)}))},W_.prototype.$r=function(t){var e=this;return t.map((function(t){return e.su(t)}))},W_.prototype.Jr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.pr(t)}))}},W_.prototype.Zr=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.yr(t)}));return new Ew(r,n)},W_.prototype.ou=function(t){return L_[t.name]},W_.prototype.hu=function(t){switch(t){case"ASCENDING":return _w.ASCENDING;case"DESCENDING":return _w.DESCENDING;default:return}},W_.prototype.cu=function(t){return M_[t.name]},W_.prototype.au=function(t){switch(t){case"EQUAL":return dw.EQUAL;case"GREATER_THAN":return dw.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return dw.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return dw.LESS_THAN;case"LESS_THAN_OR_EQUAL":return dw.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return dw.ARRAY_CONTAINS;case"IN":return dw.IN;case"ARRAY_CONTAINS_ANY":return dw.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return Fm("Unspecified operator");default:return Fm("Unknown operator")}},W_.prototype.fu=function(t){return{fieldPath:t.nt()}},W_.prototype.lu=function(t){return qv.ot(t.fieldPath)},W_.prototype.uu=function(t){return{field:this.fu(t.field),direction:this.ou(t.dir)}},W_.prototype.su=function(t){return new Tw(this.lu(t.field),this.hu(t.direction))},W_.prototype.ru=function(t){return yw.create(this.lu(t.fieldFilter.field),this.au(t.fieldFilter.op),this.yr(t.fieldFilter.value))},W_.prototype.iu=function(t){if(t.op===dw.EQUAL){if(t.value.isEqual(wb.On))return{unaryFilter:{field:this.fu(t.field),op:"IS_NAN"}};if(t.value.isEqual($g.Vn))return{unaryFilter:{field:this.fu(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.fu(t.field),op:this.cu(t.op),value:this.pr(t.value)}}},W_.prototype.eu=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.lu(t.unaryFilter.field);return yw.create(e,dw.EQUAL,wb.On);case"IS_NULL":var n=this.lu(t.unaryFilter.field);return yw.create(n,dw.EQUAL,$g.Vn);case"OPERATOR_UNSPECIFIED":return Fm("Unspecified filter");default:return Fm("Unknown filter")}},W_.prototype.Fr=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.nt())})),{fieldPaths:e}},W_.prototype.Br=function(t){var e=(t.fieldPaths||[]).map((function(t){return qv.ot(t)}));return bg.Yt(e)},W_),B_=(V_.du=function(t){V_.platform&&Fm("Platform already defined"),V_.platform=t},V_.t=function(){return V_.platform||Fm("Platform not set"),V_.platform},V_);function V_(){}function W_(t,e){this.s=t,this.options=e}function H_(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new $m(Xm.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function z_(){if("undefined"==typeof Uint8Array)throw new $m(Xm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function G_(){if(!B_.t().vu)throw new $m(Xm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function K_(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}var Q_,Y_,X_=(tE.fromBase64String=function(t){yv("Blob.fromBase64String",arguments,1),gv("Blob.fromBase64String","string",1,t),G_();try{return new tE(B_.t().atob(t))}catch(t){throw new $m(Xm.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},tE.fromUint8Array=function(t){if(yv("Blob.fromUint8Array",arguments,1),z_(),!(t instanceof Uint8Array))throw Av("Blob.fromUint8Array","Uint8Array",1,t);return new tE(Bw(t))},tE.prototype.toBase64=function(){return yv("Blob.toBase64",arguments,0),G_(),B_.t().btoa(this.Pi)},tE.prototype.toUint8Array=function(){return yv("Blob.toUint8Array",arguments,0),z_(),Vw(this.Pi)},tE.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},tE.prototype.isEqual=function(t){return this.Pi===t.Pi},tE.prototype.xn=function(){return 2*this.Pi.length},tE.prototype.j=function(t){return Bm(this.Pi,t.Pi)},tE),$_=H_(X_,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),J_=(Z_.prototype.mu=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Z_.prototype.next=function(){var t=++this.previousValue;return this.pu&&this.pu(t),t},Z_.bu=-1,Z_);function Z_(t,e){var n=this;this.previousValue=t,e&&(e.wu=function(t){return n.mu(t)},this.pu=function(t){return e.gu(t)})}function tE(t){G_(),this.Pi=t}(Y_=Q_=Q_||{}).yu="all",Y_._u="listen_stream_idle",Y_.Iu="listen_stream_connection_backoff",Y_.Tu="write_stream_idle",Y_.Eu="write_stream_connection_backoff",Y_.Ru="online_state_timeout",Y_.Au="client_metadata_refresh",Y_.Du="lru_garbage_collection",Y_.Pu="retry_transaction";var eE=(iE.Ou=function(t,e,n,r,i){var o=new iE(t,e,Date.now()+n,r,i);return o.start(n),o},iE.prototype.start=function(t){var e=this;this.Fu=setTimeout((function(){return e.xu()}),t)},iE.prototype.ju=function(){return this.xu()},iE.prototype.cancel=function(t){null!==this.Fu&&(this.clearTimeout(),this.ku.reject(new $m(Xm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},iE.prototype.xu=function(){var t=this;this.Su.Uu((function(){return null!==t.Fu?(t.clearTimeout(),t.op().then((function(e){return t.ku.resolve(e)}))):Promise.resolve()}))},iE.prototype.clearTimeout=function(){null!==this.Fu&&(this.Nu(this),clearTimeout(this.Fu),this.Fu=null)},iE),nE=(Object.defineProperty(rE.prototype,"Wu",{get:function(){return this.Bu},enumerable:!0,configurable:!0}),rE.prototype.Uu=function(t){this.enqueue(t)},rE.prototype.zu=function(t){this.Ku(),this.Hu(t)},rE.prototype.Ju=function(t){return this.Ku(),this.Hu(t)},rE.prototype.Yu=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){switch(e.label){case 0:return this.Ku(),this.Bu?[3,2]:(this.Bu=!0,[4,this.Ju(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},rE.prototype.enqueue=function(t){return this.Ku(),this.Bu?new Promise((function(t){})):this.Hu(t)},rE.prototype.Hu=function(t){var e=this,n=this.Lu.then((function(){return e.Qu=!0,t().catch((function(t){e.qu=t,e.Qu=!1;var n=t.stack||t.message||"";throw Lm("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.Qu=!1,t}))}));return this.Lu=n},rE.prototype.Xu=function(t,e,n){var r=this;this.Ku(),Um(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.Gu.indexOf(t)&&(e=0);var i=eE.Ou(this,t,e,n,(function(t){return r.$u(t)}));return this.Mu.push(i),i},rE.prototype.Ku=function(){this.qu&&Fm("AsyncQueue is already failed: "+(this.qu.stack||this.qu.message))},rE.prototype.Zu=function(){Um(this.Qu,"verifyOpInProgress() called when no op in progress on this queue.")},rE.prototype.ts=function(){return this.Ju((function(){return Promise.resolve()}))},rE.prototype.ns=function(t){for(var e=0,n=this.Mu;e<n.length;e++)if(n[e].Cu===t)return!0;return!1},rE.prototype.es=function(t){var e=this;return this.ts().then((function(){Um(t===Q_.yu||e.ns(t),"Attempted to drain to missing operation "+t),e.Mu.sort((function(t,e){return t.Vu-e.Vu}));for(var n=0,r=e.Mu;n<r.length;n++){var i=r[n];if(i.ju(),t!==Q_.yu&&i.Cu===t)break}return e.ts()}))},rE.prototype.rs=function(t){this.Gu.push(t)},rE.prototype.$u=function(t){var e=this.Mu.indexOf(t);Um(0<=e,"Delayed operation not found."),this.Mu.splice(e,1)},rE);function rE(){this.Lu=Promise.resolve(),this.Bu=!1,this.Mu=[],this.qu=null,this.Qu=!1,this.Gu=[]}function iE(t,e,n,r,i){this.Su=t,this.Cu=e,this.Vu=n,this.op=r,this.Nu=i,this.ku=new K_,this.then=this.ku.promise.then.bind(this.ku.promise),this.catch=this.ku.promise.catch.bind(this.ku.promise),this.ku.promise.catch((function(t){}))}function oE(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=aE(e)),e=sE(t.get(n),e);return aE(e)}function sE(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function aE(t){return t+""}function uE(t){var e=t.length;if(Um(2<=e,"Invalid path "+t),2===e)return Um(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),Uv.et;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Fm('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Fm('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Uv(r)}var cE=(PE.prototype.Wt=function(t,e,n){e&&Um(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.us;Um(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.Wt(e,r[i]))}return e},PE.prototype.Gt=function(t,e){e&&Um(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.Gt(e,e,this.Fn));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.Gt(e,i,this.Fn))}return e},PE.prototype.ss=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Gt(r.key,t.get(r.key));i&&(n=n.lt(r.key,i))})),n},PE.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),o_())},PE.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vm(this.mutations,t.mutations)&&Vm(this.baseMutations,t.baseMutations)},PE),lE=(RE.from=function(t,e,n,r){Um(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=r_(),o=t.mutations,s=0;s<o.length;s++)i=i.lt(o[s].key,n[s].version);return new RE(t,e,n,r,i)},RE),hE=(DE.prototype.J=function(){return this.cs.J()},DE.prototype.ls=function(t,e){var n=new pE(t,e);this.cs=this.cs.add(n),this.as=this.as.add(n)},DE.prototype.ds=function(t,e){var n=this;t.forEach((function(t){return n.ls(t,e)}))},DE.prototype.vs=function(t,e){this.ws(new pE(t,e))},DE.prototype.ms=function(t,e){var n=this;t.forEach((function(t){return n.vs(t,e)}))},DE.prototype.ps=function(t){var e=this,n=Bv.EMPTY,r=new pE(n,t),i=new pE(n,t+1),o=[];return this.as.Lt([r,i],(function(t){e.ws(t),o.push(t.key)})),o},DE.prototype.gs=function(){var t=this;this.cs.forEach((function(e){return t.ws(e)}))},DE.prototype.ws=function(t){this.cs=this.cs.delete(t),this.as=this.as.delete(t)},DE.prototype.bs=function(t){var e=Bv.EMPTY,n=new pE(e,t),r=new pE(e,t+1),i=o_();return this.as.Lt([n,r],(function(t){i=i.add(t.key)})),i},DE.prototype.ys=function(t){var e=new pE(t,0),n=this.cs.Mt(e);return null!==n&&t.isEqual(n.key)},DE),pE=(xE.Un=function(t,e){return Bv.G(t.key,e.key)||Bm(t._s,e._s)},xE.fs=function(t,e){return Bm(t._s,e._s)||Bv.G(t.key,e.key)},xE),fE=(NE.prototype.get=function(t){var e=this.Is(t),n=this.Ts[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},NE.prototype.has=function(t){return void 0!==this.get(t)},NE.prototype.set=function(t,e){var n=this.Is(t),r=this.Ts[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Ts[n]=[[t,e]]},NE.prototype.delete=function(t){var e=this.Is(t),n=this.Ts[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Ts[e]:n.splice(r,1),!0;return!1},NE.prototype.forEach=function(t){pv(this.Ts,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},NE.prototype.J=function(){return fv(this.Ts)},NE),dE=(AE.prototype.catch=function(t){return this.next(void 0,t)},AE.prototype.next=function(t,e){var n=this;return this.Ds&&Fm("Called next() or catch() twice for PersistencePromise"),this.Ds=!0,this.As?this.error?this.Ps(e,this.error):this.Ss(t,this.result):new AE((function(r,i){n.Es=function(e){n.Ss(t,e).next(r,i)},n.Rs=function(t){n.Ps(e,t).next(r,i)}}))},AE.prototype.Cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},AE.prototype.Vs=function(t){try{var e=t();return e instanceof AE?e:AE.resolve(e)}catch(t){return AE.reject(t)}},AE.prototype.Ss=function(t,e){return t?this.Vs((function(){return t(e)})):AE.resolve(e)},AE.prototype.Ps=function(t,e){return t?this.Vs((function(){return t(e)})):AE.reject(e)},AE.resolve=function(t){return new AE((function(e,n){e(t)}))},AE.reject=function(t){return new AE((function(e,n){n(t)}))},AE.Ns=function(t){return new AE((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},AE.ks=function(t){for(var e=AE.resolve(!1),n=function(t){e=e.next((function(e){return e?AE.resolve(e):t()}))},r=0,i=t;r<i.length;r++)n(i[r]);return e},AE.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Ns(r)},AE),yE=(Object.defineProperty(kE.prototype,"readTime",{get:function(){return Um(void 0!==this.xs,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.xs},set:function(t){Um(void 0===this.xs||this.xs.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.xs=t},enumerable:!0,configurable:!0}),kE.prototype.js=function(t,e){this.Us(),this.readTime=e,this.Os.set(t.key,t)},kE.prototype.Ls=function(t,e){this.Us(),e&&(this.readTime=e),this.Os.set(t,null)},kE.prototype.Bs=function(t,e){this.Us();var n=this.Os.get(e);return void 0!==n?dE.resolve(n):this.Ms(t,e)},kE.prototype.getEntries=function(t,e){return this.qs(t,e)},kE.prototype.apply=function(t){return this.Us(),this.Fs=!0,this.Qs(t)},kE.prototype.Us=function(){Um(!this.Fs,"Changes have already been applied.")},kE),mE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vE=(CE.prototype.Ws=function(t){this.Gs.push(t)},CE.prototype.zs=function(){this.Gs.forEach((function(t){return t()}))},CE),gE=(IE.Hs=function(t,e,n){return Um(IE.Js(),"IndexedDB not supported in current environment."),Om("SimpleDb","Opening database:",t),new dE((function(r,i){var o=window.indexedDB.open(t,e);o.onsuccess=function(t){r(new IE(t.target.result))},o.onblocked=function(){i(new $m(Xm.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;i("VersionError"===e.name?new $m(Xm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},o.onupgradeneeded=function(e){Om("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion),n.createOrUpgrade(e.target.result,o.transaction,e.oldVersion,AT).next((function(){Om("SimpleDb","Database upgrade to version "+AT+" complete")}))}})).Cs()},IE.delete=function(t){return Om("SimpleDb","Removing database:",t),OE(window.indexedDB.deleteDatabase(t)).Cs()},IE.Js=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(IE.Ys())return!0;if(void 0===window.navigator)return!1;var t=ks(),e=IE.Ks(t),n=0<e&&e<10,r=IE.Xs(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},IE.Ys=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.$s)},IE.Zs=function(t,e){return t.store(e)},IE.Ks=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},IE.Xs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},IE.prototype.to=function(t){this.db.onversionchange=function(e){return t(e)}},IE.prototype.runTransaction=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i,o,s,a,u;return fs(this,(function(c){switch(c.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,s=function(){var t,s,u,c;return fs(this,(function(l){switch(l.label){case 0:++o,t=wE.open(a.db,r?"readonly":"readwrite",e),l.label=1;case 1:return l.trys.push([1,3,,4]),(s=n(t).catch((function(e){return t.abort(e),dE.reject(e)})).Cs()).catch((function(){})),[4,t.no];case 2:return l.sent(),[2,{value:s}];case 3:return Om("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(u=l.sent()).message,c=i&&"FirebaseError"!==u.name&&o<3),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:return"object"==typeof(u=c.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},IE.prototype.close=function(){this.db.close()},IE),bE=(Object.defineProperty(SE.prototype,"As",{get:function(){return this.eo},enumerable:!0,configurable:!0}),Object.defineProperty(SE.prototype,"uo",{get:function(){return this.ro},enumerable:!0,configurable:!0}),Object.defineProperty(SE.prototype,"cursor",{set:function(t){this.io=t},enumerable:!0,configurable:!0}),SE.prototype.done=function(){this.eo=!0},SE.prototype.so=function(t){this.ro=t},SE.prototype.delete=function(){return OE(this.io.delete())},SE),wE=(TE.open=function(t,e,n){return new TE(t.transaction(n,e))},Object.defineProperty(TE.prototype,"no",{get:function(){return this.oo.promise},enumerable:!0,configurable:!0}),TE.prototype.abort=function(t){t&&this.oo.reject(t),this.aborted||(Om("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},TE.prototype.store=function(t){var e=this.transaction.objectStore(t);return Um(!!e,"Object store not part of transaction: "+t),new _E(e)},TE),_E=(EE.prototype.put=function(t,e){return OE(void 0!==e?(Om("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Om("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},EE.prototype.add=function(t){return Om("SimpleDb","ADD",this.store.name,t,t),OE(this.store.add(t))},EE.prototype.get=function(t){var e=this;return OE(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Om("SimpleDb","GET",e.store.name,t,n),n}))},EE.prototype.delete=function(t){return Om("SimpleDb","DELETE",this.store.name,t),OE(this.store.delete(t))},EE.prototype.count=function(){return Om("SimpleDb","COUNT",this.store.name),OE(this.store.count())},EE.prototype.ho=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.co(n,(function(t,e){r.push(e)})).next((function(){return r}))},EE.prototype.ao=function(t,e){Om("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.fo=!1;var r=this.cursor(n);return this.co(r,(function(t,e,n){return n.delete()}))},EE.prototype.lo=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.co(r,e)},EE.prototype.do=function(t){var e=this.cursor({});return new dE((function(n,r){e.onerror=function(t){var e=ME(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},EE.prototype.co=function(t,e){var n=[];return new dE((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new bE(i),s=e(i.primaryKey,i.value,o);if(s instanceof dE){var a=s.catch((function(t){return o.done(),dE.reject(t)}));n.push(a)}o.As?r():null===o.uo?i.continue():i.continue(o.uo)}else r()}})).next((function(){return dE.Ns(n)}))},EE.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(Um(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},EE.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.fo?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},EE);function EE(t){this.store=t}function TE(t){var e=this;this.transaction=t,this.aborted=!1,this.oo=new K_,this.transaction.oncomplete=function(){e.oo.resolve()},this.transaction.onabort=function(){t.error?e.oo.reject(t.error):e.oo.resolve()},this.transaction.onerror=function(t){var n=ME(t.target.error);e.oo.reject(n)}}function SE(t){this.io=t,this.eo=!1,this.ro=null}function IE(t){this.db=t,12.2===IE.Ks(ks())&&Lm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function CE(){this.Gs=[]}function kE(){this.Os=new fE((function(t){return t.toString()})),this.Fs=!1}function AE(t){var e=this;this.Es=null,this.Rs=null,this.result=void 0,this.error=void 0,this.As=!1,this.Ds=!1,t((function(t){e.As=!0,e.result=t,e.Es&&e.Es(t)}),(function(t){e.As=!0,e.error=t,e.Rs&&e.Rs(t)}))}function NE(t){this.Is=t,this.Ts={}}function xE(t,e){this.key=t,this._s=e}function DE(){this.cs=new rg(pE.Un),this.as=new rg(pE.fs)}function RE(t,e,n,r,i){this.batch=t,this.os=e,this.us=n,this.streamToken=r,this.hs=i}function PE(t,e,n,r){this.batchId=t,this.Fn=e,this.baseMutations=n,Um(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function OE(t){return new dE((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ME(t.target.error);n(e)}}))}var LE=!1;function ME(t){var e=gE.Ks(ks());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new $m("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return LE||(LE=!0,setTimeout((function(){throw r}),0)),r}}return t}var FE,UE,jE=(qE.po=function(t,e,n,r){return Um(""!==t.uid,"UserID must not be an empty string."),new qE(t.l()?t.uid:"",e,n,r)},qE.prototype.bo=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return WE(t).lo({index:FT.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},qE.prototype.yo=function(t,e,n){return this._o(t).next((function(e){return e.lastStreamToken=n.toBase64(),zE(t).put(e)}))},qE.prototype.Io=function(t){return this._o(t).next((function(t){return jw.fromBase64String(t.lastStreamToken)}))},qE.prototype.To=function(t,e){return this._o(t).next((function(n){return n.lastStreamToken=e.toBase64(),zE(t).put(n)}))},qE.prototype.Eo=function(t,e,n,r){var i=this,o=HE(t),s=WE(t);return s.add({}).next((function(a){Um("number"==typeof a,"Auto-generated key is not a number");for(var u=new cE(a,e,n,r),c=i.serializer.Ro(i.userId,u),l=[],h=new rg((function(t,e){return Bm(t.nt(),e.nt())})),p=0,f=r;p<f.length;p++){var d=f[p],y=qT.key(i.userId,d.key.path,a);h=h.add(d.key.path.H()),l.push(s.put(c)),l.push(o.put(y,qT.PLACEHOLDER))}return h.forEach((function(e){l.push(i.vo.Ao(t,e))})),t.Ws((function(){i.mo[a]=u.keys()})),dE.Ns(l).next((function(){return u}))}))},qE.prototype.Do=function(t,e){var n=this;return WE(t).get(e).next((function(t){return t?(Um(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Po(t)):null}))},qE.prototype.So=function(t,e){var n=this;return this.mo[e]?dE.resolve(this.mo[e]):this.Do(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r}return null}))},qE.prototype.Co=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return WE(t).lo({index:FT.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Um(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.Po(e)),i.done()})).next((function(){return o}))},qE.prototype.Vo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return WE(t).lo({index:FT.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},qE.prototype.No=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return WE(t).ho(FT.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Po(t)}))}))},qE.prototype.ko=function(t,e){var n=this,r=qT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return HE(t).lo({range:i},(function(r,i,s){var a=r[0],u=r[2],c=uE(r[1]);if(a===n.userId&&e.path.isEqual(c))return WE(t).get(u).next((function(t){if(!t)throw Fm("Dangling document-mutation reference found: "+r+" which points to "+u);Um(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.Po(t))}));s.done()})).next((function(){return o}))},qE.prototype.Oo=function(t,e){var n=this,r=new rg(Bm),i=[];return e.forEach((function(e){var o=qT.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=HE(t).lo({range:s},(function(t,i,o){var s=t[0],a=t[2],u=uE(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),dE.Ns(i).next((function(){return n.Fo(t,r)}))},qE.prototype.xo=function(t,e){var n=this;Um(!e.Gn(),"Document queries shouldn't go down this path"),Um(!e.bi(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=qT.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new rg(Bm);return HE(t).lo({range:s},(function(t,e,o){var s=t[0],u=t[2],c=uE(t[1]);s===n.userId&&r.$(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Fo(t,a)}))},qE.prototype.Fo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(WE(t).get(e).next((function(t){if(null===t)throw Fm("Dangling document-mutation reference found, which points to "+e);Um(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Po(t))})))})),dE.Ns(i).next((function(){return r}))},qE.prototype.jo=function(t,e){var n=this;return VE(t.Uo,this.userId,e).next((function(r){return t.Ws((function(){n.Lo(e.batchId)})),dE.forEach(r,(function(e){return n.wo.Bo(t,e)}))}))},qE.prototype.Lo=function(t){delete this.mo[t]},qE.prototype.Mo=function(t){var e=this;return this.bo(t).next((function(n){if(!n)return dE.resolve();var r=IDBKeyRange.lowerBound(qT.prefixForUser(e.userId)),i=[];return HE(t).lo({range:r},(function(t,n,r){if(t[0]===e.userId){var o=uE(t[1]);i.push(o)}else r.done()})).next((function(){Um(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.nt()})))}))}))},qE.prototype.ys=function(t,e){return BE(t,this.userId,e)},qE.prototype._o=function(t){var e=this;return zE(t).get(this.userId).next((function(t){return t||new MT(e.userId,-1,"")}))},qE);function qE(t,e,n,r){this.userId=t,this.serializer=e,this.vo=n,this.wo=r,this.mo={}}function BE(t,e,n){var r=qT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return HE(t).lo({range:o,fo:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function VE(t,e,n){var r=t.store(FT.store),i=t.store(qT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.lo({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Um(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var p=h[l],f=qT.key(e,p.key.path,n.batchId);o.push(i.delete(f)),c.push(p.key)}return dE.Ns(o).next((function(){return c}))}function WE(t){return dS.Zs(t,FT.store)}function HE(t){return dS.Zs(t,qT.store)}function zE(t){return dS.Zs(t,MT.store)}(UE=FE=FE||{})[UE.qo=0]="__PRIVATE_QueryCache",UE[UE.Qo=1]="__PRIVATE_SyncEngine";var GE=(tT.prototype.next=function(){var t=this.zo;return this.zo+=2,t},tT.prototype.after=function(t){return this.Wo(t+2),this.next()},tT.prototype.Wo=function(t){Um((1&t)===this.Go,"Cannot supply target ID from different generator ID"),this.zo=t},tT.Ko=function(){return new tT(FE.qo,2)},tT.Ho=function(){return new tT(FE.Qo)},tT),KE=(ZE.prototype.Xo=function(t,e){var n=this;return this.Yo.ko(t,e).next((function(r){return n.$o(t,e,r)}))},ZE.prototype.$o=function(t,e,n){return this.Jo.Bs(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Gt(e,t);return t}))},ZE.prototype.Zo=function(t,e,n){var r=Zw();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Gt(t,e);r=r.lt(t,e)})),r},ZE.prototype.th=function(t,e){var n=this;return this.Jo.getEntries(t,e).next((function(e){return n.nh(t,e)}))},ZE.prototype.nh=function(t,e){var n=this;return this.Yo.Oo(t,e).next((function(r){var i=n.Zo(t,e,r),o=Jw();return i.forEach((function(t,e){e=e||new Db(t,Mv.B()),o=o.lt(t,e)})),o}))},ZE.prototype.ih=function(t,e,n){return e.Gn()?this.eh(t,e.path):e.bi()?this.rh(t,e,n):this.uh(t,e,n)},ZE.prototype.eh=function(t,e){return this.Xo(t,new Bv(e)).next((function(t){var e=e_();return t instanceof xb&&(e=e.lt(t.key,t)),e}))},ZE.prototype.rh=function(t,e,n){var r=this;Um(e.path.J(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=e_();return this.vo.sh(t,i).next((function(s){return dE.forEach(s,(function(s){var a=e.hi(s.child(i));return r.uh(t,a,n).next((function(t){t.forEach((function(t,e){o=o.lt(t,e)}))}))})).next((function(){return o}))}))},ZE.prototype.uh=function(t,e,n){var r,i,o=this;return this.Jo.ih(t,e,n).next((function(n){return r=n,o.Yo.xo(t,e)})).next((function(e){return o.oh(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=u.Gt(l,l,o.Fn);r=h instanceof xb?r.lt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},ZE.prototype.oh=function(t,e,n){for(var r=o_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Lg&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Jo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof xb&&(c=c.lt(t,e))})),c}))},ZE),QE=(JE.fh=function(t,e){for(var n=o_(),r=o_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case u_.Mi:n=n.add(s.doc.key);break;case u_.qi:r=r.add(s.doc.key)}}return new JE(t,e.fromCache,n,r)},JE),YE="LocalStore",XE=($E.prototype.start=function(){return this.Dh()},$E.prototype.Ph=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i=this;return fs(this,(function(o){switch(o.label){case 0:return e=this.Yo,n=this.Eh,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.Yo.No(r).next((function(s){return o=s,e=i.persistence.bh(t),n=new KE(i.yh,e,i.persistence.Rh()),e.No(r)})).next((function(t){for(var e=[],i=[],s=o_(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var p=h[l];s=s.add(p.key)}}for(var f=0,d=t;f<d.length;f++){i.push((c=d[f]).batchId);for(var y=0,m=c.mutations;y<m.length;y++)s=s.add((p=m[y]).key)}return n.th(r,s).next((function(t){return{Sh:t,Ch:e,Vh:i}}))}))}))];case 1:return r=o.sent(),this.Yo=e,this.Eh=n,this.lh.Ah(this.Eh),[2,r]}}))}))},$E.prototype.Nh=function(t){var e,n=this,r=Lv.now(),i=t.reduce((function(t,e){return t.add(e.key)}),o_());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.Eh.th(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=c.sn(e.get(c.key));null!=l&&s.push(new Lg(c.key,l,l.on(),Rg.exists(!0)))}return n.Yo.Eo(o,r,s,t)}))})).then((function(t){var n=t.ss(e);return{batchId:t.batchId,Os:n}}))},$E.prototype.kh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.Yo.So(n,t).next((function(t){return t?e.Eh.th(n,t):dE.resolve(null)}))}))},$E.prototype.yo=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.yh.Oh({Fh:!0});return e.Yo.yo(n,t.batch,t.streamToken).next((function(){return e.xh(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.Yo.Mo(n)})).next((function(){return e.Eh.th(n,r)}))}))},$E.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.Yo.Do(n,t).next((function(t){return Um(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.Yo.jo(n,t)})).next((function(){return e.Yo.Mo(n)})).next((function(){return e.Eh.th(n,r)}))}))},$E.prototype.Vo=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.Yo.Vo(e)}))},$E.prototype.Io=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.Yo.Io(e)}))},$E.prototype.To=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.Yo.To(n,t)}))},$E.prototype.Uh=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.Ih.Uh(e)}))},$E.prototype.Lh=function(t){var e=this,n=t.Oi,r=this.vh;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=e.yh.Oh({Fh:!0});r=e.vh;var s=[];hv(t.te,(function(t,o){var a=r.get(t);if(a){s.push(e.Ih.Bh(i,o.ce,t).next((function(){return e.Ih.Mh(i,o.oe,t)})));var u=o.resumeToken;if(0<u.Cn()){var c=a.xi(u,n).Fi(i.qh);r=r.lt(t,c),$E.Qh(a,c,o)&&s.push(e.Ih.Gh(i,c))}}}));var a=Jw(),u=o_();if(t.ie.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(i,u).next((function(r){t.ie.forEach((function(u,c){var l=r.get(u);c instanceof Db&&c.version.isEqual(Mv.MIN)?(o.Ls(u,n),a=a.lt(u,c)):null==l||0<c.version.h(l.version)||0===c.version.h(l.version)&&l.hasPendingWrites?(Um(!Mv.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.js(c,n),a=a.lt(u,c)):Om(YE,"Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.ee.has(u)&&s.push(e.persistence.wo.Wh(i,u))}))}))),!n.isEqual(Mv.MIN)){var c=e.Ih.Uh(i).next((function(t){return Um(0<=n.h(t),"Watch stream reverted to previous snapshot?? "+n+" < "+t),e.Ih.zh(i,i.qh,n)}));s.push(c)}return dE.Ns(s).next((function(){return o.apply(i)})).next((function(){return e.Eh.nh(i,a)}))})).then((function(t){return e.vh=r,t}))},$E.Qh=function(t,e,n){return Um(0<e.resumeToken.Cn(),"Attempted to persist target data with no resume token"),0===t.resumeToken.Cn()||e.Oi.M()-t.Oi.M()>=this.Kh||0<n.oe.size+n.he.size+n.ce.size},$E.prototype.Hh=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.dh.ds(i.hh,o),this.dh.ms(i.ah,o),!i.fromCache){var s=this.vh.get(o);Um(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.ji(s.Oi);this.vh=this.vh.lt(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return dE.forEach(t,(function(t){return dE.forEach(t.ah,(function(t){return e.persistence.wo.vs(n,t)}))}))}))},$E.prototype.Jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.Yo.Co(n,t)}))},$E.prototype.Yh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.Eh.Xo(n,t)}))},$E.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.Ih.$h(n,t).next((function(i){return i?dE.resolve(r=i):e.Ih.Zh(n).next((function(i){return r=new zw(t,i,Fw.Ci,n.qh),e.Ih.tc(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.vh.get(n.targetId)&&(e.vh=e.vh.lt(n.targetId,n),e.wh.set(t,n.targetId)),n}))},$E.prototype.$h=function(t,e){var n=this.wh.get(e);return void 0!==n?dE.resolve(this.vh.get(n)):this.Ih.$h(t,e)},$E.prototype.nc=function(t,e){var n=this,r=this.vh.get(t);return Um(null!==r,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.dh.ps(t);return e?dE.resolve():dE.forEach(o,(function(t){return n.persistence.wo.vs(i,t)})).next((function(){n.persistence.wo.removeTarget(i,r)}))})).then((function(){n.vh=n.vh.remove(t),n.wh.delete(r.target)}))},$E.prototype.ic=function(t,e){var n=this,r=Mv.MIN,i=o_();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.$h(o,t.ai()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Ih.ec(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.lh.ih(o,t,e?r:Mv.MIN,e?i:o_())})).next((function(t){return{documents:t,rc:i}}))}))},$E.prototype.uc=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.Ih.ec(n,t)}))},$E.prototype.sc=function(){return this.persistence.sc()},$E.prototype.oc=function(t){this.Yo.Lo(t)},$E.prototype.hc=function(t){this.persistence.hc(t)},$E.prototype.xh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=dE.resolve();return o.forEach((function(r){s=s.next((function(){return n.Bs(t,r)})).next((function(t){var o=t,s=e.hs.get(r);Um(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.h(s)<0)&&((o=i.Wt(r,o,e))?n.js(o,e.os):Um(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return r.Yo.jo(t,i)}))},$E.prototype.cc=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.ac(n,e.vh)}))},$E.prototype.fc=function(t){var e=this,n=this.vh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.Ih.Xe(n,t).next((function(t){return t?t.target:null}))}))},$E.prototype.lc=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.yh.lc(e,t.mh)})).then((function(e){var n=e.dc;return t.mh=e.readTime,n}))},$E.prototype.Dh=function(){return ps(this,void 0,void 0,(function(){var t,e=this;return fs(this,(function(n){switch(n.label){case 0:return[4,(t=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.yh.vc(t)}))];case 1:return t.mh=n.sent(),[2]}}))}))},$E.Kh=3e8,$E);function $E(t,e,n){this.persistence=t,this.lh=e,this.dh=new hE,this.vh=new Vv(Bm),this.wh=new fE((function(t){return t.canonicalId()})),this.mh=Mv.MIN,Um(t.ph,"LocalStore was passed an unstarted persistence implementation"),this.persistence.wo.gh(this.dh),this.Yo=t.bh(n),this.yh=t._h(),this.Ih=t.Th(),this.Eh=new KE(this.yh,this.Yo,this.persistence.Rh()),this.lh.Ah(this.Eh)}function JE(t,e,n,r){this.targetId=t,this.fromCache=e,this.hh=n,this.ah=r}function ZE(t,e,n){this.Jo=t,this.Yo=e,this.vo=n}function tT(t,e){Um((1&(this.Go=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.Wo(void 0!==e?e:this.Go)}function eT(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){if(t.code!==Xm.FAILED_PRECONDITION||t.message!==mE)throw t;return Om(YE,"Unexpectedly lost primary lease"),[2]}))}))}function nT(t,e){var n=t[1],r=e[1],i=Bm(t[0],e[0]);return 0===i?Bm(n,r):i}var rT=(fT.prototype.pc=function(){return++this.mc},fT.prototype.gc=function(t){var e=[t,this.pc()];if(this.buffer.size<this.wc)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();nT(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(fT.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),fT),iT={bc:!1,yc:0,_c:0,Ic:0},oT=(pT.Ac=function(t){return new pT(t,pT.Dc,pT.Pc)},pT.Sc=-1,pT.Cc=1048576,pT.Nc=new pT(pT.Vc=41943040,pT.Dc=10,pT.Pc=1e3),pT.DISABLED=new pT(pT.Sc,0,0),pT),sT=(hT.prototype.start=function(){Um(null===this.xc,"Cannot start an already started LruScheduler"),this.kc.params.Tc!==oT.Sc&&this.jc()},hT.prototype.stop=function(){this.xc&&(this.xc.cancel(),this.xc=null)},Object.defineProperty(hT.prototype,"ph",{get:function(){return null!==this.xc},enumerable:!0,configurable:!0}),hT.prototype.jc=function(){var t=this;Um(null===this.xc,"Cannot schedule GC while a task is pending");var e=this.Fc?3e5:6e4;Om("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.xc=this.Su.Xu(Q_.Du,e,(function(){return t.xc=null,t.Fc=!0,t.Oc.cc(t.kc).then((function(){return t.jc()})).catch(eT)}))},hT),aT=(lT.prototype.Lc=function(t,e){return this.Uc.Bc(t).next((function(t){return Math.floor(e/100*t)}))},lT.prototype.Mc=function(t,e){var n=this;if(0===e)return dE.resolve(J_.bu);var r=new rT(e);return this.Uc.Be(t,(function(t){return r.gc(t.sequenceNumber)})).next((function(){return n.Uc.qc(t,(function(t){return r.gc(t)}))})).next((function(){return r.maxValue}))},lT.prototype.Qc=function(t,e,n){return this.Uc.Qc(t,e,n)},lT.prototype.Gc=function(t,e){return this.Uc.Gc(t,e)},lT.prototype.ac=function(t,e){var n=this;return this.params.Tc===oT.Sc?(Om("LruGarbageCollector","Garbage collection skipped; disabled"),dE.resolve(iT)):this.Wc(t).next((function(r){return r<n.params.Tc?(Om("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Tc),iT):n.zc(t,e)}))},lT.prototype.Wc=function(t){return this.Uc.Wc(t)},lT.prototype.zc=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Lc(t,this.params.Ec).next((function(e){return r=e>c.params.Rc?(Om("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Rc+" from "+e),c.params.Rc):e,o=Date.now(),c.Mc(t,r)})).next((function(r){return n=r,s=Date.now(),c.Qc(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Gc(t,n)})).next((function(t){return u=Date.now(),Rm()<=Em.DEBUG&&Om("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),dE.resolve({bc:!0,yc:r,_c:i,Ic:t})}))},lT),uT=(cT.prototype.Zh=function(t){var e=this;return this.Hc(t).next((function(n){return n.highestTargetId=e.Kc.after(n.highestTargetId),e.Jc(t,n).next((function(){return n.highestTargetId}))}))},cT.prototype.Uh=function(t){return this.Hc(t).next((function(t){return Mv.L(new Lv(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},cT.prototype.Yc=function(t){return mT(t.Uo)},cT.prototype.zh=function(t,e,n){var r=this;return this.Hc(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.q()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Jc(t,i)}))},cT.prototype.tc=function(t,e){var n=this;return this.Xc(t,e).next((function(){return n.Hc(t).next((function(r){return r.targetCount+=1,n.$c(e,r),n.Jc(t,r)}))}))},cT.prototype.Gh=function(t,e){return this.Xc(t,e)},cT.prototype.Zc=function(t,e){var n=this;return this.ta(t,e.targetId).next((function(){return dT(t).delete(e.targetId)})).next((function(){return n.Hc(t)})).next((function(e){return Um(0<e.targetCount,"Removing from an empty target cache"),e.targetCount-=1,n.Jc(t,e)}))},cT.prototype.Qc=function(t,e,n){var r=this,i=0,o=[];return dT(t).lo((function(s,a){var u=r.serializer.na(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Zc(t,u)))})).next((function(){return dE.Ns(o)})).next((function(){return i}))},cT.prototype.Be=function(t,e){var n=this;return dT(t).lo((function(t,r){var i=n.serializer.na(r);e(i)}))},cT.prototype.Hc=function(t){return yT(t.Uo)},cT.prototype.Jc=function(t,e){return(n=t,dS.Zs(n,XT.store)).put(XT.key,e);var n},cT.prototype.Xc=function(t,e){return dT(t).put(this.serializer.ia(e))},cT.prototype.$c=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},cT.prototype.ea=function(t){return this.Hc(t).next((function(t){return t.targetCount}))},cT.prototype.$h=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return dT(t).lo({range:i,index:QT.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.na(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},cT.prototype.Mh=function(t,e,n){var r=this,i=[],o=vT(t);return e.forEach((function(e){var s=oE(e.path);i.push(o.put(new YT(n,s))),i.push(r.wo.ls(t,e))})),dE.Ns(i)},cT.prototype.Bh=function(t,e,n){var r=this,i=vT(t);return dE.forEach(e,(function(e){var o=oE(e.path);return dE.Ns([i.delete([n,o]),r.wo.vs(t,e)])}))},cT.prototype.ta=function(t,e){var n=vT(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},cT.prototype.ec=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=vT(t),i=o_();return r.lo({range:n,fo:!0},(function(t,e,n){var r=uE(t[1]),o=new Bv(r);i=i.add(o)})).next((function(){return i}))},cT.prototype.ys=function(t,e){var n=oE(e.path),r=IDBKeyRange.bound([n],[Wm(n)],!1,!0),i=0;return vT(t).lo({index:YT.documentTargetsIndex,fo:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return 0<i}))},cT.prototype.Xe=function(t,e){var n=this;return dT(t).get(e).next((function(t){return t?n.serializer.na(t):null}))},cT);function cT(t,e){this.wo=t,this.serializer=e,this.Kc=GE.Ko()}function lT(t,e){this.Uc=t,this.params=e}function hT(t,e,n){this.kc=t,this.Su=e,this.Oc=n,this.Fc=!1,this.xc=null}function pT(t,e,n){this.Tc=t,this.Ec=e,this.Rc=n}function fT(t){this.wc=t,this.buffer=new rg(nT),this.mc=0}function dT(t){return dS.Zs(t,QT.store)}function yT(t){return gE.Zs(t,XT.store).get(XT.key).next((function(t){return Um(null!==t,"Missing metadata row."),t}))}function mT(t){return yT(t).next((function(t){return t.highestListenSequenceNumber}))}function vT(t){return dS.Zs(t,YT.store)}var gT,bT=(wT.prototype.js=function(t,e,n){return TT(t).put(ST(e),n)},wT.prototype.Ls=function(t,e){var n=TT(t),r=ST(e);return n.delete(r)},wT.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ra(t,r)}))},wT.prototype.Bs=function(t,e){var n=this;return TT(t).get(ST(e)).next((function(t){return n.ua(t)}))},wT.prototype.sa=function(t,e){var n=this;return TT(t).get(ST(e)).next((function(t){var e=n.ua(t);return e?{oa:e,size:IT(t)}:null}))},wT.prototype.getEntries=function(t,e){var n=this,r=Zw();return this.ha(t,e,(function(t,e){var i=n.ua(e);r=r.lt(t,i)})).next((function(){return r}))},wT.prototype.ca=function(t,e){var n=this,r=Zw(),i=new Vv(Bv.G);return this.ha(t,e,(function(t,e){var o=n.ua(e);i=o?(r=r.lt(t,o),i.lt(t,IT(e))):(r=r.lt(t,null),i.lt(t,0))})).next((function(){return{aa:r,fa:i}}))},wT.prototype.ha=function(t,e,n){if(e.J())return dE.resolve();var r=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),i=e.bt(),o=i.Rt();return TT(t).lo({range:r},(function(t,e,r){for(var s=Bv.at(t);o&&Bv.G(o,s)<0;)n(o,null),o=i.Rt();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.Rt():null),o?r.so(o.path.tt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.Rt():null}))},wT.prototype.ih=function(t,e,n){var r=this;Um(!e.bi(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=e_(),o=e.path.length+1,s={};if(n.isEqual(Mv.MIN)){var a=e.path.tt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.tt(),c=this.serializer.la(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=HT.collectionReadTimeIndex}return TT(t).lo(s,(function(t,n,s){if(t.length===o){var a=r.serializer.da(n);e.path.$(a.key.path)?a instanceof xb&&e.matches(a)&&(i=i.lt(a.key,a)):s.done()}})).next((function(){return i}))},wT.prototype.lc=function(t,e){var n=this,r=Jw(),i=this.serializer.la(e),o=TT(t),s=IDBKeyRange.lowerBound(i,!0);return o.lo({index:HT.readTimeIndex,range:s},(function(t,e){var o=n.serializer.da(e);r=r.lt(o.key,o),i=e.readTime})).next((function(){return{dc:r,readTime:n.serializer.va(i)}}))},wT.prototype.vc=function(t){var e=this,n=TT(t),r=Mv.MIN;return n.lo({index:HT.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.va(n.readTime)),i.done()})).next((function(){return r}))},wT.prototype.Oh=function(t){return new wT.wa(this,!!t&&t.Fh)},wT.prototype.ma=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},wT.prototype.getMetadata=function(t){return ET(t).get(zT.key).next((function(t){return Um(!!t,"Missing document cache metadata"),t}))},wT.prototype.ra=function(t,e){return ET(t).put(zT.key,e)},wT.prototype.ua=function(t){if(t){var e=this.serializer.da(t);return e instanceof Db&&e.version.isEqual(Mv.B())?null:e}return null},wT.wa=(ls(_T,gT=yE),_T.prototype.Qs=function(t){var e=this,n=[],r=0,i=new rg((function(t,e){return Bm(t.nt(),e.nt())}));return this.Os.forEach((function(o,s){var a=e.ga.get(o);if(Um(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){Um(!e.readTime.isEqual(Mv.MIN),"Cannot add a document with a read time of zero");var u=e.pa.serializer.ba(s,e.readTime);i=i.add(o.path.H());var c=IT(u);r+=c-a,n.push(e.pa.js(t,o,u))}else if(r-=a,e.Fh){var l=e.pa.serializer.ba(new Db(o,Mv.B()),e.readTime);n.push(e.pa.js(t,o,l))}else n.push(e.pa.Ls(t,o))})),i.forEach((function(r){n.push(e.pa.vo.Ao(t,r))})),n.push(this.pa.updateMetadata(t,r)),dE.Ns(n)},_T.prototype.Ms=function(t,e){var n=this;return this.pa.sa(t,e).next((function(t){return null===t?(n.ga.set(e,0),null):(n.ga.set(e,t.size),t.oa)}))},_T.prototype.qs=function(t,e){var n=this;return this.pa.ca(t,e).next((function(t){var e=t.aa;return t.fa.forEach((function(t,e){n.ga.set(t,e)})),e}))},_T),wT);function wT(t,e){this.serializer=t,this.vo=e}function _T(t,e){var n=gT.call(this)||this;return n.pa=t,n.Fh=e,n.ga=new fE((function(t){return t.toString()})),n}function ET(t){return dS.Zs(t,zT.store)}function TT(t){return dS.Zs(t,HT.store)}function ST(t){return t.path.tt()}function IT(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Fm("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var CT=(RT.prototype.Ao=function(t,e){return this.ya.add(e),dE.resolve()},RT.prototype.sh=function(t,e){return dE.resolve(this.ya.getEntries(e))},RT),kT=(DT.prototype.add=function(t){Um(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new rg(Uv.G),i=!r.has(n);return this.index[e]=r.add(n),i},DT.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},DT.prototype.getEntries=function(t){return(this.index[t]||new rg(Uv.G)).tt()},DT),AT=9,NT=(xT.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Um(n<r&&0<=n&&r<=AT,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o,s=new wE(e);n<1&&1<=r&&(t.createObjectStore(OT.store),(o=t).createObjectStore(MT.store,{keyPath:MT.keyPath}),o.createObjectStore(FT.store,{keyPath:FT.keyPath,autoIncrement:!0}).createIndex(FT.userMutationsIndex,FT.userMutationsKeyPath,{unique:!0}),o.createObjectStore(qT.store),nS(t),t.createObjectStore(HT.store));var a,u=dE.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(YT.store),a.deleteObjectStore(QT.store),a.deleteObjectStore(XT.store),nS(t)),u=u.next((function(){return t=s.store(XT.store),e=new XT(0,0,Mv.MIN.q(),0),t.put(XT.key,e);var t,e}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return e=t,(n=s).store(FT.store).ho().next((function(t){e.deleteObjectStore(FT.store),e.createObjectStore(FT.store,{keyPath:FT.keyPath,autoIncrement:!0}).createIndex(FT.userMutationsIndex,FT.userMutationsKeyPath,{unique:!0});var r=n.store(FT.store),i=t.map((function(t){return r.put(t)}));return dE.Ns(i)}));var e,n}))),u=u.next((function(){t.createObjectStore(rS.store,{keyPath:rS.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&6<=r&&(u=u.next((function(){return t.createObjectStore(zT.store),i.addDocumentGlobal(s)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=t).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(HT.store)).createIndex(HT.readTimeIndex,HT.readTimeIndexPath,{unique:!1}),n.createIndex(HT.collectionReadTimeIndex,HT.collectionReadTimeIndexPath,{unique:!1})}))),u},xT.prototype.addDocumentGlobal=function(t){var e=0;return t.store(HT.store).lo((function(t,n){e+=IT(n)})).next((function(){var n=new zT(e);return t.store(zT.store).put(zT.key,n)}))},xT.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(MT.store),r=t.store(FT.store);return n.ho().next((function(n){return dE.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ho(FT.userMutationsIndex,i).next((function(r){return dE.forEach(r,(function(r){Um(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.Po(r);return VE(t,n.userId,i).next((function(){}))}))}))}))}))},xT.prototype.ensureSequenceNumbers=function(t){var e=t.store(YT.store),n=t.store(HT.store);return mT(t).next((function(t){var r=[];return n.lo((function(n,i){var o=new Uv(n),s=[0,oE(o)];r.push(e.get(s).next((function(n){return n?dE.resolve():e.put(new YT(0,oE(o),t))})))})).next((function(){return dE.Ns(r)}))}))},xT.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.X(),n=t.H();return r.put({collectionId:e,parent:oE(n)})}}t.createObjectStore($T.store,{keyPath:$T.keyPath});var r=e.store($T.store),i=new kT;return e.store(HT.store).lo({fo:!0},(function(t,e){return n(new Uv(t).H())})).next((function(){return e.store(qT.store).lo({fo:!0},(function(t,e){return n(uE(t[1]).H())}))}))},xT);function xT(t){this.serializer=t}function DT(){this.index={}}function RT(){this.ya=new kT}function PT(t,e){this.seconds=t,this.nanoseconds=e}var OT=(LT.store="owner",LT.key="owner",LT);function LT(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var MT=(jT.store="mutationQueues",jT.keyPath="userId",jT),FT=(UT.store="mutations",UT.keyPath="batchId",UT.userMutationsIndex="userMutationsIndex",UT.userMutationsKeyPath=["userId","batchId"],UT);function UT(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function jT(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var qT=(BT.prefixForUser=function(t){return[t]},BT.prefixForPath=function(t,e){return[t,oE(e)]},BT.key=function(t,e,n){return[t,oE(e),n]},BT.store="documentMutations",BT.PLACEHOLDER=new BT,BT);function BT(){}function VT(t,e){this.path=t,this.readTime=e}function WT(t,e){this.path=t,this.version=e}var HT=(KT.store="remoteDocuments",KT.readTimeIndex="readTimeIndex",KT.readTimeIndexPath="readTime",KT.collectionReadTimeIndex="collectionReadTimeIndex",KT.collectionReadTimeIndexPath=["parentPath","readTime"],KT),zT=(GT.store="remoteDocumentGlobal",GT.key="remoteDocumentGlobalKey",GT);function GT(t){this.byteSize=t}function KT(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var QT=(eS.store="targets",eS.keyPath="targetId",eS.queryTargetsIndexName="queryTargetsIndex",eS.queryTargetsKeyPath=["canonicalId","targetId"],eS),YT=(tS.store="targetDocuments",tS.keyPath=["targetId","path"],tS.documentTargetsIndex="documentTargetsIndex",tS.documentTargetsKeyPath=["path","targetId"],tS),XT=(ZT.key="targetGlobalKey",ZT.store="targetGlobal",ZT),$T=(JT.store="collectionParents",JT.keyPath=["collectionId","parent"],JT);function JT(t,e){this.collectionId=t,this.parent=e}function ZT(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function tS(t,e,n){this.targetId=t,this.path=e,Um(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function eS(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}function nS(t){t.createObjectStore(YT.store,{keyPath:YT.keyPath}).createIndex(YT.documentTargetsIndex,YT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(QT.store,{keyPath:QT.keyPath}).createIndex(QT.queryTargetsIndexName,QT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(XT.store)}var rS=(iS.store="clientMetadata",iS.keyPath="clientId",iS);function iS(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var oS=vs(vs(vs([MT.store,FT.store,qT.store,HT.store,QT.store,OT.store,XT.store,YT.store],[rS.store]),[zT.store]),[$T.store]),sS=(aS.prototype.Ao=function(t,e){var n=this;if(Um(e.length%2==1,"Expected a collection path."),this._a.has(e))return dE.resolve();var r=e.X(),i=e.H();t.Ws((function(){n._a.add(e)}));var o={collectionId:r,parent:oE(i)};return uS(t).put(o)},aS.prototype.sh=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Wm(e),""],!1,!0);return uS(t).ho(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(uE(o.parent))}return n}))},aS);function aS(){this._a=new kT}function uS(t){return dS.Zs(t,$T.store)}var cS=(lS.prototype.da=function(t){if(t.document)return this.Ia.Rr(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Bv.at(t.noDocument.path),n=this.Ta(t.noDocument.readTime);return new Db(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=Bv.at(t.unknownDocument.path),n=this.Ta(t.unknownDocument.version),new Rb(e,n)):Fm("Unexpected DbRemoteDocument")},lS.prototype.ba=function(t,e){var n=this.la(e),r=t.key.path.H().tt();if(t instanceof xb){var i=t.proto?t.proto:this.Ia.Er(t),o=t.hasCommittedMutations;return new HT(null,null,i,o,n,r)}if(t instanceof Db){var s=t.key.path.tt(),a=this.Ea(t.version);return o=t.hasCommittedMutations,new HT(null,new VT(s,a),null,o,n,r)}if(t instanceof Rb){s=t.key.path.tt();var u=this.Ea(t.version);return new HT(new WT(s,u),null,null,!0,n,r)}return Fm("Unexpected MaybeDocument")},lS.prototype.la=function(t){var e=t.q();return[e.seconds,e.nanoseconds]},lS.prototype.va=function(t){var e=new Lv(t[0],t[1]);return Mv.L(e)},lS.prototype.Ea=function(t){var e=t.q();return new PT(e.seconds,e.nanoseconds)},lS.prototype.Ta=function(t){var e=new Lv(t.seconds,t.nanoseconds);return Mv.L(e)},lS.prototype.Ro=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Ia.Or(t)})),i=e.mutations.map((function(t){return n.Ia.Or(t)}));return new FT(t,e.batchId,e.Fn.toMillis(),r,i)},lS.prototype.Po=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Ia.Ur(t)})),r=t.mutations.map((function(t){return e.Ia.Ur(t)})),i=Lv.fromMillis(t.localWriteTimeMs);return new cE(t.batchId,i,n,r)},lS.prototype.Ra=function(t){var e=[];return t.forEach((function(t){e.push(oE(t.path))})),e},lS.prototype.Aa=function(t){for(var e=o_(),n=0,r=t;n<r.length;n++)e=e.add(new Bv(uE(r[n])));return e},lS.prototype.na=function(t){var e,n=this.Ta(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Ta(t.lastLimboFreeSnapshotVersion):Mv.MIN;return e=void 0!==t.query.documents?this.Ia.Wr(t.query):this.Ia.Yr(t.query),new zw(e,t.targetId,Fw.Ci,t.lastListenSequenceNumber,n,r,jw.fromBase64String(t.resumeToken))},lS.prototype.ia=function(t){Um(Fw.Ci===t.ki,"Only queries with purpose "+Fw.Ci+" may be stored, got "+t.ki);var e,n=this.Ea(t.Oi),r=this.Ea(t.lastLimboFreeSnapshotVersion);e=t.target.Gn()?this.Ia.Gr(t.target):this.Ia.zr(t.target);var i=t.resumeToken.toBase64();return new QT(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},lS);function lS(t){this.Ia=t}var hS,pS="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",fS=(ls(mS,hS=vE),mS),dS=(yS.Zs=function(t,e){if(t instanceof fS)return gE.Zs(t.Uo,e);throw Fm("IndexedDbPersistence must use instances of IndexedDbTransaction")},yS.Ua=function(t){return ps(this,void 0,void 0,(function(){var e;return fs(this,(function(n){switch(n.label){case 0:if(!yS.Js())throw new $m(Xm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new yS(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.La,t.Da,t.serializer,t.Pa)).start()];case 1:return n.sent(),[2,e]}}))}))},yS.prototype.start=function(){var t=this;return Um(!this.ph,"IndexedDbPersistence double-started!"),Um(null!==this.window,"Expected 'window' to be defined"),gE.Hs(this.Fa,AT,new NT(this.serializer)).then((function(e){return t.Ba=e,t.Ma()})).then((function(){return t.qa(),t.Qa(),t.Ga(),t.Ba.runTransaction("readonly-idempotent",[XT.store],(function(t){return mT(t)}))})).then((function(e){t.Wa=new J_(e,t.Pa)})).then((function(){t.Sa=!0})).catch((function(e){return t.Ba&&t.Ba.close(),Promise.reject(e)}))},yS.prototype.za=function(t){var e=this;return this.Oa=function(n){return ps(e,void 0,void 0,(function(){return fs(this,(function(e){return this.ph?[2,t(n)]:[2]}))}))},t(this.isPrimary)},yS.prototype.Ka=function(t){var e=this;this.Ba.to((function(n){return ps(e,void 0,void 0,(function(){return fs(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},yS.prototype.hc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Da.Uu((function(){return ps(e,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.ph?[4,this.Ma()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},yS.prototype.Ma=function(){var t=this;return this.Ba.runTransaction("readwrite-idempotent",oS,(function(e){return gS(e).put(new rS(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Ha(e).next((function(e){e||(t.isPrimary=!1,t.Da.Uu((function(){return t.Oa(!1)})))}))})).next((function(){return t.Ja(e)})).next((function(n){return t.isPrimary&&!n?t.Ya(e).next((function(){return!1})):!!n&&t.Xa(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return Om("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Da.Uu((function(){return t.Oa(e)})),t.isPrimary=e}))},yS.prototype.Ha=function(t){var e=this;return vS(t).get(OT.key).next((function(t){return dE.resolve(e.$a(t))}))},yS.prototype.Za=function(t){return gS(t).delete(this.clientId)},yS.prototype.tf=function(){return ps(this,void 0,void 0,(function(){var t=this;return fs(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.nf(this.ka,18e5)?[3,2]:(this.ka=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(e){var n=yS.Zs(e,rS.store);return n.ho().next((function(e){var r=t.if(e,18e5),i=e.filter((function(t){return-1===r.indexOf(t)}));return dE.forEach(i,(function(t){return n.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:e.sent().forEach((function(e){t.window.localStorage.removeItem(t.ef(e.clientId))})),e.label=2;case 2:return[2]}}))}))},yS.prototype.Ga=function(){var t=this;this.Na=this.Da.Xu(Q_.Au,4e3,(function(){return t.Ma().then((function(){return t.tf()})).then((function(){return t.Ga()}))}))},yS.prototype.$a=function(t){return!!t&&t.ownerId===this.clientId},yS.prototype.Ja=function(t){var e=this;return vS(t).get(OT.key).next((function(n){if(null!==n&&e.nf(n.leaseTimestampMs,5e3)&&!e.rf(n.ownerId)){if(e.$a(n)&&e.networkEnabled)return!0;if(!e.$a(n)){if(!n.allowTabSynchronization)throw new $m(Xm.FAILED_PRECONDITION,pS);return!1}}return!(!e.networkEnabled||!e.inForeground)||gS(t).ho().next((function(t){return void 0===e.if(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Om("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},yS.prototype.shutdown=function(){return ps(this,void 0,void 0,(function(){var t=this;return fs(this,(function(e){switch(e.label){case 0:return this.Sa=!1,this.uf(),this.Na&&(this.Na.cancel(),this.Na=null),this.sf(),this.hf(),[4,this.Ba.runTransaction("readwrite-idempotent",[OT.store,rS.store],(function(e){return t.Ya(e).next((function(){return t.Za(e)}))}))];case 1:return e.sent(),this.Ba.close(),this.cf(),[2]}}))}))},yS.prototype.if=function(t,e){var n=this;return t.filter((function(t){return n.nf(t.updateTimeMs,e)&&!n.rf(t.clientId)}))},yS.prototype.sc=function(){var t=this;return this.Ba.runTransaction("readonly-idempotent",[rS.store],(function(e){return gS(e).ho().next((function(e){return t.if(e,18e5).map((function(t){return t.clientId}))}))}))},yS.clearPersistence=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){switch(e.label){case 0:return yS.Js()?[4,gE.delete(t+yS.xa)]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(yS.prototype,"ph",{get:function(){return this.Sa},enumerable:!0,configurable:!0}),yS.prototype.bh=function(t){return Um(this.ph,"Cannot initialize MutationQueue before persistence is started."),jE.po(t,this.serializer,this.vo,this.wo)},yS.prototype.Th=function(){return Um(this.ph,"Cannot initialize TargetCache before persistence is started."),this.Ih},yS.prototype._h=function(){return Um(this.ph,"Cannot initialize RemoteDocumentCache before persistence is started."),this.Jo},yS.prototype.Rh=function(){return Um(this.ph,"Cannot initialize IndexManager before persistence is started."),this.vo},yS.prototype.runTransaction=function(t,e,n){var r=this;Om("IndexedDbPersistence","Starting transaction:",t);var i,o=e.endsWith("idempotent"),s=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.Ba.runTransaction(s,oS,(function(o){return i=new fS(o,r.Wa.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.Ha(o).next((function(t){return!!t||r.Ja(o)})).next((function(e){if(!e)throw Lm("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Da.Uu((function(){return r.Oa(!1)})),new $m(Xm.FAILED_PRECONDITION,mE);return n(i)})).next((function(t){return r.Xa(o).next((function(){return t}))})):r.af(o).next((function(){return n(i)}))})).then((function(t){return i.zs(),t}))},yS.prototype.af=function(t){var e=this;return vS(t).get(OT.key).next((function(t){if(null!==t&&e.nf(t.leaseTimestampMs,5e3)&&!e.rf(t.ownerId)&&!e.$a(t)&&!t.allowTabSynchronization)throw new $m(Xm.FAILED_PRECONDITION,pS)}))},yS.prototype.Xa=function(t){var e=new OT(this.clientId,this.allowTabSynchronization,Date.now());return vS(t).put(OT.key,e)},yS.Js=function(){return gE.Js()},yS.ff=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},yS.prototype.Ya=function(t){var e=this,n=vS(t);return n.get(OT.key).next((function(t){return e.$a(t)?(Om("IndexedDbPersistence","Releasing primary lease."),n.delete(OT.key)):dE.resolve()}))},yS.prototype.nf=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Lm("Detected an update time that is in the future: "+t+" > "+n),1))},yS.prototype.qa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Va=function(){t.Da.Uu((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ma()}))},this.document.addEventListener("visibilitychange",this.Va),this.inForeground="visible"===this.document.visibilityState)},yS.prototype.sf=function(){this.Va&&(Um(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Va),this.Va=null)},yS.prototype.Qa=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Ca=function(){t.uf(),t.Da.Uu((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Ca))},yS.prototype.hf=function(){this.Ca&&(Um("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Ca),this.Ca=null)},yS.prototype.rf=function(t){try{var e=null!==this.ja.getItem(this.ef(t));return Om("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Lm("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},yS.prototype.uf=function(){try{this.ja.setItem(this.ef(this.clientId),String(Date.now()))}catch(t){Lm("Failed to set zombie client id.",t)}},yS.prototype.cf=function(){try{this.ja.removeItem(this.ef(this.clientId))}catch(t){}},yS.prototype.ef=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},yS.xa="main",yS);function yS(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Da=o,this.Pa=a,this.Sa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ca=null,this.inForeground=!1,this.Va=null,this.Na=null,this.ka=Number.NEGATIVE_INFINITY,this.Oa=function(t){return Promise.resolve()},this.wo=new bS(this,i),this.Fa=e+yS.xa,this.serializer=new cS(s),this.document=r.document,this.Ih=new uT(this.wo,this.serializer),this.vo=new sS,this.Jo=new bT(this.serializer,this.vo),!r.window||!r.window.localStorage)throw new $m(Xm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.ja=this.window.localStorage}function mS(t,e){var n=hS.call(this)||this;return n.Uo=t,n.qh=e,n}function vS(t){return t.store(OT.store)}function gS(t){return t.store(rS.store)}var bS=(wS.prototype.Bc=function(t){var e=this.df(t);return this.db.Th().ea(t).next((function(t){return e.next((function(e){return t+e}))}))},wS.prototype.df=function(t){var e=0;return this.qc(t,(function(t){e++})).next((function(){return e}))},wS.prototype.Be=function(t,e){return this.db.Th().Be(t,e)},wS.prototype.qc=function(t,e){return this.vf(t,(function(t,n){return e(n)}))},wS.prototype.gh=function(t){this.lf=t},wS.prototype.ls=function(t,e){return _S(t,e)},wS.prototype.vs=function(t,e){return _S(t,e)},wS.prototype.Qc=function(t,e,n){return this.db.Th().Qc(t,e,n)},wS.prototype.Bo=function(t,e){return _S(t,e)},wS.prototype.wf=function(t,e){return this.lf.ys(e)?dE.resolve(!0):(r=e,i=!1,zE(n=t).do((function(t){return BE(n,t,r).next((function(t){return t&&(i=!0),dE.resolve(!t)}))})).next((function(){return i})));var n,r,i},wS.prototype.Gc=function(t,e){var n=this,r=this.db._h().Oh(),i=[],o=0;return this.vf(t,(function(s,a){if(a<=e){var u=n.wf(t,s).next((function(e){if(!e)return o++,r.Bs(t,s).next((function(){return r.Ls(s),vT(t).delete([0,oE(s.path)])}))}));i.push(u)}})).next((function(){return dE.Ns(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},wS.prototype.removeTarget=function(t,e){var n=e.Fi(t.qh);return this.db.Th().Gh(t,n)},wS.prototype.Wh=function(t,e){return _S(t,e)},wS.prototype.vf=function(t,e){var n,r=vT(t),i=J_.bu;return r.lo({index:YT.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==J_.bu&&e(new Bv(uE(n)),i),i=s,n=o):i=J_.bu})).next((function(){i!==J_.bu&&e(new Bv(uE(n)),i)}))},wS.prototype.Wc=function(t){return this.db._h().ma(t)},wS);function wS(t,e){this.db=t,this.lf=null,this.kc=new aT(this,e)}function _S(t,e){return vT(t).put((n=t.qh,new YT(0,oE(e.path),n)));var n}var ES=(IS.prototype.Ah=function(t){this.mf=t},IS.prototype.ih=function(t,e,n,r){var i=this;return Um(void 0!==this.mf,"setLocalDocumentsView() not called"),e.ci()?this.pf(t,e):n.isEqual(Mv.MIN)?this.pf(t,e):this.mf.th(t,r).next((function(o){var s=i.gf(e,o);return(e.mi()||e.pi())&&i.bf(e.Hn,s,r,n)?i.pf(t,e):(Rm()<=Em.DEBUG&&Om("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.mf.ih(t,e,n).next((function(t){return s.forEach((function(e){t=t.lt(e.key,e)})),t})))}))},IS.prototype.gf=function(t,e){var n=new rg((function(e,n){return t.fi(e,n)}));return e.forEach((function(e,r){r instanceof xb&&t.matches(r)&&(n=n.add(r))})),n},IS.prototype.bf=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===Zb.Wn?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.h(r))},IS.prototype.pf=function(t,e){return Rm()<=Em.DEBUG&&Om("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.mf.ih(t,e,Mv.MIN)},IS),TS=(SS.prototype.bo=function(t){return dE.resolve(0===this.Yo.length)},SS.prototype.yo=function(t,e,n){var r=e.batchId,i=this.If(r,"acknowledged");Um(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.Yo[i];return Um(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,dE.resolve()},SS.prototype.Io=function(t){return dE.resolve(this.lastStreamToken)},SS.prototype.To=function(t,e){return this.lastStreamToken=e,dE.resolve()},SS.prototype.Eo=function(t,e,n,r){Um(0!==r.length,"Mutation batches should not be empty");var i=this.yf;this.yf++,0<this.Yo.length&&Um(this.Yo[this.Yo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new cE(i,e,n,r);this.Yo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this._f=this._f.add(new pE(u.key,i)),this.vo.Ao(t,u.key.path.H())}return dE.resolve(o)},SS.prototype.Do=function(t,e){return dE.resolve(this.Tf(e))},SS.prototype.So=function(t,e){var n=this.Tf(e);return Um(null!=n,"Failed to find local mutation batch."),dE.resolve(n.keys())},SS.prototype.Co=function(t,e){var n=this.Ef(e+1),r=n<0?0:n;return dE.resolve(this.Yo.length>r?this.Yo[r]:null)},SS.prototype.Vo=function(){return dE.resolve(0===this.Yo.length?-1:this.yf-1)},SS.prototype.No=function(t){return dE.resolve(this.Yo.slice())},SS.prototype.ko=function(t,e){var n=this,r=new pE(e,0),i=new pE(e,Number.POSITIVE_INFINITY),o=[];return this._f.Lt([r,i],(function(t){Um(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.Tf(t._s);Um(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),dE.resolve(o)},SS.prototype.Oo=function(t,e){var n=this,r=new rg(Bm);return e.forEach((function(t){var e=new pE(t,0),i=new pE(t,Number.POSITIVE_INFINITY);n._f.Lt([e,i],(function(e){Um(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e._s)}))})),dE.resolve(this.Rf(r))},SS.prototype.xo=function(t,e){Um(!e.bi(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;Bv.ht(i)||(i=i.child(""));var o=new pE(new Bv(i),0),s=new rg(Bm);return this._f.Bt((function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(s=s.add(t._s)),!0)}),o),dE.resolve(this.Rf(s))},SS.prototype.Rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Tf(t);null!==r&&n.push(r)})),n},SS.prototype.jo=function(t,e){var n=this;Um(0===this.If(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.Yo.shift();var r=this._f;return dE.forEach(e.mutations,(function(i){var o=new pE(i.key,e.batchId);return r=r.delete(o),n.wo.Bo(t,i.key)})).next((function(){n._f=r}))},SS.prototype.Lo=function(t){},SS.prototype.ys=function(t,e){var n=new pE(e,0),r=this._f.Mt(n);return dE.resolve(e.isEqual(r&&r.key))},SS.prototype.Mo=function(t){return 0===this.Yo.length&&Um(this._f.J(),"Document leak -- detected dangling mutation references when queue is empty."),dE.resolve()},SS.prototype.If=function(t,e){var n=this.Ef(t);return Um(0<=n&&n<this.Yo.length,"Batches must exist to be "+e),n},SS.prototype.Ef=function(t){return 0===this.Yo.length?0:t-this.Yo[0].batchId},SS.prototype.Tf=function(t){var e=this.Ef(t);if(e<0||e>=this.Yo.length)return null;var n=this.Yo[e];return Um(n.batchId===t,"If found batch must match"),n},SS);function SS(t,e){this.vo=t,this.wo=e,this.Yo=[],this.yf=1,this.lastStreamToken=jw.Si,this._f=new rg(pE.Un)}function IS(){}var CS,kS,AS,NS,xS=(WS.prototype.js=function(t,e,n){Um(!n.isEqual(Mv.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Af(e);return this.docs=this.docs.lt(r,{oa:e,size:s,readTime:n}),this.size+=s-o,this.vo.Ao(t,r.path.H())},WS.prototype.Ls=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},WS.prototype.Bs=function(t,e){var n=this.docs.get(e);return dE.resolve(n?n.oa:null)},WS.prototype.getEntries=function(t,e){var n=this,r=Zw();return e.forEach((function(t){var e=n.docs.get(t);r=r.lt(t,e?e.oa:null)})),dE.resolve(r)},WS.prototype.ih=function(t,e,n){Um(!e.bi(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=e_(),i=new Bv(e.path.child("")),o=this.docs.yt(i);o.At();){var s=o.Rt(),a=s.value,u=a.oa,c=a.readTime;if(!e.path.$(s.key.path))break;c.h(n)<=0||u instanceof xb&&e.matches(u)&&(r=r.lt(u.key,u))}return dE.resolve(r)},WS.prototype.Df=function(t,e){return dE.forEach(this.docs,(function(t){return e(t)}))},WS.prototype.lc=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},WS.prototype.vc=function(t){return dE.resolve(Mv.MIN)},WS.prototype.Oh=function(t){return new WS.wa(this)},WS.prototype.ma=function(t){return dE.resolve(this.size)},WS.wa=(ls(HS,NS=yE),HS.prototype.Qs=function(t){var e=this,n=[];return this.Os.forEach((function(r,i){i?n.push(e.pa.js(t,i,e.readTime)):e.pa.Ls(r)})),dE.Ns(n)},HS.prototype.Ms=function(t,e){return this.pa.Bs(t,e)},HS.prototype.qs=function(t,e){return this.pa.getEntries(t,e)},HS),WS),DS=(VS.prototype.Be=function(t,e){return this.Pf.forEach((function(t,n){return e(n)})),dE.resolve()},VS.prototype.Uh=function(t){return dE.resolve(this.lastRemoteSnapshotVersion)},VS.prototype.Yc=function(t){return dE.resolve(this.Sf)},VS.prototype.Zh=function(t){var e=this.Kc.after(this.highestTargetId);return this.highestTargetId=e,dE.resolve(e)},VS.prototype.zh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Sf&&(this.Sf=e),dE.resolve()},VS.prototype.Xc=function(t){this.Pf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.Sf&&(this.Sf=t.sequenceNumber)},VS.prototype.tc=function(t,e){return Um(!this.Pf.has(e.target),"Adding a target that already exists"),this.Xc(e),this.targetCount+=1,dE.resolve()},VS.prototype.Gh=function(t,e){return Um(this.Pf.has(e.target),"Updating a non-existent target"),this.Xc(e),dE.resolve()},VS.prototype.Zc=function(t,e){return Um(0<this.targetCount,"Removing a target from an empty cache"),Um(this.Pf.has(e.target),"Removing a non-existent target from the cache"),this.Pf.delete(e.target),this.Cf.ps(e.targetId),this.targetCount-=1,dE.resolve()},VS.prototype.Qc=function(t,e,n){var r=this,i=0,o=[];return this.Pf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Pf.delete(s),o.push(r.ta(t,a.targetId)),i++)})),dE.Ns(o).next((function(){return i}))},VS.prototype.ea=function(t){return dE.resolve(this.targetCount)},VS.prototype.$h=function(t,e){var n=this.Pf.get(e)||null;return dE.resolve(n)},VS.prototype.Xe=function(t,e){return Fm("Not yet implemented.")},VS.prototype.Mh=function(t,e,n){this.Cf.ds(e,n);var r=this.persistence.wo,i=[];return r&&e.forEach((function(e){i.push(r.ls(t,e))})),dE.Ns(i)},VS.prototype.Bh=function(t,e,n){this.Cf.ms(e,n);var r=this.persistence.wo,i=[];return r&&e.forEach((function(e){i.push(r.vs(t,e))})),dE.Ns(i)},VS.prototype.ta=function(t,e){return this.Cf.ps(e),dE.resolve()},VS.prototype.ec=function(t,e){var n=this.Cf.bs(e);return dE.resolve(n)},VS.prototype.ys=function(t,e){return dE.resolve(this.Cf.ys(e))},VS),RS=(BS.kf=function(t,e){return new BS(t,(function(t){return new LS(t,e)}))},BS.Of=function(t){return new BS(t,(function(t){return new OS(t)}))},BS.prototype.shutdown=function(){return this.Sa=!1,Promise.resolve()},Object.defineProperty(BS.prototype,"ph",{get:function(){return this.Sa},enumerable:!0,configurable:!0}),BS.prototype.sc=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){return[2,[this.clientId]]}))}))},BS.prototype.za=function(t){return t(!0)},BS.prototype.Ka=function(){},BS.prototype.hc=function(t){},BS.prototype.Rh=function(){return this.vo},BS.prototype.bh=function(t){var e=this.Vf[t.v()];return e||(e=new TS(this.vo,this.wo),this.Vf[t.v()]=e),e},BS.prototype.Th=function(){return this.Ih},BS.prototype._h=function(){return this.Jo},BS.prototype.runTransaction=function(t,e,n){var r=this;Om("MemoryPersistence","Starting transaction:",t);var i=new PS(this.Wa.next());return this.wo.Ff(),n(i).next((function(t){return r.wo.xf(i).next((function(){return t}))})).Cs().then((function(t){return i.zs(),t}))},BS.prototype.jf=function(t,e){return dE.ks((n=this.Vf,r=[],pv(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.ys(t,e)}})));var n,r},BS),PS=(ls(qS,AS=vE),qS),OS=(Object.defineProperty(jS.prototype,"Lf",{get:function(){if(this.Uf)return this.Uf;throw Fm("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),jS.prototype.gh=function(t){this.lf=t},jS.prototype.ls=function(t,e){return this.Lf.delete(e),dE.resolve()},jS.prototype.vs=function(t,e){return this.Lf.add(e),dE.resolve()},jS.prototype.Bo=function(t,e){return this.Lf.add(e),dE.resolve()},jS.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Th();return r.ec(t,e.targetId).next((function(t){t.forEach((function(t){return n.Lf.add(t)}))})).next((function(){return r.Zc(t,e)}))},jS.prototype.Ff=function(){this.Uf=new Set},jS.prototype.xf=function(t){var e=this,n=this.persistence._h().Oh();return dE.forEach(this.Lf,(function(r){return e.Bf(t,r).next((function(t){t||n.Ls(r)}))})).next((function(){return e.Uf=null,n.apply(t)}))},jS.prototype.Wh=function(t,e){var n=this;return this.Bf(t,e).next((function(t){t?n.Lf.delete(e):n.Lf.add(e)}))},jS.prototype.Nf=function(t){return 0},jS.prototype.Bf=function(t,e){var n=this;return dE.ks([function(){return n.persistence.Th().ys(t,e)},function(){return n.persistence.jf(t,e)},function(){return dE.resolve(n.lf.ys(e))}])},jS),LS=(US.prototype.Ff=function(){},US.prototype.xf=function(t){return dE.resolve()},US.prototype.Be=function(t,e){return this.persistence.Th().Be(t,e)},US.prototype.Bc=function(t){var e=this.qf(t);return this.persistence.Th().ea(t).next((function(t){return e.next((function(e){return t+e}))}))},US.prototype.qf=function(t){var e=0;return this.qc(t,(function(t){e++})).next((function(){return e}))},US.prototype.qc=function(t,e){var n=this;return dE.forEach(this.Mf,(function(r,i){return n.wf(t,r,i).next((function(t){return t?dE.resolve():e(i)}))}))},US.prototype.gh=function(t){this.lf=t},US.prototype.Qc=function(t,e,n){return this.persistence.Th().Qc(t,e,n)},US.prototype.Gc=function(t,e){var n=this,r=0,i=this.persistence._h(),o=i.Oh();return i.Df(t,(function(i){return n.wf(t,i,e).next((function(t){t||(r++,o.Ls(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},US.prototype.Bo=function(t,e){return this.Mf.set(e,t.qh),dE.resolve()},US.prototype.removeTarget=function(t,e){var n=e.Fi(t.qh);return this.persistence.Th().Gh(t,n)},US.prototype.ls=function(t,e){return this.Mf.set(e,t.qh),dE.resolve()},US.prototype.vs=function(t,e){return this.Mf.set(e,t.qh),dE.resolve()},US.prototype.Wh=function(t,e){return this.Mf.set(e,t.qh),dE.resolve()},US.prototype.Nf=function(t){var e=t.key.toString().length;return t instanceof xb&&(e+=t.data().Cn()),e},US.prototype.wf=function(t,e,n){var r=this;return dE.ks([function(){return r.persistence.jf(t,e)},function(){return dE.resolve(r.lf.ys(e))},function(){return r.persistence.Th().ys(t,e)},function(){var t=r.Mf.get(e);return dE.resolve(void 0!==t&&n<t)}])},US.prototype.Wc=function(t){return this.persistence._h().ma(t)},US),MS=(FS.prototype.reset=function(){this.zf=0},FS.prototype.Jf=function(){this.zf=this.Wf},FS.prototype.Yf=function(t){var e=this;this.cancel();var n=Math.floor(this.zf+this.Xf()),r=Math.max(0,Date.now()-this.Hf),i=Math.max(0,n-r);0<this.zf&&Om("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.zf+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Kf=this.Da.Xu(this.Cu,i,(function(){return e.Hf=Date.now(),t()})),this.zf*=this.Gf,this.zf<this.Qf&&(this.zf=this.Qf),this.zf>this.Wf&&(this.zf=this.Wf)},FS.prototype.cancel=function(){null!==this.Kf&&(this.Kf.cancel(),this.Kf=null)},FS.prototype.Xf=function(){return(Math.random()-.5)*this.zf},FS);function FS(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Da=t,this.Cu=e,this.Qf=n,this.Gf=r,this.Wf=i,this.zf=0,this.Kf=null,this.Hf=Date.now(),this.reset()}function US(t,e){this.persistence=t,this.lf=null,this.Mf=new fE((function(t){return oE(t.path)})),this.kc=new aT(this,e)}function jS(t){this.persistence=t,this.lf=null,this.Uf=null}function qS(t){var e=AS.call(this)||this;return e.qh=t,e}function BS(t,e){var n=this;this.clientId=t,this.Vf={},this.Wa=new J_(0),this.Sa=!1,this.Sa=!0,this.wo=e(this),this.Ih=new DS(this),this.vo=new CT,this.Jo=new xS(this.vo,(function(t){return n.wo.Nf(t)}))}function VS(t){this.persistence=t,this.Pf=new fE((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=Mv.MIN,this.highestTargetId=0,this.Sf=0,this.Cf=new hE,this.targetCount=0,this.Kc=GE.Ko()}function WS(t,e){this.vo=t,this.Af=e,this.docs=new Vv(Bv.G),this.size=0}function HS(t){var e=NS.call(this)||this;return e.pa=t,e}(kS=CS=CS||{})[kS.$f=0]="__PRIVATE_Initial",kS[kS.Zf=1]="__PRIVATE_Starting",kS[kS.tl=2]="__PRIVATE_Open",kS[kS.Error=3]="Error",kS[kS.nl=4]="__PRIVATE_Backoff";var zS,GS,KS=(rI.prototype.ol=function(){return this.state===CS.Zf||this.state===CS.tl||this.state===CS.nl},rI.prototype.hl=function(){return this.state===CS.tl},rI.prototype.start=function(){this.state!==CS.Error?(Um(this.state===CS.$f,"Already started"),this.auth()):this.cl()},rI.prototype.stop=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.ol()?[4,this.close(CS.$f)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},rI.prototype.al=function(){Um(!this.ol(),"Can only inhibit backoff in a stopped state"),this.state=CS.$f,this.sl.reset()},rI.prototype.fl=function(){var t=this;this.hl()&&null===this.ul&&(this.ul=this.Da.Xu(this.il,6e4,(function(){return t.ll()})))},rI.prototype.dl=function(t){this.vl(),this.stream.send(t)},rI.prototype.ll=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){return this.hl()?[2,this.close(CS.$f)]:[2]}))}))},rI.prototype.vl=function(){this.ul&&(this.ul.cancel(),this.ul=null)},rI.prototype.close=function(t,e){return ps(this,void 0,void 0,(function(){return fs(this,(function(n){switch(n.label){case 0:return Um(this.ol(),"Only started streams should be closed."),Um(t===CS.Error||$b(e),"Can't provide an error when not in an error state."),this.vl(),this.sl.cancel(),this.rl++,t!==CS.Error?this.sl.reset():e&&e.code===Xm.RESOURCE_EXHAUSTED?(Lm(e.toString()),Lm("Using maximum backoff delay to prevent overloading the backend."),this.sl.Jf()):e&&e.code===Xm.UNAUTHENTICATED&&this.el.I(),null!==this.stream&&(this.wl(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ml(e)];case 1:return n.sent(),[2]}}))}))},rI.prototype.wl=function(){},rI.prototype.auth=function(){var t=this;Um(this.state===CS.$f,"Must be in initial state to auth"),this.state=CS.Zf;var e=this.pl(this.rl),n=this.rl;this.el.getToken().then((function(e){t.rl===n&&t.gl(e)}),(function(n){e((function(){var e=new $m(Xm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.bl(e)}))}))},rI.prototype.gl=function(t){var e=this;Um(this.state===CS.Zf,"Trying to start stream in a non-starting state");var n=this.pl(this.rl);this.stream=this.yl(t),this.stream._l((function(){n((function(){return Um(e.state===CS.Zf,"Expected stream to be in state Starting, but was "+e.state),e.state=CS.tl,e.listener._l()}))})),this.stream.ml((function(t){n((function(){return e.bl(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},rI.prototype.cl=function(){var t=this;Um(this.state===CS.Error,"Should only perform backoff when in Error state"),this.state=CS.nl,this.sl.Yf((function(){return ps(t,void 0,void 0,(function(){return fs(this,(function(t){return Um(this.state===CS.nl,"Backoff elapsed but state is now: "+this.state),this.state=CS.$f,this.start(),Um(this.ol(),"PersistentStream should have started"),[2]}))}))}))},rI.prototype.bl=function(t){return Um(this.ol(),"Can't handle server close on non-started stream"),Om("PersistentStream","close with error: "+t),this.stream=null,this.close(CS.Error,t)},rI.prototype.pl=function(t){var e=this;return function(n){e.Da.Uu((function(){return e.rl===t?n():(Om("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},rI),QS=(ls(nI,GS=KS),nI.prototype.yl=function(t){return this.connection.Il("Listen",t)},nI.prototype.onMessage=function(t){this.sl.reset();var e=this.serializer.Vr(t),n=this.serializer.kr(t);return this.listener.Tl(e,n)},nI.prototype.watch=function(t){var e={};e.database=this.serializer.mr,e.addTarget=this.serializer.ai(t);var n=this.serializer.tu(t);n&&(e.labels=n),this.dl(e)},nI.prototype.El=function(t){var e={};e.database=this.serializer.mr,e.removeTarget=t,this.dl(e)},nI),YS=(ls(eI,zS=KS),Object.defineProperty(eI.prototype,"Al",{get:function(){return this.Rl},enumerable:!0,configurable:!0}),eI.prototype.start=function(){this.Rl=!1,zS.prototype.start.call(this)},eI.prototype.wl=function(){this.Rl&&this.Dl([])},eI.prototype.yl=function(t){return this.connection.Il("Write",t)},eI.prototype.onMessage=function(t){if(Um(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.rr(t.streamToken),this.Rl){this.sl.reset();var e=this.serializer.Qr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Pl(n,e)}return Um(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Rl=!0,this.listener.Sl()},eI.prototype.Cl=function(){Um(this.hl(),"Writing handshake requires an opened stream"),Um(!this.Rl,"Handshake already completed");var t={};t.database=this.serializer.mr,this.dl(t)},eI.prototype.Dl=function(t){var e=this;Um(this.hl(),"Writing mutations requires an opened stream"),Um(this.Rl,"Handshake must be complete before writing mutations"),Um(0<this.lastStreamToken.Cn(),"Trying to write mutation without a token");var n={streamToken:this.serializer.er(this.lastStreamToken),writes:t.map((function(t){return e.serializer.Or(t)}))};this.dl(n)},eI),XS=(tI.prototype.Vl=function(t){return new YS(this.Da,this.connection,this.credentials,this.serializer,t)},tI.prototype.Nl=function(t){return new QS(this.Da,this.connection,this.credentials,this.serializer,t)},tI.prototype.commit=function(t){var e=this,n={database:this.serializer.mr,writes:t.map((function(t){return e.serializer.Or(t)}))};return this.kl("Commit",n).then((function(t){return e.serializer.Qr(t.writeResults,t.commitTime)}))},tI.prototype.lookup=function(t){var e=this,n={database:this.serializer.mr,documents:t.map((function(t){return e.serializer.ar(t)}))};return this.Ol("BatchGetDocuments",n).then((function(n){var r=Jw();n.forEach((function(t){var n=e.serializer.Pr(t);r=r.lt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);Um(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},tI.prototype.kl=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.kl(t,e,r)})).catch((function(t){throw t.code===Xm.UNAUTHENTICATED&&n.credentials.I(),t}))},tI.prototype.Ol=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Ol(t,e,r)})).catch((function(t){throw t.code===Xm.UNAUTHENTICATED&&n.credentials.I(),t}))},tI),$S=(ZS.documentId=function(){return ZS.xl},ZS.prototype.isEqual=function(t){if(!(t instanceof ZS))throw Av("isEqual","FieldPath",1,t);return this.Fl.isEqual(t.Fl)},ZS.xl=new ZS(qv.st().nt()),ZS),JS=new RegExp("[~\\*/\\[\\]]");function ZS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(){if(!(t instanceof Array)||t.length<1)throw new $m(Xm.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Dv(1,"element")+".")}();for(var n=0;n<t.length;++n)if(gv("FieldPath","string",n,t[n]),0===t[n].length)throw new $m(Xm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Fl=new qv(t)}function tI(t,e,n,r){this.Da=t,this.connection=e,this.credentials=n,this.serializer=r}function eI(t,e,n,r,i){var o=zS.call(this,t,Q_.Eu,Q_.Tu,e,n,i)||this;return o.serializer=r,o.Rl=!1,o.lastStreamToken=jw.Si,o}function nI(t,e,n,r,i){var o=GS.call(this,t,Q_.Iu,Q_._u,e,n,i)||this;return o.serializer=r,o}function rI(t,e,n,r,i,o){this.Da=t,this.il=n,this.connection=r,this.el=i,this.listener=o,this.state=CS.$f,this.rl=0,this.ul=null,this.stream=null,this.sl=new MS(t,e)}var iI,oI,sI,aI,uI,cI,lI,hI=(AI.delete=function(){return dv("FieldValue.delete",arguments),pI.instance},AI.serverTimestamp=function(){return dv("FieldValue.serverTimestamp",arguments),fI.instance},AI.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mv("FieldValue.arrayUnion",arguments,1),new dI(t)},AI.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mv("FieldValue.arrayRemove",arguments,1),new yI(t)},AI.increment=function(t){return gv("FieldValue.increment","number",1,t),yv("FieldValue.increment",arguments,1),new mI(t)},AI.prototype.isEqual=function(t){return this===t},AI),pI=(ls(kI,lI=hI),kI.instance=new kI,kI),fI=(ls(CI,cI=hI),CI.instance=new CI,CI),dI=(ls(II,uI=hI),II),yI=(ls(SI,aI=hI),SI),mI=(ls(TI,sI=hI),TI),vI=H_(hI,"Use FieldValue.<field>() instead."),gI=/^__.*__$/,bI=(EI.prototype.Bl=function(t,e){var n=[];return n.push(null!==this.on?new Lg(t,this.data,this.on,e):new Og(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Mg(t,this.fieldTransforms)),n},EI),wI=(_I.prototype.Bl=function(t,e){var n=[new Lg(t,this.data,this.on,e)];return 0<this.fieldTransforms.length&&n.push(new Mg(t,this.fieldTransforms)),n},_I);function _I(t,e,n){this.data=t,this.on=e,this.fieldTransforms=n}function EI(t,e,n){this.data=t,this.on=e,this.fieldTransforms=n}function TI(t){var e=sI.call(this,"FieldValue.increment")||this;return e.Ll=t,e}function SI(t){var e=aI.call(this,"FieldValue.arrayRemove")||this;return e.Ul=t,e}function II(t){var e=uI.call(this,"FieldValue.arrayUnion")||this;return e.Ul=t,e}function CI(){return cI.call(this,"FieldValue.serverTimestamp")||this}function kI(){return lI.call(this,"FieldValue.delete")||this}function AI(t){this.jl=t}function NI(t){switch(t){case iI.Set:case iI.Ml:case iI.ql:return!0;case iI.Ql:case iI.Gl:return!1;default:throw Fm("Unexpected case for UserDataSource: "+t)}}(oI=iI=iI||{})[oI.Set=0]="Set",oI[oI.ql=1]="__PRIVATE_Update",oI[oI.Ml=2]="__PRIVATE_MergeSet",oI[oI.Ql=3]="__PRIVATE_Argument",oI[oI.Gl=4]="__PRIVATE_ArrayArgument";var xI=(OI.prototype.Hl=function(t){var e=null==this.path?null:this.path.child(t),n=new OI(this.Wl,this.methodName,e,!1,this.fieldTransforms,this.on);return n.Jl(t),n},OI.prototype.Yl=function(t){var e=null==this.path?null:this.path.child(t),n=new OI(this.Wl,this.methodName,e,!1,this.fieldTransforms,this.on);return n.Kl(),n},OI.prototype.Xl=function(t){return new OI(this.Wl,this.methodName,null,!0,this.fieldTransforms,this.on)},OI.prototype.$l=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new $m(Xm.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},OI.prototype.contains=function(t){return void 0!==this.on.find((function(e){return t.$(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.$(e.field)}))},OI.prototype.Kl=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Jl(this.path.get(t))},OI.prototype.Jl=function(t){if(0===t.length)throw this.$l("Document fields must not be empty");if(NI(this.Wl)&&gI.test(t))throw this.$l('Document fields cannot begin and end with "__"')},OI),DI=function(t,e){this.s=t,this.key=e},RI=(PI.prototype.td=function(t,e){var n=new xI(iI.Set,t,qv.et);MI("Data must be an object, but it was:",n,e);var r=this.nd(e,n);return new bI(r,null,n.fieldTransforms)},PI.prototype.ed=function(t,e,n){var r=new xI(iI.Ml,t,qv.et);MI("Data must be an object, but it was:",r,e);var i,o,s=this.nd(e,r);if(n){for(var a=new rg(qv.G),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof $S)h=l.Fl;else{if("string"!=typeof l)throw Fm("Expected stringOrFieldPath to be a string or a FieldPath");h=UI(t,l)}if(!r.contains(h))throw new $m(Xm.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=bg.Jt(a),o=r.fieldTransforms.filter((function(t){return i.Xt(t.field)}))}else i=bg.Yt(r.on),o=r.fieldTransforms;return new bI(s,i,o)},PI.prototype.rd=function(t,e){var n=this,r=new xI(iI.ql,t,qv.et);MI("Data must be an object, but it was:",r,e);var i=new rg(qv.G),o=kb.EMPTY;pv(e,(function(e,s){var a=UI(t,e),u=r.Yl(a);if((s=n.ud(s,u))instanceof pI)i=i.add(a);else{var c=n.nd(s,u);null!=c&&(i=i.add(a),o=o.set(a,c))}}));var s=bg.Jt(i);return new wI(o,s,r.fieldTransforms)},PI.prototype.sd=function(t,e,n,r){var i=new xI(iI.ql,t,qv.et),o=[FI(t,e)],s=[n];if(r.length%2!=0)throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(FI(t,r[a])),s.push(r[a+1]);var u=new rg(qv.G),c=kb.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.Yl(l),p=this.ud(s[a],h);if(p instanceof pI)u=u.add(l);else{var f=this.nd(p,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var d=bg.Jt(u);return new wI(c,d,i.fieldTransforms)},PI.prototype.od=function(t,e,n){void 0===n&&(n=!1);var r=new xI(n?iI.Gl:iI.Ql,t,qv.et),i=this.nd(e,r);return Um(null!=i,"Parsed data should not be null."),Um(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},PI.prototype.ud=function(t,e){try{return this.Zl(t)}catch(t){var n=jI(t);throw e.$l(n)}},PI.prototype.nd=function(t,e){if(LI(t=this.ud(t,e)))return MI("Unsupported field value:",e,t),this.hd(t,e);if(t instanceof hI)return this.ad(t,e),null;if(e.path&&e.on.push(e.path),t instanceof Array){if(e.zl&&e.Wl!==iI.Gl)throw e.$l("Nested arrays are not supported");return this.fd(t,e)}return this.ld(t,e)},PI.prototype.hd=function(t,e){var n=this,r=new Vv(Bm);return fv(t)?e.path&&0<e.path.length&&e.on.push(e.path):pv(t,(function(t,i){var o=n.nd(i,e.Hl(t));null!=o&&(r=r.lt(t,o))})),new kb(r)},PI.prototype.fd=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.nd(o[i],e.Xl(r));null==s&&(s=$g.Vn),n.push(s),r++}return new Ab(n)},PI.prototype.ad=function(t,e){if(!NI(e.Wl))throw e.$l(t.jl+"() can only be used with update() and set()");if(null===e.path)throw e.$l(t.jl+"() is not currently supported inside arrays");if(t instanceof pI){if(e.Wl!==iI.Ml)throw e.Wl===iI.ql?(Um(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.$l("FieldValue.delete() can only appear at the top level of your update data")):e.$l("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.on.push(e.path)}else if(t instanceof fI)e.fieldTransforms.push(new wg(e.path,og.instance));else if(t instanceof dI){var n=this.dd(t.jl,t.Ul),r=new sg(n);e.fieldTransforms.push(new wg(e.path,r))}else if(t instanceof yI){n=this.dd(t.jl,t.Ul);var i=new ag(n);e.fieldTransforms.push(new wg(e.path,i))}else if(t instanceof mI){var o=this.od("FieldValue.increment",t.Ll),s=new ug(o);e.fieldTransforms.push(new wg(e.path,s))}else Fm("Unknown FieldValue type: "+t)},PI.prototype.ld=function(t,e){if(null===t)return $g.Vn;if("number"==typeof t)return Jb(t)?new bb(t):new wb(t);if("boolean"==typeof t)return Jg.of(t);if("string"==typeof t)return new _b(t);if(t instanceof Date)return new Eb(Lv.fromDate(t));if(t instanceof Lv)return new Eb(new Lv(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Ov)return new Cb(t);if(t instanceof X_)return new Sb(t);if(t instanceof DI)return new Ib(t.s,t.key);throw e.$l("Unsupported field value: "+Iv(t))},PI.prototype.dd=function(t,e){var n=this;return e.map((function(e,r){var i=new xI(iI.Ql,t,qv.et);return n.nd(e,i.Xl(r))}))},PI);function PI(t){this.Zl=t}function OI(t,e,n,r,i,o){this.Wl=t,this.methodName=e,this.path=n,this.zl=r,void 0===i&&this.Kl(),this.zl=void 0!==r&&r,this.fieldTransforms=i||[],this.on=o||[]}function LI(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Lv||t instanceof Ov||t instanceof X_||t instanceof DI||t instanceof hI)}function MI(t,e,n){if(!LI(n)||!Sv(n)){var r=Iv(n);throw e.$l("an object"===r?t+" a custom object":t+" "+r)}}function FI(t,e){if(e instanceof $S)return e.Fl;if("string"==typeof e)return UI(t,e);throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function UI(t,e){try{return function(t){if(0<=t.search(JS))throw new $m(Xm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new($S.bind.apply($S,vs([void 0],t.split("."))))}catch(e){throw new $m(Xm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Fl}catch(e){var n=jI(e);throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function jI(t){return t instanceof Error?t.message:t.toString()}var qI=(KI.prototype.lookup=function(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){switch(r.label){case 0:if(this.bd(),0<this.mutations.length)throw new $m(Xm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.vd.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof Db||t instanceof xb?n.yd(t):Fm("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},KI.prototype.set=function(t,e){this.write(e.Bl(t,this.rn(t))),this.gd.add(t)},KI.prototype.update=function(t,e){try{this.write(e.Bl(t,this._d(t)))}catch(t){this.pd=t}this.gd.add(t)},KI.prototype.delete=function(t){this.write([new Fg(t,this.rn(t))]),this.gd.add(t)},KI.prototype.commit=function(){return ps(this,void 0,void 0,(function(){var t,e=this;return fs(this,(function(n){switch(n.label){case 0:if(this.bd(),this.pd)throw this.pd;return t=this.wd,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Ug(t,e.rn(t)))})),[4,this.vd.commit(this.mutations)];case 1:return n.sent(),this.md=!0,[2]}}))}))},KI.prototype.yd=function(t){var e;if(t instanceof xb)e=t.version;else{if(!(t instanceof Db))throw Fm("Document in a transaction was a "+t.constructor.name);e=Mv.B()}var n=this.wd.get(t.key);if(null!==n){if(!e.isEqual(n))throw new $m(Xm.ABORTED,"Document version changed between two reads.")}else this.wd=this.wd.lt(t.key,e)},KI.prototype.rn=function(t){var e=this.wd.get(t);return!this.gd.has(t)&&e?Rg.updateTime(e):Rg.NONE},KI.prototype._d=function(t){var e=this.wd.get(t);if(this.gd.has(t)||!e)return Rg.exists(!0);if(e.isEqual(Mv.B()))throw new $m(Xm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rg.updateTime(e)},KI.prototype.write=function(t){this.bd(),this.mutations=this.mutations.concat(t)},KI.prototype.bd=function(){Um(!this.md,"A transaction object cannot be used after its update callback has been invoked.")},KI),BI=(GI.prototype.Ad=function(){var t=this;0===this.Td&&(this.Dd(rw.Ti),Um(null===this.Ed,"onlineStateTimer shouldn't be started yet"),this.Ed=this.Su.Xu(Q_.Ru,1e4,(function(){return t.Ed=null,Um(t.state===rw.Ti,"Timer should be canceled if we transitioned to a different state."),t.Pd("Backend didn't respond within 10 seconds."),t.Dd(rw.Ri),Promise.resolve()})))},GI.prototype.Sd=function(t){this.state===rw.Ei?(this.Dd(rw.Ti),Um(0===this.Td,"watchStreamFailures must be 0"),Um(null===this.Ed,"onlineStateTimer must be null")):(this.Td++,1<=this.Td&&(this.Cd(),this.Pd("Connection failed 1 times. Most recent error: "+t.toString()),this.Dd(rw.Ri)))},GI.prototype.set=function(t){this.Cd(),this.Td=0,t===rw.Ei&&(this.Rd=!1),this.Dd(t)},GI.prototype.Dd=function(t){t!==this.state&&(this.state=t,this.Id(t))},GI.prototype.Pd=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rd?(Lm(e),this.Rd=!1):Om("OnlineStateTracker",e)},GI.prototype.Cd=function(){null!==this.Ed&&(this.Ed.cancel(),this.Ed=null)},GI),VI="RemoteStore",WI=(zI.prototype.start=function(){return this.enableNetwork()},zI.prototype.enableNetwork=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.xd()?(t=this.Qd,[4,this.Oc.Io()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.Kd()?this.Hd():this.Ud.set(rw.Ti),[4,this.Jd()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},zI.prototype.disableNetwork=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.Yd()];case 1:return t.sent(),this.Ud.set(rw.Ri),[2]}}))}))},zI.prototype.Yd=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return[4,this.Qd.stop()];case 1:return t.sent(),[4,this.Ld.stop()];case 2:return t.sent(),0<this.Vd.length&&(Om(VI,"Stopping write stream with "+this.Vd.length+" pending writes"),this.Vd=[]),this.Xd(),[2]}}))}))},zI.prototype.shutdown=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return Om(VI,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.Yd()];case 1:return t.sent(),this.Od.shutdown(),this.Ud.set(rw.Ti),[2]}}))}))},zI.prototype.listen=function(t){cv(this.Nd,t.targetId)||(this.Nd[t.targetId]=t,this.Kd()?this.Hd():this.Ld.hl()&&this.$d(t))},zI.prototype.Zd=function(t){Um(cv(this.Nd,t),"unlisten called on target no currently watched: "+t),delete this.Nd[t],this.Ld.hl()&&this.tv(t),fv(this.Nd)&&(this.Ld.hl()?this.Ld.fl():this.xd()&&this.Ud.set(rw.Ti))},zI.prototype.Xe=function(t){return this.Nd[t]||null},zI.prototype.Ye=function(t){return this.nv.Ye(t)},zI.prototype.$d=function(t){this.kd.Pe(t.targetId),this.Ld.watch(t)},zI.prototype.tv=function(t){this.kd.Pe(t),this.Ld.El(t)},zI.prototype.Hd=function(){Um(this.Kd(),"startWatchStream() called when shouldStartWatchStream() is false."),this.kd=new A_(this),this.Ld.start(),this.Ud.Ad()},zI.prototype.Kd=function(){return this.xd()&&!this.Ld.ol()&&!fv(this.Nd)},zI.prototype.xd=function(){return this.isPrimary&&this.networkEnabled},zI.prototype.Xd=function(){this.kd=null},zI.prototype.Bd=function(){return ps(this,void 0,void 0,(function(){var t=this;return fs(this,(function(e){return hv(this.Nd,(function(e,n){t.$d(n)})),[2]}))}))},zI.prototype.Md=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){return void 0===t&&Um(!this.Kd(),"Watch stream was stopped gracefully while still needed."),this.Xd(),this.Kd()?(this.Ud.Sd(t),this.Hd()):this.Ud.set(rw.Ti),[2]}))}))},zI.prototype.qd=function(t,e){return ps(this,void 0,void 0,(function(){var n;return fs(this,(function(r){switch(r.label){case 0:return this.Ud.set(rw.Ei),t instanceof C_&&t.state===m_.qi&&t.cause?[2,this.iv(t)]:(t instanceof d_?this.kd.xe(t):t instanceof y_?this.kd.Ge(t):(Um(t instanceof C_,"Expected watchChange to be an instance of WatchTargetChange"),this.kd.Le(t)),e.isEqual(Mv.MIN)?[3,3]:[4,this.Oc.Uh()]);case 1:return n=r.sent(),0<=e.h(n)?[4,this.ev(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},zI.prototype.ev=function(t){var e=this;Um(!t.isEqual(Mv.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.kd.Ke(t);return hv(n.te,(function(n,r){if(0<r.resumeToken.Cn()){var i=e.Nd[n];i&&(e.Nd[n]=i.xi(r.resumeToken,t))}})),n.ne.forEach((function(t){var n=e.Nd[t];if(n){e.Nd[t]=n.xi(jw.Si,n.Oi),e.tv(t);var r=new zw(n.target,t,Fw.Vi,n.sequenceNumber);e.$d(r)}})),this.nv.Lh(n)},zI.prototype.iv=function(t){var e=this;Um(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return ps(e,void 0,void 0,(function(){return fs(this,(function(e){return cv(this.Nd,t)?(delete this.Nd[t],this.kd.removeTarget(t),[2,this.nv.rv(t,n)]):[2]}))}))}))})),r},zI.prototype.Jd=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return this.uv()?[4,this.Oc.Jh(0<this.Vd.length?this.Vd[this.Vd.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.Vd.length&&this.Qd.fl(),[3,4]);case 2:return this.sv(t),[4,this.Jd()];case 3:e.sent(),e.label=4;case 4:return this.ov()&&this.hv(),[2]}}))}))},zI.prototype.uv=function(){return this.xd()&&this.Vd.length<10},zI.prototype.cv=function(){return this.Vd.length},zI.prototype.sv=function(t){Um(this.uv(),"addToWritePipeline called when pipeline is full"),this.Vd.push(t),this.Qd.hl()&&this.Qd.Al&&this.Qd.Dl(t.mutations)},zI.prototype.ov=function(){return this.xd()&&!this.Qd.ol()&&0<this.Vd.length},zI.prototype.hv=function(){Um(this.ov(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Qd.start()},zI.prototype.Gd=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){return this.Qd.Cl(),[2]}))}))},zI.prototype.zd=function(){var t=this;return this.Oc.To(this.Qd.lastStreamToken).then((function(){for(var e=0,n=t.Vd;e<n.length;e++)t.Qd.Dl(n[e].mutations)})).catch(eT)},zI.prototype.Pl=function(t,e){var n=this;Um(0<this.Vd.length,"Got result for empty write pipeline");var r=this.Vd.shift(),i=lE.from(r,t,e,this.Qd.lastStreamToken);return this.nv.av(i).then((function(){return n.Jd()}))},zI.prototype.Wd=function(t){return ps(this,void 0,void 0,(function(){var e=this;return fs(this,(function(n){return void 0===t&&Um(!this.ov(),"Write stream was stopped gracefully while still needed."),t&&0<this.Vd.length?[2,(this.Qd.Al?this.fv(t):this.lv(t)).then((function(){e.ov()&&e.hv()}))]:[2]}))}))},zI.prototype.lv=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){return Yw(t.code)?(Om(VI,"RemoteStore error before completed handshake; resetting stream token: ",this.Qd.lastStreamToken),this.Qd.lastStreamToken=jw.Si,[2,this.Oc.To(jw.Si).catch(eT)]):[2]}))}))},zI.prototype.fv=function(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){return Yw(i=t.code)&&i!==Xm.ABORTED?(e=this.Vd.shift(),this.Qd.al(),[2,this.nv.dv(e.batchId,t).then((function(){return n.Jd()}))]):[2];var i}))}))},zI.prototype.vv=function(){return new qI(this.vd)},zI.prototype.jd=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.Yd()];case 1:return t.sent(),this.Ud.set(rw.Ti),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},zI.prototype.wv=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.xd()?(Om(VI,"RemoteStore restarting streams for new credential"),[4,this.jd()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},zI.prototype.mv=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.Yd()];case 3:e.sent(),this.Ud.set(rw.Ti),e.label=4;case 4:return[2]}}))}))},zI),HI="firestore_clients";function zI(t,e,n,r,i){var o=this;this.Oc=t,this.vd=e,this.Vd=[],this.Nd={},this.kd=null,this.networkEnabled=!1,this.isPrimary=!1,this.Od=i,this.Od.Fd((function(t){n.Uu((function(){return ps(o,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.xd()?(Om(VI,"Restarting streams for network reachability change."),[4,this.jd()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ud=new BI(n,r),this.Ld=this.vd.Nl({_l:this.Bd.bind(this),ml:this.Md.bind(this),Tl:this.qd.bind(this)}),this.Qd=this.vd.Vl({_l:this.Gd.bind(this),ml:this.Wd.bind(this),Sl:this.zd.bind(this),Pl:this.Pl.bind(this)})}function GI(t,e){this.Su=t,this.Id=e,this.state=rw.Ti,this.Td=0,this.Ed=null,this.Rd=!0}function KI(t){this.vd=t,this.wd=r_(),this.mutations=[],this.md=!1,this.pd=null,this.gd=new Set}function QI(t,e){return Um(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),HI+"_"+t+"_"+e}var YI="firestore_mutations";function XI(t,e,n){var r=YI+"_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}var $I="firestore_targets";function JI(t,e){return $I+"_"+t+"_"+e}var ZI="SharedClientState",tC=(hC.pv=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new $m(r.error.code,r.error.message)),i?new hC(t,e,r.state,o):(Lm(ZI,"Failed to parse mutation state for ID '"+e+"': "+n),null)},hC.prototype.gv=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},hC),eC=(lC.pv=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new $m(n.error.code,n.error.message)),r?new lC(t,n.state,i):(Lm(ZI,"Failed to parse target state for ID '"+t+"': "+e),null)},lC.prototype.gv=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},lC),nC=(cC.pv=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=a_(),o=0;r&&o<n.activeTargetIds.length;++o)r=Jb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new cC(t,i):(Lm(ZI,"Failed to parse client data for instance '"+t+"': "+e),null)},cC),rC=(uC.pv=function(t){var e=JSON.parse(t);return"object"==typeof e&&e.onlineState in rw&&"string"==typeof e.clientId?new uC(e.clientId,rw[e.onlineState]):(Lm(ZI,"Failed to parse online state: "+t),null)},uC),iC=(aC.prototype.bv=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},aC.prototype.yv=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},aC.prototype.gv=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},aC),oC=(sC.Js=function(t){return!(!t.window||null==t.window.localStorage)},sC.prototype.start=function(){return ps(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return fs(this,(function(h){switch(h.label){case 0:return Um(!this.ph,"WebStorageSharedClientState already started"),Um(null!==this.nv,"syncEngine property must be set before calling start()"),Um(null!==this.Id,"onlineStateHandler property must be set before calling start()"),[4,this.nv.sc()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._v&&(i=this.getItem(QI(this.persistenceKey,r)))&&(o=nC.pv(r,i))&&(this.Iv[o.clientId]=o);for(this.Nv(),(s=this.storage.getItem(this.Vv))&&(a=this.kv(s))&&this.Ov(a),u=0,c=this.Rv;u<c.length;u++)this.Ev(c[u]);return this.Rv=[],this.platform.window.addEventListener("unload",(function(){return l.shutdown()})),this.ph=!0,[2]}}))}))},sC.prototype.gu=function(t){this.setItem(this.Dv,JSON.stringify(t))},sC.prototype.Fv=function(){var t=a_();return pv(this.Iv,(function(e,n){t=t.qt(n.activeTargetIds)})),t},sC.prototype.xv=function(t){for(var e in this.Iv)if(this.Iv.hasOwnProperty(e)&&this.Iv[e].activeTargetIds.has(t))return!0;return!1},sC.prototype.jv=function(t){this.Uv(t,"pending")},sC.prototype.Lv=function(t,e,n){this.Uv(t,e,n),this.Bv(t)},sC.prototype.Mv=function(t){var e="not-current";if(this.xv(t)){var n=this.storage.getItem(JI(this.persistenceKey,t));if(n){var r=eC.pv(t,n);r&&(e=r.state)}}return this.qv.bv(t),this.Nv(),e},sC.prototype.Qv=function(t){this.qv.yv(t),this.Nv()},sC.prototype.Gv=function(t){return this.qv.activeTargetIds.has(t)},sC.prototype.Wv=function(t){this.removeItem(JI(this.persistenceKey,t))},sC.prototype.zv=function(t,e,n){this.Kv(t,e,n)},sC.prototype.Ph=function(t,e,n){var r=this;e.forEach((function(t){r.Bv(t)})),this.currentUser=t,n.forEach((function(t){r.jv(t)}))},sC.prototype.Hv=function(t){this.Jv(t)},sC.prototype.shutdown=function(){this.ph&&(this.platform.window.removeEventListener("storage",this.Tv),this.removeItem(this.Av),this.ph=!1)},sC.prototype.getItem=function(t){var e=this.storage.getItem(t);return Om(ZI,"READ",t,e),e},sC.prototype.setItem=function(t,e){Om(ZI,"SET",t,e),this.storage.setItem(t,e)},sC.prototype.removeItem=function(t){Om(ZI,"REMOVE",t),this.storage.removeItem(t)},sC.prototype.Ev=function(t){var e=this;if(t.storageArea===this.storage){if(Om(ZI,"EVENT",t.key,t.newValue),t.key===this.Av)return void Lm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Da.Uu((function(){return ps(e,void 0,void 0,(function(){var e,n,r,i,o,s;return fs(this,(function(a){if(!this.ph)return this.Rv.push(t),[2];if(null===t.key)return[2];if(this.Pv.test(t.key)){if(null==t.newValue)return n=this.Yv(t.key),[2,this.Xv(n,null)];if(e=this.$v(t.key,t.newValue))return[2,this.Xv(e.clientId,e)]}else if(this.Sv.test(t.key)){if(null!==t.newValue&&(r=this.Zv(t.key,t.newValue)))return[2,this.tw(r)]}else if(this.Cv.test(t.key)){if(null!==t.newValue&&(i=this.nw(t.key,t.newValue)))return[2,this.iw(i)]}else if(t.key===this.Vv){if(null!==t.newValue&&(o=this.kv(t.newValue)))return[2,this.Ov(o)]}else t.key===this.Dv&&(Um(!!this.wu,"Missing sequenceNumberHandler"),(s=function(t){var e=J_.bu;if(null!=t)try{var n=JSON.parse(t);Um("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Lm(ZI,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==J_.bu&&this.wu(s));return[2]}))}))}))}},Object.defineProperty(sC.prototype,"qv",{get:function(){return this.Iv[this._v]},enumerable:!0,configurable:!0}),sC.prototype.Nv=function(){this.setItem(this.Av,this.qv.gv())},sC.prototype.Uv=function(t,e,n){var r=new tC(this.currentUser,t,e,n),i=XI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.gv())},sC.prototype.Bv=function(t){var e=XI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},sC.prototype.Jv=function(t){this.storage.setItem(this.Vv,JSON.stringify({clientId:this._v,onlineState:rw[t]}))},sC.prototype.Kv=function(t,e,n){var r=JI(this.persistenceKey,t),i=new eC(t,e,n);this.setItem(r,i.gv())},sC.prototype.Yv=function(t){var e=this.Pv.exec(t);return e?e[1]:null},sC.prototype.$v=function(t,e){var n=this.Yv(t);return Um(null!==n,"Cannot parse client state key '"+t+"'"),nC.pv(n,e)},sC.prototype.Zv=function(t,e){var n=this.Sv.exec(t);Um(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return tC.pv(new Ym(void 0!==n[2]?n[2]:null),r,e)},sC.prototype.nw=function(t,e){var n=this.Cv.exec(t);Um(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return eC.pv(r,e)},sC.prototype.kv=function(t){return rC.pv(t)},sC.prototype.tw=function(t){return ps(this,void 0,void 0,(function(){return fs(this,(function(e){return t.user.uid!==this.currentUser.uid?(Om(ZI,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.nv.ew(t.batchId,t.state,t.error)]}))}))},sC.prototype.iw=function(t){return this.nv.rw(t.targetId,t.state,t.error)},sC.prototype.Xv=function(t,e){var n=this,r=this.Fv();e?this.Iv[t]=e:delete this.Iv[t];var i=this.Fv(),o=[],s=[];return i.forEach((function(t){return ps(n,void 0,void 0,(function(){return fs(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return ps(n,void 0,void 0,(function(){return fs(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),this.nv.uw(o,s)},sC.prototype.Ov=function(t){this.Iv[t.clientId]&&this.Id(t.onlineState)},sC);function sC(t,e,n,r,i){if(this.Da=t,this.platform=e,this.persistenceKey=n,this._v=r,this.nv=null,this.Id=null,this.wu=null,this.Iv={},this.Tv=this.Ev.bind(this),this.ph=!1,this.Rv=[],!sC.Js(this.platform))throw new $m(Xm.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.Av=QI(this.persistenceKey,this._v),this.Dv="firestore_sequence_number_"+this.persistenceKey,this.Iv[this._v]=new iC,this.Pv=new RegExp("^"+HI+"_"+o+"_([^_]*)$"),this.Sv=new RegExp("^"+YI+"_"+o+"_(\\d+)(?:_(.*))?$"),this.Cv=new RegExp("^"+$I+"_"+o+"_(\\d+)$"),this.Vv="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Tv)}function aC(){this.activeTargetIds=a_()}function uC(t,e){this.clientId=t,this.onlineState=e}function cC(t,e){this.clientId=t,this.activeTargetIds=e}function lC(t,e,n){this.targetId=t,this.state=e,Um(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function hC(t,e,n,r){this.user=t,this.batchId=e,this.state=n,Um(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function pC(t){this.key=t}function fC(t){this.key=t}var dC=(vC.prototype.jv=function(t){},vC.prototype.Lv=function(t,e,n){},vC.prototype.Mv=function(t){return this.sw.bv(t),this.ow[t]||"not-current"},vC.prototype.zv=function(t,e,n){this.ow[t]=e},vC.prototype.Qv=function(t){this.sw.yv(t)},vC.prototype.Gv=function(t){return this.sw.activeTargetIds.has(t)},vC.prototype.Wv=function(t){delete this.ow[t]},vC.prototype.Fv=function(){return this.sw.activeTargetIds},vC.prototype.xv=function(t){return this.sw.activeTargetIds.has(t)},vC.prototype.start=function(){return this.sw=new iC,Promise.resolve()},vC.prototype.Ph=function(t,e,n){},vC.prototype.Hv=function(t){},vC.prototype.shutdown=function(){},vC.prototype.gu=function(t){},vC),yC=(Object.defineProperty(mC.prototype,"lw",{get:function(){return this.hw},enumerable:!0,configurable:!0}),mC.prototype.dw=function(t,e){var n=this,r=e?e.vw:new g_,i=e?e.fw:this.fw,o=e?e.Yi:this.Yi,s=i,a=!1,u=this.query.mi()&&i.size===this.query.limit?i.last():null,c=this.query.pi()&&i.size===this.query.limit?i.first():null;if(t.pt((function(t,e){var l=i.get(t),h=e instanceof xb?e:null;h&&(Um(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var p=!!l&&n.Yi.has(l.key),f=!!h&&(h.un||n.Yi.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?p!==f&&(r.track({type:u_.Gi,doc:h}),d=!0):n.ww(l,h)||(r.track({type:u_.Qi,doc:h}),d=!0,(u&&0<n.query.fi(h,u)||c&&n.query.fi(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:u_.Mi,doc:h}),d=!0):l&&!h&&(r.track({type:u_.qi,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(o=h?(s=s.add(h),f?o.add(t):o.delete(t)):(s=s.delete(t),o.delete(t)))})),this.query.mi()||this.query.pi())for(;s.size>this.query.limit;){var l=this.query.mi()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:u_.qi,doc:l})}return Um(!a||!e,"View was refilled using docs that themselves needed refilling."),{fw:s,vw:r,bf:a,Yi:o}},mC.prototype.ww=function(t,e){return t.un&&e.hasCommittedMutations&&!e.un},mC.prototype.Qs=function(t,e,n){var r=this;Um(!t.bf,"Cannot apply changes that need a refill");var i=this.fw;this.fw=t.fw,this.Yi=t.Yi;var o=t.vw.Hi();o.sort((function(t,e){return i=e.type,n(t.type)-n(i)||r.query.fi(t.doc,e.doc);function n(t){switch(t){case u_.Mi:return 1;case u_.Qi:case u_.Gi:return 2;case u_.qi:return 0;default:return Fm("Unknown ChangeType: "+t)}}var i})),this.mw(n);var s=e?this.pw():[],a=0===this.aw.size&&this.se?l_.zi:l_.Wi,u=a!==this.cw;return this.cw=a,0!==o.length||u?{snapshot:new b_(this.query,t.fw,i,o,t.Yi,a===l_.Wi,u,!1),gw:s}:{gw:s}},mC.prototype.bw=function(t){return this.se&&t===rw.Ri?(this.se=!1,this.Qs({fw:this.fw,vw:new g_,Yi:this.Yi,bf:!1},!1)):{gw:[]}},mC.prototype.yw=function(t){return!this.hw.has(t)&&!!this.fw.has(t)&&!this.fw.get(t).un},mC.prototype.mw=function(t){var e=this;t&&(t.oe.forEach((function(t){return e.hw=e.hw.add(t)})),t.he.forEach((function(t){return Um(e.hw.has(t),"Modified document "+t+" not found in view.")})),t.ce.forEach((function(t){return e.hw=e.hw.delete(t)})),this.se=t.se)},mC.prototype.pw=function(){var t=this;if(!this.se)return[];var e=this.aw;this.aw=o_(),this.fw.forEach((function(e){t.yw(e.key)&&(t.aw=t.aw.add(e.key))}));var n=[];return e.forEach((function(e){t.aw.has(e)||n.push(new fC(e))})),this.aw.forEach((function(t){e.has(t)||n.push(new pC(t))})),n},mC.prototype._w=function(t){this.hw=t.rc,this.aw=o_();var e=this.dw(t.documents);return this.Qs(e,!0)},mC.prototype.Iw=function(){return b_.Zi(this.query,this.fw,this.Yi,this.cw===l_.Wi)},mC);function mC(t,e){this.query=t,this.hw=e,this.cw=null,this.se=!1,this.aw=o_(),this.Yi=o_(),this.fw=new p_(t.fi.bind(t))}function vC(){this.sw=new iC,this.ow={},this.nv=null,this.Id=null,this.wu=null}function gC(t,e,n){this.query=t,this.targetId=e,this.view=n}function bC(t){this.key=t,this.Sw=!1}function wC(){this.sm=null,this.targetId=0,this.listeners=[]}function _C(){}var EC=(LC.prototype.run=function(){this.Rw()},LC.prototype.Rw=function(){var t=this;this.sl.Yf((function(){return ps(t,void 0,void 0,(function(){var t,e,n=this;return fs(this,(function(r){return t=this.Tw.vv(),(e=this.Aw(t))&&e.then((function(e){n.Su.Uu((function(){return t.commit().then((function(){n.ku.resolve(e)})).catch((function(t){n.Dw(t)}))}))})).catch((function(t){n.Dw(t)})),[2]}))}))}))},LC.prototype.Aw=function(t){try{var e=this.updateFunction(t);return!$b(e)&&e.catch&&e.then?e:(this.ku.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ku.reject(t),null}},LC.prototype.Dw=function(t){var e=this;0<this.Ew&&this.Pw(t)?(this.Ew-=1,this.Su.Uu((function(){return e.Rw(),Promise.resolve()}))):this.ku.reject(t)},LC.prototype.Pw=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!Yw(e)},LC),TC=(Object.defineProperty(OC.prototype,"Bw",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),OC.prototype.subscribe=function(t){Um(null!==t,"SyncEngine listener cannot be null"),Um(null===this.Vw,"SyncEngine already has a subscriber."),this.Vw=t},OC.prototype.listen=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return this.Mw("listen()"),(r=this.Nw.get(t))?(this.Cw.Mv(e=r.targetId),n=r.view.Iw(),[3,4]):[3,1];case 1:return[4,this.Oc.Xh(t.ai())];case 2:return i=s.sent(),o=this.Cw.Mv(i.targetId),[4,this.qw(t,e=i.targetId,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.Tw.listen(i),s.label=4;case 4:return this.Vw.Tl([n]),[2,e]}}))}))},OC.prototype.qw=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i,o,s,a,u;return fs(this,(function(c){switch(c.label){case 0:return[4,this.Oc.ic(t,!0)];case 1:return r=c.sent(),i=new yC(t,r.rc),o=i.dw(r.documents),s=__.ue(e,n&&this.onlineState!==rw.Ri),Um(0===(a=i.Qs(o,!0===this.isPrimary,s)).gw.length,"View returned limbo docs before target ack from the server."),Um(!!a.snapshot,"applyChanges for new view should always return a snapshot"),u=new gC(t,e,i),this.Nw.set(t,u),this.kw[e]||(this.kw[e]=[]),this.kw[e].push(t),[2,a.snapshot]}}))}))},OC.prototype.Qw=function(t){return ps(this,void 0,void 0,(function(){var e,n;return fs(this,(function(r){switch(r.label){case 0:return[4,this.Oc.ic(t.query,!0)];case 1:return e=r.sent(),n=t.view._w(e),this.isPrimary&&this.Gw(t.targetId,n.gw),[2,n]}}))}))},OC.prototype.Zd=function(t){return ps(this,void 0,void 0,(function(){var e,n,r=this;return fs(this,(function(i){switch(i.label){case 0:return this.Mw("unlisten()"),Um(!!(e=this.Nw.get(t)),"Trying to unlisten on query not found:"+t),1<(n=this.kw[e.targetId]).length?(this.kw[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.Nw.delete(t),[2]):this.isPrimary?(this.Cw.Qv(e.targetId),this.Cw.xv(e.targetId)?[3,2]:[4,this.Oc.nc(e.targetId,!1).then((function(){r.Cw.Wv(e.targetId),r.Tw.Zd(e.targetId),r.Ww(e.targetId)})).catch(eT)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.Ww(e.targetId),[4,this.Oc.nc(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},OC.prototype.write=function(t,e){return ps(this,void 0,void 0,(function(){var n;return fs(this,(function(r){switch(r.label){case 0:return this.Mw("write()"),[4,this.Oc.Nh(t)];case 1:return n=r.sent(),this.Cw.jv(n.batchId),this.zw(n.batchId,e),[4,this.Kw(n.Os)];case 2:return r.sent(),[4,this.Tw.Jd()];case 3:return r.sent(),[2]}}))}))},OC.prototype.runTransaction=function(t,e,n){new EC(t,this.Tw,e,n).run()},OC.prototype.Lh=function(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){switch(r.label){case 0:this.Mw("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Oc.Lh(t)];case 2:return e=r.sent(),pv(t.te,(function(t,e){var r=n.Fw[Number(t)];r&&(Um(e.oe.size+e.he.size+e.ce.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.oe.size?r.Sw=!0:0<e.he.size?Um(r.Sw,"Received change for limbo target document without add."):0<e.ce.size&&(Um(r.Sw,"Received remove for limbo target document without add."),r.Sw=!1))})),[4,this.Kw(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,eT(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},OC.prototype.bw=function(t,e){if(this.isPrimary&&e===ow.Ai||!this.isPrimary&&e===ow.Di){this.Mw("applyOnlineStateChange()");var n=[];this.Nw.forEach((function(e,r){var i=r.view.bw(t);Um(0===i.gw.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.Vw.Hw(t),this.Vw.Tl(n),this.onlineState=t,this.isPrimary&&this.Cw.Hv(t)}},OC.prototype.rv=function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return fs(this,(function(u){switch(u.label){case 0:return this.Mw("rejectListens()"),this.Cw.zv(t,"rejected",e),(r=(n=this.Fw[t])&&n.key)?(this.Ow=this.Ow.remove(r),delete this.Fw[t],i=(i=new Vv(Bv.G)).lt(r,new Db(r,Mv.B())),o=o_().add(r),s=new w_(Mv.MIN,{},new rg(Bm),i,o),[2,this.Lh(s)]):[3,1];case 1:return[4,this.Oc.nc(t,!1).then((function(){return a.Ww(t,e)})).catch(eT)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},OC.prototype.ew=function(t,e,n){return ps(this,void 0,void 0,(function(){var r;return fs(this,(function(i){switch(i.label){case 0:return this.Mw("applyBatchState()"),[4,this.Oc.kh(t)];case 1:return null===(r=i.sent())?(Om("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Tw.Jd()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Jw(t,n||null),this.Oc.oc(t)):Fm("Unknown batchState: "+e),i.label=4;case 4:return[4,this.Kw(r)];case 5:return i.sent(),[2]}}))}))},OC.prototype.av=function(t){return ps(this,void 0,void 0,(function(){var e,n;return fs(this,(function(r){switch(r.label){case 0:this.Mw("applySuccessfulWrite()"),this.Jw(e=t.batch.batchId,null),this.Yw(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Oc.yo(t)];case 2:return n=r.sent(),this.Cw.Lv(e,"acknowledged"),[4,this.Kw(n)];case 3:return r.sent(),[3,6];case 4:return[4,eT(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},OC.prototype.dv=function(t,e){return ps(this,void 0,void 0,(function(){var n;return fs(this,(function(r){switch(r.label){case 0:this.Mw("rejectFailedWrite()"),this.Jw(t,e),this.Yw(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Oc.jh(t)];case 2:return n=r.sent(),this.Cw.Lv(t,"rejected",e),[4,this.Kw(n)];case 3:return r.sent(),[3,6];case 4:return[4,eT(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},OC.prototype.Xw=function(t){return ps(this,void 0,void 0,(function(){var e,n;return fs(this,(function(r){switch(r.label){case 0:return this.Tw.xd()||Om("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Oc.Vo()];case 1:return-1===(e=r.sent())?t.resolve():((n=this.Uw.get(e)||[]).push(t),this.Uw.set(e,n)),[2]}}))}))},OC.prototype.Yw=function(t){(this.Uw.get(t)||[]).forEach((function(t){t.resolve()})),this.Uw.delete(t)},OC.prototype.$w=function(t){this.Uw.forEach((function(e){e.forEach((function(e){e.reject(new $m(Xm.CANCELLED,t))}))})),this.Uw.clear()},OC.prototype.zw=function(t,e){var n=this.jw[this.currentUser.v()];n=(n=n||new Vv(Bm)).lt(t,e),this.jw[this.currentUser.v()]=n},OC.prototype.Jw=function(t,e){var n=this.jw[this.currentUser.v()];if(n){var r=n.get(t);r&&(Um(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.jw[this.currentUser.v()]=n}},OC.prototype.Ww=function(t,e){var n=this;void 0===e&&(e=null),this.Cw.Qv(t),Um(this.kw[t]&&0!==this.kw[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.kw[t];r<i.length;r++){var o=i[r];this.Nw.delete(o),e&&this.Vw.Zw(o,e)}if(delete this.kw[t],this.isPrimary){var s=this.xw.bs(t);this.xw.ps(t),s.forEach((function(t){n.xw.ys(t)||n.tm(t)}))}},OC.prototype.tm=function(t){var e=this.Ow.get(t);null!==e&&(this.Tw.Zd(e),this.Ow=this.Ow.remove(t),delete this.Fw[e])},OC.prototype.Gw=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof pC?(this.xw.ls(i.key,t),this.nm(i)):i instanceof fC?(Om("SyncEngine","Document no longer in limbo: "+i.key),this.xw.vs(i.key,t),this.xw.ys(i.key)||this.tm(i.key)):Fm("Unknown limbo change: "+JSON.stringify(i))}},OC.prototype.nm=function(t){var e=t.key;if(!this.Ow.get(e)){Om("SyncEngine","New document in limbo: "+e);var n=this.Lw.next(),r=fw.$n(e.path);this.Fw[n]=new bC(e),this.Tw.listen(new zw(r.ai(),n,Fw.Ni,J_.bu)),this.Ow=this.Ow.lt(e,n)}},OC.prototype.im=function(){return this.Ow},OC.prototype.Kw=function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o=this;return fs(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.Nw.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.dw(t);return e.bf?o.Oc.ic(a.query,!1).then((function(t){return a.view.dw(t.documents,e)})):e})).then((function(t){var i=a.view.Qs(t,!0===o.isPrimary,e&&e.te[a.targetId]);if(o.Gw(a.targetId,i.gw),i.snapshot){o.isPrimary&&o.Cw.zv(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var s=QE.fh(a.targetId,i.snapshot);r.push(s)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.Vw.Tl(n),[4,this.Oc.Hh(r)];case 2:return s.sent(),[2]}}))}))},OC.prototype.Mw=function(t){Um(null!==this.Vw,"Trying to call "+t+" before calling subscribe().")},OC.prototype.wv=function(t){return ps(this,void 0,void 0,(function(){var e,n;return fs(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.$w("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Oc.Ph(t)]):[3,3];case 1:return n=r.sent(),this.Cw.Ph(t,n.Ch,n.Vh),[4,this.Kw(n.Sh)];case 2:r.sent(),r.label=3;case 3:return[4,this.Tw.wv()];case 4:return r.sent(),[2]}}))}))},OC.prototype.mv=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o,s=this;return fs(this,(function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Tw.mv(!0)]);case 1:return a.sent(),i=this.Cw.Fv(),[4,this.em(i.tt())];case 2:for(e=a.sent(),n=0,r=e;n<r.length;n++)this.Tw.listen(r[n]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,i=[],o=Promise.resolve(),hv(this.kw,(function(t,e){s.Cw.Gv(t)?i.push(t):o=o.then((function(){return s.Ww(t),s.Oc.nc(t,!0)})),s.Tw.Zd(t)})),[4,o]);case 4:return a.sent(),[4,this.em(i)];case 5:return a.sent(),this.rm(),[4,this.Tw.mv(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},OC.prototype.rm=function(){var t=this;hv(this.Fw,(function(e){t.Tw.Zd(e)})),this.xw.gs(),this.Fw=[],this.Ow=new Vv(Bv.G)},OC.prototype.em=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,p,f;return fs(this,(function(d){switch(d.label){case 0:e=[],n=[],r=0,i=t,d.label=1;case 1:return r<i.length?(s=void 0,(a=this.kw[o=i[r]])&&0!==a.length?[4,this.Oc.nc(o,!0)]:[3,8]):[3,14];case 2:return d.sent(),[4,this.Oc.Xh(a[0].ai())];case 3:s=d.sent(),u=0,c=a,d.label=4;case 4:return u<c.length?(Um(!!(h=this.Nw.get(l=c[u])),"No query view found for "+l),[4,this.Qw(h)]):[3,7];case 5:(p=d.sent()).snapshot&&n.push(p.snapshot),d.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return Um(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.Oc.fc(o)];case 9:return Um(!!(f=d.sent()),"Target for id "+o+" not found"),[4,this.Oc.Xh(f)];case 10:return s=d.sent(),[4,this.qw(this.um(f),o,!1)];case 11:d.sent(),d.label=12;case 12:e.push(s),d.label=13;case 13:return r++,[3,1];case 14:return this.Vw.Tl(n),[2,e]}}))}))},OC.prototype.um=function(t){return new fw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,Zb.Wn,t.startAt,t.endAt)},OC.prototype.sc=function(){return this.Oc.sc()},OC.prototype.rw=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i;return fs(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return Om("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.kw[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.Oc.lc()];case 2:return r=o.sent(),i=w_.re(t,"current"===e),[4,this.Kw(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.Oc.nc(t,!0)];case 5:return o.sent(),this.Ww(t,n),[3,7];case 6:Fm("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},OC.prototype.uw=function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h=this;return fs(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(Um(!this.kw[l=r[n]],"Trying to add an already active target"),[4,this.Oc.fc(l)]):[3,6];case 2:return Um(!!(i=p.sent()),"Query data for active target "+l+" not found"),[4,this.Oc.Xh(i)];case 3:return o=p.sent(),[4,this.qw(this.um(i),o.targetId,!1)];case 4:p.sent(),this.Tw.listen(o),p.label=5;case 5:return n++,[3,1];case 6:s=function(t){return fs(this,(function(e){switch(e.label){case 0:return a.kw[t]?[4,a.Oc.nc(t,!1).then((function(){h.Tw.Zd(t),h.Ww(t)})).catch(eT)]:[2,"continue"];case 1:return e.sent(),[2]}}))},a=this,u=0,c=e,p.label=7;case 7:return u<c.length?[5,s(l=c[u])]:[3,10];case 8:p.sent(),p.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},OC.prototype.enableNetwork=function(){return this.Oc.hc(!0),this.Tw.enableNetwork()},OC.prototype.disableNetwork=function(){return this.Oc.hc(!1),this.Tw.disableNetwork()},OC.prototype.Ye=function(t){var e=this.Fw[t];if(e&&e.Sw)return o_().add(e.key);var n=o_(),r=this.kw[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.Nw.get(s);Um(!!a,"No query view found for "+s),n=n.qt(a.view.lw)}return n},OC),SC=(PC.prototype.listen=function(t){var e=t.query,n=!1,r=this.om.get(e);return r||(n=!0,r=new wC,this.om.set(e,r)),r.listeners.push(t),Um(!t.bw(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.sm&&t.cm(r.sm)&&this.am(),n?this.nv.listen(e).then((function(t){return r.targetId=t})):Promise.resolve(r.targetId)},PC.prototype.Zd=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i;return fs(this,(function(o){return n=!1,(r=this.om.get(e=t.query))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.om.delete(e),[2,this.nv.Zd(e)]):[2]}))}))},PC.prototype.Tl=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.om.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].cm(i)&&(e=!0);o.sm=i}}e&&this.am()},PC.prototype.Zw=function(t,e){var n=this.om.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.om.delete(t)},PC.prototype.Hw=function(t){this.onlineState=t;var e=!1;this.om.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].bw(t)&&(e=!0)})),e&&this.am()},PC.prototype.fm=function(t){this.hm.add(t),t.next()},PC.prototype.lm=function(t){this.hm.delete(t)},PC.prototype.am=function(){this.hm.forEach((function(t){t.next()}))},PC),IC=(RC.prototype.cm=function(t){if(Um(0<t.docChanges.length||t.Xi,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==u_.Gi&&e.push(i)}t=new b_(t.query,t.docs,t.Ji,e,t.Yi,t.fromCache,t.Xi,!0)}var o=!1;return this.vm?this.mm(t)&&(this.dm.next(t),o=!0):this.pm(t,this.onlineState)&&(this.gm(t),o=!0),this.wm=t,o},RC.prototype.onError=function(t){this.dm.error(t)},RC.prototype.bw=function(t){this.onlineState=t;var e=!1;return this.wm&&!this.vm&&this.pm(this.wm,t)&&(this.gm(this.wm),e=!0),e},RC.prototype.pm=function(t,e){return Um(!this.vm,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.bm&&e!==rw.Ri?(Um(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||e===rw.Ri)},RC.prototype.mm=function(t){return 0<t.docChanges.length||!!(t.Xi||this.wm&&this.wm.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},RC.prototype.gm=function(t){Um(!this.vm,"Trying to raise initial events for second time"),t=b_.Zi(t.query,t.docs,t.Yi,t.fromCache),this.vm=!0,this.dm.next(t)},RC),CC=(DC.prototype.La=function(){return oT.Ac(this.cacheSizeBytes)},DC),kC=(xC.prototype.start=function(t){var e=this;this._m();var n=new K_,r=new K_,i=!1;return this.credentials.T((function(o){i?e.Su.Uu((function(){return e.wv(o)})):(i=!0,e.Im(t,r,o).then((function(t){return e.Tm(o,t)})).then(n.resolve,n.reject))})),this.Su.Uu((function(){return n.promise})),r.promise},xC.prototype.enableNetwork=function(){var t=this;return this._m(),this.Su.enqueue((function(){return t.nv.enableNetwork()}))},xC.prototype.Im=function(t,e,n){var r=this;return t instanceof CC?this.Em(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.Rm(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Am()})):(e.resolve(),this.Am())},xC.prototype.Rm=function(t){return t instanceof $m?t.code===Xm.FAILED_PRECONDITION||t.code===Xm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},xC.prototype._m=function(){if(this.Su.Wu)throw new $m(Xm.FAILED_PRECONDITION,"The client has already been terminated.")},xC.prototype.Em=function(t,e){var n=this,r=dS.ff(this.ym),i=new q_(this.ym.s,{tr:!0});return Promise.resolve().then((function(){return ps(n,void 0,void 0,(function(){var n,o;return fs(this,(function(s){switch(s.label){case 0:if(e.synchronizeTabs&&!oC.Js(this.platform))throw new $m(Xm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.La(),this.Cw=e.synchronizeTabs?new oC(this.Su,this.platform,r,this.clientId,t):new dC,[4,dS.Ua({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,Da:this.Su,serializer:i,La:n,Pa:this.Cw})];case 1:return o=s.sent(),[2,(this.persistence=o).wo.kc]}}))}))}))},xC.prototype.Am=function(){return this.persistence=RS.Of(this.clientId),this.Cw=new dC,Promise.resolve(null)},xC.prototype.Tm=function(t,e){var n=this;return Om("FirestoreClient","Initializing. user=",t.uid),this.platform.Dm(this.ym).then((function(r){return ps(n,void 0,void 0,(function(){var n,i,o,s,a,u=this;return fs(this,(function(c){switch(c.label){case 0:return n=new ES,this.Oc=new XE(this.persistence,n,t),[4,this.Oc.start()];case 1:return c.sent(),e&&(this.Pm=new sT(e,this.Su,this.Oc)),i=this.platform.Sm(),o=this.platform.Cm(this.ym.s),s=new XS(this.Su,r,this.credentials,o),a=function(t){return u.nv.bw(t,ow.Di)},this.Tw=new WI(this.Oc,s,this.Su,(function(t){return u.nv.bw(t,ow.Ai)}),i),this.nv=new TC(this.Oc,this.Tw,this.Cw,t),this.Cw.Id=a,this.Tw.nv=this.nv,this.Cw.nv=this.nv,this.Vm=new SC(this.nv),[4,this.Cw.start()];case 2:return c.sent(),[4,this.Tw.start()];case 3:return c.sent(),[4,this.persistence.za((function(t){return ps(u,void 0,void 0,(function(){return fs(this,(function(e){switch(e.label){case 0:return[4,this.nv.mv(t)];case 1:return e.sent(),this.Pm&&(t&&!this.Pm.ph?this.Pm.start():t||this.Pm.stop()),[2]}}))}))}))];case 4:return c.sent(),[4,this.persistence.Ka((function(){return ps(u,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return c.sent(),[2]}}))}))}))},xC.prototype.wv=function(t){return this.Su.Zu(),Om("FirestoreClient","Credential Changed. Current user: "+t.uid),this.nv.wv(t)},xC.prototype.disableNetwork=function(){var t=this;return this._m(),this.Su.enqueue((function(){return t.nv.disableNetwork()}))},xC.prototype.terminate=function(){var t=this;return this.Su.Yu((function(){return ps(t,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.Pm&&this.Pm.stop(),[4,this.Tw.shutdown()];case 1:return t.sent(),[4,this.Cw.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.R(),[2]}}))}))}))},xC.prototype.waitForPendingWrites=function(){var t=this;this._m();var e=new K_;return this.Su.Uu((function(){return t.nv.Xw(e)})),e.promise},xC.prototype.listen=function(t,e,n){var r=this;this._m();var i=new IC(t,e,n);return this.Su.Uu((function(){return r.Vm.listen(i)})),i},xC.prototype.Zd=function(t){var e=this;this.Nm||this.Su.Uu((function(){return e.Vm.Zd(t)}))},xC.prototype.km=function(t){var e=this;return this._m(),this.Su.enqueue((function(){return e.Oc.Yh(t)})).then((function(t){if(t instanceof xb)return t;if(t instanceof Db)return null;throw new $m(Xm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},xC.prototype.Om=function(t){var e=this;return this._m(),this.Su.enqueue((function(){return ps(e,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,this.Oc.ic(t,!0)];case 1:return e=i.sent(),n=new yC(t,e.rc),r=n.dw(e.documents),[2,n.Qs(r,!1).snapshot]}}))}))}))},xC.prototype.write=function(t){var e=this;this._m();var n=new K_;return this.Su.Uu((function(){return e.nv.write(t,n)})),n.promise},xC.prototype.s=function(){return this.ym.s},xC.prototype.fm=function(t){var e=this;this._m(),this.Su.Uu((function(){return e.Vm.fm(t),Promise.resolve()}))},xC.prototype.lm=function(t){this.Nm||this.Vm.lm(t)},Object.defineProperty(xC.prototype,"Nm",{get:function(){return this.Su.Wu},enumerable:!0,configurable:!0}),xC.prototype.transaction=function(t){var e=this;this._m();var n=new K_;return this.Su.Uu((function(){return e.nv.runTransaction(e.Su,t,n),Promise.resolve()})),n.promise},xC),AC=(NC.prototype.next=function(t){this.Fm(this.observer.next,t)},NC.prototype.error=function(t){this.Fm(this.observer.error,t)},NC.prototype.xm=function(){this.muted=!0},NC.prototype.Fm=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},NC);function NC(t){this.observer=t,this.muted=!1}function xC(t,e,n,r){this.platform=t,this.ym=e,this.credentials=n,this.Su=r,this.clientId=jm.u()}function DC(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}function RC(t,e,n){this.query=t,this.dm=e,this.vm=!1,this.wm=null,this.onlineState=rw.Ti,this.options=n||{}}function PC(t){this.nv=t,this.om=new fE((function(t){return t.canonicalId()})),this.onlineState=rw.Ti,this.hm=new Set,this.nv.subscribe(this)}function OC(t,e,n,r){this.Oc=t,this.Tw=e,this.Cw=n,this.currentUser=r,this.Vw=null,this.Nw=new fE((function(t){return t.canonicalId()})),this.kw={},this.Ow=new Vv(Bv.G),this.Fw={},this.xw=new hE,this.jw={},this.Uw=new Map,this.Lw=GE.Ho(),this.isPrimary=void 0,this.onlineState=rw.Ti}function LC(t,e,n,r){this.Su=t,this.Tw=e,this.updateFunction=n,this.ku=r,this.Ew=5,this.sl=new MS(this.Su,Q_.Pu)}function MC(t){return function(){if("object"!=typeof t||null===t)return!1;for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}()}var FC,UC=oT.Sc,jC=(ik.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},ik),qC=(rk.prototype.settings=function(t){if(yv("Firestore.settings",arguments,1),gv("Firestore.settings","object",1,t),cv(t,"persistence"))throw new $m(Xm.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new jC(t);if(this.Bm&&!this.Wm.isEqual(e))throw new $m(Xm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Wm=e).credentials&&(this.Gm=function(t){if(!t)return new Jm;switch(t.type){case"gapi":var e=t.k;return Um(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ev(e,t.V||"0");case"provider":return t.k;default:throw new $m(Xm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},rk.prototype.enableNetwork=function(){return this.Lm(),this.Bm.enableNetwork()},rk.prototype.disableNetwork=function(){return this.Lm(),this.Bm.disableNetwork()},rk.prototype.enablePersistence=function(t){if(this.Bm)throw new $m(Xm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Lm("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=lv(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.Hm(new CC(this.Wm.cacheSizeBytes,e))},rk.prototype.clearPersistence=function(){var t=this,e=dS.ff(this.Jm()),n=new K_;return this.Um.zu((function(){return ps(t,void 0,void 0,(function(){var t;return fs(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this.Bm&&!this.Bm.Nm)throw new $m(Xm.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,dS.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},rk.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(rk.prototype,"Ym",{get:function(){return this.Lm(),this.Bm.Nm},enumerable:!0,configurable:!0}),rk.prototype.waitForPendingWrites=function(){return this.Lm(),this.Bm.waitForPendingWrites()},rk.prototype.onSnapshotsInSync=function(t){return this.Lm(),MC(t)?this.Xm(t):(gv("Firestore.onSnapshotsInSync","function",1,t),this.Xm({next:t}))},rk.prototype.Xm=function(t){var e=this,n=new AC({next:function(){t.next&&t.next()},error:function(t){throw Fm("Uncaught Error in onSnapshotsInSync")}});return this.Bm.fm(n),function(){n.xm(),e.Bm.lm(n)}},rk.prototype.Lm=function(){return this.Bm||this.Hm(new _C),this.Bm},rk.prototype.Jm=function(){return new Hm(this.Mm,this.Qm,this.Wm.host,this.Wm.ssl,this.Wm.forceLongPolling)},rk.prototype.Hm=function(t){Um(!!this.Wm.host,"FirestoreSettings.host is not set"),Um(!this.Bm,"configureClient() called multiple times");var e=this.Jm();return this.Bm=new kC(B_.t(),e,this.Gm,this.Um),this.Bm.start(t)},rk.prototype.Km=function(t){return new RI((function(e){if(e instanceof WC){var n=t,r=e.firestore.Mm;if(!r.isEqual(n))throw new $m(Xm.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new DI(t,e.$m)}return e}))},rk.qm=function(t){var e=t.options;if(!cv(e,"projectId"))throw new $m(Xm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new $m(Xm.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Qm(n)},Object.defineProperty(rk.prototype,"app",{get:function(){if(!this.jm)throw new $m(Xm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jm},enumerable:!0,configurable:!0}),rk.prototype.collection=function(t){return yv("Firestore.collection",arguments,1),gv("Firestore.collection","non-empty string",1,t),this.Lm(),new sk(Uv.it(t),this)},rk.prototype.doc=function(t){return yv("Firestore.doc",arguments,1),gv("Firestore.doc","non-empty string",1,t),this.Lm(),WC.Zm(Uv.it(t),this)},rk.prototype.collectionGroup=function(t){if(yv("Firestore.collectionGroup",arguments,1),gv("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new $m(Xm.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Lm(),new KC(new fw(Uv.et,t),this)},rk.prototype.runTransaction=function(t){var e=this;return yv("Firestore.runTransaction",arguments,1),gv("Firestore.runTransaction","function",1,t),this.Lm().transaction((function(n){return t(new BC(e,n))}))},rk.prototype.batch=function(){return this.Lm(),new VC(this)},Object.defineProperty(rk,"logLevel",{get:function(){switch(Rm()){case Em.DEBUG:return"debug";case Em.ERROR:return"error";case Em.SILENT:return"silent";default:return Fm("Unknown log level: "+Rm())}},enumerable:!0,configurable:!0}),rk.setLogLevel=function(t){switch(yv("Firestore.setLogLevel",arguments,1),gv("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Pm(Em.DEBUG);break;case"error":Pm(Em.ERROR);break;case"silent":Pm(Em.SILENT);break;default:throw new $m(Xm.INVALID_ARGUMENT,"Invalid log level: "+t)}},rk.prototype.tp=function(){return this.Wm.timestampsInSnapshots},rk),BC=(nk.prototype.get=function(t){var e=this;yv("Transaction.get",arguments,1);var n=hk("Transaction.get",t,this.np);return this.ip.lookup([n.$m]).then((function(t){if(!t||1!==t.length)return Fm("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Db)return new zC(e.np,n.$m,null,!1,!1,n.ep);if(r instanceof xb)return new zC(e.np,n.$m,r,!1,!1,n.ep);throw Fm("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},nk.prototype.set=function(t,e,n){vv("Transaction.set",arguments,2,3);var r=hk("Transaction.set",t,this.np);n=uk("Transaction.set",n);var i=pk(r.ep,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.np.zm.ed(s,o,n.mergeFields):this.np.zm.td(s,o);return this.ip.set(r.$m,a),this},nk.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof $S?(mv("Transaction.update",arguments,3),r=hk("Transaction.update",t,this.np),this.np.zm.sd("Transaction.update",e,n,o)):(yv("Transaction.update",arguments,2),r=hk("Transaction.update",t,this.np),this.np.zm.rd("Transaction.update",e)),this.ip.update(r.$m,i),this},nk.prototype.delete=function(t){yv("Transaction.delete",arguments,1);var e=hk("Transaction.delete",t,this.np);return this.ip.delete(e.$m),this},nk),VC=(ek.prototype.set=function(t,e,n){vv("WriteBatch.set",arguments,2,3),this.sp();var r=hk("WriteBatch.set",t,this.np);n=uk("WriteBatch.set",n);var i=pk(r.ep,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.np.zm.ed(s,o,n.mergeFields):this.np.zm.td(s,o);return this.rp=this.rp.concat(a.Bl(r.$m,Rg.NONE)),this},ek.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.sp(),i="string"==typeof e||e instanceof $S?(mv("WriteBatch.update",arguments,3),r=hk("WriteBatch.update",t,this.np),this.np.zm.sd("WriteBatch.update",e,n,o)):(yv("WriteBatch.update",arguments,2),r=hk("WriteBatch.update",t,this.np),this.np.zm.rd("WriteBatch.update",e)),this.rp=this.rp.concat(i.Bl(r.$m,Rg.exists(!0))),this},ek.prototype.delete=function(t){yv("WriteBatch.delete",arguments,1),this.sp();var e=hk("WriteBatch.delete",t,this.np);return this.rp=this.rp.concat(new Fg(e.$m,Rg.NONE)),this},ek.prototype.commit=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){return this.sp(),this.up=!0,0<this.rp.length?[2,this.np.Lm().write(this.rp)]:[2]}))}))},ek.prototype.sp=function(){if(this.up)throw new $m(Xm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},ek),WC=(tk.Zm=function(t,e,n){if(t.length%2!=0)throw new $m(Xm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.nt()+" has "+t.length);return new tk(new Bv(t),e,n)},Object.defineProperty(tk.prototype,"id",{get:function(){return this.$m.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(tk.prototype,"parent",{get:function(){return new sk(this.$m.path.H(),this.firestore,this.ep)},enumerable:!0,configurable:!0}),Object.defineProperty(tk.prototype,"path",{get:function(){return this.$m.path.nt()},enumerable:!0,configurable:!0}),tk.prototype.collection=function(t){if(yv("DocumentReference.collection",arguments,1),gv("DocumentReference.collection","non-empty string",1,t),!t)throw new $m(Xm.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Uv.it(t);return new sk(this.$m.path.child(e),this.firestore)},tk.prototype.isEqual=function(t){if(!(t instanceof tk))throw Av("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.$m.isEqual(t.$m)&&this.ep===t.ep},tk.prototype.set=function(t,e){vv("DocumentReference.set",arguments,1,2),e=uk("DocumentReference.set",e);var n=pk(this.ep,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.zm.ed(i,r,e.mergeFields):this.firestore.zm.td(i,r);return this.Bm.write(o.Bl(this.$m,Rg.NONE))},tk.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof $S?(mv("DocumentReference.update",arguments,2),this.firestore.zm.sd("DocumentReference.update",t,e,r)):(yv("DocumentReference.update",arguments,1),this.firestore.zm.rd("DocumentReference.update",t)),this.Bm.write(n.Bl(this.$m,Rg.exists(!0)))},tk.prototype.delete=function(){return yv("DocumentReference.delete",arguments,0),this.Bm.write([new Fg(this.$m,Rg.NONE)])},tk.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];vv("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||MC(t[i])||(kv("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),_v("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=MC(t[i])?t[i]:(gv("DocumentReference.onSnapshot","function",i,t[i]),bv("DocumentReference.onSnapshot","function",i+1,t[i+1]),bv("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.hp(o,n)},tk.prototype.hp=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new AC({next:function(t){if(e.next){Um(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.$m);e.next(new zC(n.firestore,n.$m,r,t.fromCache,t.hasPendingWrites,n.ep))}},error:r}),o=this.Bm.listen(fw.$n(this.$m.path),i,t);return function(){i.xm(),n.Bm.Zd(o)}},tk.prototype.get=function(t){var e=this;return vv("DocumentReference.get",arguments,0,1),lk("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Lm().km(e.$m).then((function(t){n(new zC(e.firestore,e.$m,t,!0,t instanceof xb&&t.un,e.ep))}),r):e.cp(n,r,t)}))},tk.prototype.cp=function(t,e,n){var r=this.hp({includeMetadataChanges:!0,bm:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new $m(Xm.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new $m(Xm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},tk.prototype.withConverter=function(t){return new tk(this.$m,this.firestore,t)},tk),HC=(ZC.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},ZC),zC=(JC.prototype.data=function(t){if(vv("DocumentSnapshot.data",arguments,0,1),t=ck("DocumentSnapshot.data",t),this.ap){if(this.ep){var e=new GC(this.np,this.$m,this.ap,this.fp,this.lp);return this.ep.fromFirestore(e,t)}return this.dp(this.ap.data(),Yg.Dn(t,this.np.tp()))}},JC.prototype.get=function(t,e){if(vv("DocumentSnapshot.get",arguments,1,2),e=ck("DocumentSnapshot.get",e),this.ap){var n=this.ap.data().field(FI("DocumentSnapshot.get",t));if(null!==n)return this.vp(n,Yg.Dn(e,this.np.tp()))}},Object.defineProperty(JC.prototype,"id",{get:function(){return this.$m.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(JC.prototype,"ref",{get:function(){return new WC(this.$m,this.np,this.ep)},enumerable:!0,configurable:!0}),Object.defineProperty(JC.prototype,"exists",{get:function(){return null!==this.ap},enumerable:!0,configurable:!0}),Object.defineProperty(JC.prototype,"metadata",{get:function(){return new HC(this.lp,this.fp)},enumerable:!0,configurable:!0}),JC.prototype.isEqual=function(t){if(!(t instanceof JC))throw Av("isEqual","DocumentSnapshot",1,t);return this.np===t.np&&this.fp===t.fp&&this.$m.isEqual(t.$m)&&(null===this.ap?null===t.ap:this.ap.isEqual(t.ap))&&this.ep===t.ep},JC.prototype.dp=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.vp(i,e)})),r},JC.prototype.vp=function(t,e){if(t instanceof kb)return this.dp(t,e);if(t instanceof Ab)return this.wp(t,e);if(t instanceof Ib){var n=t.value(e),r=this.np.Lm().s();return t.s.isEqual(r)||Lm("Document "+this.$m.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new WC(n,this.np,this.ep)}return t.value(e)},JC.prototype.wp=function(t,e){var n=this;return t.Ht.map((function(t){return n.vp(t,e)}))},JC),GC=(ls($C,FC=zC),$C.prototype.data=function(t){var e=FC.prototype.data.call(this,t);return Um(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},$C),KC=(XC.prototype.where=function(t,e,n){var r;yv("Query.where",arguments,3),Cv("Query.where",3,n),function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new $m(Xm.INVALID_ARGUMENT,"Invalid value "+Iv(r)+" provided to function Query.where() for its "+xv(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,e);var i=FI("Query.where",t),o=dw.it(e);if(i.ut()){if(o===dw.ARRAY_CONTAINS||o===dw.ARRAY_CONTAINS_ANY)throw new $m(Xm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===dw.IN){this.pp(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this.gp(c))}r=new Ab(s)}else r=this.gp(n)}else o!==dw.IN&&o!==dw.ARRAY_CONTAINS_ANY||this.pp(n,o),r=this.firestore.zm.od("Query.where",n,o===dw.IN);var l=yw.create(i,o,r);return this.bp(l),new XC(this.mp.ni(l),this.firestore,this.ep)},XC.prototype.orderBy=function(t,e){var n;if(vv("Query.orderBy",arguments,1,2),bv("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=_w.ASCENDING;else{if("desc"!==e)throw new $m(Xm.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=_w.DESCENDING}if(null!==this.mp.startAt)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.mp.endAt)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=FI("Query.orderBy",t),i=new Tw(r,n);return this.yp(i),new XC(this.mp.ei(i),this.firestore,this.ep)},XC.prototype.limit=function(t){return yv("Query.limit",arguments,1),gv("Query.limit","number",1,t),Nv("Query.limit",1,t),new XC(this.mp.ri(t),this.firestore,this.ep)},XC.prototype.limitToLast=function(t){return yv("Query.limitToLast",arguments,1),gv("Query.limitToLast","number",1,t),Nv("Query.limitToLast",1,t),new XC(this.mp.ui(t),this.firestore,this.ep)},XC.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mv("Query.startAt",arguments,1);var r=this._p("Query.startAt",t,e,!0);return new XC(this.mp.si(r),this.firestore,this.ep)},XC.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mv("Query.startAfter",arguments,1);var r=this._p("Query.startAfter",t,e,!1);return new XC(this.mp.si(r),this.firestore,this.ep)},XC.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mv("Query.endBefore",arguments,1);var r=this._p("Query.endBefore",t,e,!0);return new XC(this.mp.oi(r),this.firestore,this.ep)},XC.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mv("Query.endAt",arguments,1);var r=this._p("Query.endAt",t,e,!1);return new XC(this.mp.oi(r),this.firestore,this.ep)},XC.prototype.isEqual=function(t){if(!(t instanceof XC))throw Av("isEqual","Query",1,t);return this.firestore===t.firestore&&this.mp.isEqual(t.mp)},XC.prototype.withConverter=function(t){return new XC(this.mp,this.firestore,t)},XC.prototype._p=function(t,e,n,r){if(Cv(t,1,e),e instanceof zC){if(0<n.length)throw new $m(Xm.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new $m(Xm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Ip(t,i.ap,r)}var o=[e].concat(n);return this.Tp(t,o,r)},XC.prototype.Ip=function(t,e,n){for(var r=[],i=0,o=this.mp.orderBy;i<o.length;i++){var s=o[i];if(s.field.ut())r.push(new Ib(this.firestore.Mm,e.key));else{var a=e.field(s.field);if(a instanceof Tb)throw new $m(Xm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.nt();throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ew(r,n)},XC.prototype.Tp=function(t,e,n){var r=this.mp.Kn;if(e.length>r.length)throw new $m(Xm.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.ut()){if("string"!=typeof s)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.mp.bi()&&-1!==s.indexOf("/"))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.mp.path.child(Uv.it(s));if(!Bv.ht(a))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Bv(a);i.push(new Ib(this.firestore.Mm,u))}else{var c=this.firestore.zm.od(t,s);i.push(c)}}return new Ew(i,n)},XC.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];vv("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||MC(t[i])||(kv("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),_v("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=MC(t[i])?t[i]:(gv("Query.onSnapshot","function",i,t[i]),bv("Query.onSnapshot","function",i+1,t[i+1]),bv("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Ep(this.mp),this.hp(r,n)},XC.prototype.hp=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new AC({next:function(t){e.next&&e.next(new QC(n.firestore,n.mp,t,n.ep))},error:r}),o=this.firestore.Lm(),s=o.listen(this.mp,i,t);return function(){i.xm(),o.Zd(s)}},XC.prototype.Ep=function(t){if(t.pi()&&0===t.Kn.length)throw new $m(Xm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},XC.prototype.get=function(t){var e=this;return vv("Query.get",arguments,0,1),lk("Query.get",t),this.Ep(this.mp),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Lm().Om(e.mp).then((function(t){n(new QC(e.firestore,e.mp,t,e.ep))}),r):e.cp(n,r,t)}))},XC.prototype.cp=function(t,e,n){var r=this.hp({includeMetadataChanges:!0,bm:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new $m(Xm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},XC.prototype.gp=function(t){if("string"==typeof t){if(""===t)throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.mp.bi()&&-1!==t.indexOf("/"))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.mp.path.child(Uv.it(t));if(!Bv.ht(e))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Ib(this.firestore.Mm,new Bv(e))}if(t instanceof WC)return new Ib(this.firestore.Mm,t.$m);throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Iv(t)+".")},XC.prototype.pp=function(t,e){if(!Array.isArray(t)||0===t.length)throw new $m(Xm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new $m(Xm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new $m(Xm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter((function(t){return Number.isNaN(t)})).length)throw new $m(Xm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},XC.prototype.bp=function(t){if(t instanceof yw){var e=[dw.ARRAY_CONTAINS,dw.ARRAY_CONTAINS_ANY],n=[dw.IN,dw.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.ii()){var o=this.mp.Zn();if(null!==o&&!o.isEqual(t.field))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.mp.ti();null!==s&&this.Rp(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.mp.gi(n)),null===a&&r&&(a=this.mp.gi(e)),null!=a)throw new $m(Xm.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},XC.prototype.yp=function(t){if(null===this.mp.ti()){var e=this.mp.Zn();null!==e&&this.Rp(e,t.field)}},XC.prototype.Rp=function(t,e){if(!e.isEqual(t))throw new $m(Xm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},XC),QC=(Object.defineProperty(YC.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(YC.prototype,"empty",{get:function(){return this.Dp.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(YC.prototype,"size",{get:function(){return this.Dp.docs.size},enumerable:!0,configurable:!0}),YC.prototype.forEach=function(t,e){var n=this;vv("QuerySnapshot.forEach",arguments,1,2),gv("QuerySnapshot.forEach","function",1,t),this.Dp.docs.forEach((function(r){t.call(e,n.Cp(r))}))},Object.defineProperty(YC.prototype,"query",{get:function(){return new KC(this.Ap,this.np,this.ep)},enumerable:!0,configurable:!0}),YC.prototype.docChanges=function(t){t&&(kv("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),_v("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Dp.$i)throw new $m(Xm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Pp&&this.Sp===e||(this.Pp=function(t,e,n,r){if(n.Ji.J()){var i,o=0;return n.docChanges.map((function(e){var s=new GC(t,e.doc.key,e.doc,n.fromCache,n.Yi.has(e.doc.key),r);return Um(e.type===u_.Mi,"Invalid event type for first snapshot"),Um(!i||n.query.fi(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:o++}}))}var s=n.Ji;return n.docChanges.filter((function(t){return e||t.type!==u_.Gi})).map((function(e){var i=new GC(t,e.doc.key,e.doc,n.fromCache,n.Yi.has(e.doc.key),r),o=-1,a=-1;return e.type!==u_.Mi&&(Um(0<=(o=s.indexOf(e.doc.key)),"Index for document not found"),s=s.delete(e.doc.key)),e.type!==u_.qi&&(a=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case u_.Mi:return"added";case u_.Qi:case u_.Gi:return"modified";case u_.qi:return"removed";default:return Fm("Unknown change type: "+t)}}(e.type),doc:i,oldIndex:o,newIndex:a}}))}(this.np,e,this.Dp,this.ep),this.Sp=e),this.Pp},YC.prototype.isEqual=function(t){if(!(t instanceof YC))throw Av("isEqual","QuerySnapshot",1,t);return this.np===t.np&&this.Ap.isEqual(t.Ap)&&this.Dp.isEqual(t.Dp)&&this.ep===t.ep},YC.prototype.Cp=function(t){return new GC(this.np,t.key,t,this.metadata.fromCache,this.Dp.Yi.has(t.key),this.ep)},YC);function YC(t,e,n,r){this.np=t,this.Ap=e,this.Dp=n,this.ep=r,this.Pp=null,this.Sp=null,this.metadata=new HC(n.hasPendingWrites,n.fromCache)}function XC(t,e,n){this.mp=t,this.firestore=e,this.ep=n}function $C(){return null!==FC&&FC.apply(this,arguments)||this}function JC(t,e,n,r,i,o){this.np=t,this.$m=e,this.ap=n,this.fp=r,this.lp=i,this.ep=o}function ZC(t,e){this.hasPendingWrites=t,this.fromCache=e}function tk(t,e,n){this.$m=t,this.firestore=e,this.ep=n,this.Bm=this.firestore.Lm()}function ek(t){this.np=t,this.rp=[],this.up=!1}function nk(t,e){this.np=t,this.ip=e}function rk(t,e){var n=this;if(this.jm=null,this.Um=new nE,this.INTERNAL={delete:function(){return ps(n,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return this.Lm(),[4,this.Bm.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof t.options){var r=t;this.jm=r,this.Mm=rk.qm(r),this.Qm=r.name,this.Gm=new Zm(e)}else{var i=t;if(!i.projectId)throw new $m(Xm.INVALID_ARGUMENT,"Must provide projectId");this.Mm=new Qm(i.projectId,i.database),this.Qm="[DEFAULT]",this.Gm=new Jm}this.Wm=new jC({}),this.zm=this.Km(this.Mm)}function ik(t){if(void 0===t.host){if(void 0!==t.ssl)throw new $m(Xm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else wv("settings","non-empty string","host",t.host),this.host=t.host,_v("settings","boolean","ssl",t.ssl),this.ssl=lv(t.ssl,!0);if(kv("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),_v("settings","object","credentials",t.credentials),this.credentials=t.credentials,_v("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Lm("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Lm("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=lv(t.timestampsInSnapshots,!0),_v("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=oT.Vc;else{if(t.cacheSizeBytes!==UC&&t.cacheSizeBytes<oT.Cc)throw new $m(Xm.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+oT.Cc);this.cacheSizeBytes=t.cacheSizeBytes}_v("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}vs(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(QC.prototype.docChanges,t,{get:function(){return function(){throw new $m(Xm.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var ok,sk=(ls(ak,ok=KC),Object.defineProperty(ak.prototype,"id",{get:function(){return this.mp.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(ak.prototype,"parent",{get:function(){var t=this.mp.path.H();return t.J()?null:new WC(new Bv(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(ak.prototype,"path",{get:function(){return this.mp.path.nt()},enumerable:!0,configurable:!0}),ak.prototype.doc=function(t){if(vv("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=jm.u()),gv("CollectionReference.doc","non-empty string",1,t),""===t)throw new $m(Xm.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Uv.it(t);return WC.Zm(this.mp.path.child(e),this.firestore,this.ep)},ak.prototype.add=function(t){yv("CollectionReference.add",arguments,1),gv("CollectionReference.add","object",1,this.ep?this.ep.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},ak.prototype.withConverter=function(t){return new ak(this.Vp,this.firestore,t)},ak);function ak(t,e,n){var r=ok.call(this,fw.$n(t),e,n)||this;if((r.Vp=t).length%2!=1)throw new $m(Xm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.nt()+" has "+t.length);return r}function uk(t,e){if(void 0===e)return{merge:!1};if(kv(t,e,["merge","mergeFields"]),_v(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Iv(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new $m(Xm.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Iv(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof $S}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new $m(Xm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ck(t,e){return void 0===e?{}:(kv(t,e,["serverTimestamps"]),Ev(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function lk(t,e){bv(t,"object",1,e),e&&(kv(t,e,["source"]),Ev(t,0,"source",e.source,["default","server","cache"]))}function hk(t,e,n){if(e instanceof WC){if(e.firestore!==n)throw new $m(Xm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Av(t,"DocumentReference",1,e)}function pk(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var fk,dk,yk=H_(qC,"Use firebase.firestore() instead."),mk=H_(BC,"Use firebase.firestore().runTransaction() instead."),vk=H_(VC,"Use firebase.firestore().batch() instead."),gk=H_(WC,"Use firebase.firestore().doc() instead."),bk=H_(zC),wk=H_(GC),_k=H_(KC),Ek=H_(QC),Tk=H_(sk,"Use firebase.firestore().collection() instead."),Sk={Firestore:yk,GeoPoint:Ov,Timestamp:Lv,Blob:$_,Transaction:mk,WriteBatch:vk,DocumentReference:gk,DocumentSnapshot:bk,Query:_k,QueryDocumentSnapshot:wk,QuerySnapshot:Ek,CollectionReference:Tk,FieldPath:$S,FieldValue:vI,setLogLevel:qC.setLogLevel,CACHE_SIZE_UNLIMITED:UC},Ik=(Mk.prototype.Fd=function(t){},Mk.prototype.shutdown=function(){},Mk),Ck=(Lk.prototype.Fd=function(t){this.xp.push(t)},Lk.prototype.shutdown=function(){window.removeEventListener("online",this.Np),window.removeEventListener("offline",this.Op)},Lk.prototype.jp=function(){window.addEventListener("online",this.Np),window.addEventListener("offline",this.Op)},Lk.prototype.kp=function(){Om("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.xp;t<e.length;t++)(0,e[t])(0)},Lk.prototype.Fp=function(){Om("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.xp;t<e.length;t++)(0,e[t])(1)},Lk.Js=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Lk),kk=(Ok.prototype._l=function(t){Um(!this.Bp,"Called onOpen on stream twice!"),this.Bp=t},Ok.prototype.ml=function(t){Um(!this.Mp,"Called onClose on stream twice!"),this.Mp=t},Ok.prototype.onMessage=function(t){Um(!this.qp,"Called onMessage on stream twice!"),this.qp=t},Ok.prototype.close=function(){this.Lp()},Ok.prototype.send=function(t){this.Up(t)},Ok.prototype.Qp=function(){Um(void 0!==this.Bp,"Cannot call onOpen because no callback was set"),this.Bp()},Ok.prototype.Gp=function(t){Um(void 0!==this.Mp,"Cannot call onClose because no callback was set"),this.Mp(t)},Ok.prototype.Wp=function(t){Um(void 0!==this.qp,"Cannot call onMessage because no callback was set"),this.qp(t)},Ok),Ak={BatchGetDocuments:"batchGet",Commit:"commit"},Nk="gl-js/ fire/"+xm,xk=(Pk.prototype.Kp=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=Nk},Pk.prototype.kl=function(t,e,n){var r=this,i=this.Hp(t);return new Promise((function(o,s){var a=new Nm;a.listenOnce(km.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Cm.NO_ERROR:var e=a.getResponseJson();Om("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Cm.TIMEOUT:Om("Connection",'RPC "'+t+'" timed out'),s(new $m(Xm.DEADLINE_EXCEEDED,"Request time out"));break;case Cm.HTTP_ERROR:var n=a.getStatus();if(Om("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),0<n){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=(u=r.status.toLowerCase().replace("_","-"),0<=Object.values(Xm).indexOf(u)?u:Xm.UNKNOWN);s(new $m(i,r.message))}else s(new $m(Xm.UNKNOWN,"Server responded with status "+a.getStatus()))}else Om("Connection",'RPC "'+t+'" failed'),s(new $m(Xm.UNAVAILABLE,"Connection failed."));break;default:Fm('RPC "'+t+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{Om("Connection",'RPC "'+t+'" completed.')}var u}));var u=hs({},e);delete u.database;var c=JSON.stringify(u);Om("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Kp(l,n),a.send(i,"POST",c,l,15)}))},Pk.prototype.Ol=function(t,e,n){return this.kl(t,e,n)},Pk.prototype.Il=function(t,e){var n=[this.zp,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Im(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Kp(i.initMessageHeaders,e),As()||Ns()||0<=ks().indexOf("Electron/")||function(){var t=ks();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")}()||0<=ks().indexOf("MSAppHost/")||function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))}Om("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,l=new kk({Up:function(t){c?Om("Connection","Not sending because WebChannel is closed:",t):(u||(Om("Connection","Opening WebChannel transport."),a.open(),u=!0),Om("Connection","WebChannel sending:",t),a.send(t))},Lp:function(){return a.close()}});return s(Am.EventType.OPEN,(function(){c||Om("Connection","WebChannel transport opened.")})),s(Am.EventType.CLOSE,(function(){c||(c=!0,Om("Connection","WebChannel transport closed"),l.Gp())})),s(Am.EventType.ERROR,(function(t){c||(c=!0,Om("Connection","WebChannel transport errored:",t),l.Gp(new $m(Xm.UNAVAILABLE,"The operation could not be completed")))})),s(Am.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Um(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Om("Connection","WebChannel received error:",r);var i=r.status,o=function(){var t=Ww[i];if(void 0!==t)return Xw(t)}(),s=r.message;void 0===o&&(o=Xm.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Gp(new $m(o,s)),a.close()}else Om("Connection","WebChannel received:",n),l.Wp(n)}})),setTimeout((function(){l.Qp()}),0),l},Pk.prototype.Hp=function(t){var e=Ak[t];return Um(void 0!==e,"Unknown REST mapping for: "+t),this.zp+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},Pk),Dk=(Object.defineProperty(Rk.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Rk.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Rk.prototype.Dm=function(t){return Promise.resolve(new xk(t))},Rk.prototype.Sm=function(){return Ck.Js()?new Ck:new Ik},Rk.prototype.Cm=function(t){return new q_(t,{tr:!0})},Rk.prototype.i=function(t){return JSON.stringify(t)},Rk.prototype.atob=function(t){return atob(t)},Rk.prototype.btoa=function(t){return btoa(t)},Rk);function Rk(){this.vu="undefined"!=typeof atob}function Pk(t){this.s=t.s,this.zp=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function Ok(t){this.Up=t.Up,this.Lp=t.Lp}function Lk(){var t=this;this.Np=function(){return t.kp()},this.Op=function(){return t.Fp()},this.xp=[],this.jp()}function Mk(){}B_.du(new Dk),(dk=xa).INTERNAL.registerComponent(new ta("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new qC(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((Um((fk=Sk)&&"object"==typeof fk,"shallowCopy() expects object parameter."),hs({},fk)))),dk.registerVersion("@firebase/firestore","1.11.1");var Fk,Uk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jk=(ls(qk,Fk=Error),qk);function qk(t,e,n){var r=Fk.call(this,e)||this;return Object.setPrototypeOf(r,qk.prototype),r.code=t,r.details=n,r}var Bk=(Vk.prototype.getAuthToken=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},Vk.prototype.getInstanceIdToken=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},Vk.prototype.getContext=function(){return ps(this,void 0,void 0,(function(){var t,e;return fs(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},Vk);function Vk(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}function Wk(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Hk=(zk.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Wk(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},zk.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Wk(t,(function(t){return e.decode(t)})):t},zk);function zk(){}var Gk,Kk=(Object.defineProperty(Qk.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Qk.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},Qk.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},Qk.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},Qk.prototype.postJSON=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i;return fs(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},Qk.prototype.call=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l;return fs(this,(function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(s=h.sent()).authToken&&o.append("Authorization","Bearer "+s.authToken),s.instanceIdToken&&o.append("Firebase-Instance-ID-Token",s.instanceIdToken),a=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,o),function(t){return new Promise((function(e,n){setTimeout((function(){n(new jk("deadline-exceeded","deadline-exceeded"))}),t)}))}(a),this.cancelAllRequests])];case 2:if(!(u=h.sent()))throw new jk("cancelled","Firebase Functions instance was deleted.");if(c=function(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Uk[a])return new jk("internal","internal");r=Uk[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new jk(r,i,o)}(u.status,u.json,this.serializer))throw c;if(!u.json)throw new jk("internal","Response is not valid JSON object.");if(void 0===(l=u.json.data)&&(l=u.json.result),void 0===l)throw new jk("internal","Response is missing data field.");return[2,{data:this.serializer.decode(l)}]}}))}))},Qk);function Qk(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new Hk,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new Bk(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}function Yk(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function Xk(t,e,n){var r,i=new Promise((function(i,o){Yk(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function $k(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function Jk(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return Xk(this[e],r,arguments)})}))}function Zk(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function tA(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return function(t,e,n){var r=Xk(t,e,n);return r.then((function(t){if(t)return new nA(t,r.request)}))}(this[e],r,arguments)})}))}function eA(t){this._index=t}function nA(t,e){this._cursor=t,this._request=e}function rA(t){this._store=t}function iA(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function oA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new iA(n)}function sA(t){this._db=t}function aA(t,e,n){var r=Xk(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new oA(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new sA(t)}))}function uA(t){return Xk(indexedDB,"deleteDatabase",[t])}Gk={Functions:Kk},xa.INTERNAL.registerComponent(new ta("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Kk(n,r,i,e)}),"PUBLIC").setServiceProps(Gk).setMultipleInstances(!0)),xa.registerVersion("@firebase/functions","0.4.34"),$k(eA,"_index",["name","keyPath","multiEntry","unique"]),Jk(eA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),tA(eA,"_index",IDBIndex,["openCursor","openKeyCursor"]),$k(nA,"_cursor",["direction","key","primaryKey","value"]),Jk(nA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(nA.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),Yk(e._request).then((function(t){if(t)return new nA(t,e._request)}))}))})})),rA.prototype.createIndex=function(){return new eA(this._store.createIndex.apply(this._store,arguments))},rA.prototype.index=function(){return new eA(this._store.index.apply(this._store,arguments))},$k(rA,"_store",["name","keyPath","indexNames","autoIncrement"]),Jk(rA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),tA(rA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Zk(rA,"_store",IDBObjectStore,["deleteIndex"]),iA.prototype.objectStore=function(){return new rA(this._tx.objectStore.apply(this._tx,arguments))},$k(iA,"_tx",["objectStoreNames","mode"]),Zk(iA,"_tx",IDBTransaction,["abort"]),oA.prototype.createObjectStore=function(){return new rA(this._db.createObjectStore.apply(this._db,arguments))},$k(oA,"_db",["name","version","objectStoreNames"]),Zk(oA,"_db",IDBDatabase,["deleteObjectStore","close"]),sA.prototype.transaction=function(){return new iA(this._db.transaction.apply(this._db,arguments))},$k(sA,"_db",["name","version","objectStoreNames"]),Zk(sA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[rA,eA].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=function(t){return Array.prototype.slice.call(t)}(arguments),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[eA,rA].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var cA,lA="w:0.4.2",hA=((cA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',cA["not-registered"]="Firebase Installation is not registered.",cA["installation-not-found"]="Firebase Installation not found.",cA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',cA["app-offline"]="Could not process request. Application offline.",cA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",cA),pA=new Ps("installations","Installations",hA);function fA(t){return t instanceof Ds&&t.code.includes("request-failed")}function dA(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function yA(t){return{token:t.token,requestStatus:2,expiresIn:function(t){return Number(t.replace("s","000"))}(t.expiresIn),creationTime:Date.now()}}function mA(t,e){return ps(this,void 0,void 0,(function(){var n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,pA.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function vA(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function gA(t,e){var n=e.refreshToken,r=vA(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function bA(t){return ps(this,void 0,void 0,(function(){var e;return fs(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}}))}))}function wA(t){return new Promise((function(e){setTimeout(e,t)}))}var _A=/^[cdef][\w-]{21}$/;function EA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return function(t){return btoa(String.fromCharCode.apply(String,ms(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return _A.test(e)?e:""}catch(t){return""}}function TA(t){return t.appName+"!"+t.appId}var SA=new Map;function IA(t,e){var n=TA(t);CA(n,e),function(t,e){var n=AA();n&&n.postMessage({key:t,fid:e}),NA()}(n,e)}function CA(t,e){var n,r,i=SA.get(t);if(i)try{for(var o=ds(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var kA=null;function AA(){return!kA&&"BroadcastChannel"in self&&((kA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){CA(t.data.key,t.data.fid)}),kA}function NA(){0===SA.size&&kA&&(kA.close(),kA=null)}var xA,DA,RA="firebase-installations-store",PA=null;function OA(){return PA=PA||aA("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(RA)}}))}function LA(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return n=TA(t),[4,OA()];case 1:return r=a.sent(),i=r.transaction(RA,"readwrite"),[4,(o=i.objectStore(RA)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||IA(t,e.fid),[2,e]}}))}))}function MA(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return e=TA(t),[4,OA()];case 1:return n=i.sent(),[4,(r=n.transaction(RA,"readwrite")).objectStore(RA).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function FA(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s,a;return fs(this,(function(u){switch(u.label){case 0:return n=TA(t),[4,OA()];case 1:return r=u.sent(),i=r.transaction(RA,"readwrite"),[4,(o=i.objectStore(RA)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||IA(t,a.fid),[2,a]}}))}))}function UA(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,FA(t,(function(n){var r=function(t){return qA(t||{fid:EA(),registrationStatus:0})}(n),i=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i;return fs(this,(function(o){switch(o.label){case 0:return[4,jA(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,wA(100)];case 3:return o.sent(),[4,jA(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,UA(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(pA.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return ps(this,void 0,void 0,(function(){var n,r;return fs(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(t,e){var n=e.fid;return ps(this,void 0,void 0,(function(){var e,r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return e=dA(t),r=vA(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:lA})},[4,bA((function(){return fetch(e,i)}))];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:yA(s.authToken)}];case 3:return[4,mA("Create Installation",o)];case 4:throw a.sent()}}))}))}(t,e)];case 1:return n=i.sent(),[2,LA(t,n)];case 2:return fA(r=i.sent())&&409===r.serverCode?[4,MA(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,LA(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function jA(t){return FA(t,(function(t){if(!t)throw pA.create("installation-not-found");return qA(t)}))}function qA(t){return function(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function BA(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return ps(this,void 0,void 0,(function(){var t,i,o,s,a;return fs(this,(function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return dA(t)+"/"+n+"/authTokens:generate"}(n,e),i=gA(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:lA}})},[4,bA((function(){return fetch(t,s)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,yA(u.sent())];case 3:return[4,mA("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function VA(t,e){return void 0===e&&(e=!1),ps(this,void 0,void 0,(function(){var n,r,i;return fs(this,(function(o){switch(o.label){case 0:return[4,FA(t.appConfig,(function(r){if(!HA(r))throw pA.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return ps(this,void 0,void 0,(function(){var n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,WA(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,wA(100)];case 3:return i.sent(),[4,WA(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,VA(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw pA.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return hs(hs({},t),{authToken:e})}(r);return n=function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i;return fs(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,BA(t,e)];case 1:return n=o.sent(),i=hs(hs({},e),{authToken:n}),[4,LA(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!fA(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,MA(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=hs(hs({},e),{authToken:{requestStatus:0}}),[4,LA(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function WA(t){return FA(t,(function(t){if(!HA(t))throw pA.create("not-registered");return function(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(t.authToken)?hs(hs({},t),{authToken:{requestStatus:0}}):t}))}function HA(t){return void 0!==t&&2===t.registrationStatus}function zA(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return dA(t)+"/"+n}(t,e),r=gA(t,e),i={method:"DELETE",headers:r},[4,bA((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,mA("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function GA(t){return pA.create("missing-app-config-values",{valueName:t})}(xA=xa).INTERNAL.registerComponent(new ta("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw GA("App Configuration");if(!t.name)throw GA("App Name");try{for(var r=ds(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw GA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,UA(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):VA(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),ps(this,void 0,void 0,(function(){return fs(this,(function(n){switch(n.label){case 0:return[4,function(t){return ps(this,void 0,void 0,(function(){var e;return fs(this,(function(n){switch(n.label){case 0:return[4,UA(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(t.appConfig)];case 1:return n.sent(),[4,VA(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return ps(this,void 0,void 0,(function(){var e,n;return fs(this,(function(r){switch(r.label){case 0:return[4,FA(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw pA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw pA.create("app-offline");case 3:return[4,zA(e,n)];case 4:return r.sent(),[4,MA(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){AA();var n=TA(t),r=SA.get(n);r||(r=new Set,SA.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=TA(t),r=SA.get(n);r&&(r.delete(e),0===r.size&&SA.delete(n),NA())}(n,e)}}(n,t)}}}),"PUBLIC")),xA.registerVersion("@firebase/installations","0.4.2");var KA=((DA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',DA["only-available-in-window"]="This method is available in a Window context.",DA["only-available-in-sw"]="This method is available in a service worker context.",DA["permission-default"]="The notification permission was not granted and dismissed instead.",DA["permission-blocked"]="The notification permission was not granted and blocked instead.",DA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",DA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",DA["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",DA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",DA["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",DA["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",DA["token-update-no-token"]="FCM returned no token when updating the user to push.",DA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",DA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",DA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",DA["invalid-vapid-key"]="The public VAPID key must be a string.",DA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",DA),QA=new Ps("messaging","Messaging",KA);function YA(t){return QA.create("missing-app-config-values",{valueName:t})}function XA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,ms(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var $A="fcm_token_details_db",JA="fcm_token_object_Store";function ZA(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes($A))return[2,null];r.label=2;case 2:return e=null,[4,aA($A,5,(function(r){return ps(n,void 0,void 0,(function(){var n,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(JA)?[4,(n=r.transaction.objectStore(JA)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:(s=o.createTime,null!=s?s:Date.now()),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:XA(o.vapidKey)}}}else 3===r.oldVersion?e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:XA(o.auth),p256dh:XA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:XA(o.vapidKey)}}:4===r.oldVersion&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:XA(o.auth),p256dh:XA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:XA(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,uA($A)];case 4:return r.sent(),[4,uA("fcm_vapid_details_db")];case 5:return r.sent(),[4,uA("undefined")];case 6:return r.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(e)?e:null]}}))}))}var tN="firebase-messaging-store",eN=null;function nN(){return eN=eN||aA("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(tN)}}))}function rN(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return e=oN(t),[4,nN()];case 1:return[4,i.sent().transaction(tN).objectStore(tN).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,ZA(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,iN(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function iN(t,e){return ps(this,void 0,void 0,(function(){var n,r,i;return fs(this,(function(o){switch(o.label){case 0:return n=oN(t),[4,nN()];case 1:return r=o.sent(),[4,(i=r.transaction(tN,"readwrite")).objectStore(tN).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function oN(t){return t.appConfig.appId}var sN,aN,uN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cN="FCM_MSG",lN="google.c.a.c_id";function hN(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return[4,fN(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(pN(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw QA.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),QA.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function pN(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function fN(t){var e=t.appConfig,n=t.installations;return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function dN(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==uN&&(n.web.applicationPubKey=e),n}function yN(t,e,n){return ps(this,void 0,void 0,(function(){var r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw QA.create("permission-blocked");return[4,function(t,e){return ps(this,void 0,void 0,(function(){var n;return fs(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})]}}))}))}(e,n)];case 1:return r=a.sent(),[4,rN(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:XA(r.getKey("auth")),p256dh:XA(r.getKey("p256dh"))},i?[3,3]:[2,vN(t,o)];case 3:if(function(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,hN(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,vN(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i,o;return fs(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return[4,fN(t)];case 1:n=a.sent(),r=dN(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(pN(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),QA.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw QA.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw QA.create("token-update-no-token");return[2,o.token]}}))}))}(e,t)];case 1:return r=s.sent(),i=hs({token:r,createTime:Date.now()},t),[4,iN(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,mN(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function mN(t,e){return ps(this,void 0,void 0,(function(){var n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,rN(t)];case 1:return(n=i.sent())?[4,hN(t,n.token)]:[3,4];case 2:return i.sent(),[4,function(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return e=oN(t),[4,nN()];case 1:return n=i.sent(),[4,(r=n.transaction(tN,"readwrite")).objectStore(tN).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function vN(t,e){return ps(this,void 0,void 0,(function(){var n,r;return fs(this,(function(i){switch(i.label){case 0:return[4,function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return[4,fN(t)];case 1:n=a.sent(),r=dN(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(pN(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),QA.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw QA.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw QA.create("token-subscribe-no-token");return[2,o.token]}}))}))}(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,iN(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function gN(t){return"object"==typeof t&&!!t&&lN in t}(aN=sN=sN||{}).PUSH_RECEIVED="push-received",aN.NOTIFICATION_CLICKED="notification-clicked";var bN=(Object.defineProperty(wN.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),wN.prototype.getToken=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return this.vapidKey||(this.vapidKey=uN),[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:e.sent(),e.label=3;case 3:if("granted"!==Notification.permission)throw QA.create("permission-blocked");return[2,yN(this.firebaseDependencies,t,this.vapidKey)]}}))}))},wN.prototype.deleteToken=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),[2,mN(this.firebaseDependencies,t)]}}))}))},wN.prototype.requestPermission=function(){return ps(this,void 0,void 0,(function(){var t;return fs(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw QA.create("denied"===t?"permission-blocked":"permission-default")}}))}))},wN.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw QA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw QA.create("invalid-vapid-key");this.vapidKey=t},wN.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw QA.create("invalid-sw-registration");if(this.swRegistration)throw QA.create("use-sw-after-get-token");this.swRegistration=t},wN.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},wN.prototype.setBackgroundMessageHandler=function(){throw QA.create("only-available-in-sw")},wN.prototype.onTokenRefresh=function(){return function(){}},wN.prototype.getServiceWorkerRegistration=function(){return ps(this,void 0,void 0,(function(){var t,e;return fs(this,(function(n){switch(n.label){case 0:if(this.swRegistration)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,4];case 3:throw e=n.sent(),QA.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 4:return[2,this.swRegistration]}}))}))},wN.prototype.messageEventListener=function(t){var e;return ps(this,void 0,void 0,(function(){var n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return(null===(e=t.data)||void 0===e?void 0:e.firebaseMessaging)?(r=(n=t.data.firebaseMessaging).type,i=n.payload,this.onMessageCallback&&r===sN.PUSH_RECEIVED&&this.onMessageCallback(i),gN(o=i.data)&&"1"===o["google.c.a.e"]?[4,this.logEvent(r,o)]:[3,2]):[2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},wN.prototype.logEvent=function(t,e){return ps(this,void 0,void 0,(function(){var n;return fs(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case sN.NOTIFICATION_CLICKED:return"notification_open";case sN.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[lN],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},wN);function wN(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}var _N=(Object.defineProperty(EN.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),EN.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw QA.create("invalid-bg-handler");this.bgMessageHandler=t},EN.prototype.getToken=function(){var t,e,n;return ps(this,void 0,void 0,(function(){var r;return fs(this,(function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,rN(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=null!=(n=null===(e=null===(t=r)||void 0===t?void 0:t.subscriptionOptions)||void 0===e?void 0:e.vapidKey)?n:uN,i.label=2;case 2:return[2,yN(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},EN.prototype.deleteToken=function(){return mN(this.firebaseDependencies,self.registration)},EN.prototype.requestPermission=function(){throw QA.create("only-available-in-window")},EN.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw QA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw QA.create("invalid-vapid-key");this.vapidKey=t},EN.prototype.useServiceWorker=function(){throw QA.create("only-available-in-window")},EN.prototype.onMessage=function(){throw QA.create("only-available-in-window")},EN.prototype.onTokenRefresh=function(){throw QA.create("only-available-in-window")},EN.prototype.onPush=function(t){return ps(this,void 0,void 0,(function(){var e,n,r;return fs(this,(function(i){switch(i.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,TN()]:[2];case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=i.sent())?[2,function(t,e){var n,r,i=SN(sN.PUSH_RECEIVED,e);try{for(var o=ds(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=hs({},t.notification);return n.data=hs(hs({},t.notification.data),((e={})[cN]=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return i.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},EN.prototype.onSubChange=function(t){var e,n,r;return ps(this,void 0,void 0,(function(){var i;return fs(this,(function(o){switch(o.label){case 0:return t.newSubscription?[3,2]:[4,mN(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,rN(this.firebaseDependencies)];case 3:return i=o.sent(),[4,mN(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,yN(this.firebaseDependencies,self.registration,(r=null===(n=null===(e=i)||void 0===e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey,null!=r?r:uN))];case 5:return o.sent(),[2]}}))}))},EN.prototype.onNotificationClick=function(t){var e,n;return ps(this,void 0,void 0,(function(){var r,i,o,s;return fs(this,(function(a){switch(a.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[cN])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(gN(t.data)?self.location.origin:null)}(r))?[4,function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return fs(this,(function(u){switch(u.label){case 0:return e=new URL(t,self.location.href).href,[4,TN()];case 1:n=u.sent();try{for(r=ds(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(u){s={error:u}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}}))}))}(i)]:[2]):[2];case 1:return(o=a.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return o=a.sent(),[4,new Promise((function(t){setTimeout(t,3e3)}))];case 3:return a.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=a.sent(),a.label=6;case 6:return o?(s=SN(sN.NOTIFICATION_CLICKED,r),[2,o.postMessage(s)]):[2]}}))}))},EN);function EN(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}function TN(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function SN(t,e){return{firebaseMessaging:{type:t,payload:e}}}var IN={isSupported:CN};function CN(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}xa.INTERNAL.registerComponent(new ta("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw YA("App Configuration Object");if(!t.name)throw YA("App Name");var r=t.options;try{for(var i=ds(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw YA(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!CN())throw QA.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new _N(n):new bN(n)}),"PUBLIC").setServiceProps(IN));var kN="firebasestorage.googleapis.com",AN="storageBucket",NN=(xN.prototype.codeProp=function(){return this.code},xN.prototype.codeEquals=function(t){return DN(t)===this.codeProp()},xN.prototype.serverResponseProp=function(){return this.serverResponse_},xN.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(xN.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(xN.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(xN.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(xN.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),xN);function xN(t,e){this.code_=DN(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}function DN(t){return"storage/"+t}function RN(){return new NN("unknown","An unknown error occurred, please check the error payload for server response.")}function PN(){return new NN("canceled","User canceled the upload/download.")}function ON(){return new NN("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function LN(t,e,n){return new NN("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function MN(){return new NN("app-deleted","The Firebase app was deleted.")}function FN(t,e){return new NN("invalid-format","String does not match format '"+t+"': "+e)}function UN(t){throw new NN("internal-error","Internal error: "+t)}var jN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function qN(t){switch(t){case jN.RAW:case jN.BASE64:case jN.BASE64URL:case jN.DATA_URL:return;default:throw"Expected one of the event types: ["+jN.RAW+", "+jN.BASE64+", "+jN.BASE64URL+", "+jN.DATA_URL+"]."}}var BN=function(t,e){this.data=t,this.contentType=e||null};function VN(t,e){switch(t){case jN.RAW:return new BN(WN(e));case jN.BASE64:case jN.BASE64URL:return new BN(HN(t,e));case jN.DATA_URL:return new BN(function(t){var e=new KN(t);return e.base64?HN(jN.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw FN(jN.DATA_URL,"Malformed data URL.")}return WN(e)}(e.rest)}(e),function(t){return new KN(t).contentType}(e))}throw RN()}function WN(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function HN(t,e){switch(t){case jN.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw FN(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case jN.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw FN(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw FN(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var zN,GN,KN=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw FN(jN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)},QN={STATE_CHANGED:"state_changed"},YN="running",XN="pausing",$N="paused",JN="success",ZN="canceling",tx="canceled",ex="error",nx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rx(t){switch(t){case YN:case XN:case ZN:return nx.RUNNING;case $N:return nx.PAUSED;case JN:return nx.SUCCESS;case tx:return nx.CANCELED;case ex:default:return nx.ERROR}}function ix(t){return null!=t}function ox(t){return void 0!==t}function sx(t){return"function"==typeof t}function ax(t){return"object"==typeof t}function ux(t){return"string"==typeof t||t instanceof String}function cx(t){return"number"==typeof t||t instanceof Number}function lx(t){return hx()&&t instanceof Blob}function hx(){return"undefined"!=typeof Blob}(GN=zN=zN||{})[GN.NO_ERROR=0]="NO_ERROR",GN[GN.NETWORK_ERROR=1]="NETWORK_ERROR",GN[GN.ABORT=2]="ABORT";var px=(fx.prototype.send=function(t,e,n,r){if(this.sent_)throw UN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),ix(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return ix(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},fx.prototype.getErrorCode=function(){if(!this.sent_)throw UN("cannot .getErrorCode() before sending");return this.errorCode_},fx.prototype.getStatus=function(){if(!this.sent_)throw UN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},fx.prototype.getResponseText=function(){if(!this.sent_)throw UN("cannot .getResponseText() before sending");return this.xhr_.responseText},fx.prototype.abort=function(){this.xhr_.abort()},fx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},fx.prototype.addUploadProgressListener=function(t){ix(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},fx.prototype.removeUploadProgressListener=function(t){ix(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},fx);function fx(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=zN.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=zN.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=zN.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}var dx=(yx.prototype.createXhrIo=function(){return new px},yx);function yx(){}function mx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(hx())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var vx=(gx.prototype.size=function(){return this.size_},gx.prototype.type=function(){return this.type_},gx.prototype.slice=function(t,e){if(lx(this.data_)){var n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new gx(n)}return new gx(new Uint8Array(this.data_.buffer,t,e-t),!0)},gx.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(hx()){var n=t.map((function(t){return t instanceof gx?t.data_:t}));return new gx(mx.apply(null,n))}var r=t.map((function(t){return ux(t)?VN(jN.RAW,t).data:t.data_})),i=0;r.forEach((function(t){i+=t.byteLength}));var o=new Uint8Array(i),s=0;return r.forEach((function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]})),new gx(o,!0)},gx.prototype.uploadData=function(){return this.data_},gx);function gx(t,e){var n=0,r="";lx(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var bx=(Object.defineProperty(wx.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(wx.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),wx.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},wx.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},wx.makeFromBucketSpec=function(t){var e;try{e=wx.makeFromUrl(t)}catch(e){return new wx(t,"")}if(""===e.path)return e;throw function(t){return new NN("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(t)},wx.makeFromUrl=function(t){for(var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=kN.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<o.length;s++){var a=o[s],u=a.regex.exec(t);if(u){var c=u[a.indices.path];e=new wx(u[a.indices.bucket],c=c||""),a.postModify(e);break}}if(null==e)throw function(t){return new NN("invalid-url","Invalid URL '"+t+"'.")}(t);return e},wx);function wx(t,e){this.bucket=t,this.path_=e}function _x(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return ax(t)&&!Array.isArray(t)}(e)?e:null}function Ex(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Tx(t){return"https://"+kN+"/v0"+t}function Sx(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Ix(t,e){return e}var Cx=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Ix},kx=null;function Ax(t,e,n){var r=_x(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new bx(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Nx(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function xx(t){if(!ax(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!ax(n))throw"Expected object for 'customMetadata' mapping."}else if(ax(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var Dx="maxResults",Rx="pageToken",Px="prefixes";function Ox(t){if(!ax(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===Dx){if(!cx(n=t[Dx])||!Number.isInteger(n)||t[Dx]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[Dx])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==Rx)throw"Unknown option: "+e;if(t[Rx]&&!ux(t[Rx]))throw"Expected pageToken to be string."}var n}var Lx=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Mx(t){if(!t)throw RN()}function Fx(t,e){return function(n,r){var i=Ax(t,r,e);return Mx(null!==i),i}}function Ux(t){return function(e,n){var r=function(t,e){var n=_x(e);return null===n?null:function(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new NN("no-default-bucket","No default bucket found. Did you set the '"+AN+"' property when initializing the app?");if(e[Px])for(var i=0,o=e[Px];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new bx(r,s));n.prefixes.push(a)}if(e.items)for(var u=0,c=e.items;u<c.length;u++)a=t.makeStorageReference(new bx(r,c[u].name)),n.items.push(a);return n}(t,n)}(t,n);return Mx(null!==r),r}}function jx(t,e){return function(n,r){var i=Ax(t,r,e);return Mx(null!==i),function(t,e){var n=_x(e);if(null===n)return null;if(!ux(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return Tx("/b/"+i(t.bucket)+"/o/"+i(n))+Sx({alt:"media",token:e})}))[0]}(i,r)}}function qx(t){return function(e,n){var r;return(r=401===e.getStatus()?new NN("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(t){return new NN("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===e.getStatus()?function(t){return new NN("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):n).setServerResponseProp(n.serverResponseProp()),r}}function Bx(t){var e=qx(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=function(t){return new NN("object-not-found","Object '"+t+"' does not exist.")}(t.path)),i.setServerResponseProp(r.serverResponseProp()),i}}function Vx(t,e,n){var r=Tx(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Lx(r,"GET",Fx(t,n),i);return o.errorHandler=Bx(e),o}function Wx(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Hx=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function zx(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Mx(!1)}return Mx(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Gx=function(t,e,n){if(sx(t)||ix(e)||ix(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Kx=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Qx(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return o=t===e?1===(i=t)?"argument":"arguments":(i="between "+t+" and "+e,"arguments"),new NN("invalid-argument-count","Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?LN(o,t,e.message):LN(o,t,e)}}var Yx=function(t,e){var n=this;this.validator=function(e){n.optional&&!ox(e)||t(e)},this.optional=!!e};function Xx(t,e){function n(t){if(!ux(t))throw"Expected string."}var r;return r=t?function(t,e){return function(n){t(n),e(n)}}(n,t):n,new Yx(r,e)}function $x(){return new Yx((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||hx()&&t instanceof Blob))throw"Expected Blob or File."}))}function Jx(t){return new Yx(xx,t)}function Zx(){return new Yx((function(t){if(!(cx(t)&&0<=t))throw"Expected a number 0 or greater."}))}function tD(t,e){return new Yx((function(e){if(!(null===e||ix(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function eD(t){return new Yx((function(t){if(null!==t&&!sx(t))throw"Expected a Function."}),t)}function nD(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var rD=(iD.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},iD.prototype.shouldDoResumable_=function(t){return 262144<t.size()},iD.prototype.start_=function(){this.state_===YN&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},iD.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case YN:t(n);break;case ZN:e.transition_(tx);break;case XN:e.transition_($N)}}))},iD.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Wx(e,r,i),a={name:s.fullPath},u=Tx(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Nx(s,n),h=t.maxUploadRetryTime(),p=new Lx(u,"POST",(function(t){var e;zx(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Mx(!1)}return Mx(ux(e)),e}),h);return p.urlParams=a,p.headers=c,p.body=l,p.errorHandler=qx(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},iD.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new Lx(n,"POST",(function(t){var e=zx(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Mx(!1)}n||Mx(!1);var i=Number(n);return Mx(!isNaN(i)),new Hx(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=qx(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);(t.request_=i).getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},iD.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Hx(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Hx(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new NN("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<i&&(l=Math.min(l,i));var h=u.current,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw ON();var d=e.maxUploadRetryTime(),y=new Lx(n,"POST",(function(t,n){var i,s=zx(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Fx(e,o)(t,n):null,new Hx(a,c,"final"===s,i)}),d);return y.headers=p,y.body=f.uploadData(),y.progressCallback=a||null,y.errorHandler=qx(t),y}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(i){return t.error_=i,void t.transition_(ex)}var s=t.authWrapper_.makeRequest(o,i);(t.request_=s).getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(JN)):t.completeTransitions_()}),t.errorHandler_)}))},iD.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},iD.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Vx(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(JN)}),t.metadataErrorHandler_)}))},iD.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Wx(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Nx(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l=vx.getBlob(c,r,"\r\n--"+a+"--");if(null===l)throw ON();var h={name:u.fullPath},p=Tx(o),f=t.maxUploadRetryTime(),d=new Lx(p,"POST",Fx(t,n),f);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=qx(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(JN)}),t.errorHandler_)}))},iD.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},iD.prototype.transition_=function(t){if(this.state_!==t)switch(t){case ZN:case XN:this.state_=t,null!==this.request_&&this.request_.cancel();break;case YN:var e=this.state_===$N;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case $N:this.state_=t,this.notifyObservers_();break;case tx:this.error_=PN(),this.state_=t,this.notifyObservers_();break;case ex:case JN:this.state_=t,this.notifyObservers_()}},iD.prototype.completeTransitions_=function(){switch(this.state_){case XN:this.transition_($N);break;case ZN:this.transition_(tx);break;case YN:this.start_()}},Object.defineProperty(iD.prototype,"snapshot",{get:function(){var t=rx(this.state_);return new Kx(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),iD.prototype.on=function(t,e,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=eD(!0).validator,s=tD(null,!0).validator;function a(t){try{return void o(t)}catch(t){}try{if(s(t),!(ox(t.next)||ox(t.error)||ox(t.complete)))throw"";return}catch(t){throw i}}Qx("on",[Xx((function(){if(t!==QN.STATE_CHANGED)throw"Expected one of the event types: ["+QN.STATE_CHANGED+"]."})),tD(a,!0),eD(!0),eD(!0)],arguments);var u=this;function c(t){return function(e,n,i){null!==t&&Qx("on",t,arguments);var o=new Gx(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[tD((function(t){if(null===t)throw i;a(t)})),eD(!0),eD(!0)];return ox(e)||ox(n)||ox(r)?c(null)(e,n,r):c(l)},iD.prototype.then=function(t,e){return this.promise_.then(t,e)},iD.prototype.catch=function(t){return this.then(null,t)},iD.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},iD.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},iD.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},iD.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(rx(this.state_)){case nx.SUCCESS:nD(this.resolve_.bind(null,this.snapshot))();break;case nx.CANCELED:case nx.ERROR:nD(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},iD.prototype.notifyObserver_=function(t){switch(rx(this.state_)){case nx.RUNNING:case nx.PAUSED:t.next&&nD(t.next.bind(t,this.snapshot))();break;case nx.SUCCESS:t.complete&&nD(t.complete.bind(t))();break;case nx.CANCELED:case nx.ERROR:t.error&&nD(t.error.bind(t,this.error_))();break;default:t.error&&nD(t.error.bind(t,this.error_))()}},iD.prototype.resume=function(){Qx("resume",[],arguments);var t=this.state_===$N||this.state_===XN;return t&&this.transition_(YN),t},iD.prototype.pause=function(){Qx("pause",[],arguments);var t=this.state_===YN;return t&&this.transition_(XN),t},iD.prototype.cancel=function(){Qx("cancel",[],arguments);var t=this.state_===YN||this.state_===XN;return t&&this.transition_(ZN),t},iD);function iD(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=YN,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(ex))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_(ex))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}var oD=(sD.prototype.toString=function(){return Qx("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},sD.prototype.newRef=function(t,e){return new sD(t,e)},sD.prototype.mappings=function(){return function(){if(kx)return kx;var t=[];t.push(new Cx("bucket")),t.push(new Cx("generation")),t.push(new Cx("metageneration")),t.push(new Cx("name","fullPath",!0));var e=new Cx("name");e.xform=function(t,e){return function(t){return!ux(t)||t.length<2?t:Ex(t)}(e)},t.push(e);var n=new Cx("size");return n.xform=function(t,e){return ix(e)?Number(e):e},t.push(n),t.push(new Cx("timeCreated")),t.push(new Cx("updated")),t.push(new Cx("md5Hash",null,!0)),t.push(new Cx("cacheControl",null,!0)),t.push(new Cx("contentDisposition",null,!0)),t.push(new Cx("contentEncoding",null,!0)),t.push(new Cx("contentLanguage",null,!0)),t.push(new Cx("contentType",null,!0)),t.push(new Cx("metadata","customMetadata",!0)),kx=t}()},sD.prototype.child=function(t){Qx("child",[Xx()],arguments);var e=function(t,e){var n=e.split("/").filter((function(t){return 0<t.length})).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new bx(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(sD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new bx(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(sD.prototype,"root",{get:function(){var t=new bx(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(sD.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(sD.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(sD.prototype,"name",{get:function(){return Ex(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(sD.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),sD.prototype.put=function(t,e){return void 0===e&&(e=null),Qx("put",[$x(),Jx(!0)],arguments),this.throwIfRoot_("put"),new rD(this,this.authWrapper,this.location,this.mappings(),new vx(t),e)},sD.prototype.putString=function(t,e,n){void 0===e&&(e=jN.RAW),Qx("putString",[Xx(),Xx(qN,!0),Jx(!0)],arguments),this.throwIfRoot_("putString");var r=VN(e,t),i=Object.assign({},n);return!ix(i.contentType)&&ix(r.contentType)&&(i.contentType=r.contentType),new rD(this,this.authWrapper,this.location,this.mappings(),new vx(r.data,!0),i)},sD.prototype.delete=function(){var t=this;return Qx("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=function(t,e){var n=Tx(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new Lx(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Bx(e),i}(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},sD.prototype.listAll=function(){Qx("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},sD.prototype.listAllHelper=function(t,e){return ps(this,void 0,void 0,(function(){var n,r,i;return fs(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},sD.prototype.list=function(t){Qx("list",[new Yx(Ox,!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Tx(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new Lx(s,"GET",Ux(t),a);return u.urlParams=o,u.errorHandler=qx(e),u}(e.authWrapper,e.location,0,r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},sD.prototype.getMetadata=function(){var t=this;return Qx("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=Vx(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},sD.prototype.updateMetadata=function(t){var e=this;return Qx("updateMetadata",[Jx()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=function(t,e,n,r){var i=Tx(e.fullServerUrl()),o=Nx(n,r),s=t.maxOperationRetryTime(),a=new Lx(i,"PATCH",Fx(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Bx(e),a}(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},sD.prototype.getDownloadURL=function(){var t=this;return Qx("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=function(t,e,n){var r=Tx(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Lx(r,"GET",jx(t,n),i);return o.errorHandler=Bx(e),o}(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new NN("no-download-url","The given file does not have any download URLs.");return t}))}))},sD.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new NN("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},sD);function sD(t,e){this.authWrapper=t,this.location=e instanceof bx?e:bx.makeFromUrl(e)}var aD=(uD.prototype.getPromise=function(){return this.promise_},uD.prototype.cancel=function(t){},uD);function uD(t){this.promise_=Promise.reject(t)}var cD=(lD.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},lD.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},lD);function lD(){this.map=new Map,this.id=-9007199254740991}var hD=(pD.extractBucket_=function(t){var e=t[AN]||null;return null==e?null:bx.makeFromBucketSpec(e).bucket},pD.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},pD.prototype.bucket=function(){if(this.deleted_)throw MN();return this.bucket_},pD.prototype.service=function(){return this.service_},pD.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},pD.prototype.makeRequest=function(t,e){if(this.deleted_)return new aD(MN());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},pD.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},pD.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},pD.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},pD.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},pD.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},pD);function pD(t,e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;ix(s)&&(this.bucket_=pD.extractBucket_(s))}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new cD}var fD=(dD.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());ox(a)?i(a):i()}catch(e){o(e)}else null!==s?((r=RN()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?MN():PN():new NN("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new yD(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];u||(t?c.call.apply(c,vs([null,t],e)):a()||o?c.call.apply(c,vs([null,t],e)):(r<64&&(r*=2),l(1===s?(s=2,0):1e3*(r+Math.random()))))}var p=!1;function f(t){p||(p=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){f(o=!0)}),n),f}((function(e,n){if(n)e(!1,new yD(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===zN.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new yD(s,n))}else{var a=n.getErrorCode()===zN.ABORT;e(!1,new yD(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}),e,this.timeout_)},dD.prototype.getPromise=function(){return this.promise_},dD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},dD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},dD);function dD(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var yD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function mD(t,e,n){var r=Sx(t.urlParams),i=t.url+r,o=Object.assign({},t.headers);return function(t,e){null!==e&&0<e.length&&(t.Authorization="Firebase "+e)}(o,e),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==xa?xa.SDK_VERSION:"AppManager")}(o),new fD(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var vD=(gD.prototype.ref=function(t){if(Qx("ref",[Xx((function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}),!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new oD(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},gD.prototype.refFromURL=function(t){return Qx("refFromURL",[Xx((function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{bx.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}),!1)],arguments),new oD(this.authWrapper_,t)},Object.defineProperty(gD.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),gD.prototype.setMaxUploadRetryTime=function(t){Qx("setMaxUploadRetryTime",[Zx()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},gD.prototype.setMaxOperationRetryTime=function(t){Qx("setMaxOperationRetryTime",[Zx()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(gD.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(gD.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),gD);function gD(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new hD(t,e,(function(t,e){return new oD(t,e)}),mD,this,n),this.app_=t,null!=r)this.bucket_=bx.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new bx(i,""))}this.internals_=new _D(this)}var bD,wD,_D=(ED.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},ED);function ED(t){this.service_=t}wD={TaskState:nx,TaskEvent:QN,StringFormat:jN,Storage:vD,Reference:oD},(bD=xa).INTERNAL.registerComponent(new ta("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new vD(n,r,new dx,e)}),"PUBLIC").setServiceProps(wD).setMultipleInstances(!0)),bD.registerVersion("@firebase/storage","0.3.26");var TD,SD,ID,CD,kD="FB-PERF-TRACE-MEASURE",AD="@firebase/performance/config",ND="@firebase/performance/configexpire",xD="Performance",DD=((TD={})["trace started"]="Trace {$traceName} was started before.",TD["trace stopped"]="Trace {$traceName} is not running.",TD["no window"]="Window is not available.",TD["no app id"]="App id is not available.",TD["no project id"]="Project id is not available.",TD["no api key"]="Api key is not available.",TD["invalid cc log"]="Attempted to queue invalid cc event",TD["FB not default"]="Performance can only start when Firebase app instance is the default one.",TD["RC response not ok"]="RC response is not ok",TD["invalid attribute name"]="Attribute name {$attributeName} is invalid.",TD["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",TD["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",TD),RD=new Ps("performance",xD,DD),PD=(OD.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},OD.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},OD.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},OD.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},OD.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},OD.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},OD.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},OD.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])})).observe({entryTypes:[t]})},OD.getInstance=function(){return void 0===SD&&(SD=new OD(ID)),SD},OD);function OD(t){if(!(this.window=t))throw RD.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}var LD,MD,FD,UD=(jD.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw RD.create("no app id");return t},jD.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw RD.create("no project id");return t},jD.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw RD.create("no api key");return t},jD.getInstance=function(){return void 0===CD&&(CD=new jD),CD},jD);function jD(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function qD(){return LD}(FD=MD=MD||{})[FD.UNKNOWN=0]="UNKNOWN",FD[FD.VISIBLE=1]="VISIBLE",FD[FD.HIDDEN=2]="HIDDEN";var BD=["firebase_","google_","ga_"],VD=new RegExp("^[a-zA-Z]\\w*$");function WD(){switch(PD.getInstance().document.visibilityState){case"visible":return MD.VISIBLE;case"hidden":return MD.HIDDEN;default:return MD.UNKNOWN}}var HD=new fa(xD);function zD(t){if(!t)return t;var e=UD.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=GD(e.tracesSamplingRate),e.logNetworkAfterSampling=GD(e.networkRequestsSamplingRate),t}function GD(t){return Math.random()<=t}HD.logLevel=oa.INFO;var KD,QD=1;function YD(){return QD=2,KD=KD||function(){var t=PD.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return function(){var t=UD.getInstance().installationsService.getId();return t.then((function(t){LD=t})),t}()})).then((function(t){return function(t){var e=function(){var t=PD.getInstance().localStorage;if(t){var e=t.getItem(ND);if(e&&function(t){return Number(t)>Date.now()}(e)){var n=t.getItem(AD);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(zD(e),Promise.resolve()):function(t){return function(){var t=UD.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+UD.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+UD.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:UD.getInstance().getAppId(),app_version:"0.2.32",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw RD.create("RC response not ok")}))})).catch((function(){HD.info("Could not fetch config, will use default configs")}))}(t).then((function(t){return zD(t)})).then((function(t){return function(t){var e=PD.getInstance().localStorage;t&&e&&(e.setItem(AD,JSON.stringify(t)),e.setItem(ND,String(Date.now()+60*UD.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return XD()}),(function(){return XD()}))}function XD(){QD=3}var $D,JD=3,ZD=[],tR=!1;function eR(t,e){($D=$D||function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw RD.create("invalid cc log");ZD=vs(ZD,[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}(iR))(t,e)}function nR(t){var e=UD.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&PD.getInstance().requiredApisAvailable()&&(t.isAuto&&WD()!==MD.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===QD?rR(t):YD().then((function(){return rR(t)}),(function(){return rR(t)}))))}function rR(t){qD()&&setTimeout((function(){return eR(t,1)}),0)}function iR(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:oR(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:oR(),trace_metric:e};return JSON.stringify(r)}(t)}function oR(){return{google_app_id:UD.getInstance().getAppId(),app_instance_id:qD(),web_app_info:{sdk_version:"0.2.32",page_url:PD.getInstance().getUrl(),service_worker_status:function(){var t=PD.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}(),visibility_state:WD(),effective_connection_type:function(){var t=PD.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var sR=["_fp","_fcp","_fid"],aR=(uR.prototype.start=function(){if(1!==this.state)throw RD.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},uR.prototype.stop=function(){if(2!==this.state)throw RD.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),nR(this)},uR.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=hs({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}nR(this)},uR.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},uR.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||100<t.length)&&(e&&e.startsWith("_wt_")&&-1<sR.indexOf(t)||!t.startsWith("_"))}(t,this.name))throw RD.create("invalide custom metric name",{customMetricName:t});this.counters[t]=e},uR.prototype.getMetric=function(t){return this.counters[t]||0},uR.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||40<t.length||BD.some((function(e){return t.startsWith(e)}))||!t.match(VD))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw RD.create("invalid attribute name",{attributeName:t});if(!r)throw RD.create("invalid attribute value",{attributeValue:e})}},uR.prototype.getAttribute=function(t){return this.customAttributes[t]},uR.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},uR.prototype.getAttributes=function(){return hs({},this.customAttributes)},uR.prototype.setStartTime=function(t){this.startTimeUs=t},uR.prototype.setDuration=function(t){this.durationUs=t},uR.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},uR.createOobTrace=function(t,e,n){var r=PD.getInstance().getUrl();if(r){var i=new uR("_wt_"+r,!0),o=Math.floor(1e3*PD.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find((function(t){return"first-contentful-paint"===t.name}));a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}nR(i)}},uR.createUserTimingTrace=function(t){nR(new uR(t,!1,t))},uR);function uR(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=PD.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||kD+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function cR(t){var e=t;if(e&&void 0!==e.responseStart){var n=PD.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=UD.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return eR(t,0)}),0)}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function lR(){qD()&&(setTimeout((function(){return function(){var t=PD.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){aR.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),aR.createOobTrace(e,n,t))}))}else aR.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=PD.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)cR(n[e]);t.setupObserver("resource",cR)}()}),0),setTimeout((function(){return function(){for(var t=PD.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)hR(n[e]);t.setupObserver("measure",hR)}()}),0))}function hR(t){var e=t.name;e.substring(0,kD.length)!==kD&&aR.createUserTimingTrace(e)}var pR,fR=(dR.prototype.trace=function(t){return new aR(t)},Object.defineProperty(dR.prototype,"instrumentationEnabled",{get:function(){return UD.getInstance().instrumentationEnabled},set:function(t){UD.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(dR.prototype,"dataCollectionEnabled",{get:function(){return UD.getInstance().dataCollectionEnabled},set:function(t){UD.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),dR);function dR(t){this.app=t,PD.getInstance().requiredApisAvailable()?(tR||(function t(e){setTimeout((function(){if(0!==JD){if(!ZD.length)return t(1e4);var e=vs(ZD);ZD=[];var n=e.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),r={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:UD.getInstance().logSource,log_event:n};fetch(UD.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(r)}).then((function(t){return t.ok||HD.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?1e4:Math.max(1e4,n);JD=3,t(r)})).catch((function(){ZD=vs(e,ZD),JD--,HD.info("Tries left: "+JD+"."),t(1e4)}))}}),e)}(5500),tR=!0),YD().then(lR,lR)):HD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}(pR=xa).INTERNAL.registerComponent(new ta("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw RD.create("FB not default");if("undefined"==typeof window)throw RD.create("no window");return function(t){ID=t}(window),UD.getInstance().firebaseAppInstance=t,UD.getInstance().installationsService=e,new fR(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),pR.registerVersion("@firebase/performance","0.2.32");var yR,mR,vR,gR,bR,wR="measurementId",_R="https://www.googletagmanager.com/gtag/js";(mR=yR=yR||{}).EVENT="event",mR.SET="set",mR.CONFIG="config",(gR=vR=vR||{}).ADD_PAYMENT_INFO="add_payment_info",gR.ADD_TO_CART="add_to_cart",gR.ADD_TO_WISHLIST="add_to_wishlist",gR.BEGIN_CHECKOUT="begin_checkout",gR.CHECKOUT_PROGRESS="checkout_progress",gR.EXCEPTION="exception",gR.GENERATE_LEAD="generate_lead",gR.LOGIN="login",gR.PAGE_VIEW="page_view",gR.PURCHASE="purchase",gR.REFUND="refund",gR.REMOVE_FROM_CART="remove_from_cart",gR.SCREEN_VIEW="screen_view",gR.SEARCH="search",gR.SELECT_CONTENT="select_content",gR.SET_CHECKOUT_OPTION="set_checkout_option",gR.SHARE="share",gR.SIGN_UP="sign_up",gR.TIMING_COMPLETE="timing_complete",gR.VIEW_ITEM="view_item",gR.VIEW_ITEM_LIST="view_item_list",gR.VIEW_PROMOTION="view_promotion",gR.VIEW_SEARCH_RESULTS="view_search_results";var ER,TR,SR,IR=((bR={})["no-ga-id"]='"'+wR+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',bR["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",bR["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",bR["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",bR),CR=new Ps("analytics","Analytics",IR),kR={},AR="dataLayer",NR="gtag",xR=!1,DR="analytics";(SR=xa).INTERNAL.registerComponent(new ta(DR,(function(t){return function(t,e){var n=t.options[wR];if(!n)throw CR.create("no-ga-id");if(null!=kR[n])throw CR.create("already-exists",{id:n});if(!xR){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(_R))return r}return null}()&&function(t){var e=document.createElement("script");e.src=_R+"?l="+t,e.async=!0,document.head.appendChild(e)}(AR),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(AR);var r=function(t,e,n){var r=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(t,e){return function(n,r,i){if(n===yR.EVENT){var o=[];if(i&&i.send_to){var s=i.send_to;Array.isArray(s)||(s=[s]);for(var a=0,u=s;a<u.length;a++){var c=e[u[a]];if(!c){o=[];break}o.push(c)}}if(0===o.length)for(var l=0,h=Object.values(e);l<h.length;l++)o.push(h[l]);Promise.all(o).then((function(){return t(yR.EVENT,r,i||{})})).catch((function(t){return console.error(t)}))}else n===yR.CONFIG?(e[r]||Promise.resolve()).then((function(){t(yR.CONFIG,r,i)})).catch((function(t){return console.error(t)})):t(yR.SET,r)}}(r,t),{gtagCore:r,wrappedGtag:window[n]}}(kR,AR,NR);TR=r.wrappedGtag,ER=r.gtagCore,xR=!0}return kR[n]=function(t,e,n){return ps(this,void 0,void 0,(function(){var r,i;return fs(this,(function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return r=o.sent(),n("js",new Date),n(yR.CONFIG,t.options[wR],((i={}).firebase_id=r,i.origin="firebase",i.update=!0,i)),[2]}}))}))}(t,e,ER),{app:t,logEvent:function(t,e,r){return function(t,e,n,r,i){var o=r||{};i&&i.global||(o=hs(hs({},r),{send_to:e})),t(yR.EVENT,n,o||{})}(TR,n,t,e,r)},setCurrentScreen:function(t,e){return function(t,e,n,r){r&&r.global?t(yR.SET,{screen_name:n}):t(yR.CONFIG,e,{update:!0,screen_name:n})}(TR,n,t,e)},setUserId:function(t,e){return function(t,e,n,r){r&&r.global?t(yR.SET,{user_id:n}):t(yR.CONFIG,e,{update:!0,user_id:n})}(TR,n,t,e)},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(yR.SET,i)}else t(yR.CONFIG,e,{update:!0,user_properties:n})}(TR,n,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(n,t)}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:function(t){if(xR)throw CR.create("already-initialized");t.dataLayerName&&(AR=t.dataLayerName),t.gtagName&&(NR=t.gtagName)},EventName:vR})),SR.INTERNAL.registerComponent(new ta("analytics-internal",(function(t){try{return{logEvent:t.getProvider(DR).getImmediate().logEvent}}catch(t){throw CR.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),SR.registerVersion("@firebase/analytics","0.2.13");var RR,PR=(OR.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},OR.prototype.fetch=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},OR);function OR(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var LR=((RR={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",RR["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",RR["registration-api-key"]="Undefined API key. Check Firebase app initialization.",RR["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",RR["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",RR["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",RR["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",RR["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",RR["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",RR["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',RR["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',RR["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",RR["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",RR),MR=new Ps("remoteconfig","Remote Config",LR),FR=(UR.prototype.fetch=function(t){return ps(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,p,f,d,y,m,v;return fs(this,(function(g){switch(g.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=g.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:function(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}()},s={method:"POST",headers:i,body:JSON.stringify(o)},a=fetch(r,s),u=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),g.label=2;case 2:return g.trys.push([2,5,,6]),[4,Promise.race([a,u])];case 3:return g.sent(),[4,a];case 4:return c=g.sent(),[3,6];case 5:throw l=g.sent(),h="fetch-client-network","AbortError"===l.name&&(h="fetch-timeout"),MR.create(h,{originalErrorMessage:l.message});case 6:if(p=c.status,f=c.headers.get("ETag")||void 0,200!==c.status)return[3,11];m=void 0,g.label=7;case 7:return g.trys.push([7,9,,10]),[4,c.json()];case 8:return m=g.sent(),[3,10];case 9:throw v=g.sent(),MR.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=m.entries,y=m.state,g.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?p=500:"NO_CHANGE"===y?p=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(d={}),304!==p&&200!==p)throw MR.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:f,config:d}]}}))}))},UR);function UR(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var jR=(qR.prototype.addEventListener=function(t){this.listeners.push(t)},qR.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},qR);function qR(){this.listeners=[]}var BR=["1","true","t","yes","y","on"],VR=(WR.prototype.asString=function(){return this._value},WR.prototype.asBoolean=function(){return"static"!==this._source&&0<=BR.indexOf(this._value.toLowerCase())},WR.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},WR.prototype.getSource=function(){return this._source},WR);function WR(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var HR=(zR.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=oa.DEBUG;break;case"silent":this._logger.logLevel=oa.SILENT;break;default:this._logger.logLevel=oa.ERROR}},Object.defineProperty(zR.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(zR.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),zR.prototype.activate=function(){return ps(this,void 0,void 0,(function(){var t,e,n;return fs(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},zR.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},zR.prototype.fetch=function(){return ps(this,void 0,void 0,(function(){var t,e,n,r=this;return fs(this,(function(i){switch(i.label){case 0:t=new jR,setTimeout((function(){return ps(r,void 0,void 0,(function(){return fs(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Ds&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},zR.prototype.fetchAndActivate=function(){return ps(this,void 0,void 0,(function(){return fs(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},zR.prototype.getAll=function(){var t=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(hs(hs({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},zR.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},zR.prototype.getNumber=function(t){return this.getValue(t).asNumber()},zR.prototype.getString=function(t){return this.getValue(t).asString()},zR.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new VR("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new VR("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new VR("static"))},zR);function zR(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function GR(t,e){var n=t.target.error||void 0;return MR.create(e,{originalErrorMessage:n&&n.message})}var KR="app_namespace_store",QR=(YR.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},YR.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},YR.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},YR.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},YR.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},YR.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},YR.prototype.getActiveConfig=function(){return this.get("active_config")},YR.prototype.setActiveConfig=function(t){return this.set("active_config",t)},YR.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},YR.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},YR.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},YR.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},YR.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},YR.prototype.get=function(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([KR],"readonly").objectStore(KR),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(GR(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(o){i(MR.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},YR.prototype.set=function(t,e){return ps(this,void 0,void 0,(function(){var n,r=this;return fs(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([KR],"readwrite").objectStore(KR),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(GR(t,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(MR.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},YR.prototype.delete=function(t){return ps(this,void 0,void 0,(function(){var e,n=this;return fs(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([KR],"readwrite").objectStore(KR),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(GR(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(r){i(MR.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},YR.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},YR);function YR(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(GR(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(KR,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var XR=($R.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},$R.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},$R.prototype.getActiveConfig=function(){return this.activeConfig},$R.prototype.loadFromStorage=function(){return ps(this,void 0,void 0,(function(){var t,e,n,r,i,o;return fs(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},$R.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},$R.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},$R.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},$R);function $R(t){this.storage=t}var JR=(ZR.prototype.fetch=function(t){return ps(this,void 0,void 0,(function(){var e;return fs(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},ZR.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return ps(this,void 0,void 0,(function(){var e,i,o;return fs(this,(function(s){switch(s.label){case 0:return[4,function(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(MR.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Ds))return!1;var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+function(t){var e=1e3*Math.pow(2,t),n=Math.round(.5*e*(Math.random()-.5)*2);return Math.min(144e5,e+n)}(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},ZR);function ZR(t,e){this.client=t,this.storage=e}var tP,eP="@firebase/remote-config";return(tP=xa).INTERNAL.registerComponent(new ta("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw MR.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw MR.create("registration-project-id");if(!s)throw MR.create("registration-api-key");if(!a)throw MR.create("registration-app-id");var u=new QR(a,n.name,e=e||"firebase"),c=new XR(u),l=new fa(eP);l.logLevel=oa.ERROR;var h=new FR(r,tP.SDK_VERSION,e,o,s,a),p=new JR(h,u),f=new PR(p,u,c,l),d=new HR(n,f,c,u,l);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),tP.registerVersion(eP,"0.1.13"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),xa.registerVersion("firebase","7.9.1","cdn"),xa}))}function fire_fire(){var t,e;t=this,e=function(e){"use strict";try{(function(){e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n=n||Promise)((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function c(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function l(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString();switch(e){case r.DEBUG:case r.VERBOSE:console.log.apply(console,c(["["+o+"]  "+t.name+":"],n));break;case r.INFO:console.info.apply(console,c(["["+o+"]  "+t.name+":"],n));break;case r.WARN:console.warn.apply(console,c(["["+o+"]  "+t.name+":"],n));break;case r.ERROR:console.error.apply(console,c(["["+o+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(i=r=r||{})[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var h=r.INFO,p=(Object.defineProperty(f.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),f.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,c([this,r.DEBUG],t))},f.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,c([this,r.VERBOSE],t))},f.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,c([this,r.INFO],t))},f.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,c([this,r.WARN],t))},f.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,c([this,r.ERROR],t))},f);function f(t){this.name=t,this._logLevel=h,this._logHandler=l}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var y,m=(n(v,y=Error),v);function v(t,e){var n=y.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,g.prototype.create),n}var g=(b.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(w,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},b);function b(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var w=/\{\$([^}]+)}/g,_=(E.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},E.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},E.prototype.setServiceProps=function(t){return this.serviceProps=t,this},E);function E(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var T,S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},I=I||{},C=S;function k(t){return"string"==typeof t}function A(t){return"number"==typeof t}function N(t,e){t=t.split("."),e=e||C;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function x(){}function D(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function R(t){return"array"==D(t)}function P(t){var e=D(t);return"array"==e||"object"==e&&"number"==typeof t.length}function O(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var L="closure_uid_"+(1e9*Math.random()>>>0),M=0;function F(t,e,n){return t.call.apply(t.bind,arguments)}function U(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function j(t,e,n){return(j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?F:U).apply(null,arguments)}function q(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var B=Date.now||function(){return+new Date};function V(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,(t.prototype.constructor=t).xb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function W(){this.j=this.j,this.i=this.i}W.prototype.j=!1,W.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[L]||(this[L]=++M))},W.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(k(t))return k(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=k(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function G(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Q(t){return/^[\s\xa0]*$/.test(t)}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function $(t,e){return-1!=t.indexOf(e)}function J(t,e){return t<e?-1:e<t?1:0}t:{var Z=C.navigator;if(Z){var tt=Z.userAgent;if(tt){Y=tt;break t}}Y=""}function et(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function nt(t){var e,n={};for(e in t)n[e]=t[e];return n}var rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<rt.length;o++)n=rt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ot(t){return ot[" "](t),t}ot[" "]=x;var st,at,ut=$(Y,"Opera"),ct=$(Y,"Trident")||$(Y,"MSIE"),lt=$(Y,"Edge"),ht=lt||ct,pt=$(Y,"Gecko")&&!($(Y.toLowerCase(),"webkit")&&!$(Y,"Edge"))&&!($(Y,"Trident")||$(Y,"MSIE"))&&!$(Y,"Edge"),ft=$(Y.toLowerCase(),"webkit")&&!$(Y,"Edge");function dt(){var t=C.document;return t?t.documentMode:void 0}t:{var yt="",mt=(at=Y,pt?/rv:([^\);]+)(\)|;)/.exec(at):lt?/Edge\/([\d\.]+)/.exec(at):ct?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(at):ft?/WebKit\/(\S+)/.exec(at):ut?/(?:Version)[ \/]?(\S+)/.exec(at):void 0);if(mt&&(yt=mt?mt[1]:""),ct){var vt=dt();if(null!=vt&&vt>parseFloat(yt)){st=String(vt);break t}}st=yt}var gt,bt={};function wt(t){return function(e,n){var r=bt;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=function(){for(var e=0,n=X(String(st)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=J(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||J(0==s[2].length,0==a[2].length)||J(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}()}(t)}var _t=C.document;gt=_t&&ct?dt()||("CSS1Compat"==_t.compatMode?parseInt(st,10):5):void 0;var Et=!ct||9<=Number(gt),Tt=ct&&!wt("9"),St=function(){if(!C.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{C.addEventListener("test",x,e),C.removeEventListener("test",x,e)}catch(t){}return t}();function It(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Ct(t,e){if(It.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(pt){t:{try{ot(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=k(t.pointerType)?t.pointerType:kt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}It.prototype.b=function(){this.Ia=!1},V(Ct,It);var kt={2:"touch",3:"pen",4:"mouse"};Ct.prototype.b=function(){Ct.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Tt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var At="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function xt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Nt,this.X=this.Z=!1}function Dt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Rt(t){this.src=t,this.a={},this.b=0}function Pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=H(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Dt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ot(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Rt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ot(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new xt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Lt="closure_lm_"+(1e6*Math.random()|0),Mt={};function Ft(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(R(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ht(r),e&&e[At]?e.Aa(n,r,O(i)?!!i.capture:!!i,o):Ut(e,n,r,!0,i,o)}(t,e,n,r,i);if(R(e)){for(var o=0;o<e.length;o++)Ft(t,e[o],n,r,i);return null}return n=Ht(n),t&&t[At]?t.za(e,n,O(r)?!!r.capture:!!r,i):Ut(t,e,n,!1,r,i)}function Ut(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=O(i)?!!i.capture:!!i;if(s&&!Et)return null;var a=Vt(t);if(a||(t[Lt]=a=new Rt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Bt,e=Et?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)St||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(qt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function jt(t){if(!A(t)&&t&&!t.X){var e=t.src;if(e&&e[At])Pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(qt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Vt(e))?(Pt(n,t),0==n.b&&(n.src=null,e[Lt]=null)):Dt(t)}}}function qt(t){return t in Mt?Mt[t]:Mt[t]="on"+t}function Bt(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&jt(t),n.call(r,e)}(t,Et?new Ct(e,this):e=new Ct(e||N("window.event"),this))}function Vt(t){return(t=t[Lt])instanceof Rt?t:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(t){return"function"==D(t)?t:(t[Wt]||(t[Wt]=function(e){return t.handleEvent(e)}),t[Wt])}function zt(){W.call(this),this.c=new Rt(this),(this.J=this).B=null}function Gt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&Pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}V(zt,W),zt.prototype[At]=!0,(T=zt.prototype).addEventListener=function(t,e,n,r){Ft(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(R(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=O(i)?!!i.capture:!!i,r=Ht(r),e&&e[At]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Ot(s=e.a[n],r,i,o))&&(Dt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Vt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ot(n,r,i,o)),(r=-1<e?n[e]:null)&&jt(r))}(this,t,e,n,r)},T.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(k(t))t=new It(t,n);else if(t instanceof It)t.target=t.target||n;else{var i=t;it(t=new It(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Gt(s,r,!0,t)&&i}if(i=Gt(s=t.a=n,r,!0,t)&&i,i=Gt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Gt(s=t.a=e[o],r,!1,t)&&i;return i},T.G=function(){if(zt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Dt(n[r]);delete e.a[t],e.b--}}this.B=null},T.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},T.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Kt=C.JSON.stringify;function Qt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Yt(){this.b=this.a=null}Qt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Xt,$t=new Qt((function(){return new Jt}),(function(t){t.reset()}));function Jt(){this.next=this.b=this.a=null}function Zt(t){C.setTimeout((function(){throw t}),0)}function te(t,e){Xt||function(){var t=C.Promise.resolve(void 0);Xt=function(){t.then(re)}}(),ee||(Xt(),ee=!0),ne.add(t,e)}Yt.prototype.add=function(t,e){var n=$t.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Jt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var ee=!(Jt.prototype.reset=function(){this.next=this.b=this.a=null}),ne=new Yt;function re(){for(var t;r=n=void 0,r=null,(n=ne).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){Zt(t)}var e=$t;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;ee=!1}function ie(t,e){zt.call(this),this.b=t||1,this.a=e||C,this.f=j(this.fb,this),this.g=B()}function oe(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function se(t,e,n){if("function"==D(t))n&&(t=j(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=j(t.handleEvent,t)}return 2147483647<Number(e)?-1:C.setTimeout(t,e||0)}function ae(t,e,n){W.call(this),this.f=null!=n?j(t,n):t,this.c=e,this.b=j(this.$a,this),this.a=[]}function ue(t){t.U=se(t.b,t.c),t.f.apply(null,t.a)}function ce(t){W.call(this),this.b=t,this.a={}}V(ie,zt),(T=ie.prototype).ba=!1,T.L=null,T.fb=function(){if(this.ba){var t=B()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(oe(this),this.start()))}},T.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=B())},T.G=function(){ie.N.G.call(this),oe(this),delete this.a},V(ae,W),(T=ae.prototype).ea=!1,T.U=null,T.Ta=function(t){this.a=arguments,this.U?this.ea=!0:ue(this)},T.G=function(){ae.N.G.call(this),this.U&&(C.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},T.$a=function(){this.U=null,this.ea&&(this.ea=!1,ue(this))},V(ce,W);var le=[];function he(t,e,n,r){R(n)||(n&&(le[0]=n.toString()),n=le);for(var i=0;i<n.length;i++){var o=Ft(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function pe(t){et(t.a,(function(t,e){this.a.hasOwnProperty(e)&&jt(t)}),t),t.a={}}function fe(){}ce.prototype.G=function(){ce.N.G.call(this),pe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=new zt;function ye(t){It.call(this,"serverreachability",t)}function me(t){de.dispatchEvent(new ye(de,t))}function ve(t){It.call(this,"statevent",t)}function ge(t){de.dispatchEvent(new ve(de,t))}function be(t){It.call(this,"timingevent",t)}function we(t,e){if("function"!=D(t))throw Error("Fn must not be null and must be a function");return C.setTimeout((function(){t()}),e)}V(ye,It),V(ve,It),V(be,It);var _e={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},Ee={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function Te(){}function Se(){}Te.prototype.a=null;var Ie,Ce={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ke(){It.call(this,"d")}function Ae(){It.call(this,"c")}function Ne(){}function xe(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new ce(this),this.O=De,this.P=new ie(t=ht?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}V(ke,It),V(Ae,It),V(Ne,Te),Ie=new Ne;var De=45e3,Re={},Pe={};function Oe(t,e,n){t.F=1,t.f=sn(Je(e)),t.l=n,t.H=!0,Me(t,null)}function Le(t,e,n,r){t.F=1,t.f=sn(Je(e)),t.l=null,t.H=n,Me(t,r)}function Me(t,e){t.v=B(),je(t),t.D=Je(t.f),on(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new ae(j(t.Ja,t,t.a),t.J)),he(t.I,t.a,"readystatechange",t.cb),e=t.h?nt(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),me(1)}function Fe(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=Ue(t,n);if(i==Pe){4==e&&(t.c=4,ge(14),r=!1);break}if(i==Re){t.c=4,ge(15),r=!1;break}He(t,i)}4==e&&0==n.length&&(t.c=1,ge(16),r=!1),t.b=t.b&&r,r||(We(t),Ve(t))}function Ue(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?Pe:(n=Number(e.substring(n,r)),isNaN(n)?Re:(r+=1)+n>e.length?Pe:(e=e.substr(r,n),t.A=r+n,e))}function je(t){t.R=B()+t.O,qe(t,t.O)}function qe(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=we(j(t.ab,t),e)}function Be(t){t.i&&(C.clearTimeout(t.i),t.i=null)}function Ve(t){t.g.Ca()||t.m||t.g.na(t)}function We(t){Be(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,oe(t.P),pe(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function He(t,e){try{t.g.Fa(t,e),me(4)}catch(t){}}function ze(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(P(t)||k(t))z(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(P(t)||k(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(k(t))return t.split("");if(P(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ge(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ge)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ke(t,e){Ye(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Qe(t))}function Qe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ye(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ye(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ye(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(T=xe.prototype).setTimeout=function(t){this.O=t},T.cb=function(t){t=t.target;var e=this.B;e&&3==Jn(t)?e.Ta():this.Ja(t)},T.Ja=function(t){try{if(t==this.a)t:{var e=Jn(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!ht&&!this.a.aa())){this.m||4!=e||7==n||me(8==n||r<=0?3:2),Be(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Zn(this.a,"X-HTTP-Initial-Response");if(s&&!Q(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,ge(12),We(this),Ve(this);break t}this.s=!0,He(this,a)}this.H?(Fe(this,e,o),ht&&this.b&&3==e&&(he(this.I,this.P,"tick",this.bb),this.P.start())):He(this,o),4==e&&We(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,je(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ge(12)):(this.c=0,ge(13)),We(this),Ve(this)}}}catch(t){}},T.bb=function(){if(this.a){var t=Jn(this.a),e=this.a.aa();this.A<e.length&&(Be(this),Fe(this,t,e),this.b&&4!=t&&je(this))}},T.cancel=function(){this.m=!0,We(this)},T.ab=function(){this.i=null;var t=B();0<=t-this.R?(2!=this.F&&(me(3),ge(17)),We(this),this.c=2,Ve(this)):qe(this,this.R-t)},(T=Ge.prototype).C=function(){Qe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},T.K=function(){return Qe(this),this.a.concat()},T.get=function(t,e){return Ye(this.b,t)?this.b[t]:e},T.set=function(t,e){Ye(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},T.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $e(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof $e?(this.h=void 0!==e?e:t.h,Ze(this,t.f),this.j=t.j,tn(this,t.b),en(this,t.i),this.a=t.a,nn(this,wn(t.c)),this.g=t.g):t&&(n=String(t).match(Xe))?(this.h=!!e,Ze(this,n[1]||"",!0),this.j=an(n[2]||""),tn(this,n[3]||"",!0),en(this,n[4]),this.a=an(n[5]||"",!0),nn(this,n[6]||"",!0),this.g=an(n[7]||"")):(this.h=!!e,this.c=new yn(null,this.h))}function Je(t){return new $e(t)}function Ze(t,e,n){t.f=n?an(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function tn(t,e,n){t.b=n?an(e,!0):e}function en(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function nn(t,e,n){e instanceof yn?(t.c=e,function(t,e){e&&!t.f&&(mn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(vn(this,e),bn(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=un(e,fn)),t.c=new yn(e,t.h))}function rn(t,e,n){t.c.set(e,n)}function on(t,e,n){R(n)||(n=[String(n)]),bn(t.c,e,n)}function sn(t){return rn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^B()).toString(36)),t}function an(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function un(t,e,n){return k(t)?(t=encodeURI(t).replace(e,cn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$e.prototype.toString=function(){var t=[],e=this.f;e&&t.push(un(e,ln,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(un(e,ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(un(n,"/"==n.charAt(0)?pn:hn,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",un(n,dn)),t.join("")},$e.prototype.resolve=function(t){var e=Je(this),n=!!t.f;n?Ze(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?tn(e,t.b):n=null!=t.i;var r=t.a;if(n)en(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if($(i,"./")||$(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?nn(e,wn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var ln=/[#\/\?@]/g,hn=/[#\?:]/g,pn=/[#\?]/g,fn=/[#\?@]/g,dn=/#/g;function yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mn(t){t.a||(t.a=new Ge,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function vn(t,e){mn(t),e=_n(t,e),Ye(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ke(t.a,e))}function gn(t,e){return mn(t),e=_n(t,e),Ye(t.a.b,e)}function bn(t,e,n){vn(t,e),0<n.length&&(t.c=null,t.a.set(_n(t,e),K(n)),t.b+=n.length)}function wn(t){var e=new yn;return e.c=t.c,t.a&&(e.a=new Ge(t.a),e.b=t.b),e}function _n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function En(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Tn(t){var e=t.a.F.a;if(null!=e)ge(4),e?(ge(10),hr(t.a,t,!1)):(ge(11),hr(t.a,t,!0));else{t.b=new xe(t,void 0,void 0),t.b.h=t.h,e=mr(e=t.a,e.Y()?t.f:null,t.i),ge(4),on(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&rn(e,n,r),Le(t.b,e,!1,t.f)}}function Sn(){this.a=this.b=null}function In(){this.a=new Ge}function Cn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[L]||(t[L]=++M)):e.charAt(0)+t}function kn(t,e){this.b=t,this.a=e}function An(t){this.g=t||Nn,t=C.PerformanceNavigationTiming?0<(t=C.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(C.ka&&C.ka.Da&&C.ka.Da()&&C.ka.Da().yb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new In),this.b=null,this.c=[]}(T=yn.prototype).add=function(t,e){mn(this),this.c=null,t=_n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},T.forEach=function(t,e){mn(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},T.K=function(){mn(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},T.C=function(t){mn(this);var e=[];if(k(t))gn(this,t)&&(e=G(e,this.a.get(_n(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},T.set=function(t,e){return mn(this),this.c=null,gn(this,t=_n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},T.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},T.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},V((function(){}),(function(){})),(T=En.prototype).M=null,T.$=function(t){return this.a.$(t)},T.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},T.Ca=function(){return!1},T.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Zn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Zn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void dr(e,2)}this.f=r[0]}else(e=this.a).m=this.c,dr(e,2)}else 1==this.M&&(this.g?ge(6):"11111"==e?(ge(5),this.g=!0,(!ct||10<=Number(gt))&&(this.c=200,this.b.cancel(),ge(11),hr(this.a,this,!0))):(ge(7),this.g=!1))},T.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,Tn(this)):1==this.M&&(this.g?(ge(11),hr(this.a,this,!0)):(ge(10),hr(this.a,this,!1)));else{0==this.M?ge(8):1==this.M&&ge(9);var t=this.a;t.m=this.c,dr(t,2)}},T.Y=function(){return this.a.Y()},T.ma=function(){return this.a.ma()},In.prototype.add=function(t){this.a.set(Cn(t),t)},In.prototype.C=function(){return this.a.C()};var Nn=10;function xn(t,e){!t.a&&($(e,"spdy")||$(e,"quic")||$(e,"h2"))&&(t.f=t.g,t.a=new In,t.b&&(On(t,t.b),t.b=null))}function Dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function Rn(t){return t.b?1:t.a?t.a.a.c:0}function Pn(t,e){return t.b?t.b==e:!!t.a&&(e=Cn(e),Ye(t.a.a.b,e))}function On(t,e){t.a?t.a.add(e):t.b=e}function Ln(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Cn(e),n=Ye(t.a.a.b,n)),n&&Ke(t.a.a,Cn(e)))}function Mn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return K(t.c);var e=t.c;return z(t.a.C(),(function(t){e=e.concat(t.j)})),e}function Fn(){}function Un(){this.a=new Fn}function jn(t,e,n){var r=n||"";try{ze(t,(function(t,n){var i=t;O(t)&&(i=Kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function qn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}An.prototype.cancel=function(){this.c=Mn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(z(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},Fn.prototype.stringify=function(t){return C.JSON.stringify(t,void 0)},Fn.prototype.parse=function(t){return C.JSON.parse(t,void 0)};var Bn=C.JSON.parse;function Vn(t){zt.call(this),this.headers=new Ge,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Wn,this.D=this.F=!1}V(Vn,zt);var Wn="",Hn=/^https?$/i,zn=["POST","PUT"];function Gn(t){return"content-type"==t.toLowerCase()}function Kn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Qn(t),Xn(t)}function Qn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Yn(t){if(t.b&&void 0!==I&&(!t.s[1]||4!=Jn(t)||2!=t.T()))if(t.l&&4==Jn(t))se(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Jn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(Xe)[1]||null;if(!o&&C.self&&C.self.location){var s=C.self.location.protocol;o=s.substr(0,s.length-1)}i=!Hn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Jn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",Qn(t)}}finally{Xn(t)}}}function Xn(t,e){if(t.a){$n(t);var n=t.a,r=t.s[0]?x:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function $n(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(C.clearTimeout(t.m),t.m=null)}function Jn(t){return t.a?t.a.readyState:0}function Zn(t,e){return t.a?t.a.getResponseHeader(e):null}function tr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return et(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),k(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return rn(t,e,n),t}function er(t){this.f=[],this.F=new Sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!N("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=N("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=N("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=N("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=N("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.zb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new An(t&&t.concurrentRequestLimit),this.ja=new Un,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function nr(t){if(rr(t),3==t.u){var e=t.P++,n=Je(t.B);rn(n,"SID",t.H),rn(n,"RID",e),rn(n,"TYPE","terminate"),ar(t,n),(e=new xe(t,e,void 0)).F=2,e.f=sn(Je(n)),n=!1,C.navigator&&C.navigator.sendBeacon&&(n=C.navigator.sendBeacon(e.f.toString(),"")),!n&&C.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=B(),je(e)}yr(t)}function rr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(C.clearTimeout(t.l),t.l=null),pr(t),t.b.cancel(),t.h&&(A(t.h)&&C.clearTimeout(t.h),t.h=null)}function ir(t,e){t.f.push(new kn(t.Qa++,e)),3==t.u&&or(t)}function or(t){Dn(t.b)||t.h||(t.h=!0,te(t.Ha,t),t.A=0)}function sr(t,e){var n;n=e?e.W:t.P++;var r=Je(t.B);rn(r,"SID",t.H),rn(r,"RID",n),rn(r,"AID",t.O),ar(t,r),t.g&&t.i&&tr(r,t.g,t.i),n=new xe(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=ur(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),On(t.b,n),Oe(n,r,e)}function ar(t,e){t.c&&ze({},(function(t,n){rn(e,n,t)}))}function ur(t,e,n){n=Math.min(t.f.length,n);var r=t.c?j(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{jn(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function cr(t){t.a||t.l||(t.S=1,te(t.Ga,t),t.v=0)}function lr(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=we(j(t.Ga,t),fr(t,t.v)),t.v++,0))}function hr(t,e,n){var r=e.l;r&&xn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=mr(t,null,t.ha),or(t)}function pr(t){null!=t.s&&(C.clearTimeout(t.s),t.s=null)}function fr(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function dr(t,e){if(2==e){var n=null;t.c&&(n=null);var r=j(t.eb,t);n||(n=new $e("//www.google.com/images/cleardot.gif"),C.location&&"http"==C.location.protocol||Ze(n,"https"),sn(n)),function(t,e){var n=new fe;if(C.Image){var r=new Image;r.onload=q(qn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=q(qn,n,r,"TestLoadImage: error",!1,e),r.onabort=q(qn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=q(qn,n,r,"TestLoadImage: timeout",!1,e),C.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ge(2);t.u=0,t.c&&t.c.ta(e),yr(t),rr(t)}function yr(t){t.u=0,t.m=-1,t.c&&(0==Mn(t.b).length&&0==t.f.length||(t.b.c.length=0,K(t.f),t.f.length=0),t.c.sa())}function mr(t,e,n){var r=function(t){return t instanceof $e?Je(t):new $e(t,void 0)}(n);if(""!=r.b)e&&tn(r,e+"."+r.b),en(r,r.i);else{var i=C.location;r=function(t,e,n,r){var i=new $e(null,void 0);return t&&Ze(i,t),e&&tn(i,e),n&&en(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&et(t.V,(function(t,e){rn(r,e,t)})),n=t.I,(e=t.j)&&n&&rn(r,e,n),rn(r,"VER",t.wa),ar(t,r),r}function vr(){}function gr(){if(ct&&!(10<=Number(gt)))throw Error("Environmental error: no available transport.")}function br(t,e){zt.call(this),this.a=new er(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Q(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Q(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Er(this)}function wr(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _r(){Ae.call(this),this.status=1}function Er(t){this.a=t}(T=Vn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ie),this.a.onreadystatechange=j(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Kn(this,t)}t=n||"";var i=new Ge(this.headers);r&&ze(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Gn,n=t.length,r=k(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:k(t)?t.charAt(e):t[e]}(i.K()),n=C.FormData&&t instanceof C.FormData,0<=H(zn,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{$n(this),0<this.o&&((this.D=function(t){return ct&&wt(9)&&A(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=j(this.Ba,this)):this.m=se(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Kn(this,t)}},T.Ba=function(){void 0!==I&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},T.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Xn(this))},T.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Xn(this,!0)),Vn.N.G.call(this)},T.Ea=function(){this.j||(this.w||this.l||this.g?Yn(this):this.Za())},T.Za=function(){Yn(this)},T.T=function(){try{return 2<Jn(this)?this.a.status:-1}catch(n){return-1}},T.aa=function(){try{return this.a?this.a.responseText:""}catch(n){return""}},T.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Bn(e)}},T.ya=function(){return this.h},T.Xa=function(){return k(this.f)?this.f:String(this.f)},(T=er.prototype).wa=8,T.u=1,T.Ca=function(){return 0==this.u},T.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new xe(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?it(r=nt(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&k(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ur(this,n,e),rn(i=Je(this.B),"RID",t),rn(i,"CVER",22),this.o&&this.j&&rn(i,"X-HTTP-Session-Id",this.j),ar(this,i),this.g&&r&&tr(i,this.g,r),On(this.b,n),this.W?(rn(i,"$req",e),rn(i,"SID","null"),n.S=!0,Oe(n,i,null)):Oe(n,i,e),this.u=2}}else 3==this.u&&(t?sr(this,t):0==this.f.length||Dn(this.b)||sr(this))},T.Ga=function(){this.l=null,this.a=new xe(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Je(this.pa);rn(t,"RID","rpc"),rn(t,"SID",this.H),rn(t,"CI",this.ia?"0":"1"),rn(t,"AID",this.O),ar(this,t),rn(t,"TYPE","xmlhttp"),this.g&&this.i&&tr(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),Le(this.a,t,!0,this.ga)},T.Fa=function(t,e){if(0!=this.u&&(this.a==t||Pn(this.b,t)))if(this.m=t.o,!t.s&&Pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(R(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;pr(this),this.a.cancel(),this.a=null}lr(this),ge(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=we(j(this.Ya,this),6e3));if(Rn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else dr(this,11)}else if(!t.s&&this.a!=t||pr(this),!Q(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&A(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Zn(r,"X-Client-Wire-Protocol"))&&xn(this.b,i),this.j&&(r=Zn(r,"X-HTTP-Session-Id")))&&(this.I=r,rn(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=mr(this,this.Y()?this.ga:null,this.ha),r.s?(Ln(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Be(r),je(r)),this.a=r):cr(this),0<this.f.length&&or(this)}else"stop"!=r[0]&&"close"!=r[0]||dr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?dr(this,7):nr(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},T.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,lr(this),ge(19))},T.na=function(t){var e=null;if(this.a==t){pr(this),this.a=null;var n=2}else{if(!Pn(this.b,t))return;e=t.j,Ln(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=B()-t.v,de.dispatchEvent(new be(de,t.l?t.l.length:0,e,this.A)),or(this)):cr(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(Rn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=we(j(t.Ha,t,e),fr(t,t.A)),t.A++,0)))}(this,t)||2==n&&lr(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:dr(this,5);break;case 4:dr(this,10);break;case 3:dr(this,6);break;default:dr(this,2)}}},T.eb=function(t){ge(t?2:1)},T.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Vn(this.Ka)).F=this.R,t},T.ma=function(){return!!this.c&&!0},T.Y=function(){return this.R},(T=vr.prototype).va=function(){},T.ua=function(){},T.ta=function(){},T.sa=function(){},T.Sa=function(){},gr.prototype.a=function(t,e){return new br(t,e)},V(br,zt),(T=br.prototype).addEventListener=function(t,e,n,r){br.N.addEventListener.call(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){br.N.removeEventListener.call(this,t,e,n,r)},T.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;ge(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new En(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=tr(e,t.g,t.i)),(t=t.w).i=n,e=mr(t.a,null,t.i),ge(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,Tn(t)):(on(e,"MODE","init"),!t.a.o&&t.a.j&&on(e,"X-HTTP-Session-Id",t.a.j),t.b=new xe(t,void 0,void 0),t.b.h=t.h,Le(t.b,e,!1,null),t.M=0)},T.close=function(){nr(this.a)},T.Wa=function(t){if(k(t)){var e={};e.__data__=t,ir(this.a,e)}else this.h?((e={}).__data__=Kt(t),ir(this.a,e)):ir(this.a,t)},T.G=function(){this.a.c=null,delete this.f,nr(this.a),delete this.a,br.N.G.call(this)},V(wr,ke),V(_r,Ae),V(Er,vr),Er.prototype.va=function(){this.a.dispatchEvent("a")},Er.prototype.ua=function(t){this.a.dispatchEvent(new wr(t))},Er.prototype.ta=function(t){this.a.dispatchEvent(new _r(t))},Er.prototype.sa=function(){this.a.dispatchEvent("b")};var Tr=q((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),gr);gr.prototype.createWebChannel=gr.prototype.a,br.prototype.send=br.prototype.Wa,br.prototype.open=br.prototype.Va,br.prototype.close=br.prototype.close,_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,Ee.COMPLETE="complete",(Se.EventType=Ce).OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",zt.prototype.listen=zt.prototype.za,Vn.prototype.listenOnce=Vn.prototype.Aa,Vn.prototype.getLastError=Vn.prototype.Xa,Vn.prototype.getLastErrorCode=Vn.prototype.ya,Vn.prototype.getStatus=Vn.prototype.T,Vn.prototype.getResponseJson=Vn.prototype.Ua,Vn.prototype.getResponseText=Vn.prototype.aa,Vn.prototype.send=Vn.prototype.ca;var Sr,Ir,Cr={createWebChannelTransport:Tr,ErrorCode:_e,EventType:Ee,WebChannel:Se,XhrIo:Vn},kr=Cr.createWebChannelTransport,Ar=Cr.ErrorCode,Nr=Cr.EventType,xr=Cr.WebChannel,Dr=Cr.XhrIo,Rr=e.SDK_VERSION,Pr=new p("@firebase/firestore");function Or(){return Pr.logLevel===r.DEBUG?Sr.DEBUG:Pr.logLevel===r.SILENT?Sr.SILENT:Sr.ERROR}function Lr(t){switch(t){case Sr.DEBUG:Pr.logLevel=r.DEBUG;break;case Sr.ERROR:Pr.logLevel=r.ERROR;break;case Sr.SILENT:Pr.logLevel=r.SILENT;break;default:Pr.error("Firestore ("+Rr+"): Invalid value passed to `setLogLevel`")}}function Mr(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(Pr.logLevel<=r.DEBUG){var o=n.map(Ur);Pr.debug.apply(Pr,u(["Firestore ("+Rr+") ["+t+"]: "+e],o))}}function Fr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pr.logLevel<=r.ERROR){var i=e.map(Ur);Pr.error.apply(Pr,u(["Firestore ("+Rr+"): "+t],i))}}function Ur(t){if("string"==typeof t)return t;var e=Br.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function jr(t){var e="FIRESTORE ("+Rr+") INTERNAL ASSERTION FAILED: "+t;throw Fr(e),new Error(e)}function qr(t,e){t||jr(e)}(Ir=Sr=Sr||{})[Ir.DEBUG=0]="DEBUG",Ir[Ir.ERROR=1]="ERROR",Ir[Ir.SILENT=2]="SILENT";var Br=(Vr.setPlatform=function(t){Vr.platform&&jr("Platform already defined"),Vr.platform=t},Vr.getPlatform=function(){return Vr.platform||jr("Platform not set"),Vr.platform},Vr);function Vr(){}function Wr(){return Br.getPlatform().emptyByteString}var Hr,zr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gr=(n(Kr,Hr=Error),Kr);function Kr(t,e){var n=Hr.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Qr(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new Gr(zr.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function Yr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xr(t,e){return void 0!==t?t:e}function $r(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Jr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zr(t){for(var e in qr(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ti(t,e){if(0!==e.length)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+vi(e.length,"argument")+".")}function ei(t,e,n){if(e.length!==n)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires "+vi(n,"argument")+", but was called with "+vi(e.length,"argument")+".")}function ni(t,e,n){if(e.length<n)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires at least "+vi(n,"argument")+", but was called with "+vi(e.length,"argument")+".")}function ri(t,e,n,r){if(e.length<n||e.length>r)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+vi(e.length,"argument")+".")}function ii(t,e,n,r){ci(t,e,mi(n)+" argument",r)}function oi(t,e,n,r){void 0!==r&&ii(t,e,n,r)}function si(t,e,n,r){ci(t,e,n+" option",r)}function ai(t,e,n,r){void 0!==r&&si(t,e,n,r)}function ui(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(hi(u))}var c=hi(r);throw new Gr(zr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function ci(t,e,n,r){if(!("object"===e?li(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=hi(r);throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function li(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function hi(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":jr("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function pi(t,e,n){if(void 0===n)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+mi(e)+" argument, but it was undefined.")}function fi(t,e,n){Jr(e,(function(e,r){if(n.indexOf(e)<0)throw new Gr(zr.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function di(t,e,n,r){var i=hi(r);return new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires its "+mi(n)+" argument to be a "+e+", but it was: "+i)}function yi(t,e,n){if(n<=0)throw new Gr(zr.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+mi(e)+" argument to be a positive number, but it was: "+n+".")}function mi(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function vi(t,e){return t+" "+e+(1===t?"":"s")}var gi=(bi.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return qr(20===e.length,"Invalid auto ID: "+e),e},bi);function bi(){}function wi(t,e){return t<e?-1:e<t?1:0}function _i(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Ei(t){return t+"\0"}function Ti(){if("undefined"==typeof Uint8Array)throw new Gr(zr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Si(){if(!Br.getPlatform().base64Available)throw new Gr(zr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ii=(Ci.fromBase64String=function(t){ei("Blob.fromBase64String",arguments,1),ii("Blob.fromBase64String","string",1,t),Si();try{return new Ci(Br.getPlatform().atob(t))}catch(t){throw new Gr(zr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Ci.fromUint8Array=function(t){if(ei("Blob.fromUint8Array",arguments,1),Ti(),!(t instanceof Uint8Array))throw di("Blob.fromUint8Array","Uint8Array",1,t);return new Ci(Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join(""))},Ci.prototype.toBase64=function(){return ei("Blob.toBase64",arguments,0),Si(),Br.getPlatform().btoa(this._binaryString)},Ci.prototype.toUint8Array=function(){ei("Blob.toUint8Array",arguments,0),Ti();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},Ci.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ci.prototype.isEqual=function(t){return this._binaryString===t._binaryString},Ci.prototype._compareTo=function(t){return wi(this._binaryString,t._binaryString)},Ci);function Ci(t){Si(),this._binaryString=t}var ki=Qr(Ii,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Ai=function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Ni="(default)",xi=(Object.defineProperty(Di.prototype,"isDefaultDatabase",{get:function(){return this.database===Ni},enumerable:!0,configurable:!0}),Di.prototype.isEqual=function(t){return t instanceof Di&&t.projectId===this.projectId&&t.database===this.database},Di.prototype.compareTo=function(t){return wi(this.projectId,t.projectId)||wi(this.database,t.database)},Di);function Di(t,e){this.projectId=t,this.database=e||Ni}var Ri=(Pi.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Pi.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},Pi.INVALID=-1,Pi);function Pi(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}var Oi="__name__",Li=(Object.defineProperty(Mi.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Mi.prototype.isEqual=function(t){return 0===Mi.comparator(this,t)},Mi.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Mi?t.forEach((function(t){e.push(t)})):e.push(t),this.construct(e)},Mi.prototype.limit=function(){return this.offset+this.length},Mi.prototype.popFirst=function(t){return qr(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},Mi.prototype.popLast=function(){return qr(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Mi.prototype.firstSegment=function(){return qr(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Mi.prototype.lastSegment=function(){return this.get(this.length-1)},Mi.prototype.get=function(t){return qr(t<this.length,"Index out of range"),this.segments[this.offset+t]},Mi.prototype.isEmpty=function(){return 0===this.length},Mi.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mi.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mi.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Mi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Mi.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Mi);function Mi(t,e,n){void 0===e?e=0:e>t.length&&jr("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&jr("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}var Fi,Ui=(n(ji,Fi=Li),ji.prototype.construct=function(t,e,n){return new ji(t,e,n)},ji.prototype.canonicalString=function(){return this.toArray().join("/")},ji.prototype.toString=function(){return this.canonicalString()},ji.fromString=function(t){if(0<=t.indexOf("//"))throw new Gr(zr.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new ji(t.split("/").filter((function(t){return 0<t.length})))},ji.EMPTY_PATH=new ji([]),ji);function ji(){return null!==Fi&&Fi.apply(this,arguments)||this}var qi,Bi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vi=(n(Wi,qi=Li),Wi.prototype.construct=function(t,e,n){return new Wi(t,e,n)},Wi.isValidIdentifier=function(t){return Bi.test(t)},Wi.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Wi.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},Wi.prototype.toString=function(){return this.canonicalString()},Wi.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Oi},Wi.keyField=function(){return new Wi([Oi])},Wi.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Gr(zr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Gr(zr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Gr(zr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wi(e)},Wi.EMPTY_PATH=new Wi([]),Wi);function Wi(){return null!==qi&&qi.apply(this,arguments)||this}var Hi=(zi.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},zi.prototype.isEqual=function(t){return null!==t&&0===Ui.comparator(this.path,t.path)},zi.prototype.toString=function(){return this.path.toString()},zi.comparator=function(t,e){return Ui.comparator(t.path,e.path)},zi.isDocumentKey=function(t){return t.length%2==0},zi.fromSegments=function(t){return new zi(new Ui(t.slice()))},zi.fromPathString=function(t){return new zi(Ui.fromString(t))},zi.EMPTY=new zi(new Ui([])),zi);function zi(t){this.path=t,qr(zi.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}var Gi,Ki,Qi=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};(Ki=Gi=Gi||{}).All="all",Ki.ListenStreamIdle="listen_stream_idle",Ki.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Ki.WriteStreamIdle="write_stream_idle",Ki.WriteStreamConnectionBackoff="write_stream_connection_backoff",Ki.OnlineStateTimeout="online_state_timeout",Ki.ClientMetadataRefresh="client_metadata_refresh",Ki.LruGarbageCollection="lru_garbage_collection",Ki.RetryTransaction="retry_transaction";var Yi=(Xi.createAndSchedule=function(t,e,n,r,i){var o=new Xi(t,e,Date.now()+n,r,i);return o.start(n),o},Xi.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},Xi.prototype.skipDelay=function(){return this.handleDelayElapsed()},Xi.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gr(zr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Xi.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},Xi.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Xi);function Xi(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}var $i=(Object.defineProperty(Ji.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Ji.prototype.enqueueAndForget=function(t){this.enqueue(t)},Ji.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},Ji.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},Ji.prototype.enqueueAndInitiateShutdown=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Ji.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},Ji.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw Fr("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n},Ji.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),qr(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.timerIdsToSkip.indexOf(t)&&(e=0);var i=Yi.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(i),i},Ji.prototype.verifyNotFailed=function(){this.failure&&jr("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Ji.prototype.verifyOperationInProgress=function(){qr(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Ji.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},Ji.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},Ji.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){qr(t===Gi.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==Gi.All&&i.timerId===t)break}return e.drain()}))},Ji.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},Ji.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);qr(0<=e,"Delayed operation not found."),this.delayedOperations.splice(e,1)},Ji);function Ji(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}function Zi(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=eo(e)),e=to(t.get(n),e);return eo(e)}function to(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eo(t){return t+""}function no(t){var e=t.length;if(qr(2<=e,"Invalid path "+t),2===e)return qr(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),Ui.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&jr('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:jr('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Ui(r)}var ro=(io.now=function(){return io.fromMillis(Date.now())},io.fromDate=function(t){return io.fromMillis(t.getTime())},io.fromMillis=function(t){var e=Math.floor(t/1e3);return new io(e,1e6*(t-1e3*e))},io.prototype.toDate=function(){return new Date(this.toMillis())},io.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},io.prototype._compareTo=function(t){return this.seconds===t.seconds?wi(this.nanoseconds,t.nanoseconds):wi(this.seconds,t.seconds)},io.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},io.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},io);function io(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Gr(zr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}var oo=(so.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new so(new ro(e,t%1e6*1e3))},so.fromTimestamp=function(t){return new so(t)},so.forDeletedDoc=function(){return so.MIN},so.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},so.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},so.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},so.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},so.prototype.toTimestamp=function(){return this.timestamp},so.MIN=new so(new ro(0,0)),so);function so(t){this.timestamp=t}var ao=(uo.prototype.insert=function(t,e){return new uo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ho.BLACK,null,null))},uo.prototype.remove=function(t){return new uo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ho.BLACK,null,null))},uo.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},uo.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},uo.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(uo.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),uo.prototype.minKey=function(){return this.root.minKey()},uo.prototype.maxKey=function(){return this.root.maxKey()},uo.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},uo.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},uo.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},uo.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},uo.prototype.getIterator=function(){return new co(this.root,null,this.comparator,!1)},uo.prototype.getIteratorFrom=function(t){return new co(this.root,t,this.comparator,!1)},uo.prototype.getReverseIterator=function(){return new co(this.root,null,this.comparator,!0)},uo.prototype.getReverseIteratorFrom=function(t){return new co(this.root,t,this.comparator,!0)},uo);function uo(t,e){this.comparator=t,this.root=e||ho.EMPTY}var co=(lo.prototype.getNext=function(){qr(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},lo.prototype.hasNext=function(){return 0<this.nodeStack.length},lo.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},lo);function lo(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}var ho=(po.prototype.copy=function(t,e,n,r,i){return new po(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},po.prototype.isEmpty=function(){return!1},po.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},po.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},po.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},po.prototype.minKey=function(){return this.min().key},po.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},po.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},po.prototype.removeMin=function(){if(this.left.isEmpty())return po.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},po.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},po.prototype.isRed=function(){return this.color},po.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},po.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},po.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},po.prototype.rotateLeft=function(){var t=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},po.prototype.rotateRight=function(){var t=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},po.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},po.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},po.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw jr("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw jr("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw jr("Black depths differ");return t+(this.isRed()?0:1)},po.EMPTY=null,po.RED=!0,po.BLACK=!1,po);function po(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:po.RED,this.left=null!=r?r:po.EMPTY,this.right=null!=i?i:po.EMPTY,this.size=this.left.size+1+this.right.size}var fo=(Object.defineProperty(yo.prototype,"key",{get:function(){throw jr("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"value",{get:function(){throw jr("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"color",{get:function(){throw jr("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"left",{get:function(){throw jr("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(yo.prototype,"right",{get:function(){throw jr("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),yo.prototype.copy=function(t,e,n,r,i){return this},yo.prototype.insert=function(t,e,n){return new ho(t,e)},yo.prototype.remove=function(t,e){return this},yo.prototype.isEmpty=function(){return!0},yo.prototype.inorderTraversal=function(t){return!1},yo.prototype.reverseTraversal=function(t){return!1},yo.prototype.minKey=function(){return null},yo.prototype.maxKey=function(){return null},yo.prototype.isRed=function(){return!1},yo.prototype.checkMaxDepth=function(){return!0},yo.prototype.check=function(){return 0},yo);function yo(){this.size=0}ho.EMPTY=new fo;var mo=(vo.fromMapKeys=function(t){var e=new vo(t.comparator);return t.forEach((function(t){e=e.add(t)})),e},vo.prototype.has=function(t){return null!==this.data.get(t)},vo.prototype.first=function(){return this.data.minKey()},vo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(vo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),vo.prototype.indexOf=function(t){return this.data.indexOf(t)},vo.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},vo.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},vo.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},vo.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},vo.prototype.getIterator=function(){return new go(this.data.getIterator())},vo.prototype.getIteratorFrom=function(t){return new go(this.data.getIteratorFrom(t))},vo.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},vo.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},vo.prototype.isEmpty=function(){return this.data.isEmpty()},vo.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},vo.prototype.isEqual=function(t){if(!(t instanceof vo))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},vo.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},vo.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},vo.prototype.copy=function(t){var e=new vo(this.comparator);return e.data=t,e},vo);function vo(t){this.comparator=t,this.data=new ao(this.comparator)}var go=(bo.prototype.getNext=function(){return this.iter.getNext().key},bo.prototype.hasNext=function(){return this.iter.hasNext()},bo);function bo(t){this.iter=t}var wo=new ao(Hi.comparator);function _o(){return wo}function Eo(){return _o()}var To=new ao(Hi.comparator);function So(){return To}var Io=new ao(Hi.comparator);function Co(){return Io}var ko=new mo(Hi.comparator);function Ao(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ko,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var No=new mo(wi);function xo(){return No}var Do=(Ro.prototype.applyToRemoteDocument=function(t,e,n){e&&qr(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;qr(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,r[i]))}return e},Ro.prototype.applyToLocalView=function(t,e){e&&qr(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.applyToLocalView(e,i,this.localWriteTime))}return e},Ro.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},Ro.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ao())},Ro.prototype.isEqual=function(t){return this.batchId===t.batchId&&_i(this.mutations,t.mutations)&&_i(this.baseMutations,t.baseMutations)},Ro);function Ro(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,qr(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var Po=(Oo.from=function(t,e,n,r){qr(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=Co(),o=t.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new Oo(t,e,n,r,i)},Oo);function Oo(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var Lo=(Mo.prototype.catch=function(t){return this.next(void 0,t)},Mo.prototype.next=function(t,e){var n=this;return this.callbackAttached&&jr("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Mo((function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}}))},Mo.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},Mo.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof Mo?e:Mo.resolve(e)}catch(t){return Mo.reject(t)}},Mo.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):Mo.resolve(e)},Mo.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):Mo.reject(e)},Mo.resolve=function(t){return new Mo((function(e,n){e(t)}))},Mo.reject=function(t){return new Mo((function(e,n){n(t)}))},Mo.waitFor=function(t){return new Mo((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},Mo.or=function(t){for(var e=Mo.resolve(!1),n=function(t){e=e.next((function(e){return e?Mo.resolve(e):t()}))},r=0,i=t;r<i.length;r++)n(i[r]);return e},Mo.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},Mo);function Mo(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}var Fo="SimpleDb",Uo=(jo.openOrCreate=function(t,e,n){return qr(jo.isAvailable(),"IndexedDB not supported in current environment."),Mr(Fo,"Opening database:",t),new Lo((function(r,i){var o=window.indexedDB.open(t,e);o.onsuccess=function(t){r(new jo(t.target.result))},o.onblocked=function(){i(new Gr(zr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;i("VersionError"===e.name?new Gr(zr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},o.onupgradeneeded=function(e){Mr(Fo,'Database "'+t+'" requires upgrade from version:',e.oldVersion),n.createOrUpgrade(e.target.result,o.transaction,e.oldVersion,su).next((function(){Mr(Fo,"Database upgrade to version "+su+" complete")}))}})).toPromise()},jo.delete=function(t){return Mr(Fo,"Removing database:",t),Go(window.indexedDB.deleteDatabase(t)).toPromise()},jo.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(jo.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=d(),e=jo.getIOSVersion(t),n=0<e&&e<10,r=jo.getAndroidVersion(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},jo.isMockPersistence=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},jo.getStore=function(t,e){return t.store(e)},jo.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},jo.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},jo.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},jo.prototype.runTransaction=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a(this,(function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,s=function(){var t,s,c,l;return a(this,(function(a){switch(a.label){case 0:++o,t=Vo.open(u.db,r?"readonly":"readwrite",e),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(t).catch((function(e){return t.abort(e),Lo.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return c=a.sent(),Mr(Fo,"Transaction failed with error: %s. Retrying: %s.",c.message,l=i&&"FirebaseError"!==c.name&&o<3),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},jo.prototype.close=function(){this.db.close()},jo);function jo(t){this.db=t,12.2===jo.getIOSVersion(d())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var qo=(Object.defineProperty(Bo.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Bo.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Bo.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),Bo.prototype.done=function(){this.shouldStop=!0},Bo.prototype.skip=function(t){this.nextKey=t},Bo.prototype.delete=function(){return Go(this.dbCursor.delete())},Bo);function Bo(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}var Vo=(Wo.open=function(t,e,n){return new Wo(t.transaction(n,e))},Object.defineProperty(Wo.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Wo.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(Mr(Fo,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Wo.prototype.store=function(t){var e=this.transaction.objectStore(t);return qr(!!e,"Object store not part of transaction: "+t),new Ho(e)},Wo);function Wo(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Qi,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Qo(t.target.error);e.completionDeferred.reject(n)}}var Ho=(zo.prototype.put=function(t,e){return Go(void 0!==e?(Mr(Fo,"PUT",this.store.name,t,e),this.store.put(e,t)):(Mr(Fo,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},zo.prototype.add=function(t){return Mr(Fo,"ADD",this.store.name,t,t),Go(this.store.add(t))},zo.prototype.get=function(t){var e=this;return Go(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Mr(Fo,"GET",e.store.name,t,n),n}))},zo.prototype.delete=function(t){return Mr(Fo,"DELETE",this.store.name,t),Go(this.store.delete(t))},zo.prototype.count=function(){return Mr(Fo,"COUNT",this.store.name),Go(this.store.count())},zo.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,(function(t,e){r.push(e)})).next((function(){return r}))},zo.prototype.deleteAll=function(t,e){Mr(Fo,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(t,e,n){return n.delete()}))},zo.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},zo.prototype.iterateSerial=function(t){var e=this.cursor({});return new Lo((function(n,r){e.onerror=function(t){var e=Qo(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},zo.prototype.iterateCursor=function(t,e){var n=[];return new Lo((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new qo(i),s=e(i.primaryKey,i.value,o);if(s instanceof Lo){var a=s.catch((function(t){return o.done(),Lo.reject(t)}));n.push(a)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Lo.waitFor(n)}))},zo.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(qr(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},zo.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},zo);function zo(t){this.store=t}function Go(t){return new Lo((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Qo(t.target.error);n(e)}}))}var Ko=!1;function Qo(t){var e=Uo.getIOSVersion(d());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Gr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ko||(Ko=!0,setTimeout((function(){throw r}),0)),r}}return t}var Yo,Xo,$o=(Jo.forUser=function(t,e,n,r){return qr(""!==t.uid,"UserID must not be an empty string."),new Jo(t.isAuthenticated()?t.uid:"",e,n,r)},Jo.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ns(t).iterate({index:du.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},Jo.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=es(n),is(t).put(e)}))},Jo.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},Jo.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=es(e),is(t).put(n)}))},Jo.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=rs(t),s=ns(t);return s.add({}).next((function(a){qr("number"==typeof a,"Auto-generated key is not a number");for(var u=new Do(a,e,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new mo((function(t,e){return wi(t.canonicalString(),e.canonicalString())})),p=0,f=r;p<f.length;p++){var d=f[p],y=mu.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,mu.PLACEHOLDER))}return h.forEach((function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.documentKeysByBatchId[a]=u.keys()})),Lo.waitFor(l).next((function(){return u}))}))},Jo.prototype.lookupMutationBatch=function(t,e){var n=this;return ns(t).get(e).next((function(t){return t?(qr(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},Jo.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Lo.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r}return null}))},Jo.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ns(t).iterate({index:du.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(qr(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()})).next((function(){return o}))},Jo.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ns(t).iterate({index:du.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},Jo.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ns(t).loadAll(du.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},Jo.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=mu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rs(t).iterate({range:i},(function(r,i,s){var a=r[0],u=r[2],c=no(r[1]);if(a===n.userId&&e.path.isEqual(c))return ns(t).get(u).next((function(t){if(!t)throw jr("Dangling document-mutation reference found: "+r+" which points to "+u);qr(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))}));s.done()})).next((function(){return o}))},Jo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new mo(wi),i=[];return e.forEach((function(e){var o=mu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=rs(t).iterate({range:s},(function(t,i,o){var s=t[0],a=t[2],u=no(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Lo.waitFor(i).next((function(){return n.lookupMutationBatches(t,r)}))},Jo.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;qr(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=mu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new mo(wi);return rs(t).iterate({range:s},(function(t,e,o){var s=t[0],u=t[2],c=no(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(t,a)}))},Jo.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ns(t).get(e).next((function(t){if(null===t)throw jr("Dangling document-mutation reference found, which points to "+e);qr(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),Lo.waitFor(i).next((function(){return r}))},Jo.prototype.removeMutationBatch=function(t,e){var n=this;return ts(t.simpleDbTransaction,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),Lo.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},Jo.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},Jo.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Lo.resolve();var r=IDBKeyRange.lowerBound(mu.prefixForUser(e.userId)),i=[];return rs(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var o=no(t[1]);i.push(o)}else r.done()})).next((function(){qr(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.canonicalString()})))}))}))},Jo.prototype.containsKey=function(t,e){return Zo(t,this.userId,e)},Jo.prototype.getMutationQueueMetadata=function(t){var e=this;return is(t).get(this.userId).next((function(t){return t||new pu(e.userId,-1,"")}))},Jo);function Jo(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Zo(t,e,n){var r=mu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rs(t).iterate({range:o,keysOnly:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function ts(t,e,n){var r=t.store(du.store),i=t.store(mu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.iterate({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){qr(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var p=h[l],f=mu.key(e,p.key.path,n.batchId);o.push(i.delete(f)),c.push(p.key)}return Lo.waitFor(o).next((function(){return c}))}function es(t){return t instanceof Uint8Array?(qr(Uo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function ns(t){return cc.getStore(t,du.store)}function rs(t){return cc.getStore(t,mu.store)}function is(t){return cc.getStore(t,pu.store)}(Xo=Yo=Yo||{})[Xo.QueryCache=0]="QueryCache",Xo[Xo.SyncEngine=1]="SyncEngine";var os=(ss.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},ss.prototype.after=function(t){return this.seek(t+2),this.next()},ss.prototype.seek=function(t){qr((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},ss.forTargetCache=function(){return new ss(Yo.QueryCache,2)},ss.forSyncEngine=function(){return new ss(Yo.SyncEngine)},ss);function ss(t,e){qr((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}var as=(us.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},us.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return oo.fromTimestamp(new ro(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},us.prototype.getHighestSequenceNumber=function(t){return hs(t.simpleDbTransaction)},us.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)}))},us.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(e,r),n.saveMetadata(t,r)}))}))},us.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},us.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return cs(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return qr(0<e.targetCount,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},us.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return cs(t).iterate((function(s,a){var u=r.serializer.fromDbTarget(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Lo.waitFor(o)})).next((function(){return i}))},us.prototype.forEachTarget=function(t,e){var n=this;return cs(t).iterate((function(t,r){var i=n.serializer.fromDbTarget(r);e(i)}))},us.prototype.retrieveMetadata=function(t){return ls(t.simpleDbTransaction)},us.prototype.saveMetadata=function(t,e){return function(t){return cc.getStore(t,Au.store)}(t).put(Au.key,e)},us.prototype.saveTargetData=function(t,e){return cs(t).put(this.serializer.toDbTarget(e))},us.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},us.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},us.prototype.getTargetData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return cs(t).iterate({range:i,index:Su.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.fromDbTarget(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},us.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=ps(t);return e.forEach((function(e){var s=Zi(e.path);i.push(o.put(new Cu(n,s))),i.push(r.referenceDelegate.addReference(t,e))})),Lo.waitFor(i)},us.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=ps(t);return Lo.forEach(e,(function(e){var o=Zi(e.path);return Lo.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])}))},us.prototype.removeMatchingKeysForTargetId=function(t,e){var n=ps(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},us.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ps(t),i=Ao();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var r=no(t[1]),o=new Hi(r);i=i.add(o)})).next((function(){return i}))},us.prototype.containsKey=function(t,e){var n=Zi(e.path),r=IDBKeyRange.bound([n],[Ei(n)],!1,!0),i=0;return ps(t).iterate({index:Cu.documentTargetsIndex,keysOnly:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return 0<i}))},us.prototype.getTargetDataForTarget=function(t,e){var n=this;return cs(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},us);function us(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=os.forTargetCache()}function cs(t){return cc.getStore(t,Su.store)}function ls(t){return Uo.getStore(t,Au.store).get(Au.key).next((function(t){return qr(null!==t,"Missing metadata row."),t}))}function hs(t){return ls(t).next((function(t){return t.highestListenSequenceNumber}))}function ps(t){return cc.getStore(t,Cu.store)}var fs=(ds.fromSet=function(t){return new ds(t)},ds.fromArray=function(t){var e=new mo(Vi.comparator);return t.forEach((function(t){return e=e.add(t)})),new ds(e)},ds.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},ds.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},ds);function ds(t){this.fields=t}var ys=(ms.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},ms);function ms(t,e){this.field=t,this.transform=e}var vs,gs,bs=function(t,e){this.version=t,this.transformResults=e};(gs=vs=vs||{})[gs.Set=0]="Set",gs[gs.Patch=1]="Patch",gs[gs.Transform=2]="Transform",gs[gs.Delete=3]="Delete",gs[gs.Verify=4]="Verify";var ws=(_s.exists=function(t){return new _s(void 0,t)},_s.updateTime=function(t){return new _s(t)},Object.defineProperty(_s.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),_s.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ma&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ma:(qr(this.isNone,"Precondition should be empty"),!0)},_s.prototype.isEqual=function(t){return function(t,e){return null!=t?!(!e||!t.isEqual(e)):t===e}(this.updateTime,t.updateTime)&&this.exists===t.exists},_s.NONE=new _s,_s);function _s(t,e){this.updateTime=t,this.exists=e,qr(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}var Es=(Ts.prototype.verifyKeyMatches=function(t){null!=t&&qr(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Ts.getPostMutationVersion=function(t){return t instanceof Ma?t.version:oo.MIN},Ts);function Ts(){}var Ss,Is=(n(Cs,Ss=Es),Cs.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by SetMutation."),new Ma(this.key,e.version,{hasCommittedMutations:!0},this.value)},Cs.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Es.getPostMutationVersion(t);return new Ma(this.key,r,{hasLocalMutations:!0},this.value)},Cs.prototype.extractBaseValue=function(t){return null},Cs.prototype.isEqual=function(t){return t instanceof Cs&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},Cs);function Cs(t,e,n){var r=Ss.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=vs.Set,r}var ks,As=(n(Ns,ks=Es),Ns.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Va(this.key,e.version);var n=this.patchDocument(t);return new Ma(this.key,e.version,{hasCommittedMutations:!0},n)},Ns.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=Es.getPostMutationVersion(t),i=this.patchDocument(t);return new Ma(this.key,r,{hasLocalMutations:!0},i)},Ns.prototype.extractBaseValue=function(t){return null},Ns.prototype.isEqual=function(t){return t instanceof Ns&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},Ns.prototype.patchDocument=function(t){var e;return e=t instanceof Ma?t.data():Aa.EMPTY,this.patchObject(e)},Ns.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}})),t},Ns);function Ns(t,e,n,r){var i=ks.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=vs.Patch,i}var xs,Ds=(n(Rs,xs=Es),Rs.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),qr(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Va(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new Ma(this.key,i,{hasCommittedMutations:!0},o)},Rs.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new Ma(this.key,r.version,{hasLocalMutations:!0},o)},Rs.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Ma?t.field(i.field):void 0,s=i.transform.computeBaseValue(o||null);null!=s&&(e=null==e?Aa.EMPTY.set(i.field,s):e.set(i.field,s))}return e},Rs.prototype.isEqual=function(t){return t instanceof Rs&&this.key.isEqual(t.key)&&_i(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},Rs.prototype.requireDocument=function(t){return qr(t instanceof Ma,"Unknown MaybeDocument type "+t),qr(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Rs.prototype.serverTransformResults=function(t,e){var n=[];qr(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Ma&&(s=t.field(i.field)),n.push(o.applyToRemoteDocument(s,e[r]))}return n},Rs.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof Ma&&(u=e.field(s.field)),null===u&&n instanceof Ma&&(u=n.field(s.field)),r.push(a.applyToLocalView(u,t))}return r},Rs.prototype.transformObject=function(t,e){qr(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},Rs);function Rs(t,e){var n=xs.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=vs.Transform,n.precondition=ws.exists(!0),n}var Ps,Os=(n(Ls,Ps=Es),Ls.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),qr(null==e.transformResults,"Transform results received by DeleteMutation."),new ja(this.key,e.version,{hasCommittedMutations:!0})},Ls.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&qr(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ja(this.key,oo.forDeletedDoc())):t},Ls.prototype.extractBaseValue=function(t){return null},Ls.prototype.isEqual=function(t){return t instanceof Ls&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Ls);function Ls(t,e){var n=Ps.call(this)||this;return n.key=t,n.precondition=e,n.type=vs.Delete,n}var Ms,Fs,Us,js,qs,Bs=(n(Vs,Ms=Es),Vs.prototype.applyToRemoteDocument=function(t,e){jr("VerifyMutation should only be used in Transactions.")},Vs.prototype.applyToLocalView=function(t,e,n){jr("VerifyMutation should only be used in Transactions.")},Vs.prototype.extractBaseValue=function(t){jr("VerifyMutation should only be used in Transactions.")},Vs.prototype.isEqual=function(t){return t instanceof Vs&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},Vs);function Vs(t,e){var n=Ms.call(this)||this;return n.key=t,n.precondition=e,n.type=vs.Verify,n}(Us=Fs=Fs||{})[Us.NullValue=0]="NullValue",Us[Us.BooleanValue=1]="BooleanValue",Us[Us.NumberValue=2]="NumberValue",Us[Us.TimestampValue=3]="TimestampValue",Us[Us.StringValue=4]="StringValue",Us[Us.BlobValue=5]="BlobValue",Us[Us.RefValue=6]="RefValue",Us[Us.GeoPointValue=7]="GeoPointValue",Us[Us.ArrayValue=8]="ArrayValue",Us[Us.ObjectValue=9]="ObjectValue",(qs=js=js||{})[qs.Default=0]="Default",qs[qs.Estimate=1]="Estimate",qs[qs.Previous=2]="Previous";var Ws=(Hs.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new Hs(js.Estimate,e);case"previous":return new Hs(js.Previous,e);case"none":case void 0:return new Hs(js.Default,e);default:return jr("fromSnapshotOptions() called with invalid options.")}},Hs);function Hs(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}var zs=(Gs.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},Gs.prototype.defaultCompareTo=function(t){return qr(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),wi(this.typeOrder,t.typeOrder)},Gs);function Gs(){}var Ks,Qs=(n(Ys,Ks=zs),Ys.prototype.value=function(t){return null},Ys.prototype.isEqual=function(t){return t instanceof Ys},Ys.prototype.compareTo=function(t){return t instanceof Ys?0:this.defaultCompareTo(t)},Ys.INSTANCE=new Ys,Ys);function Ys(){var t=Ks.call(this)||this;return t.typeOrder=Fs.NullValue,t.internalValue=null,t}var Xs,$s=(n(Js,Xs=zs),Js.prototype.value=function(t){return this.internalValue},Js.prototype.isEqual=function(t){return t instanceof Js&&this.internalValue===t.internalValue},Js.prototype.compareTo=function(t){return t instanceof Js?wi(this,t):this.defaultCompareTo(t)},Js.of=function(t){return t?Js.TRUE:Js.FALSE},Js.TRUE=new Js(!0),Js.FALSE=new Js(!1),Js);function Js(t){var e=Xs.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.BooleanValue,e}var Zs,ta=(n(ea,Zs=zs),ea.prototype.value=function(t){return this.internalValue},ea.prototype.compareTo=function(t){return t instanceof ea?function(t,e){return t<e?-1:e<t?1:t===e?0:isNaN(t)?isNaN(e)?0:-1:1}(this.internalValue,t.internalValue):this.defaultCompareTo(t)},ea);function ea(t){var e=Zs.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.NumberValue,e}function na(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ra,ia=(n(oa,ra=ta),oa.prototype.isEqual=function(t){return t instanceof oa&&na(this.internalValue,t.internalValue)},oa);function oa(){return null!==ra&&ra.apply(this,arguments)||this}var sa,aa=(n(ua,sa=ta),ua.prototype.isEqual=function(t){return t instanceof ua&&na(this.internalValue,t.internalValue)},ua.NAN=new ua(NaN),ua.POSITIVE_INFINITY=new ua(1/0),ua.NEGATIVE_INFINITY=new ua(-1/0),ua);function ua(){return null!==sa&&sa.apply(this,arguments)||this}var ca,la=(n(ha,ca=zs),ha.prototype.value=function(t){return this.internalValue},ha.prototype.isEqual=function(t){return t instanceof ha&&this.internalValue===t.internalValue},ha.prototype.compareTo=function(t){return t instanceof ha?wi(this.internalValue,t.internalValue):this.defaultCompareTo(t)},ha);function ha(t){var e=ca.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.StringValue,e}var pa,fa=(n(da,pa=zs),da.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},da.prototype.isEqual=function(t){return t instanceof da&&this.internalValue.isEqual(t.internalValue)},da.prototype.compareTo=function(t){return t instanceof da?this.internalValue._compareTo(t.internalValue):t instanceof ma?-1:this.defaultCompareTo(t)},da);function da(t){var e=pa.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.TimestampValue,e}var ya,ma=(n(va,ya=zs),va.prototype.value=function(t){return t&&t.serverTimestampBehavior===js.Estimate?new fa(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===js.Previous&&this.previousValue?this.previousValue.value(t):null},va.prototype.isEqual=function(t){return t instanceof va&&this.localWriteTime.isEqual(t.localWriteTime)},va.prototype.compareTo=function(t){return t instanceof va?this.localWriteTime._compareTo(t.localWriteTime):t instanceof fa?1:this.defaultCompareTo(t)},va.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},va);function va(t,e){var n=ya.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=Fs.TimestampValue,n}var ga,ba=(n(wa,ga=zs),wa.prototype.value=function(t){return this.internalValue},wa.prototype.isEqual=function(t){return t instanceof wa&&this.internalValue.isEqual(t.internalValue)},wa.prototype.compareTo=function(t){return t instanceof wa?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},wa);function wa(t){var e=ga.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.BlobValue,e}var _a,Ea=(n(Ta,_a=zs),Ta.prototype.value=function(t){return this.key},Ta.prototype.isEqual=function(t){return t instanceof Ta&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},Ta.prototype.compareTo=function(t){if(t instanceof Ta){var e=this.databaseId.compareTo(t.databaseId);return 0!==e?e:Hi.comparator(this.key,t.key)}return this.defaultCompareTo(t)},Ta);function Ta(t,e){var n=_a.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=Fs.RefValue,n}var Sa,Ia=(n(Ca,Sa=zs),Ca.prototype.value=function(t){return this.internalValue},Ca.prototype.isEqual=function(t){return t instanceof Ca&&this.internalValue.isEqual(t.internalValue)},Ca.prototype.compareTo=function(t){return t instanceof Ca?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},Ca);function Ca(t){var e=Sa.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.GeoPointValue,e}var ka,Aa=(n(Na,ka=zs),Na.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},Na.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},Na.prototype.isEqual=function(t){if(t instanceof Na){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},Na.prototype.compareTo=function(t){if(t instanceof Na){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),o=wi(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return wi(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},Na.prototype.set=function(t,e){if(qr(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),e);var n=this.child(t.firstSegment());n instanceof Na||(n=Na.EMPTY);var r=n.set(t.popFirst(),e);return this.setChild(t.firstSegment(),r)},Na.prototype.delete=function(t){if(qr(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new Na(this.internalValue.remove(t.firstSegment()));var e=this.child(t.firstSegment());if(e instanceof Na){var n=e.delete(t.popFirst());return new Na(this.internalValue.insert(t.firstSegment(),n))}return this},Na.prototype.contains=function(t){return null!==this.field(t)},Na.prototype.field=function(t){qr(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach((function(t){e=e instanceof Na?e.internalValue.get(t):null})),e},Na.prototype.fieldMask=function(){var t=new mo(Vi.comparator);return this.internalValue.forEach((function(e,n){var r=new Vi([e]);if(n instanceof Na){var i=n.fieldMask().fields;i.isEmpty()?t=t.add(r):i.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),fs.fromSet(t)},Na.prototype.toString=function(){return this.internalValue.toString()},Na.prototype.child=function(t){return this.internalValue.get(t)||void 0},Na.prototype.setChild=function(t,e){return new Na(this.internalValue.insert(t,e))},Na.EMPTY=new Na(new ao(wi)),Na);function Na(t){var e=ka.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.ObjectValue,e}var xa,Da=(n(Ra,xa=zs),Ra.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},Ra.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},Ra.prototype.forEach=function(t){this.internalValue.forEach(t)},Ra.prototype.isEqual=function(t){if(t instanceof Ra){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},Ra.prototype.compareTo=function(t){if(t instanceof Ra){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return wi(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},Ra.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},Ra);function Ra(t){var e=xa.call(this)||this;return e.internalValue=t,e.typeOrder=Fs.ArrayValue,e}var Pa=(Oa.compareByKey=function(t,e){return Hi.comparator(t.key,e.key)},Oa);function Oa(t,e){this.key=t,this.version=e}var La,Ma=(n(Fa,La=Pa),Fa.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},Fa.prototype.data=function(){var t=this;if(!this.objectValue){var e=Aa.EMPTY;Jr(this.proto.fields||{},(function(n,r){e=e.set(new Vi([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},Fa.prototype.value=function(){return this.data().value()},Fa.prototype.isEqual=function(t){return t instanceof Fa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Fa.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Fa.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Fa.prototype.getProtoField=function(t){qr(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Fa.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):jr("Trying to compare documents on fields that don't exist")},Fa);function Fa(t,e,n,r,i,o){var s=La.call(this,t,e)||this;return s.objectValue=r,s.proto=i,s.converter=o,qr(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!n.hasLocalMutations,s.hasCommittedMutations=!!n.hasCommittedMutations,s}var Ua,ja=(n(qa,Ua=Pa),qa.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(qa.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),qa.prototype.isEqual=function(t){return t instanceof qa&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},qa);function qa(t,e,n){var r=Ua.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Ba,Va=(n(Wa,Ba=Pa),Wa.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Wa.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Wa.prototype.isEqual=function(t){return t instanceof Wa&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Wa);function Wa(){return null!==Ba&&Ba.apply(this,arguments)||this}var Ha=(za.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},za.prototype.has=function(t){return void 0!==this.get(t)},za.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},za.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},za.prototype.forEach=function(t){Jr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},za.prototype.isEmpty=function(){return Zr(this.inner)},za);function za(t){this.mapKeyFn=t,this.inner={}}var Ga=(Object.defineProperty(Ka.prototype,"readTime",{get:function(){return qr(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){qr(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),Ka.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},Ka.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},Ka.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Lo.resolve(n):this.getFromCache(t,e)},Ka.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},Ka.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},Ka.prototype.assertNotApplied=function(){qr(!this.changesApplied,"Changes have already been applied.")},Ka);function Ka(){this.changes=new Ha((function(t){return t.toString()})),this.changesApplied=!1}var Qa,Ya=(Xa.prototype.addEntry=function(t,e,n){return Za(t).put(tu(e),n)},Xa.prototype.removeEntry=function(t,e){var n=Za(t),r=tu(e);return n.delete(r)},Xa.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.setMetadata(t,r)}))},Xa.prototype.getEntry=function(t,e){var n=this;return Za(t).get(tu(e)).next((function(t){return n.maybeDecodeDocument(t)}))},Xa.prototype.getSizedEntry=function(t,e){var n=this;return Za(t).get(tu(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:eu(t)}:null}))},Xa.prototype.getEntries=function(t,e){var n=this,r=Eo();return this.forEachDbEntry(t,e,(function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)})).next((function(){return r}))},Xa.prototype.getSizedEntries=function(t,e){var n=this,r=Eo(),i=new ao(Hi.comparator);return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);i=o?(r=r.insert(t,o),i.insert(t,eu(e))):(r=r.insert(t,null),i.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},Xa.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Lo.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Za(t).iterate({range:r},(function(t,e,r){for(var s=Hi.fromSegments(t);o&&Hi.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},Xa.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=So(),o=e.path.length+1,s={};if(n.isEqual(oo.MIN)){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=this.serializer.toDbTimestampKey(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=wu.collectionReadTimeIndex}return Za(t).iterate(s,(function(t,n,s){if(t.length===o){var a=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(a.key.path)?a instanceof Ma&&e.matches(a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},Xa.prototype.getNewDocumentChanges=function(t,e){var n=this,r=_o(),i=this.serializer.toDbTimestampKey(e),o=Za(t),s=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:wu.readTimeIndex,range:s},(function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},Xa.prototype.getLastDocumentChange=function(t){var e,n=this,r=Za(t),i=oo.MIN;return r.iterate({index:wu.readTimeIndex,reverse:!0},(function(t,r,o){e=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:e,readTime:i}}))},Xa.prototype.newChangeBuffer=function(t){return new Xa.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},Xa.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},Xa.prototype.getMetadata=function(t){return Ja(t).get(Eu.key).next((function(t){return qr(!!t,"Missing document cache metadata"),t}))},Xa.prototype.setMetadata=function(t,e){return Ja(t).put(Eu.key,e)},Xa.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof ja&&e.version.isEqual(oo.forDeletedDoc())?null:e}return null},Xa.RemoteDocumentChangeBuffer=(n($a,Qa=Ga),$a.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new mo((function(t,e){return wi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.documentSizes.get(o);if(qr(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){qr(!e.readTime.isEqual(oo.MIN),"Cannot add a document with a read time of zero");var u=e.documentCache.serializer.toDbRemoteDocument(s,e.readTime);i=i.add(o.path.popLast());var c=eu(u);r+=c-a,n.push(e.documentCache.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new ja(o,oo.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))})),i.forEach((function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))})),n.push(this.documentCache.updateMetadata(t,r)),Lo.waitFor(n)},$a.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},$a.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},$a),Xa);function Xa(t,e){this.serializer=t,this.indexManager=e}function $a(t,e){var n=Qa.call(this)||this;return n.documentCache=t,n.trackRemovals=e,n.documentSizes=new Ha((function(t){return t.toString()})),n}function Ja(t){return cc.getStore(t,Eu.store)}function Za(t){return cc.getStore(t,wu.store)}function tu(t){return t.path.toArray()}function eu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jr("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var nu=(ru.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Lo.resolve()},ru.prototype.getCollectionParents=function(t,e){return Lo.resolve(this.collectionParentIndex.getEntries(e))},ru);function ru(){this.collectionParentIndex=new iu}var iu=(ou.prototype.add=function(t){qr(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new mo(Ui.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},ou.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},ou.prototype.getEntries=function(t){return(this.index[t]||new mo(Ui.comparator)).toArray()},ou);function ou(){this.index={}}var su=9,au=(uu.prototype.createOrUpgrade=function(t,e,n,r){var i=this;qr(n<r&&0<=n&&r<=su,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Vo(e);n<1&&1<=r&&(function(t){t.createObjectStore(lu.store)}(t),function(t){t.createObjectStore(pu.store,{keyPath:pu.keyPath}),t.createObjectStore(du.store,{keyPath:du.keyPath,autoIncrement:!0}).createIndex(du.userMutationsIndex,du.userMutationsKeyPath,{unique:!0}),t.createObjectStore(mu.store)}(t),Ru(t),function(t){t.createObjectStore(wu.store)}(t));var s=Lo.resolve();return n<3&&3<=r&&(0!==n&&(function(t){t.deleteObjectStore(Cu.store),t.deleteObjectStore(Su.store),t.deleteObjectStore(Au.store)}(t),Ru(t)),s=s.next((function(){return function(t){var e=t.store(Au.store),n=new Au(0,0,oo.MIN.toTimestamp(),0);return e.put(Au.key,n)}(o)}))),n<4&&4<=r&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(du.store).loadAll().next((function(n){t.deleteObjectStore(du.store),t.createObjectStore(du.store,{keyPath:du.keyPath,autoIncrement:!0}).createIndex(du.userMutationsIndex,du.userMutationsKeyPath,{unique:!0});var r=e.store(du.store),i=n.map((function(t){return r.put(t)}));return Lo.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath})}(t)}))),n<5&&5<=r&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&6<=r&&(s=s.next((function(){return function(t){t.createObjectStore(Eu.store)}(t),i.addDocumentGlobal(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&9<=r&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(wu.store);e.createIndex(wu.readTimeIndex,wu.readTimeIndexPath,{unique:!1}),e.createIndex(wu.collectionReadTimeIndex,wu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),s},uu.prototype.addDocumentGlobal=function(t){var e=0;return t.store(wu.store).iterate((function(t,n){e+=eu(n)})).next((function(){var n=new Eu(e);return t.store(Eu.store).put(Eu.key,n)}))},uu.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(pu.store),r=t.store(du.store);return n.loadAll().next((function(n){return Lo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(du.userMutationsIndex,i).next((function(r){return Lo.forEach(r,(function(r){qr(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return ts(t,n.userId,i).next((function(){}))}))}))}))}))},uu.prototype.ensureSequenceNumbers=function(t){var e=t.store(Cu.store),n=t.store(wu.store);return hs(t).next((function(t){var r=[];return n.iterate((function(n,i){var o=new Ui(n),s=function(t){return[0,Zi(t)]}(o);r.push(e.get(s).next((function(n){return n?Lo.resolve():function(n){return e.put(new Cu(0,Zi(n),t))}(o)})))})).next((function(){return Lo.waitFor(r)}))}))},uu.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment(),n=t.popLast();return r.put({collectionId:e,parent:Zi(n)})}}t.createObjectStore(xu.store,{keyPath:xu.keyPath});var r=e.store(xu.store),i=new iu;return e.store(wu.store).iterate({keysOnly:!0},(function(t,e){return n(new Ui(t).popLast())})).next((function(){return e.store(mu.store).iterate({keysOnly:!0},(function(t,e){return n(no(t[1]).popLast())}))}))},uu);function uu(t){this.serializer=t}var cu=function(t,e){this.seconds=t,this.nanoseconds=e},lu=(hu.store="owner",hu.key="owner",hu);function hu(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var pu=(fu.store="mutationQueues",fu.keyPath="userId",fu);function fu(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var du=(yu.store="mutations",yu.keyPath="batchId",yu.userMutationsIndex="userMutationsIndex",yu.userMutationsKeyPath=["userId","batchId"],yu);function yu(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var mu=(vu.prefixForUser=function(t){return[t]},vu.prefixForPath=function(t,e){return[t,Zi(e)]},vu.key=function(t,e,n){return[t,Zi(e),n]},vu.store="documentMutations",vu.PLACEHOLDER=new vu,vu);function vu(){}var gu=function(t,e){this.path=t,this.readTime=e},bu=function(t,e){this.path=t,this.version=e},wu=(_u.store="remoteDocuments",_u.readTimeIndex="readTimeIndex",_u.readTimeIndexPath="readTime",_u.collectionReadTimeIndex="collectionReadTimeIndex",_u.collectionReadTimeIndexPath=["parentPath","readTime"],_u);function _u(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var Eu=(Tu.store="remoteDocumentGlobal",Tu.key="remoteDocumentGlobalKey",Tu);function Tu(t){this.byteSize=t}var Su=(Iu.store="targets",Iu.keyPath="targetId",Iu.queryTargetsIndexName="queryTargetsIndex",Iu.queryTargetsKeyPath=["canonicalId","targetId"],Iu);function Iu(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}var Cu=(ku.store="targetDocuments",ku.keyPath=["targetId","path"],ku.documentTargetsIndex="documentTargetsIndex",ku.documentTargetsKeyPath=["path","targetId"],ku);function ku(t,e,n){this.targetId=t,this.path=e,qr(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Au=(Nu.key="targetGlobalKey",Nu.store="targetGlobal",Nu);function Nu(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var xu=(Du.store="collectionParents",Du.keyPath=["collectionId","parent"],Du);function Du(t,e){this.collectionId=t,this.parent=e}function Ru(t){t.createObjectStore(Cu.store,{keyPath:Cu.keyPath}).createIndex(Cu.documentTargetsIndex,Cu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Su.store,{keyPath:Su.keyPath}).createIndex(Su.queryTargetsIndexName,Su.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Au.store)}var Pu=(Ou.store="clientMetadata",Ou.keyPath="clientId",Ou);function Ou(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var Lu,Mu,Fu=u(u(u([pu.store,du.store,mu.store,wu.store,Su.store,lu.store,Au.store,Cu.store],[Pu.store]),[Eu.store]),[xu.store]),Uu=(ju.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(qr(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(e))return Lo.resolve();var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)}));var o={collectionId:r,parent:Zi(i)};return qu(t).put(o)},ju.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ei(e),""],!1,!0);return qu(t).loadAll(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(no(o.parent))}return n}))},ju);function ju(){this.collectionParentsCache=new iu}function qu(t){return cc.getStore(t,xu.store)}(Mu=Lu=Lu||{})[Mu.Listen=0]="Listen",Mu[Mu.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Mu[Mu.LimboResolution=2]="LimboResolution";var Bu=(Vu.prototype.withSequenceNumber=function(t){return new Vu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Vu.prototype.withResumeToken=function(t,e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Vu.prototype.withLastLimboFreeSnapshotVersion=function(t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},Vu.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},Vu);function Vu(t,e,n,r,i,o,s){void 0===i&&(i=oo.MIN),void 0===o&&(o=oo.MIN),void 0===s&&(s=Wr()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}var Wu=(Hu.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Hi.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ja(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=Hi.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new Va(e,n)):jr("Unexpected DbRemoteDocument")},Hu.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof Ma){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t),o=t.hasCommittedMutations;return new wu(null,null,i,o,n,r)}if(t instanceof ja){var s=t.key.path.toArray(),a=this.toDbTimestamp(t.version);return o=t.hasCommittedMutations,new wu(null,new gu(s,a),null,o,n,r)}if(t instanceof Va){s=t.key.path.toArray();var u=this.toDbTimestamp(t.version);return new wu(new bu(s,u),null,null,!0,n,r)}return jr("Unexpected MaybeDocument")},Hu.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},Hu.prototype.fromDbTimestampKey=function(t){var e=new ro(t[0],t[1]);return oo.fromTimestamp(e)},Hu.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new cu(e.seconds,e.nanoseconds)},Hu.prototype.fromDbTimestamp=function(t){var e=new ro(t.seconds,t.nanoseconds);return oo.fromTimestamp(e)},Hu.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),i=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new du(t,e.batchId,e.localWriteTime.toMillis(),r,i)},Hu.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),i=ro.fromMillis(t.localWriteTimeMs);return new Do(t.batchId,i,n,r)},Hu.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(Zi(t.path))})),e},Hu.prototype.fromDbResourcePaths=function(t){for(var e=Ao(),n=0,r=t;n<r.length;n++)e=e.add(new Hi(no(r[n])));return e},Hu.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):oo.MIN,i=t.resumeToken;return e=function(t){return void 0!==t.documents}(t.query)?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Bu(e,t.targetId,Lu.Listen,t.lastListenSequenceNumber,n,r,i)},Hu.prototype.toDbTarget=function(t){qr(Lu.Listen===t.purpose,"Only queries with purpose "+Lu.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),n=t.resumeToken instanceof Uint8Array?(qr(Uo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken,new Su(t.targetId,t.target.canonicalId(),r,n,t.sequenceNumber,i,e)},Hu);function Hu(t){this.remoteSerializer=t}function zu(t,e){var n=t[1],r=e[1],i=wi(t[0],e[0]);return 0===i?wi(n,r):i}var Gu=(Ku.prototype.nextIndex=function(){return++this.previousIndex},Ku.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();zu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(Ku.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),Ku);function Ku(t){this.maxElements=t,this.buffer=new mo(zu),this.previousIndex=0}var Qu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yu=(Xu.withCacheSize=function(t){return new Xu(t,Xu.DEFAULT_COLLECTION_PERCENTILE,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},Xu.COLLECTION_DISABLED=-1,Xu.MINIMUM_CACHE_SIZE_BYTES=1048576,Xu.DEFAULT=new Xu(Xu.DEFAULT_CACHE_SIZE_BYTES=41943040,Xu.DEFAULT_COLLECTION_PERCENTILE=10,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),Xu.DISABLED=new Xu(Xu.COLLECTION_DISABLED,0,0),Xu);function Xu(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}var $u=(Ju.prototype.start=function(){qr(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Yu.COLLECTION_DISABLED&&this.scheduleGC()},Ju.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(Ju.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),Ju.prototype.scheduleGC=function(){var t=this;qr(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;Mr("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Gi.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(hc)}))},Ju);function Ju(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}var Zu=(tc.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},tc.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Lo.resolve(Ri.INVALID);var r=new Gu(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},tc.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},tc.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},tc.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Yu.COLLECTION_DISABLED?(Mr("LruGarbageCollector","Garbage collection skipped; disabled"),Lo.resolve(Qu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Qu):n.runGarbageCollection(t,e)}))},tc.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},tc.prototype.runGarbageCollection=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(Mr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Or()<=Sr.DEBUG&&Mr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Lo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},tc);function tc(t,e){this.delegate=t,this.params=e}var ec=(nc.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},nc.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},nc);function nc(){this.onCommittedListeners=[]}var rc,ic="IndexedDbPersistence",oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sc="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",ac=(n(uc,rc=ec),uc);function uc(t,e){var n=rc.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}var cc=(lc.getStore=function(t,e){if(t instanceof ac)return Uo.getStore(t.simpleDbTransaction,e);throw jr("IndexedDbPersistence must use instances of IndexedDbTransaction")},lc.createIndexedDbPersistence=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:if(!lc.isAvailable())throw new Gr(zr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new lc(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,e]}}))}))},lc.prototype.start=function(){var t=this;return qr(!this.started,"IndexedDbPersistence double-started!"),qr(null!==this.window,"Expected 'window' to be defined"),Uo.openOrCreate(this.dbName,su,new au(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[Au.store],(function(t){return hs(t)}))})).then((function(e){t.listenSequence=new Ri(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},lc.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},lc.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},lc.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return s(e,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},lc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",Fu,(function(e){return fc(e).put(new Pu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return Mr(ic,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},lc.prototype.verifyPrimaryLease=function(t){var e=this;return pc(t).get(lu.key).next((function(t){return Lo.resolve(e.isLocalClient(t))}))},lc.prototype.removeClientMetadata=function(t){return fc(t).delete(this.clientId)},lc.prototype.maybeGarbageCollectMultiClientState=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(e){var n=lc.getStore(e,Pu.store);return n.loadAll().next((function(e){var r=t.filterActiveClients(e,18e5),i=e.filter((function(t){return-1===r.indexOf(t)}));return Lo.forEach(i,(function(t){return n.delete(t.clientId)})).next((function(){return i}))}))}))]);case 1:e.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),e.label=2;case 2:return[2]}}))}))},lc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Gi.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},lc.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},lc.prototype.canActAsPrimary=function(t){var e=this;return pc(t).get(lu.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Gr(zr.FAILED_PRECONDITION,sc);return!1}}return!(!e.networkEnabled||!e.inForeground)||fc(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&Mr(ic,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},lc.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[lu.store,Pu.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},lc.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},lc.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[Pu.store],(function(e){return fc(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},lc.clearPersistence=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return lc.isAvailable()?[4,Uo.delete(t+lc.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(lc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),lc.prototype.getMutationQueue=function(t){return qr(this.started,"Cannot initialize MutationQueue before persistence is started."),$o.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},lc.prototype.getTargetCache=function(){return qr(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},lc.prototype.getRemoteDocumentCache=function(){return qr(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},lc.prototype.getIndexManager=function(){return qr(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},lc.prototype.runTransaction=function(t,e,n){var r=this;Mr(ic,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),s=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(s,Fu,(function(o){return i=new ac(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next((function(t){return!!t||r.canActAsPrimary(o)})).next((function(e){if(!e)throw Fr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new Gr(zr.FAILED_PRECONDITION,oc);return n(i)})).next((function(t){return r.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},lc.prototype.verifyAllowTabSynchronization=function(t){var e=this;return pc(t).get(lu.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new Gr(zr.FAILED_PRECONDITION,sc)}))},lc.prototype.acquireOrExtendPrimaryLease=function(t){var e=new lu(this.clientId,this.allowTabSynchronization,Date.now());return pc(t).put(lu.key,e)},lc.isAvailable=function(){return Uo.isAvailable()},lc.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},lc.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=pc(t);return n.get(lu.key).next((function(t){return e.isLocalClient(t)?(Mr(ic,"Releasing primary lease."),n.delete(lu.key)):Lo.resolve()}))},lc.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Fr("Detected an update time that is in the future: "+t+" > "+n),1))},lc.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},lc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(qr(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},lc.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},lc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(qr("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},lc.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return Mr(ic,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Fr(ic,"Failed to get zombied client id.",t),!1}},lc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(n){Fr("Failed to set zombie client id.",n)}},lc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(n){}},lc.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},lc.MAIN_DATABASE="main",lc);function lc(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new dc(this,i),this.dbName=e+lc.MAIN_DATABASE,this.serializer=new Wu(s),this.document=r.document,this.targetCache=new as(this.referenceDelegate,this.serializer),this.indexManager=new Uu,this.remoteDocumentCache=new Ya(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Gr(zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function hc(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){if(!function(t){return t.code===zr.FAILED_PRECONDITION&&t.message===oc}(t))throw t;return Mr(ic,"Unexpectedly lost primary lease"),[2]}))}))}function pc(t){return t.store(lu.store)}function fc(t){return t.store(Pu.store)}var dc=(yc.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},yc.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},yc.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},yc.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},yc.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},yc.prototype.addReference=function(t,e){return mc(t,e)},yc.prototype.removeReference=function(t,e){return mc(t,e)},yc.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},yc.prototype.removeMutationReference=function(t,e){return mc(t,e)},yc.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Lo.resolve(!0):function(t,e){var n=!1;return is(t).iterateSerial((function(r){return Zo(t,r,e).next((function(t){return t&&(n=!0),Lo.resolve(!t)}))})).next((function(){return n}))}(t,e)},yc.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,(function(s,a){if(a<=e){var u=n.isPinned(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),ps(t).delete(function(t){return[0,Zi(t.path)]}(s))}))}));i.push(u)}})).next((function(){return Lo.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},yc.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},yc.prototype.updateLimboDocument=function(t,e){return mc(t,e)},yc.prototype.forEachOrphanedDocument=function(t,e){var n,r=ps(t),i=Ri.INVALID;return r.iterate({index:Cu.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ri.INVALID&&e(new Hi(no(n)),i),i=s,n=o):i=Ri.INVALID})).next((function(){i!==Ri.INVALID&&e(new Hi(no(n)),i)}))},yc.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},yc);function yc(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Zu(this,e)}function mc(t,e){return ps(t).put(function(t,e){return new Cu(0,Zi(t.path),e)}(e,t.currentSequenceNumber))}var vc=Number,gc=vc.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),bc=vc.MAX_SAFE_INTEGER||Math.pow(2,53)-1,wc=vc.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function _c(t){return null==t}function Ec(t){return wc(t)&&t<=bc&&gc<=t}var Tc,Sc,Ic=(Cc.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";_c(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},Cc.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),_c(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},Cc.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},Cc.prototype.isDocumentQuery=function(){return Hi.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},Cc);function Cc(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null}(Sc=Tc=Tc||{}).First="F",Sc.Last="L";var kc=(Ac.atPath=function(t){return new Ac(t)},Object.defineProperty(Ac.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[el]:[new Zc(t),el];else{qr(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Yc.ASCENDING)===Yc.ASCENDING?el:nl)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Ac.prototype.addFilter=function(t){qr(null==this.getInequalityFilterField()||!(t instanceof Rc)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),qr(!this.isDocumentQuery(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new Ac(this.path,this.collectionGroup,this.explicitOrderBy.slice(),e,this.limit,this.limitType,this.startAt,this.endAt)},Ac.prototype.addOrderBy=function(t){qr(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.explicitOrderBy.concat([t]);return new Ac(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Ac.prototype.withLimitToFirst=function(t){return new Ac(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Tc.First,this.startAt,this.endAt)},Ac.prototype.withLimitToLast=function(t){return new Ac(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Tc.Last,this.startAt,this.endAt)},Ac.prototype.withStartAt=function(t){return new Ac(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},Ac.prototype.withEndAt=function(t){return new Ac(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},Ac.prototype.asCollectionQueryAtPath=function(t){return new Ac(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Ac.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},Ac.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},Ac.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},Ac.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},Ac.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return qr(n,"orderBy used that doesn't compare on key field"),0},Ac.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},Ac.prototype.hasLimitToFirst=function(){return!_c(this.limit)&&this.limitType===Tc.First},Ac.prototype.hasLimitToLast=function(){return!_c(this.limit)&&this.limitType===Tc.Last},Ac.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Ac.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Rc&&n.isInequality())return n.field}return null},Ac.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Rc&&0<=t.indexOf(r.op))return r.op}return null},Ac.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},Ac.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Ac.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Tc.First)this.memoizedTarget=new Ic(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Zc(r.field,r.dir===Yc.DESCENDING?Yc.ASCENDING:Yc.DESCENDING))}var i=this.endAt?new $c(this.endAt.position,!this.endAt.before):null,o=this.startAt?new $c(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Ic(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.memoizedTarget},Ac.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):Hi.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},Ac.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},Ac.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Ac.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},Ac.prototype.assertValidBound=function(t){qr(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Ac);function Ac(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Tc.First),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var Nc=(xc.fromString=function(t){switch(t){case"<":return xc.LESS_THAN;case"<=":return xc.LESS_THAN_OR_EQUAL;case"==":return xc.EQUAL;case">=":return xc.GREATER_THAN_OR_EQUAL;case">":return xc.GREATER_THAN;case"array-contains":return xc.ARRAY_CONTAINS;case"in":return xc.IN;case"array-contains-any":return xc.ARRAY_CONTAINS_ANY;default:return jr("Unknown FieldFilter operator: "+t)}},xc.prototype.toString=function(){return this.name},xc.prototype.isEqual=function(t){return this.name===t.name},xc.LESS_THAN=new xc("<"),xc.LESS_THAN_OR_EQUAL=new xc("<="),xc.EQUAL=new xc("=="),xc.GREATER_THAN=new xc(">"),xc.GREATER_THAN_OR_EQUAL=new xc(">="),xc.ARRAY_CONTAINS=new xc("array-contains"),xc.IN=new xc("in"),xc.ARRAY_CONTAINS_ANY=new xc("array-contains-any"),xc);function xc(t){this.name=t}var Dc,Rc=(n(Pc,Dc=function(){}),Pc.create=function(t,e,n){if(t.isKeyField())return e===Nc.IN?(qr(n instanceof Da,"Comparing on key with IN, but filter value not an ArrayValue"),qr(n.internalValue.every((function(t){return t instanceof Ea})),"Comparing on key with IN, but an array value was not a RefValue"),new Uc(t,n)):(qr(n instanceof Ea,"Comparing on key, but filter value not a RefValue"),qr(e!==Nc.ARRAY_CONTAINS&&e!==Nc.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new Lc(t,e,n));if(n.isEqual(Qs.INSTANCE)){if(e!==Nc.EQUAL)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Pc(t,e,n)}if(n.isEqual(aa.NAN)){if(e!==Nc.EQUAL)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Pc(t,e,n)}return e===Nc.ARRAY_CONTAINS?new Bc(t,n):e===Nc.IN?(qr(n instanceof Da,"IN filter has invalid value: "+n.toString()),new Hc(t,n)):e===Nc.ARRAY_CONTAINS_ANY?(qr(n instanceof Da,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Kc(t,n)):new Pc(t,e,n)},Pc.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},Pc.prototype.matchesComparison=function(t){switch(this.op){case Nc.LESS_THAN:return t<0;case Nc.LESS_THAN_OR_EQUAL:return t<=0;case Nc.EQUAL:return 0===t;case Nc.GREATER_THAN:return 0<t;case Nc.GREATER_THAN_OR_EQUAL:return 0<=t;default:return jr("Unknown FieldFilter operator: "+this.op)}},Pc.prototype.isInequality=function(){return 0<=[Nc.LESS_THAN,Nc.LESS_THAN_OR_EQUAL,Nc.GREATER_THAN,Nc.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Pc.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},Pc.prototype.isEqual=function(t){return t instanceof Pc&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},Pc.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},Pc);function Pc(t,e,n){var r=Dc.call(this)||this;return r.field=t,r.op=e,r.value=n,r}var Oc,Lc=(n(Mc,Oc=Rc),Mc.prototype.matches=function(t){var e=Hi.comparator(t.key,this.value.key);return this.matchesComparison(e)},Mc);function Mc(){return null!==Oc&&Oc.apply(this,arguments)||this}var Fc,Uc=(n(jc,Fc=Rc),jc.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},jc);function jc(t,e){var n=Fc.call(this,t,Nc.IN,e)||this;return n.value=e,n}var qc,Bc=(n(Vc,qc=Rc),Vc.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Da&&e.contains(this.value)},Vc);function Vc(t,e){return qc.call(this,t,Nc.ARRAY_CONTAINS,e)||this}var Wc,Hc=(n(zc,Wc=Rc),zc.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},zc);function zc(t,e){var n=Wc.call(this,t,Nc.IN,e)||this;return n.value=e,n}var Gc,Kc=(n(Qc,Gc=Rc),Qc.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Da&&n.internalValue.some((function(t){return e.value.contains(t)}))},Qc);function Qc(t,e){var n=Gc.call(this,t,Nc.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}var Yc=(Xc.prototype.toString=function(){return this.name},Xc.ASCENDING=new Xc("asc"),Xc.DESCENDING=new Xc("desc"),Xc);function Xc(t){this.name=t}var $c=(Jc.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},Jc.prototype.sortsBeforeDocument=function(t,e){qr(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())qr(o instanceof Ea,"Bound has a non-key value where the key path is being used."),n=Hi.comparator(o.key,e.key);else{var s=e.field(i.field);qr(null!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(i.dir===Yc.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Jc.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},Jc);function Jc(t,e){this.position=t,this.before=e}var Zc=(tl.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ma.compareByKey(t,e):Ma.compareByField(this.field,t,e);switch(this.dir){case Yc.ASCENDING:return n;case Yc.DESCENDING:return-1*n;default:return jr("Unknown direction: "+this.dir)}},tl.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},tl.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},tl.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},tl);function tl(t,e){this.field=t,void 0===e&&(e=Yc.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}var el=new Zc(Vi.keyField(),Yc.ASCENDING),nl=new Zc(Vi.keyField(),Yc.DESCENDING),rl=(il.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},il.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return qr(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):n.isEqual(oo.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,r).next((function(o){var s=i.applyQuery(e,o);return(e.hasLimitToFirst()||e.hasLimitToLast())&&i.needsRefill(e.limitType,s,r,n)?i.executeFullCollectionScan(t,e):(Or()<=Sr.DEBUG&&Mr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.localDocumentsView.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},il.prototype.applyQuery=function(t,e){var n=new mo((function(e,n){return t.docComparator(e,n)}));return e.forEach((function(e,r){r instanceof Ma&&t.matches(r)&&(n=n.add(r))})),n},il.prototype.needsRefill=function(t,e,n,r){if(n.size!==e.size)return!0;var i=t===Tc.First?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},il.prototype.executeFullCollectionScan=function(t,e){return Or()<=Sr.DEBUG&&Mr("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,oo.MIN)},il);function il(){}var ol=(sl.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},sl.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t}))},sl.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Eo();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)})),r},sl.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},sl.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=_o();return i.forEach((function(t,e){e=e||new ja(t,oo.forDeletedDoc()),o=o.insert(t,e)})),o}))},sl.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},sl.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new Hi(e)).next((function(t){var e=So();return t instanceof Ma&&(e=e.insert(t.key,t)),e}))},sl.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;qr(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=So();return this.indexManager.getCollectionParents(t,i).next((function(s){return Lo.forEach(s,(function(s){var a=e.asCollectionQueryAtPath(s.child(i));return r.getDocumentsMatchingCollectionQuery(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},sl.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.addMissingBaseDocuments(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Ma?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},sl.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=Ao(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof As&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ma&&(c=c.insert(t,e))})),c}))},sl);function sl(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}var al=(ul.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},ul.prototype.addReference=function(t,e){var n=new cl(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},ul.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},ul.prototype.removeReference=function(t,e){this.removeRef(new cl(t,e))},ul.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},ul.prototype.removeReferencesForId=function(t){var e=this,n=Hi.EMPTY,r=new cl(n,t),i=new cl(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(t){e.removeRef(t),o.push(t.key)})),o},ul.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},ul.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},ul.prototype.referencesForId=function(t){var e=Hi.EMPTY,n=new cl(e,t),r=new cl(e,t+1),i=Ao();return this.refsByTarget.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},ul.prototype.containsKey=function(t){var e=new cl(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},ul);function ul(){this.refsByKey=new mo(cl.compareByKey),this.refsByTarget=new mo(cl.compareByTargetId)}var cl=(ll.compareByKey=function(t,e){return Hi.comparator(t.key,e.key)||wi(t.targetOrBatchId,e.targetOrBatchId)},ll.compareByTargetId=function(t,e){return wi(t.targetOrBatchId,e.targetOrBatchId)||Hi.comparator(t.key,e.key)},ll);function ll(t,e){this.key=t,this.targetOrBatchId=e}var hl=(pl.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},pl.prototype.handleUserChange=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(s){return o=s,e=i.persistence.getMutationQueue(t),n=new ol(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)})).next((function(t){for(var e=[],i=[],s=Ao(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var p=h[l];s=s.add(p.key)}}for(var f=0,d=t;f<d.length;f++){i.push((c=d[f]).batchId);for(var y=0,m=c.mutations;y<m.length;y++)s=s.add((p=m[y]).key)}return n.getDocuments(r,s).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},pl.prototype.localWrite=function(t){var e,n=this,r=ro.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Ao());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=c.extractBaseValue(e.get(c.key));null!=l&&s.push(new As(c.key,l,l.fieldMask(),ws.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,s,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},pl.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):Lo.resolve(null)}))}))},pl.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},pl.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return qr(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},pl.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},pl.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},pl.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},pl.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)}))},pl.prototype.applyRemoteEvent=function(t){var e=this,n=t.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=e.targetDataByTarget;var s=[];$r(t.targetChanges,(function(t,o){var a=r.get(t);if(a){s.push(e.targetCache.removeMatchingKeys(i,o.removedDocuments,t).next((function(){return e.targetCache.addMatchingKeys(i,o.addedDocuments,t)})));var u=o.resumeToken;if(0<u.length){var c=a.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(t,c),pl.shouldPersistTargetData(a,c,o)&&s.push(e.targetCache.updateTargetData(i,c))}}}));var a=_o(),u=Ao();if(t.documentUpdates.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(i,u).next((function(r){t.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof ja&&c.version.isEqual(oo.MIN)?(o.removeEntry(u,n),a=a.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(qr(!oo.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),a=a.insert(u,c)):Mr("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(u)&&s.push(e.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(oo.MIN)){var c=e.targetCache.getLastRemoteSnapshotVersion(i).next((function(t){return qr(0<=n.compareTo(t),"Watch stream reverted to previous snapshot?? "+n+" < "+t),e.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));s.push(c)}return Lo.waitFor(s).next((function(){return o.apply(i)})).next((function(){return e.localDocuments.getLocalViewOfDocuments(i,a)}))})).then((function(t){return e.targetDataByTarget=r,t}))},pl.shouldPersistTargetData=function(t,e,n){return qr(0<e.resumeToken.length,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},pl.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var s=this.targetDataByTarget.get(o);qr(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion);this.targetDataByTarget=this.targetDataByTarget.insert(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Lo.forEach(t,(function(t){return Lo.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},pl.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},pl.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},pl.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.targetCache.getTargetData(n,t).next((function(i){return i?Lo.resolve(r=i):e.targetCache.allocateTargetId(n).next((function(i){return r=new Bu(t,i,Lu.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n}))},pl.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?Lo.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},pl.prototype.releaseTarget=function(t,e){var n=this,r=this.targetDataByTarget.get(t);return qr(null!==r,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.localViewReferences.removeReferencesForId(t);return e?Lo.resolve():Lo.forEach(o,(function(t){return n.persistence.referenceDelegate.removeReference(i,t)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)}))},pl.prototype.executeQuery=function(t,e){var n=this,r=oo.MIN,i=Ao();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,t.toTarget()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:oo.MIN,e?i:Ao())})).next((function(t){return{documents:t,remoteKeys:i}}))}))},pl.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)}))},pl.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},pl.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},pl.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},pl.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Lo.resolve();return o.forEach((function(r){s=s.next((function(){return n.getEntry(t,r)})).next((function(t){var o=t,s=e.docVersions.get(r);qr(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):qr(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return r.mutationQueue.removeMutationBatch(t,i)}))},pl.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.targetDataByTarget)}))},pl.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.targetCache.getTargetDataForTarget(n,t).next((function(t){return t?t.target:null}))}))},pl.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs;return t.lastDocumentChangeReadTime=e.readTime,n}))},pl.prototype.synchronizeLastDocumentChangeReadTime=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){return this.remoteDocuments instanceof Ya?(t=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.getLastDocumentChange(e)})).then((function(t){e.lastDocumentChangeReadTime=t.readTime}))]):[2]}))}))},pl.RESUME_TOKEN_MAX_AGE_MICROS=3e8,pl);function pl(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new al,this.targetDataByTarget=new ao(wi),this.targetIdByTarget=new Ha((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=oo.MIN,qr(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new ol(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}var fl=(dl.prototype.checkEmpty=function(t){return Lo.resolve(0===this.mutationQueue.length)},dl.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");qr(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return qr(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Lo.resolve()},dl.prototype.getLastStreamToken=function(t){return Lo.resolve(this.lastStreamToken)},dl.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Lo.resolve()},dl.prototype.addMutationBatch=function(t,e,n,r){qr(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&qr(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Do(i,e,n,r);this.mutationQueue.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new cl(u.key,i)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast())}return Lo.resolve(o)},dl.prototype.lookupMutationBatch=function(t,e){return Lo.resolve(this.findMutationBatch(e))},dl.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return qr(null!=n,"Failed to find local mutation batch."),Lo.resolve(n.keys())},dl.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),r=n<0?0:n;return Lo.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},dl.prototype.getHighestUnacknowledgedBatchId=function(){return Lo.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},dl.prototype.getAllMutationBatches=function(t){return Lo.resolve(this.mutationQueue.slice())},dl.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new cl(e,0),i=new cl(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(t){qr(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);qr(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Lo.resolve(o)},dl.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new mo(wi);return e.forEach((function(t){var e=new cl(t,0),i=new cl(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],(function(e){qr(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),Lo.resolve(this.findMutationBatches(r))},dl.prototype.getAllMutationBatchesAffectingQuery=function(t,e){qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;Hi.isDocumentKey(i)||(i=i.child(""));var o=new cl(new Hi(i),0),s=new mo(wi);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.targetOrBatchId)),!0)}),o),Lo.resolve(this.findMutationBatches(s))},dl.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},dl.prototype.removeMutationBatch=function(t,e){var n=this;qr(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Lo.forEach(e.mutations,(function(i){var o=new cl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)})).next((function(){n.batchesByDocumentKey=r}))},dl.prototype.removeCachedMutationKeys=function(t){},dl.prototype.containsKey=function(t,e){var n=new cl(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Lo.resolve(e.isEqual(r&&r.key))},dl.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&qr(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Lo.resolve()},dl.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return qr(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},dl.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},dl.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return qr(n.batchId===t,"If found batch must match"),n},dl);function dl(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Wr(),this.batchesByDocumentKey=new mo(cl.compareByKey)}var yl,ml=(vl.prototype.addEntry=function(t,e,n){qr(!n.isEqual(oo.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},vl.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},vl.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Lo.resolve(n?n.maybeDocument:null)},vl.prototype.getEntries=function(t,e){var n=this,r=Eo();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),Lo.resolve(r)},vl.prototype.getDocumentsMatchingQuery=function(t,e,n){qr(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=So(),i=new Hi(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Ma&&e.matches(u)&&(r=r.insert(u.key,u))}return Lo.resolve(r)},vl.prototype.forEachDocumentKey=function(t,e){return Lo.forEach(this.docs,(function(t){return e(t)}))},vl.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},vl.prototype.newChangeBuffer=function(t){return new vl.RemoteDocumentChangeBuffer(this)},vl.prototype.getSize=function(t){return Lo.resolve(this.size)},vl.RemoteDocumentChangeBuffer=(n(gl,yl=Ga),gl.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)})),Lo.waitFor(n)},gl.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},gl.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},gl),vl);function vl(t,e){this.indexManager=t,this.sizer=e,this.docs=new ao(Hi.comparator),this.size=0}function gl(t){var e=yl.call(this)||this;return e.documentCache=t,e}var bl=(wl.prototype.forEachTarget=function(t,e){return this.targets.forEach((function(t,n){return e(n)})),Lo.resolve()},wl.prototype.getLastRemoteSnapshotVersion=function(t){return Lo.resolve(this.lastRemoteSnapshotVersion)},wl.prototype.getHighestSequenceNumber=function(t){return Lo.resolve(this.highestSequenceNumber)},wl.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Lo.resolve(e)},wl.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Lo.resolve()},wl.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},wl.prototype.addTargetData=function(t,e){return qr(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,Lo.resolve()},wl.prototype.updateTargetData=function(t,e){return qr(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),Lo.resolve()},wl.prototype.removeTargetData=function(t,e){return qr(0<this.targetCount,"Removing a target from an empty cache"),qr(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Lo.resolve()},wl.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.targets.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.targets.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Lo.waitFor(o).next((function(){return i}))},wl.prototype.getTargetCount=function(t){return Lo.resolve(this.targetCount)},wl.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return Lo.resolve(n)},wl.prototype.getTargetDataForTarget=function(t,e){return jr("Not yet implemented.")},wl.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.addReference(t,e))})),Lo.waitFor(i)},wl.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.removeReference(t,e))})),Lo.waitFor(i)},wl.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Lo.resolve()},wl.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Lo.resolve(n)},wl.prototype.containsKey=function(t,e){return Lo.resolve(this.references.containsKey(e))},wl);function wl(t){this.persistence=t,this.targets=new Ha((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=oo.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new al,this.targetCount=0,this.targetIdGenerator=os.forTargetCache()}var _l=(El.createLruPersistence=function(t,e,n){return new El(t,(function(t){return new Al(t,new Wu(e),n)}))},El.createEagerPersistence=function(t){return new El(t,(function(t){return new Cl(t)}))},El.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(El.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),El.prototype.getActiveClients=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,[this.clientId]]}))}))},El.prototype.setPrimaryStateListener=function(t){return t(!0)},El.prototype.setDatabaseDeletedListener=function(){},El.prototype.setNetworkEnabled=function(t){},El.prototype.getIndexManager=function(){return this.indexManager},El.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new fl(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},El.prototype.getTargetCache=function(){return this.targetCache},El.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},El.prototype.runTransaction=function(t,e,n){var r=this;Mr("MemoryPersistence","Starting transaction:",t);var i=new Sl(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(t){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},El.prototype.mutationQueuesContainKey=function(t,e){return Lo.or(function(t){var e=[];return Jr(t,(function(t,n){return e.push(n)})),e}(this.mutationQueues).map((function(n){return function(){return n.containsKey(t,e)}})))},El);function El(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new Ri(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new bl(this),this.indexManager=new nu,this.remoteDocumentCache=new ml(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}var Tl,Sl=(n(Il,Tl=ec),Il);function Il(t){var e=Tl.call(this)||this;return e.currentSequenceNumber=t,e}var Cl=(Object.defineProperty(kl.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw jr("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),kl.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},kl.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Lo.resolve()},kl.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Lo.resolve()},kl.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Lo.resolve()},kl.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeTargetData(t,e)}))},kl.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},kl.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lo.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},kl.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},kl.prototype.documentSize=function(t){return 0},kl.prototype.isReferenced=function(t,e){var n=this;return Lo.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Lo.resolve(n.inMemoryPins.containsKey(e))}])},kl);function kl(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}var Al=(Nl.prototype.onTransactionStarted=function(){},Nl.prototype.onTransactionCommitted=function(t){return Lo.resolve()},Nl.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},Nl.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},Nl.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},Nl.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Lo.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(t,r,i).next((function(t){return t?Lo.resolve():e(i)}))}))},Nl.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Nl.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},Nl.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,(function(i){return n.isPinned(t,i,e).next((function(t){t||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},Nl.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Lo.resolve()},Nl.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},Nl.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Lo.resolve()},Nl.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Lo.resolve()},Nl.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Lo.resolve()},Nl.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t,t.version);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw jr("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},Nl.prototype.isPinned=function(t,e,n){var r=this;return Lo.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Lo.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Lo.resolve(void 0!==t&&n<t)}])},Nl.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},Nl);function Nl(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ha((function(t){return Zi(t.path)})),this.garbageCollector=new Zu(this,n)}var xl=(Dl.prototype.reset=function(){this.currentBaseMs=0},Dl.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Dl.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Mr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Dl.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Dl.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Dl);function Dl(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var Rl,Pl,Ol="PersistentStream";(Pl=Rl=Rl||{})[Pl.Initial=0]="Initial",Pl[Pl.Starting=1]="Starting",Pl[Pl.Open=2]="Open",Pl[Pl.Error=3]="Error",Pl[Pl.Backoff=4]="Backoff";var Ll=(Ml.prototype.isStarted=function(){return this.state===Rl.Starting||this.state===Rl.Open||this.state===Rl.Backoff},Ml.prototype.isOpen=function(){return this.state===Rl.Open},Ml.prototype.start=function(){this.state!==Rl.Error?(qr(this.state===Rl.Initial,"Already started"),this.auth()):this.performBackoff()},Ml.prototype.stop=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Rl.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Ml.prototype.inhibitBackoff=function(){qr(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Rl.Initial,this.backoff.reset()},Ml.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},Ml.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},Ml.prototype.handleIdleCloseTimer=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.isOpen()?[2,this.close(Rl.Initial)]:[2]}))}))},Ml.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Ml.prototype.close=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return qr(this.isStarted(),"Only started streams should be closed."),qr(t===Rl.Error||_c(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Rl.Error?this.backoff.reset():e&&e.code===zr.RESOURCE_EXHAUSTED?(Fr(e.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===zr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},Ml.prototype.tearDown=function(){},Ml.prototype.auth=function(){var t=this;qr(this.state===Rl.Initial,"Must be in initial state to auth"),this.state=Rl.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new Gr(zr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},Ml.prototype.startStream=function(t){var e=this;qr(this.state===Rl.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return qr(e.state===Rl.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Rl.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},Ml.prototype.performBackoff=function(){var t=this;qr(this.state===Rl.Error,"Should only perform backoff when in Error state"),this.state=Rl.Backoff,this.backoff.backoffAndRun((function(){return s(t,void 0,void 0,(function(){return a(this,(function(t){return qr(this.state===Rl.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Rl.Initial,this.start(),qr(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},Ml.prototype.handleStreamClose=function(t){return qr(this.isStarted(),"Can't handle server close on non-started stream"),Mr(Ol,"close with error: "+t),this.stream=null,this.close(Rl.Error,t)},Ml.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(Mr(Ol,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Ml);function Ml(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Rl.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xl(t,e)}var Fl,Ul=(n(jl,Fl=Ll),jl.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},jl.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},jl.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},jl.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},jl);function jl(t,e,n,r,i){var o=Fl.call(this,t,Gi.ListenStreamConnectionBackoff,Gi.ListenStreamIdle,e,n,i)||this;return o.serializer=r,o}var ql,Bl=(n(Vl,ql=Ll),Object.defineProperty(Vl.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Vl.prototype.start=function(){this.handshakeComplete_=!1,ql.prototype.start.call(this)},Vl.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Vl.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},Vl.prototype.onMessage=function(t){if(qr(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return qr(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Vl.prototype.writeHandshake=function(){qr(this.isOpen(),"Writing handshake requires an opened stream"),qr(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},Vl.prototype.writeMutations=function(t){var e=this;qr(this.isOpen(),"Writing mutations requires an opened stream"),qr(this.handshakeComplete_,"Handshake must be complete before writing mutations"),qr(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},Vl);function Vl(t,e,n,r,i){var o=ql.call(this,t,Gi.WriteStreamConnectionBackoff,Gi.WriteStreamIdle,e,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Wr(),o}var Wl=(Hl.prototype.newPersistentWriteStream=function(t){return new Bl(this.queue,this.connection,this.credentials,this.serializer,t)},Hl.prototype.newPersistentWatchStream=function(t){return new Ul(this.queue,this.connection,this.credentials,this.serializer,t)},Hl.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},Hl.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=_o();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);qr(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},Hl.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===zr.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},Hl.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===zr.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},Hl);function Hl(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}var zl,Gl,Kl,Ql,Yl=(Xl.prototype.lookup=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Gr(zr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof ja||t instanceof Ma?n.recordVersion(t):jr("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},Xl.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},Xl.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},Xl.prototype.delete=function(t){this.write([new Os(t,this.precondition(t))]),this.writtenDocs.add(t)},Xl.prototype.commit=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Bs(t,e.precondition(t)))})),[4,this.datastore.commit(this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},Xl.prototype.recordVersion=function(t){var e;if(t instanceof Ma)e=t.version;else{if(!(t instanceof ja))throw jr("Document in a transaction was a "+t.constructor.name);e=oo.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new Gr(zr.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},Xl.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?ws.updateTime(e):ws.NONE},Xl.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(this.writtenDocs.has(t)||!e)return ws.exists(!0);if(e.isEqual(oo.forDeletedDoc()))throw new Gr(zr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ws.updateTime(e)},Xl.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},Xl.prototype.ensureCommitNotCalled=function(){qr(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},Xl);function Xl(t){this.datastore=t,this.readVersions=Co(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(Gl=zl=zl||{})[Gl.Unknown=0]="Unknown",Gl[Gl.Online=1]="Online",Gl[Gl.Offline=2]="Offline",(Ql=Kl=Kl||{})[Ql.RemoteStore=0]="RemoteStore",Ql[Ql.SharedClientState=1]="SharedClientState";var $l,Jl,Zl=(th.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(zl.Unknown),qr(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Gi.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,qr(t.state===zl.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(zl.Offline),Promise.resolve()})))},th.prototype.handleWatchStreamFailure=function(t){this.state===zl.Online?(this.setAndBroadcast(zl.Unknown),qr(0===this.watchStreamFailures,"watchStreamFailures must be 0"),qr(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(zl.Offline)))},th.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===zl.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},th.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},th.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Fr(e),this.shouldWarnClientIsOffline=!1):Mr("OnlineStateTracker",e)},th.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},th);function th(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=zl.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function eh(t){switch(t){case zr.OK:return jr("Treated status OK as error");case zr.CANCELLED:case zr.UNKNOWN:case zr.DEADLINE_EXCEEDED:case zr.RESOURCE_EXHAUSTED:case zr.INTERNAL:case zr.UNAVAILABLE:case zr.UNAUTHENTICATED:return!1;case zr.INVALID_ARGUMENT:case zr.NOT_FOUND:case zr.ALREADY_EXISTS:case zr.PERMISSION_DENIED:case zr.FAILED_PRECONDITION:case zr.ABORTED:case zr.OUT_OF_RANGE:case zr.UNIMPLEMENTED:case zr.DATA_LOSS:return!0;default:return jr("Unknown status code: "+t)}}function nh(t){if(void 0===t)return Fr("GRPC error has no .code"),zr.UNKNOWN;switch(t){case $l.OK:return zr.OK;case $l.CANCELLED:return zr.CANCELLED;case $l.UNKNOWN:return zr.UNKNOWN;case $l.DEADLINE_EXCEEDED:return zr.DEADLINE_EXCEEDED;case $l.RESOURCE_EXHAUSTED:return zr.RESOURCE_EXHAUSTED;case $l.INTERNAL:return zr.INTERNAL;case $l.UNAVAILABLE:return zr.UNAVAILABLE;case $l.UNAUTHENTICATED:return zr.UNAUTHENTICATED;case $l.INVALID_ARGUMENT:return zr.INVALID_ARGUMENT;case $l.NOT_FOUND:return zr.NOT_FOUND;case $l.ALREADY_EXISTS:return zr.ALREADY_EXISTS;case $l.PERMISSION_DENIED:return zr.PERMISSION_DENIED;case $l.FAILED_PRECONDITION:return zr.FAILED_PRECONDITION;case $l.ABORTED:return zr.ABORTED;case $l.OUT_OF_RANGE:return zr.OUT_OF_RANGE;case $l.UNIMPLEMENTED:return zr.UNIMPLEMENTED;case $l.DATA_LOSS:return zr.DATA_LOSS;default:return jr("Unknown status code: "+t)}}(Jl=$l=$l||{})[Jl.OK=0]="OK",Jl[Jl.CANCELLED=1]="CANCELLED",Jl[Jl.UNKNOWN=2]="UNKNOWN",Jl[Jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jl[Jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jl[Jl.NOT_FOUND=5]="NOT_FOUND",Jl[Jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jl[Jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jl[Jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jl[Jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jl[Jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jl[Jl.ABORTED=10]="ABORTED",Jl[Jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jl[Jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jl[Jl.INTERNAL=13]="INTERNAL",Jl[Jl.UNAVAILABLE=14]="UNAVAILABLE",Jl[Jl.DATA_LOSS=15]="DATA_LOSS";var rh,ih,oh,sh,ah=(uh.emptySet=function(t){return new uh(t.comparator)},uh.prototype.has=function(t){return null!=this.keyedMap.get(t)},uh.prototype.get=function(t){return this.keyedMap.get(t)},uh.prototype.first=function(){return this.sortedSet.minKey()},uh.prototype.last=function(){return this.sortedSet.maxKey()},uh.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},uh.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(uh.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),uh.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},uh.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},uh.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},uh.prototype.isEqual=function(t){if(!(t instanceof uh))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},uh.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},uh.prototype.copy=function(t,e){var n=new uh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},uh);function uh(t){this.comparator=t?function(e,n){return t(e,n)||Hi.comparator(e.key,n.key)}:function(t,e){return Hi.comparator(t.key,e.key)},this.keyedMap=So(),this.sortedSet=new ao(this.comparator)}(ih=rh=rh||{})[ih.Added=0]="Added",ih[ih.Removed=1]="Removed",ih[ih.Modified=2]="Modified",ih[ih.Metadata=3]="Metadata",(sh=oh=oh||{})[sh.Local=0]="Local",sh[sh.Synced=1]="Synced";var ch=(lh.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==rh.Added&&n.type===rh.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===rh.Metadata&&n.type!==rh.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===rh.Modified&&n.type===rh.Modified?this.changeMap=this.changeMap.insert(e,{type:rh.Modified,doc:t.doc}):t.type===rh.Modified&&n.type===rh.Added?this.changeMap=this.changeMap.insert(e,{type:rh.Added,doc:t.doc}):t.type===rh.Removed&&n.type===rh.Added?this.changeMap=this.changeMap.remove(e):t.type===rh.Removed&&n.type===rh.Modified?this.changeMap=this.changeMap.insert(e,{type:rh.Removed,doc:n.doc}):t.type===rh.Added&&n.type===rh.Removed?this.changeMap=this.changeMap.insert(e,{type:rh.Modified,doc:t.doc}):jr("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},lh.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},lh);function lh(){this.changeMap=new ao(Hi.comparator)}var hh=(ph.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:rh.Added,doc:t})})),new ph(t,e,ah.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(ph.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),ph.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},ph);function ph(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}var fh=(dh.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n,r=((n={})[t]=yh.createSynthesizedTargetChangeForCurrentChange(t,e),n);return new dh(oo.MIN,r,xo(),_o(),Ao())},dh);function dh(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var yh=(mh.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new mh(Wr(),e,Ao(),Ao(),Ao())},mh);function mh(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var vh,gh,bh=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},wh=function(t,e){this.targetId=t,this.existenceFilter=e};(gh=vh=vh||{})[gh.NoChange=0]="NoChange",gh[gh.Added=1]="Added",gh[gh.Removed=2]="Removed",gh[gh.Current=3]="Current",gh[gh.Reset=4]="Reset";var _h=function(t,e,n,r){void 0===n&&(n=Wr()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Eh=(Object.defineProperty(Th.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Th.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Th.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Th.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Th.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},Th.prototype.toTargetChange=function(){var t=Ao(),e=Ao(),n=Ao();return this.documentChanges.forEach((function(r,i){switch(i){case rh.Added:t=t.add(r);break;case rh.Modified:e=e.add(r);break;case rh.Removed:n=n.add(r);break;default:jr("Encountered invalid change type: "+i)}})),new yh(this._resumeToken,this._current,t,e,n)},Th.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=kh()},Th.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},Th.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},Th.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Th.prototype.recordTargetResponse=function(){this.pendingResponses-=1},Th.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Th);function Th(){this.pendingResponses=0,this.documentChanges=kh(),this._resumeToken=Wr(),this._current=!1,this._hasPendingChanges=!0}var Sh=(Ih.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ma?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ja&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],t.key,t.newDoc)},Ih.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case vh.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case vh.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case vh.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),qr(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case vh.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case vh.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:jr("Unknown target watch change state: "+t.state)}}))},Ih.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):$r(this.targetStates,e)},Ih.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Hi(i.path);this.removeDocumentFromTarget(e,o,new ja(o,oo.forDeletedDoc()))}else qr(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},Ih.prototype.createRemoteEvent=function(t){var e=this,n={};$r(this.targetStates,(function(r,i){var o=e.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var s=new Hi(o.target.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(r,s)||e.removeDocumentFromTarget(r,s,new ja(s,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Ao();this.pendingDocumentTargetMapping.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===Lu.LimboResolution||(i=!1)})),i&&(r=r.add(t))}));var i=new fh(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=_o(),this.pendingDocumentTargetMapping=Ch(),this.pendingTargetResets=new mo(wi),i},Ih.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?rh.Modified:rh.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},Ih.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,rh.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},Ih.prototype.removeTarget=function(t){delete this.targetStates[t]},Ih.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},Ih.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},Ih.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Eh),this.targetStates[t]},Ih.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new mo(wi),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},Ih.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||Mr("WatchChangeAggregator","Detected inactive target",t),e},Ih.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},Ih.prototype.resetTarget=function(t){var e=this;qr(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Eh,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},Ih.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},Ih);function Ih(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=_o(),this.pendingDocumentTargetMapping=Ch(),this.pendingTargetResets=new mo(wi)}function Ch(){return new ao(Hi.comparator)}function kh(){return new ao(Hi.comparator)}var Ah="RemoteStore",Nh=(xh.prototype.start=function(){return this.enableNetwork()},xh.prototype.enableNetwork=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(zl.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},xh.prototype.disableNetwork=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(zl.Offline),[2]}}))}))},xh.prototype.disableNetworkInternal=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(Mr(Ah,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},xh.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return Mr(Ah,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(zl.Unknown),[2]}}))}))},xh.prototype.listen=function(t){Yr(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},xh.prototype.unlisten=function(t){qr(Yr(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),Zr(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(zl.Unknown))},xh.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},xh.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},xh.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},xh.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},xh.prototype.startWatchStream=function(){qr(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Sh(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},xh.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!Zr(this.listenTargets)},xh.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},xh.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},xh.prototype.onWatchStreamOpen=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return $r(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},xh.prototype.onWatchStreamClose=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return void 0===t&&qr(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(zl.Unknown),[2]}))}))},xh.prototype.onWatchStreamChange=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(zl.Online),t instanceof _h&&t.state===vh.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof bh?this.watchChangeAggregator.handleDocumentChange(t):t instanceof wh?this.watchChangeAggregator.handleExistenceFilter(t):(qr(t instanceof _h,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(oo.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=e.compareTo(n)?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},xh.prototype.raiseWatchSnapshot=function(t){var e=this;qr(!t.isEqual(oo.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return $r(n.targetChanges,(function(n,r){if(0<r.resumeToken.length){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(Wr(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new Bu(n.target,t,Lu.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},xh.prototype.handleTargetError=function(t){var e=this;qr(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return s(e,void 0,void 0,(function(){return a(this,(function(e){return Yr(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},xh.prototype.fillWritePipeline=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},xh.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},xh.prototype.outstandingWrites=function(){return this.writePipeline.length},xh.prototype.addToWritePipeline=function(t){qr(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},xh.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},xh.prototype.startWriteStream=function(){qr(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},xh.prototype.onWriteStreamOpen=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},xh.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)})).catch(hc)},xh.prototype.onMutationResult=function(t,e){var n=this;qr(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Po.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},xh.prototype.onWriteStreamClose=function(t){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){return void 0===t&&qr(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]:[2]}))}))},xh.prototype.handleHandshakeError=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return eh(t.code)?(Mr(Ah,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Wr(),[2,this.localStore.setLastStreamToken(Wr()).catch(hc)]):[2]}))}))},xh.prototype.handleWriteError=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){return function(t){return eh(t)&&t!==zr.ABORTED}(t.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2]}))}))},xh.prototype.createTransaction=function(){return new Yl(this.datastore)},xh.prototype.restartNetwork=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(zl.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},xh.prototype.handleCredentialChange=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(Mr(Ah,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},xh.prototype.applyPrimaryState=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(zl.Unknown),e.label=4;case 4:return[2]}}))}))},xh);function xh(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return s(o,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(Mr(Ah,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Zl(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var Dh=(Object.defineProperty(Rh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Rh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Rh.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},Rh.prototype._compareTo=function(t){return wi(this._lat,t._lat)||wi(this._long,t._long)},Rh);function Rh(t,e){if(ei("GeoPoint",arguments,2),ii("GeoPoint","number",1,t),ii("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Gr(zr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Gr(zr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}var Ph=(Oh.prototype.applyToLocalView=function(t,e){return new ma(e,t)},Oh.prototype.applyToRemoteDocument=function(t,e){return e},Oh.prototype.computeBaseValue=function(t){return null},Oh.prototype.isEqual=function(t){return t instanceof Oh},Oh.instance=new Oh,Oh);function Oh(){}var Lh=(Mh.prototype.applyToLocalView=function(t,e){return this.apply(t)},Mh.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},Mh.prototype.apply=function(t){for(var e=Bh(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Da(e)},Mh.prototype.computeBaseValue=function(t){return null},Mh.prototype.isEqual=function(t){return t instanceof Mh&&_i(t.elements,this.elements)},Mh);function Mh(t){this.elements=t}var Fh=(Uh.prototype.applyToLocalView=function(t,e){return this.apply(t)},Uh.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},Uh.prototype.apply=function(t){for(var e=Bh(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Da(e)},Uh.prototype.computeBaseValue=function(t){return null},Uh.prototype.isEqual=function(t){return t instanceof Uh&&_i(t.elements,this.elements)},Uh);function Uh(t){this.elements=t}var jh=(qh.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof ia&&this.operand instanceof ia){var r=n.internalValue+this.operand.internalValue;return new ia(r)}return new aa(r=n.internalValue+this.operand.internalValue)},qh.prototype.applyToRemoteDocument=function(t,e){return qr(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},qh.prototype.computeBaseValue=function(t){return t instanceof ta?t:new ia(0)},qh.prototype.isEqual=function(t){return t instanceof qh&&this.operand.isEqual(t.operand)},qh);function qh(t){this.operand=t}function Bh(t){return t instanceof Da?t.internalValue.slice():[]}var Vh=(Wh.prototype.isEqual=function(t){return t&&t.count===this.count},Wh);function Wh(t){this.count=t}var Hh,zh,Gh=((Hh={})[Yc.ASCENDING.name]="ASCENDING",Hh[Yc.DESCENDING.name]="DESCENDING",Hh),Kh=((zh={})[Nc.LESS_THAN.name]="LESS_THAN",zh[Nc.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",zh[Nc.GREATER_THAN.name]="GREATER_THAN",zh[Nc.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",zh[Nc.EQUAL.name]="EQUAL",zh[Nc.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",zh[Nc.IN.name]="IN",zh[Nc.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",zh),Qh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yh(t,e){qr(!_c(t),e+" is missing")}function Xh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):jr("can't parse "+t)}var $h=(Jh.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},Jh.prototype.unsafeCastProtoByteString=function(t){return t},Jh.prototype.fromRpcStatus=function(t){var e=void 0===t.code?zr.UNKNOWN:nh(t.code);return new Gr(e,t.message||"")},Jh.prototype.toInt32Value=function(t){return this.options.useProto3Json||_c(t)?t:{value:t}},Jh.prototype.fromInt32Value=function(t){var e;return _c(e="object"==typeof t?t.value:t)?null:e},Jh.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},Jh.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);qr(!!t,"Cannot deserialize null or undefined timestamp.");var e=Xh(t.seconds||"0");return new ro(e,t.nanos||0)},Jh.prototype.fromIso8601String=function(t){var e=0,n=Qh.exec(t);if(qr(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new ro(o,e)},Jh.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},Jh.prototype.fromBlob=function(t){return"string"==typeof t?(qr(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ii.fromBase64String(t)):(qr(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Ii.fromUint8Array(t))},Jh.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},Jh.prototype.fromVersion=function(t){return qr(!!t,"Trying to deserialize version that isn't set"),oo.fromTimestamp(this.fromTimestamp(t))},Jh.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},Jh.prototype.fromResourceName=function(t){var e=Ui.fromString(t);return qr(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},Jh.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},Jh.prototype.fromName=function(t){var e=this.fromResourceName(t);return qr(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),qr(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new Hi(this.extractLocalPathFromResourceName(e))},Jh.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},Jh.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?Ui.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(Jh.prototype,"encodedDatabaseId",{get:function(){return new Ui(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),Jh.prototype.fullyQualifiedPrefixPath=function(t){return new Ui(["projects",t.projectId,"databases",t.database])},Jh.prototype.extractLocalPathFromResourceName=function(t){return qr(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},Jh.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},Jh.prototype.toValue=function(t){if(t instanceof Qs)return{nullValue:"NULL_VALUE"};if(t instanceof $s)return{booleanValue:t.value()};if(t instanceof ia)return{integerValue:""+t.value()};if(t instanceof aa){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof la?{stringValue:t.value()}:t instanceof Aa?{mapValue:this.toMapValue(t)}:t instanceof Da?{arrayValue:this.toArrayValue(t)}:t instanceof fa?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof Ia?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof ba?{bytesValue:this.toBytes(t.value())}:t instanceof Ea?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:jr("Unknown FieldValue "+JSON.stringify(t))},Jh.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Qs.INSTANCE;if("booleanValue"in t)return $s.of(t.booleanValue);if("integerValue"in t)return new ia(Xh(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return aa.NAN;if("Infinity"===t.doubleValue)return aa.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return aa.NEGATIVE_INFINITY}return new aa(t.doubleValue)}if("stringValue"in t)return new la(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return Yh(t.arrayValue,"arrayValue"),new Da((t.arrayValue.values||[]).map((function(t){return e.fromValue(t)})));if("timestampValue"in t)return Yh(t.timestampValue,"timestampValue"),new fa(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return Yh(t.geoPointValue,"geoPointValue"),new Ia(new Dh(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){Yh(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new ba(n)}if("referenceValue"in t){Yh(t.referenceValue,"referenceValue");var r=this.fromResourceName(t.referenceValue),i=new xi(r.get(1),r.get(3)),o=new Hi(this.extractLocalPathFromResourceName(r));return new Ea(i,o)}return jr("Unknown Value proto "+JSON.stringify(t))},Jh.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},Jh.prototype.toDocument=function(t){return qr(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},Jh.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new Ma(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},Jh.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},Jh.prototype.fromFields=function(t){var e=this,n=Aa.EMPTY;return Jr(t,(function(t,r){n=n.set(new Vi([t]),e.fromValue(r))})),n},Jh.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},Jh.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},Jh.prototype.fromFound=function(t){var e=this;qr(!!t.found,"Tried to deserialize a found document from a missing document."),Yh(t.found.name,"doc.found.name"),Yh(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new Ma(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},Jh.prototype.fromMissing=function(t){qr(!!t.missing,"Tried to deserialize a missing document from a found document."),qr(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ja(e,n)},Jh.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):jr("invalid batch get response: "+JSON.stringify(t))},Jh.prototype.toWatchTargetChangeState=function(t){switch(t){case vh.Added:return"ADD";case vh.Current:return"CURRENT";case vh.NoChange:return"NO_CHANGE";case vh.Removed:return"REMOVE";case vh.Reset:return"RESET";default:return jr("Unknown WatchTargetChangeState: "+t)}},Jh.prototype.toTestWatchChange=function(t){if(t instanceof wh)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof bh){if(t.newDoc instanceof Ma){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof ja)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof _h){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return $l.OK;switch(t){case zr.OK:return $l.OK;case zr.CANCELLED:return $l.CANCELLED;case zr.UNKNOWN:return $l.UNKNOWN;case zr.DEADLINE_EXCEEDED:return $l.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return $l.RESOURCE_EXHAUSTED;case zr.INTERNAL:return $l.INTERNAL;case zr.UNAVAILABLE:return $l.UNAVAILABLE;case zr.UNAUTHENTICATED:return $l.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return $l.INVALID_ARGUMENT;case zr.NOT_FOUND:return $l.NOT_FOUND;case zr.ALREADY_EXISTS:return $l.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return $l.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return $l.FAILED_PRECONDITION;case zr.ABORTED:return $l.ABORTED;case zr.OUT_OF_RANGE:return $l.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return $l.UNIMPLEMENTED;case zr.DATA_LOSS:return $l.DATA_LOSS;default:return jr("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return jr("Unrecognized watch change: "+JSON.stringify(t))},Jh.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){Yh(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new _h(r,i,o,a||null)}else if("documentChange"in t){Yh(t.documentChange,"documentChange");var u=t.documentChange;Yh(u.document,"documentChange.name"),Yh(u.document.name,"documentChange.document.name"),Yh(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Ma(c,l,{},void 0,u.document,(function(t){return n.fromValue(t)})),p=u.removedTargetIds||[];e=new bh(u.targetIds||[],p,h.key,h)}else if("documentDelete"in t){Yh(t.documentDelete,"documentDelete");var f=t.documentDelete;Yh(f.document,"documentDelete.document"),c=this.fromName(f.document),l=f.readTime?this.fromVersion(f.readTime):oo.forDeletedDoc(),h=new ja(c,l),e=new bh([],p=f.removedTargetIds||[],h.key,h)}else if("documentRemove"in t){Yh(t.documentRemove,"documentRemove");var d=t.documentRemove;Yh(d.document,"documentRemove"),c=this.fromName(d.document),e=new bh([],p=d.removedTargetIds||[],c,null)}else{if(!("filter"in t))return jr("Unknown change type "+JSON.stringify(t));Yh(t.filter,"filter");var y=t.filter;Yh(y.targetId,"filter.targetId");var m=new Vh(y.count||0);e=new wh(y.targetId,m)}return e},Jh.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?vh.NoChange:"ADD"===t?vh.Added:"REMOVE"===t?vh.Removed:"CURRENT"===t?vh.Current:"RESET"===t?vh.Reset:jr("Got unexpected TargetChange.state: "+t)},Jh.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return oo.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?oo.MIN:e.readTime?this.fromVersion(e.readTime):oo.MIN},Jh.prototype.toMutation=function(t){var e,n=this;if(t instanceof Is)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Os)e={delete:this.toName(t.key)};else if(t instanceof As)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else if(t instanceof Ds)e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}};else{if(!(t instanceof Bs))return jr("Unknown mutation type "+t.type);e={verify:this.toName(t.key)}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},Jh.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ws.NONE;if(t.update){Yh(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new As(r,i,o,n)}return new Is(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new Os(r,n);if(t.transform){r=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return qr(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ds(r,s)}return t.verify?(r=this.fromName(t.verify),new Bs(r,n)):jr("unknown mutation proto: "+JSON.stringify(t))},Jh.prototype.toPrecondition=function(t){return qr(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jr("Unknown precondition")},Jh.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ws.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ws.exists(t.exists):ws.NONE},Jh.prototype.fromWriteResult=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e);r.isEqual(oo.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map((function(t){return n.fromValue(t)}))),new bs(r,i)},Jh.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(qr(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},Jh.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Ph)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof Fh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof jh)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw jr("Unknown transform: "+t.transform)},Jh.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)qr("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Ph.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Lh(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t)n=new Fh((r=t.removeAllFromArray.values||[]).map((function(t){return e.fromValue(t)})));else if("increment"in t){var i=this.fromValue(t.increment);qr(i instanceof ta,"NUMERIC_ADD transform requires a NumberValue"),n=new jh(i)}else jr("Unknown transform proto: "+JSON.stringify(t));var o=Vi.fromServerFormat(t.fieldPath);return new ys(o,n)},Jh.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},Jh.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return qr(1===e,"DocumentsTarget contained other than 1 document: "+e),kc.atPath(this.fromQueryPath(t.documents[0])).toTarget()},Jh.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(qr(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(qr(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},Jh.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){qr(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new kc(e,i,a,s,u,Tc.First,c,l).toTarget()},Jh.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},Jh.prototype.toLabel=function(t){switch(t){case Lu.Listen:return null;case Lu.ExistenceFilterMismatch:return"existence-filter-mismatch";case Lu.LimboResolution:return"limbo-document";default:return jr("Unrecognized query purpose: "+t)}},Jh.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},Jh.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof Rc?e.toUnaryOrFieldFilter(t):jr("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},Jh.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(t,e){return t.concat(e)})):jr("Unknown filter: "+JSON.stringify(t)):[]},Jh.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},Jh.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},Jh.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.toValue(t)}))}},Jh.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.fromValue(t)}));return new $c(r,n)},Jh.prototype.toDirection=function(t){return Gh[t.name]},Jh.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Yc.ASCENDING;case"DESCENDING":return Yc.DESCENDING;default:return}},Jh.prototype.toOperatorName=function(t){return Kh[t.name]},Jh.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Nc.EQUAL;case"GREATER_THAN":return Nc.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Nc.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Nc.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Nc.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Nc.ARRAY_CONTAINS;case"IN":return Nc.IN;case"ARRAY_CONTAINS_ANY":return Nc.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return jr("Unspecified operator");default:return jr("Unknown operator")}},Jh.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},Jh.prototype.fromFieldPathReference=function(t){return Vi.fromServerFormat(t.fieldPath)},Jh.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},Jh.prototype.fromPropertyOrder=function(t){return new Zc(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},Jh.prototype.fromFieldFilter=function(t){return Rc.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},Jh.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Nc.EQUAL){if(t.value.isEqual(aa.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Qs.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},Jh.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return Rc.create(e,Nc.EQUAL,aa.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return Rc.create(n,Nc.EQUAL,Qs.INSTANCE);case"OPERATOR_UNSPECIFIED":return jr("Unspecified filter");default:return jr("Unknown filter")}},Jh.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},Jh.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(t){return Vi.fromServerFormat(t)}));return fs.fromArray(e)},Jh);function Jh(t,e){this.databaseId=t,this.options=e}var Zh=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},tp=(ep.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new Zh,this.queries.set(e,r)),r.listeners.push(t),qr(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then((function(t){return r.targetId=t})):Promise.resolve(r.targetId)},ep.prototype.unlisten=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){return n=!1,(r=this.queries.get(e=t.query))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},ep.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.queries.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(i)&&(e=!0);o.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},ep.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},ep.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(t)&&(e=!0)})),e&&this.raiseSnapshotsInSyncEvent()},ep.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},ep.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},ep.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},ep);function ep(t){this.syncEngine=t,this.queries=new Ha((function(t){return t.canonicalId()})),this.onlineState=zl.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var np=(rp.prototype.onViewSnapshot=function(t){if(qr(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==rh.Metadata&&e.push(i)}t=new hh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},rp.prototype.onError=function(t){this.queryObserver.error(t)},rp.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},rp.prototype.shouldRaiseInitialEvent=function(t,e){return qr(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==zl.Offline?(qr(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===zl.Offline)},rp.prototype.shouldRaiseEvent=function(t){return 0<t.docChanges.length||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},rp.prototype.raiseInitialEvent=function(t){qr(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=hh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},rp);function rp(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=zl.Unknown,this.options=n||{}}var ip=(op.fromSnapshot=function(t,e){for(var n=Ao(),r=Ao(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case rh.Added:n=n.add(s.doc.key);break;case rh.Removed:r=r.add(s.doc.key)}}return new op(t,e.fromCache,n,r)},op);function op(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}var sp=function(t){this.key=t},ap=function(t){this.key=t},up=(Object.defineProperty(cp.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),cp.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new ch,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=e instanceof Ma?e:null;h&&(qr(t.isEqual(h.key),"Mismatching keys found in document changes: "+t+" != "+h.key),h=n.query.matches(h)?h:null);var p=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?p!==f&&(r.track({type:rh.Metadata,doc:h}),d=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:rh.Modified,doc:h}),d=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:rh.Added,doc:h}),d=!0):l&&!h&&(r.track({type:rh.Removed,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(o=h?(s=s.add(h),f?o.add(t):o.delete(t)):(s=s.delete(t),o.delete(t)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;s.size>this.query.limit;){var l=this.query.hasLimitToFirst()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:rh.Removed,doc:l})}return qr(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:o}},cp.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},cp.prototype.applyChanges=function(t,e,n){var r=this;qr(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort((function(t,e){return function(t,e){function n(t){switch(t){case rh.Added:return 1;case rh.Modified:case rh.Metadata:return 2;case rh.Removed:return 0;default:return jr("Unknown ChangeType: "+t)}}return n(t)-n(e)}(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?oh.Synced:oh.Local,u=a!==this.syncState;return this.syncState=a,0!==o.length||u?{snapshot:new hh(this.query,t.documentSet,i,o,t.mutatedKeys,a===oh.Local,u,!1),limboChanges:s}:{limboChanges:s}},cp.prototype.applyOnlineStateChange=function(t){return this.current&&t===zl.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ch,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},cp.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},cp.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return qr(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},cp.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Ao(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new ap(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new sp(t))})),n},cp.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Ao();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},cp.prototype.computeInitialSnapshot=function(){return hh.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===oh.Local)},cp);function cp(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Ao(),this.mutatedKeys=Ao(),this.documentSet=new ah(t.docComparator.bind(t))}var lp=(hp.prototype.run=function(){this.runWithBackOff()},hp.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return s(t,void 0,void 0,(function(){var t,e,n=this;return a(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},hp.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!_c(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},hp.prototype.handleTransactionError=function(t){var e=this;0<this.retries&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},hp.prototype.isRetryableTransactionError=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!eh(e)},hp);function hp(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new xl(this.asyncQueue,Gi.RetryTransaction)}var pp="SyncEngine",fp=function(t,e,n){this.query=t,this.targetId=e,this.view=n},dp=function(t){this.key=t,this.receivedDocument=!1},yp=(Object.defineProperty(mp.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),mp.prototype.subscribe=function(t){qr(null!==t,"SyncEngine listener cannot be null"),qr(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},mp.prototype.listen=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o;return a(this,(function(s){switch(s.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return i=s.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),[4,this.initializeViewAndComputeSnapshot(t,e=i.targetId,"current"===o)];case 3:n=s.sent(),this.isPrimary&&this.remoteStore.listen(i),s.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},mp.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return r=a.sent(),i=new up(t,r.remoteKeys),o=i.computeDocChanges(r.documents),s=yh.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==zl.Offline),qr(0===(u=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),qr(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new fp(t,e,i),this.queryViewsByQuery.set(t,c),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,u.snapshot]}}))}))},mp.prototype.synchronizeViewAndComputeSnapshot=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},mp.prototype.unlisten=function(t){return s(this,void 0,void 0,(function(){var e,n,r=this;return a(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),qr(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),1<(n=this.queriesByTarget[e.targetId]).length?(this.queriesByTarget[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then((function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)})).catch(hc)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},mp.prototype.write=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},mp.prototype.runTransaction=function(t,e,n){new lp(t,this.remoteStore,e,n).run()},mp.prototype.applyRemoteEvent=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),Jr(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(qr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?r.receivedDocument=!0:0<e.modifiedDocuments.size?qr(r.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(qr(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mp.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===Kl.RemoteStore||!this.isPrimary&&e===Kl.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(e,r){var i=r.view.applyOnlineStateChange(t);qr(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},mp.prototype.rejectListen=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(r=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new ao(Hi.comparator)).insert(r,new ja(r,oo.forDeletedDoc())),o=Ao().add(r),s=new fh(oo.MIN,{},new mo(wi),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then((function(){return u.removeAndCleanupTarget(t,e)})).catch(hc)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},mp.prototype.applyBatchState=function(t,e,n){return s(this,void 0,void 0,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(Mr(pp,"Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):jr("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},mp.prototype.applySuccessfulWrite=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e=t.batch.batchId,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mp.prototype.rejectFailedWrite=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},mp.prototype.registerPendingWritesCallback=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||Mr(pp,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?t.resolve():((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n)),[2]}}))}))},mp.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},mp.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new Gr(zr.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},mp.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new ao(wi)).insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},mp.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(qr(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},mp.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),qr(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.queriesByTarget[t];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),e&&this.syncEngineListener.onWatchError(o,e)}if(delete this.queriesByTarget[t],this.isPrimary){var s=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),s.forEach((function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))}},mp.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},mp.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof sp?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof ap?(Mr(pp,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):jr("Unknown limbo change: "+JSON.stringify(i))}},mp.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){Mr(pp,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=kc.atPath(e.path);this.limboResolutionsByTarget[n]=new dp(e),this.remoteStore.listen(new Bu(r.toTarget(),n,Lu.LimboResolution,Ri.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},mp.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},mp.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o=this;return a(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(a.query,!1).then((function(t){return a.view.computeDocChanges(t.documents,e)})):e})).then((function(t){var i=a.view.applyChanges(t,!0===o.isPrimary,e&&e.targetChanges[a.targetId]);if(o.updateTrackedLimbos(a.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var s=ip.fromSnapshot(a.targetId,i.snapshot);r.push(s)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return s.sent(),[2]}}))}))},mp.prototype.assertSubscribed=function(t){qr(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},mp.prototype.handleCredentialChange=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},mp.prototype.applyPrimaryState=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s,u=this;return a(this,(function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),$r(this.queriesByTarget,(function(t,e){u.sharedClientState.isLocalQueryTarget(t)?o.push(t):s=s.then((function(){return u.removeAndCleanupTarget(t),u.localStore.releaseTarget(t,!0)})),u.remoteStore.unlisten(t)})),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},mp.prototype.resetLimboDocuments=function(){var t=this;$r(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new ao(Hi.comparator)},mp.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,l,h,p,f,d;return a(this,(function(a){switch(a.label){case 0:e=[],n=[],r=0,i=t,a.label=1;case 1:return r<i.length?(s=void 0,(u=this.queriesByTarget[o=i[r]])&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(qr(!!(p=this.queryViewsByQuery.get(h=l[c])),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(p)]):[3,7];case 5:(f=a.sent()).snapshot&&n.push(f.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return qr(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return qr(!!(d=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(d)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(d),o,!1)];case 11:a.sent(),a.label=12;case 12:e.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},mp.prototype.synthesizeTargetToQuery=function(t){return new kc(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,Tc.First,t.startAt,t.endAt)},mp.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},mp.prototype.applyTargetState=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return Mr(pp,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=fh.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:jr("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},mp.prototype.applyActiveTargetsChange=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,p=this;return a(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(qr(!this.queriesByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return qr(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(t){return a(this,(function(e){switch(e.label){case 0:return u.queriesByTarget[t]?[4,u.localStore.releaseTarget(t,!1).then((function(){p.remoteStore.unlisten(t),p.removeAndCleanupTarget(t)})).catch(hc)]:[2,"continue"];case 1:return e.sent(),[2]}}))},u=this,c=0,l=e,f.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},mp.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},mp.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},mp.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return Ao().add(e.key);var n=Ao(),r=this.queriesByTarget[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.queryViewsByQuery.get(s);qr(!!a,"No query view found for "+s),n=n.unionWith(a.view.syncedDocuments)}return n},mp);function mp(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ha((function(t){return t.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new ao(Hi.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new al,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=os.forSyncEngine(),this.isPrimary=void 0,this.onlineState=zl.Unknown}var vp=(gp.prototype.isAuthenticated=function(){return null!=this.uid},gp.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},gp.prototype.isEqual=function(t){return t.uid===this.uid},gp.UNAUTHENTICATED=new gp(null),gp.GOOGLE_CREDENTIALS=new gp("google-credentials-uid"),gp.FIRST_PARTY=new gp("first-party-uid"),gp);function gp(t){this.uid=t}var bp="firestore_clients";function wp(t,e){return qr(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),bp+"_"+t+"_"+e}var _p="firestore_mutations";function Ep(t,e,n){var r=_p+"_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}var Tp="firestore_targets";function Sp(t,e){return Tp+"_"+t+"_"+e}var Ip="SharedClientState",Cp=(kp.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Gr(r.error.code,r.error.message)),i?new kp(t,e,r.state,o):(Fr(Ip,"Failed to parse mutation state for ID '"+e+"': "+n),null)},kp.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},kp);function kp(t,e,n,r){this.user=t,this.batchId=e,this.state=n,qr(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Ap=(Np.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Gr(n.error.code,n.error.message)),r?new Np(t,n.state,i):(Fr(Ip,"Failed to parse target state for ID '"+t+"': "+e),null)},Np.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Np);function Np(t,e,n){this.targetId=t,this.state=e,qr(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var xp=(Dp.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=xo(),o=0;r&&o<n.activeTargetIds.length;++o)r=Ec(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Dp(t,i):(Fr(Ip,"Failed to parse client data for instance '"+t+"': "+e),null)},Dp);function Dp(t,e){this.clientId=t,this.activeTargetIds=e}var Rp=(Pp.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&e.onlineState in zl&&"string"==typeof e.clientId?new Pp(e.clientId,zl[e.onlineState]):(Fr(Ip,"Failed to parse online state: "+t),null)},Pp);function Pp(t,e){this.clientId=t,this.onlineState=e}var Op=(Lp.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Lp.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Lp.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},Lp);function Lp(){this.activeTargetIds=xo()}var Mp=(Fp.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},Fp.prototype.start=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h=this;return a(this,(function(a){switch(a.label){case 0:return qr(!this.started,"WebStorageSharedClientState already started"),qr(null!==this.syncEngine,"syncEngine property must be set before calling start()"),qr(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(wp(this.persistenceKey,r)))&&(o=xp.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},Fp.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},Fp.prototype.getAllActiveQueryTargets=function(){var t=xo();return Jr(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},Fp.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},Fp.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},Fp.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},Fp.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Sp(this.persistenceKey,t));if(n){var r=Ap.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},Fp.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},Fp.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},Fp.prototype.clearQueryState=function(t){this.removeItem(Sp(this.persistenceKey,t))},Fp.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},Fp.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},Fp.prototype.setOnlineState=function(t){this.persistOnlineState(t)},Fp.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Fp.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mr(Ip,"READ",t,e),e},Fp.prototype.setItem=function(t,e){Mr(Ip,"SET",t,e),this.storage.setItem(t,e)},Fp.prototype.removeItem=function(t){Mr(Ip,"REMOVE",t),this.storage.removeItem(t)},Fp.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(Mr(Ip,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return s(e,void 0,void 0,(function(){var e,n,r,i,o,s;return a(this,(function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(qr(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=Ri.INVALID;if(null!=t)try{var n=JSON.parse(t);qr("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Fr(Ip,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==Ri.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(Fp.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Fp.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Fp.prototype.persistMutationState=function(t,e,n){var r=new Cp(this.currentUser,t,e,n),i=Ep(this.persistenceKey,this.currentUser,t);this.setItem(i,r.toWebStorageJSON())},Fp.prototype.removeMutationState=function(t){var e=Ep(this.persistenceKey,this.currentUser,t);this.removeItem(e)},Fp.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:zl[t]}))},Fp.prototype.persistQueryTargetState=function(t,e,n){var r=Sp(this.persistenceKey,t),i=new Ap(t,e,n);this.setItem(r,i.toWebStorageJSON())},Fp.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},Fp.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return qr(null!==n,"Cannot parse client state key '"+t+"'"),xp.fromWebStorageEntry(n,e)},Fp.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);qr(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Cp.fromWebStorageEntry(new vp(void 0!==n[2]?n[2]:null),r,e)},Fp.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);qr(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ap.fromWebStorageEntry(r,e)},Fp.prototype.fromWebStorageOnlineState=function(t){return Rp.fromWebStorageEntry(t)},Fp.prototype.handleMutationBatchEvent=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return t.user.uid!==this.currentUser.uid?(Mr(Ip,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},Fp.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},Fp.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],u=[];return i.forEach((function(t){return s(n,void 0,void 0,(function(){return a(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return s(n,void 0,void 0,(function(){return a(this,(function(e){return i.has(t)||u.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,u)},Fp.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},Fp);function Fp(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Fp.isAvailable(this.platform))throw new Gr(zr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=wp(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.activeClients[this.localClientId]=new Op,this.clientStateKeyRe=new RegExp("^"+bp+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+_p+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Tp+"_"+o+"_(\\d+)$"),this.onlineStateKey=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}var Up=(jp.prototype.addPendingMutation=function(t){},jp.prototype.updateMutationState=function(t,e,n){},jp.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},jp.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},jp.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},jp.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},jp.prototype.clearQueryState=function(t){delete this.queryState[t]},jp.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},jp.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},jp.prototype.start=function(){return this.localState=new Op,Promise.resolve()},jp.prototype.handleUserChange=function(t,e,n){},jp.prototype.setOnlineState=function(t){},jp.prototype.shutdown=function(){},jp.prototype.writeSequenceNumber=function(t){},jp);function jp(){this.localState=new Op,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var qp="FirestoreClient",Bp=(Vp.prototype.lruParams=function(){return Yu.withCacheSize(this.cacheSizeBytes)},Vp);function Vp(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}var Wp=function(){},Hp=(zp.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new Qi,r=new Qi,i=!1;return this.credentials.setChangeListener((function(o){i?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(o)})):(i=!0,e.initializePersistence(t,r,o).then((function(t){return e.initializeRest(o,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},zp.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},zp.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Bp?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},zp.prototype.canFallback=function(t){return t instanceof Gr?t.code===zr.FAILED_PRECONDITION||t.code===zr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},zp.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Gr(zr.FAILED_PRECONDITION,"The client has already been terminated.")},zp.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=cc.buildStoragePrefix(this.databaseInfo),i=new $h(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return s(n,void 0,void 0,(function(){var n,o;return a(this,(function(s){switch(s.label){case 0:if(e.synchronizeTabs&&!Mp.isAvailable(this.platform))throw new Gr(zr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Mp(this.asyncQueue,this.platform,r,this.clientId,t):new Up,[4,cc.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=s.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},zp.prototype.startMemoryPersistence=function(){return this.persistence=_l.createEagerPersistence(this.clientId),this.sharedClientState=new Up,Promise.resolve(null)},zp.prototype.initializeRest=function(t,e){var n=this;return Mr(qp,"Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return s(n,void 0,void 0,(function(){var n,i,o,u,c,l=this;return a(this,(function(h){switch(h.label){case 0:return n=new rl,this.localStore=new hl(this.persistence,n,t),[4,this.localStore.start()];case 1:return h.sent(),e&&(this.lruScheduler=new $u(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),u=new Wl(this.asyncQueue,r,this.credentials,o),c=function(t){return l.syncEngine.applyOnlineStateChange(t,Kl.SharedClientState)},this.remoteStore=new Nh(this.localStore,u,this.asyncQueue,(function(t){return l.syncEngine.applyOnlineStateChange(t,Kl.RemoteStore)}),i),this.syncEngine=new yp(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new tp(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return s(l,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return s(l,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},zp.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),Mr(qp,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},zp.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},zp.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return s(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},zp.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new Qi;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},zp.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new np(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},zp.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},zp.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof Ma)return t;if(t instanceof ja)return null;throw new Gr(zr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},zp.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return s(e,void 0,void 0,(function(){var e,n,r;return a(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new up(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},zp.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new Qi;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},zp.prototype.databaseId=function(){return this.databaseInfo.databaseId},zp.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},zp.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(zp.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),zp.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new Qi;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},zp);function zp(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=gi.newId()}var Gp=(Kp.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},Kp.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},Kp.prototype.mute=function(){this.muted=!0},Kp.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},Kp);function Kp(t){this.observer=t,this.muted=!1}var Qp=(Yp.documentId=function(){return Yp._DOCUMENT_ID},Yp.prototype.isEqual=function(t){if(!(t instanceof Yp))throw di("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},Yp._DOCUMENT_ID=new Yp(Vi.keyField().canonicalString()),Yp);function Yp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Gr(zr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+vi(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(ii("FieldPath","string",n,t[n]),0===t[n].length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(t)}var Xp=new RegExp("[~\\*/\\[\\]]"),$p=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Jp=(Zp.prototype.getToken=function(){return Promise.resolve(null)},Zp.prototype.invalidateToken=function(){},Zp.prototype.setChangeListener=function(t){qr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(vp.UNAUTHENTICATED)},Zp.prototype.removeChangeListener=function(){qr(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Zp);function Zp(){this.changeListener=null}var tf=(ef.prototype.getToken=function(){var t=this;qr(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new Gr(zr.ABORTED,"getToken aborted due to token change.");return n?(qr("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new $p(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},ef.prototype.invalidateToken=function(){this.forceRefresh=!0},ef.prototype.setChangeListener=function(t){qr(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},ef.prototype.removeChangeListener=function(){qr(null!=this.tokenListener,"removeChangeListener() called twice"),qr(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},ef.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return qr(null===t||"string"==typeof t,"Received invalid UID: "+t),new vp(t)},ef);function ef(t){var e=this;this.tokenListener=null,this.currentUser=vp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then((function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)}),(function(){})))}var nf=(Object.defineProperty(rf.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),rf);function rf(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=vp.FIRST_PARTY}var of=(sf.prototype.getToken=function(){return Promise.resolve(new nf(this.gapi,this.sessionIndex))},sf.prototype.setChangeListener=function(t){t(vp.FIRST_PARTY)},sf.prototype.removeChangeListener=function(){},sf.prototype.invalidateToken=function(){},sf);function sf(t,e){this.gapi=t,this.sessionIndex=e}function af(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var uf=(cf.delete=function(){return ti("FieldValue.delete",arguments),hf.instance},cf.serverTimestamp=function(){return ti("FieldValue.serverTimestamp",arguments),df.instance},cf.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ni("FieldValue.arrayUnion",arguments,1),new vf(t)},cf.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ni("FieldValue.arrayRemove",arguments,1),new wf(t)},cf.increment=function(t){return ii("FieldValue.increment","number",1,t),ei("FieldValue.increment",arguments,1),new Tf(t)},cf.prototype.isEqual=function(t){return this===t},cf);function cf(t){this._methodName=t}var lf,hf=(n(pf,lf=uf),pf.instance=new pf,pf);function pf(){return lf.call(this,"FieldValue.delete")||this}var ff,df=(n(yf,ff=uf),yf.instance=new yf,yf);function yf(){return ff.call(this,"FieldValue.serverTimestamp")||this}var mf,vf=(n(gf,mf=uf),gf);function gf(t){var e=mf.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}var bf,wf=(n(_f,bf=uf),_f);function _f(t){var e=bf.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}var Ef,Tf=(n(Sf,Ef=uf),Sf);function Sf(t){var e=Ef.call(this,"FieldValue.increment")||this;return e._operand=t,e}var If=Qr(uf,"Use FieldValue.<field>() instead."),Cf=/^__.*__$/,kf=(Af.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new As(t,this.data,this.fieldMask,e):new Is(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ds(t,this.fieldTransforms)),n},Af);function Af(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}var Nf,xf,Df=(Rf.prototype.toMutations=function(t,e){var n=[new As(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&n.push(new Ds(t,this.fieldTransforms)),n},Rf);function Rf(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function Pf(t){switch(t){case Nf.Set:case Nf.MergeSet:case Nf.Update:return!0;case Nf.Argument:case Nf.ArrayArgument:return!1;default:throw jr("Unexpected case for UserDataSource: "+t)}}(xf=Nf=Nf||{})[xf.Set=0]="Set",xf[xf.Update=1]="Update",xf[xf.MergeSet=2]="MergeSet",xf[xf.Argument=3]="Argument",xf[xf.ArrayArgument=4]="ArrayArgument";var Of=(Lf.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),n=new Lf(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(t),n},Lf.prototype.childContextForFieldPath=function(t){var e=null==this.path?null:this.path.child(t),n=new Lf(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Lf.prototype.childContextForArray=function(t){return new Lf(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Lf.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Gr(zr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},Lf.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},Lf.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},Lf.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(Pf(this.dataSource)&&Cf.test(t))throw this.createError('Document fields cannot begin and end with "__"')},Lf);function Lf(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var Mf=function(t,e){this.databaseId=t,this.key=e},Ff=(Uf.prototype.parseSetData=function(t,e){var n=new Of(Nf.Set,t,Vi.EMPTY_PATH);qf("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new kf(r,null,n.fieldTransforms)},Uf.prototype.parseMergeData=function(t,e,n){var r=new Of(Nf.MergeSet,t,Vi.EMPTY_PATH);qf("Data must be an object, but it was:",r,e);var i,o,s=this.parseData(e,r);if(n){for(var a=new mo(Vi.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Qp)h=l._internalPath;else{if("string"!=typeof l)throw jr("Expected stringOrFieldPath to be a string or a FieldPath");h=Vf(t,l)}if(!r.contains(h))throw new Gr(zr.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=fs.fromSet(a),o=r.fieldTransforms.filter((function(t){return i.covers(t.field)}))}else i=fs.fromArray(r.fieldMask),o=r.fieldTransforms;return new kf(s,i,o)},Uf.prototype.parseUpdateData=function(t,e){var n=this,r=new Of(Nf.Update,t,Vi.EMPTY_PATH);qf("Data must be an object, but it was:",r,e);var i=new mo(Vi.comparator),o=Aa.EMPTY;Jr(e,(function(e,s){var a=Vf(t,e),u=r.childContextForFieldPath(a);if((s=n.runPreConverter(s,u))instanceof hf)i=i.add(a);else{var c=n.parseData(s,u);null!=c&&(i=i.add(a),o=o.set(a,c))}}));var s=fs.fromSet(i);return new Df(o,s,r.fieldTransforms)},Uf.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new Of(Nf.Update,t,Vi.EMPTY_PATH),o=[Bf(t,e)],s=[n];if(r.length%2!=0)throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Bf(t,r[a])),s.push(r[a+1]);var u=new mo(Vi.comparator),c=Aa.EMPTY;for(a=0;a<o.length;++a){var l=o[a],h=i.childContextForFieldPath(l),p=this.runPreConverter(s[a],h);if(p instanceof hf)u=u.add(l);else{var f=this.parseData(p,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var d=fs.fromSet(u);return new Df(c,d,i.fieldTransforms)},Uf.prototype.parseQueryValue=function(t,e,n){void 0===n&&(n=!1);var r=new Of(n?Nf.ArrayArgument:Nf.Argument,t,Vi.EMPTY_PATH),i=this.parseData(e,r);return qr(null!=i,"Parsed data should not be null."),qr(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},Uf.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Wf(t);throw e.createError(n)}},Uf.prototype.parseData=function(t,e){if(jf(t=this.runPreConverter(t,e)))return qf("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof uf)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==Nf.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},Uf.prototype.parseObject=function(t,e){var n=this,r=new ao(wi);return Zr(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):Jr(t,(function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))})),new Aa(r)},Uf.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.parseData(o[i],e.childContextForArray(r));null==s&&(s=Qs.INSTANCE),n.push(s),r++}return new Da(n)},Uf.prototype.parseSentinelFieldValue=function(t,e){if(!Pf(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof hf){if(e.dataSource!==Nf.MergeSet)throw e.dataSource===Nf.Update?(qr(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof df)e.fieldTransforms.push(new ys(e.path,Ph.instance));else if(t instanceof vf){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new Lh(n);e.fieldTransforms.push(new ys(e.path,r))}else if(t instanceof wf){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new Fh(n);e.fieldTransforms.push(new ys(e.path,i))}else if(t instanceof Tf){var o=this.parseQueryValue("FieldValue.increment",t._operand),s=new jh(o);e.fieldTransforms.push(new ys(e.path,s))}else jr("Unknown FieldValue type: "+t)},Uf.prototype.parseScalarValue=function(t,e){if(null===t)return Qs.INSTANCE;if("number"==typeof t)return Ec(t)?new ia(t):new aa(t);if("boolean"==typeof t)return $s.of(t);if("string"==typeof t)return new la(t);if(t instanceof Date)return new fa(ro.fromDate(t));if(t instanceof ro)return new fa(new ro(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Dh)return new Ia(t);if(t instanceof Ii)return new ba(t);if(t instanceof Mf)return new Ea(t.databaseId,t.key);throw e.createError("Unsupported field value: "+hi(t))},Uf.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(e,r){var i=new Of(Nf.Argument,t,Vi.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))}))},Uf);function Uf(t){this.preConverter=t}function jf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ro||t instanceof Dh||t instanceof Ii||t instanceof Mf||t instanceof uf)}function qf(t,e,n){if(!jf(n)||!li(n)){var r=hi(n);throw e.createError("an object"===r?t+" a custom object":t+" "+r)}}function Bf(t,e){if(e instanceof Qp)return e._internalPath;if("string"==typeof e)return Vf(t,e);throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Vf(t,e){try{return function(t){if(0<=t.search(Xp))throw new Gr(zr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Qp.bind.apply(Qp,u([void 0],t.split("."))))}catch(e){throw new Gr(zr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Wf(e);throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Wf(t){return t instanceof Error?t.message:t.toString()}var Hf=Yu.COLLECTION_DISABLED,zf=(Gf.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},Gf);function Gf(t){if(void 0===t.host){if(void 0!==t.ssl)throw new Gr(zr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else si("settings","non-empty string","host",t.host),this.host=t.host,ai("settings","boolean","ssl",t.ssl),this.ssl=Xr(t.ssl,!0);if(fi("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),ai("settings","object","credentials",t.credentials),this.credentials=t.credentials,ai("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Fr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Fr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=Xr(t.timestampsInSnapshots,!0),ai("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Yu.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Hf&&t.cacheSizeBytes<Yu.MINIMUM_CACHE_SIZE_BYTES)throw new Gr(zr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Yu.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}ai("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}var Kf=(Qf.prototype.settings=function(t){if(ei("Firestore.settings",arguments,1),ii("Firestore.settings","object",1,t),Yr(t,"persistence"))throw new Gr(zr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new zf(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new Gr(zr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=e).credentials&&(this._credentials=function(t){if(!t)return new Jp;switch(t.type){case"gapi":var e=t.client;return qr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new of(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Gr(zr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},Qf.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Qf.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Qf.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new Gr(zr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Fr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=Xr(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Bp(this._settings.cacheSizeBytes,e))},Qf.prototype.clearPersistence=function(){var t=this,e=cc.buildStoragePrefix(this.makeDatabaseInfo()),n=new Qi;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return s(t,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Gr(zr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,cc.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},Qf.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Qf.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Qf.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Qf.prototype.onSnapshotsInSync=function(t){return this.ensureClientConfigured(),af(t)?this.onSnapshotsInSyncInternal(t):(ii("Firestore.onSnapshotsInSync","function",1,t),this.onSnapshotsInSyncInternal({next:t}))},Qf.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Gp({next:function(){t.next&&t.next()},error:function(t){throw jr("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},Qf.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Wp),this._firestoreClient},Qf.prototype.makeDatabaseInfo=function(){return new Ai(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Qf.prototype.configureClient=function(t){qr(!!this._settings.host,"FirestoreSettings.host is not set"),qr(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Hp(Br.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},Qf.prototype.createDataConverter=function(t){return new Ff((function(e){if(e instanceof Zf){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new Gr(zr.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Mf(t,e._key)}return e}))},Qf.databaseIdFromApp=function(t){var e=t.options;if(!Yr(e,"projectId"))throw new Gr(zr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new Gr(zr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new xi(n)},Object.defineProperty(Qf.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Gr(zr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Qf.prototype.collection=function(t){return ei("Firestore.collection",arguments,1),ii("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new fd(Ui.fromString(t),this)},Qf.prototype.doc=function(t){return ei("Firestore.doc",arguments,1),ii("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Zf.forPath(Ui.fromString(t),this)},Qf.prototype.collectionGroup=function(t){if(ei("Firestore.collectionGroup",arguments,1),ii("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Gr(zr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new ud(new kc(Ui.EMPTY_PATH,t),this)},Qf.prototype.runTransaction=function(t){var e=this;return ei("Firestore.runTransaction",arguments,1),ii("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new Yf(e,n))}))},Qf.prototype.batch=function(){return this.ensureClientConfigured(),new $f(this)},Object.defineProperty(Qf,"logLevel",{get:function(){switch(Or()){case Sr.DEBUG:return"debug";case Sr.ERROR:return"error";case Sr.SILENT:return"silent";default:return jr("Unknown log level: "+Or())}},enumerable:!0,configurable:!0}),Qf.setLogLevel=function(t){switch(ei("Firestore.setLogLevel",arguments,1),ii("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Lr(Sr.DEBUG);break;case"error":Lr(Sr.ERROR);break;case"silent":Lr(Sr.SILENT);break;default:throw new Gr(zr.INVALID_ARGUMENT,"Invalid log level: "+t)}},Qf.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Qf);function Qf(t,e){var n=this;if(this._firebaseApp=null,this._queue=new $i,this.INTERNAL={delete:function(){return s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=Qf.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new tf(e)}else{var i=t;if(!i.projectId)throw new Gr(zr.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new xi(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Jp}this._settings=new zf({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Yf=(Xf.prototype.get=function(t){var e=this;ei("Transaction.get",arguments,1);var n=gd("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return jr("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof ja)return new rd(e._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Ma)return new rd(e._firestore,n._key,r,!1,!1,n._converter);throw jr("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},Xf.prototype.set=function(t,e,n){ri("Transaction.set",arguments,2,3);var r=gd("Transaction.set",t,this._firestore);n=yd("Transaction.set",n);var i=bd(r._converter,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(s,o,n.mergeFields):this._firestore._dataConverter.parseSetData(s,o);return this._transaction.set(r._key,a),this},Xf.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof Qp?(ni("Transaction.update",arguments,3),r=gd("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(ei("Transaction.update",arguments,2),r=gd("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},Xf.prototype.delete=function(t){ei("Transaction.delete",arguments,1);var e=gd("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},Xf);function Xf(t,e){this._firestore=t,this._transaction=e}var $f=(Jf.prototype.set=function(t,e,n){ri("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=gd("WriteBatch.set",t,this._firestore);n=yd("WriteBatch.set",n);var i=bd(r._converter,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(s,o,n.mergeFields):this._firestore._dataConverter.parseSetData(s,o);return this._mutations=this._mutations.concat(a.toMutations(r._key,ws.NONE)),this},Jf.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),i="string"==typeof e||e instanceof Qp?(ni("WriteBatch.update",arguments,3),r=gd("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(ei("WriteBatch.update",arguments,2),r=gd("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,ws.exists(!0))),this},Jf.prototype.delete=function(t){ei("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=gd("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Os(e._key,ws.NONE)),this},Jf.prototype.commit=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},Jf.prototype.verifyNotCommitted=function(){if(this._committed)throw new Gr(zr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Jf);function Jf(t){this._firestore=t,this._mutations=[],this._committed=!1}var Zf=(td.forPath=function(t,e,n){if(t.length%2!=0)throw new Gr(zr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new td(new Hi(t),e,n)},Object.defineProperty(td.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(td.prototype,"parent",{get:function(){return new fd(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(td.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),td.prototype.collection=function(t){if(ei("DocumentReference.collection",arguments,1),ii("DocumentReference.collection","non-empty string",1,t),!t)throw new Gr(zr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Ui.fromString(t);return new fd(this._key.path.child(e),this.firestore)},td.prototype.isEqual=function(t){if(!(t instanceof td))throw di("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},td.prototype.set=function(t,e){ri("DocumentReference.set",arguments,1,2),e=yd("DocumentReference.set",e);var n=bd(this._converter,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,e.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,ws.NONE))},td.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Qp?(ni("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(ei("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ws.exists(!0)))},td.prototype.delete=function(){return ei("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Os(this._key,ws.NONE)])},td.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ri("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||af(t[i])||(fi("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),ai("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=af(t[i])?t[i]:(ii("DocumentReference.onSnapshot","function",i,t[i]),oi("DocumentReference.onSnapshot","function",i+1,t[i+1]),oi("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},td.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Gp({next:function(t){if(e.next){qr(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new rd(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(kc.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},td.prototype.get=function(t){var e=this;return ri("DocumentReference.get",arguments,0,1),vd("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new rd(e.firestore,e._key,t,!0,t instanceof Ma&&t.hasLocalMutations,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},td.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new Gr(zr.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new Gr(zr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},td.prototype.withConverter=function(t){return new td(this._key,this.firestore,t)},td);function td(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}var ed=(nd.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},nd);function nd(t,e){this.hasPendingWrites=t,this.fromCache=e}var rd=(id.prototype.data=function(t){if(ri("DocumentSnapshot.data",arguments,0,1),t=md("DocumentSnapshot.data",t),this._document){if(this._converter){var e=new sd(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(e,t)}return this.toJSObject(this._document.data(),Ws.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},id.prototype.get=function(t,e){if(ri("DocumentSnapshot.get",arguments,1,2),e=md("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(Bf("DocumentSnapshot.get",t));if(null!==n)return this.toJSValue(n,Ws.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(id.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(id.prototype,"ref",{get:function(){return new Zf(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(id.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(id.prototype,"metadata",{get:function(){return new ed(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),id.prototype.isEqual=function(t){if(!(t instanceof id))throw di("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},id.prototype.toJSObject=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.toJSValue(i,e)})),r},id.prototype.toJSValue=function(t,e){if(t instanceof Aa)return this.toJSObject(t,e);if(t instanceof Da)return this.toJSArray(t,e);if(t instanceof Ea){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||Fr("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Zf(n,this._firestore,this._converter)}return t.value(e)},id.prototype.toJSArray=function(t,e){var n=this;return t.internalValue.map((function(t){return n.toJSValue(t,e)}))},id);function id(t,e,n,r,i,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}var od,sd=(n(ad,od=rd),ad.prototype.data=function(t){var e=od.prototype.data.call(this,t);return qr(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},ad);function ad(){return null!==od&&od.apply(this,arguments)||this}var ud=(cd.prototype.where=function(t,e,n){var r;ei("Query.where",arguments,3),pi("Query.where",3,n),function(t,e,n,r){if(!e.some((function(t){return t===r})))throw new Gr(zr.INVALID_ARGUMENT,"Invalid value "+hi(r)+" provided to function Query.where() for its "+mi(2)+" argument. Acceptable values: "+e.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,e);var i=Bf("Query.where",t),o=Nc.fromString(e);if(i.isKeyField()){if(o===Nc.ARRAY_CONTAINS||o===Nc.ARRAY_CONTAINS_ANY)throw new Gr(zr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Nc.IN){this.validateDisjunctiveFilterElements(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this.parseDocumentIdValue(c))}r=new Da(s)}else r=this.parseDocumentIdValue(n)}else o!==Nc.IN&&o!==Nc.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===Nc.IN);var l=Rc.create(i,o,r);return this.validateNewFilter(l),new cd(this._query.addFilter(l),this.firestore,this._converter)},cd.prototype.orderBy=function(t,e){var n;if(ri("Query.orderBy",arguments,1,2),oi("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=Yc.ASCENDING;else{if("desc"!==e)throw new Gr(zr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=Yc.DESCENDING}if(null!==this._query.startAt)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Bf("Query.orderBy",t),i=new Zc(r,n);return this.validateNewOrderBy(i),new cd(this._query.addOrderBy(i),this.firestore,this._converter)},cd.prototype.limit=function(t){return ei("Query.limit",arguments,1),ii("Query.limit","number",1,t),yi("Query.limit",1,t),new cd(this._query.withLimitToFirst(t),this.firestore,this._converter)},cd.prototype.limitToLast=function(t){return ei("Query.limitToLast",arguments,1),ii("Query.limitToLast","number",1,t),yi("Query.limitToLast",1,t),new cd(this._query.withLimitToLast(t),this.firestore,this._converter)},cd.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ni("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new cd(this._query.withStartAt(r),this.firestore,this._converter)},cd.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ni("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new cd(this._query.withStartAt(r),this.firestore,this._converter)},cd.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ni("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new cd(this._query.withEndAt(r),this.firestore,this._converter)},cd.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];ni("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new cd(this._query.withEndAt(r),this.firestore,this._converter)},cd.prototype.isEqual=function(t){if(!(t instanceof cd))throw di("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},cd.prototype.withConverter=function(t){return new cd(this._query,this.firestore,t)},cd.prototype.boundFromDocOrFields=function(t,e,n,r){if(pi(t,1,e),e instanceof rd){if(0<n.length)throw new Gr(zr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new Gr(zr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},cd.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var s=o[i];if(s.field.isKeyField())r.push(new Ea(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof ma)throw new Gr(zr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.canonicalString();throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new $c(r,n)},cd.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new Gr(zr.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.isKeyField()){if("string"!=typeof s)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(Ui.fromString(s));if(!Hi.isDocumentKey(a))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Hi(a);i.push(new Ea(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(t,s);i.push(c)}}return new $c(i,n)},cd.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ri("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||af(t[i])||(fi("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),ai("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=af(t[i])?t[i]:(ii("Query.onSnapshot","function",i,t[i]),oi("Query.onSnapshot","function",i+1,t[i+1]),oi("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},cd.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Gp({next:function(t){e.next&&e.next(new ld(n.firestore,n._query,t,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(s)}},cd.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new Gr(zr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},cd.prototype.get=function(t){var e=this;return ri("Query.get",arguments,0,1),vd("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new ld(e.firestore,e._query,t,e._converter))}),r):e.getViaSnapshotListener(n,r,t)}))},cd.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new Gr(zr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},cd.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(Ui.fromString(t));if(!Hi.isDocumentKey(e))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Ea(this.firestore._databaseId,new Hi(e))}if(t instanceof Zf)return new Ea(this.firestore._databaseId,t._key);throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hi(t)+".")},cd.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Gr(zr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter((function(t){return Number.isNaN(t)})).length)throw new Gr(zr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},cd.prototype.validateNewFilter=function(t){if(t instanceof Rc){var e=[Nc.ARRAY_CONTAINS,Nc.ARRAY_CONTAINS_ANY],n=[Nc.IN,Nc.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(t.field,s)}else if(i||r){var a=null;if(i&&(a=this._query.findFilterOperator(n)),null===a&&r&&(a=this._query.findFilterOperator(e)),null!=a)throw new Gr(zr.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},cd.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},cd.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new Gr(zr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},cd);function cd(t,e,n){this._query=t,this.firestore=e,this._converter=n}var ld=(Object.defineProperty(hd.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(hd.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(hd.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),hd.prototype.forEach=function(t,e){var n=this;ri("QuerySnapshot.forEach",arguments,1,2),ii("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(hd.prototype,"query",{get:function(){return new ud(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),hd.prototype.docChanges=function(t){t&&(fi("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),ai("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new Gr(zr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(e){var s=new sd(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r);return qr(e.type===rh.Added,"Invalid event type for first snapshot"),qr(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:o++}}))}var s=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==rh.Metadata})).map((function(e){var i=new sd(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key),r),o=-1,a=-1;return e.type!==rh.Added&&(qr(0<=(o=s.indexOf(e.doc.key)),"Index for document not found"),s=s.delete(e.doc.key)),e.type!==rh.Removed&&(a=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case rh.Added:return"added";case rh.Modified:case rh.Metadata:return"modified";case rh.Removed:return"removed";default:return jr("Unknown change type: "+t)}}(e.type),doc:i,oldIndex:o,newIndex:a}}))}(this._firestore,e,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},hd.prototype.isEqual=function(t){if(!(t instanceof hd))throw di("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},hd.prototype.convertToDocumentImpl=function(t){return new sd(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)},hd);function hd(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new ed(n.hasPendingWrites,n.fromCache)}u(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(ld.prototype.docChanges,t,{get:function(){return function(){throw new Gr(zr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var pd,fd=(n(dd,pd=ud),Object.defineProperty(dd.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(dd.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Zf(new Hi(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(dd.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),dd.prototype.doc=function(t){if(ri("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=gi.newId()),ii("CollectionReference.doc","non-empty string",1,t),""===t)throw new Gr(zr.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Ui.fromString(t);return Zf.forPath(this._query.path.child(e),this.firestore,this._converter)},dd.prototype.add=function(t){ei("CollectionReference.add",arguments,1),ii("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},dd.prototype.withConverter=function(t){return new dd(this._path,this.firestore,t)},dd);function dd(t,e,n){var r=pd.call(this,kc.atPath(t),e,n)||this;if((r._path=t).length%2!=1)throw new Gr(zr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}function yd(t,e){if(void 0===e)return{merge:!1};if(fi(t,e,["merge","mergeFields"]),ai(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+hi(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Gr(zr.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+hi(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Qp}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new Gr(zr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function md(t,e){return void 0===e?{}:(fi(t,e,["serverTimestamps"]),ui(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function vd(t,e){oi(t,"object",1,e),e&&(fi(t,e,["source"]),ui(t,0,"source",e.source,["default","server","cache"]))}function gd(t,e,n){if(e instanceof Zf){if(e.firestore!==n)throw new Gr(zr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw di(t,"DocumentReference",1,e)}function bd(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var wd=Qr(Kf,"Use firebase.firestore() instead."),_d=Qr(Yf,"Use firebase.firestore().runTransaction() instead."),Ed=Qr($f,"Use firebase.firestore().batch() instead."),Td=Qr(Zf,"Use firebase.firestore().doc() instead."),Sd=Qr(rd),Id=Qr(sd),Cd=Qr(ud),kd=Qr(ld),Ad=Qr(fd,"Use firebase.firestore().collection() instead."),Nd={Firestore:wd,GeoPoint:Dh,Timestamp:ro,Blob:ki,Transaction:_d,WriteBatch:Ed,DocumentReference:Td,DocumentSnapshot:Sd,Query:Cd,QueryDocumentSnapshot:Id,QuerySnapshot:kd,CollectionReference:Ad,FieldPath:Qp,FieldValue:If,setLogLevel:Kf.setLogLevel,CACHE_SIZE_UNLIMITED:Hf},xd=(Dd.prototype.addCallback=function(t){},Dd.prototype.shutdown=function(){},Dd);function Dd(){}var Rd="ConnectivityMonitor",Pd=(Od.prototype.addCallback=function(t){this.callbacks.push(t)},Od.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Od.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Od.prototype.onNetworkAvailable=function(){Mr(Rd,"Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},Od.prototype.onNetworkUnavailable=function(){Mr(Rd,"Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},Od.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Od);function Od(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Ld=(Md.prototype.onOpen=function(t){qr(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},Md.prototype.onClose=function(t){qr(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},Md.prototype.onMessage=function(t){qr(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},Md.prototype.close=function(){this.closeFn()},Md.prototype.send=function(t){this.sendFn(t)},Md.prototype.callOnOpen=function(){qr(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},Md.prototype.callOnClose=function(t){qr(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},Md.prototype.callOnMessage=function(t){qr(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},Md);function Md(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}var Fd="Connection",Ud={BatchGetDocuments:"batchGet",Commit:"commit"},jd="gl-js/ fire/"+Rr,qd=(Bd.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=jd},Bd.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise((function(s,a){var u=new Dr;u.listenOnce(Nr.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ar.NO_ERROR:var e=u.getResponseJson();Mr(Fd,"XHR received:",JSON.stringify(e)),s(e);break;case Ar.TIMEOUT:Mr(Fd,'RPC "'+t+'" timed out'),a(new Gr(zr.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:var n=u.getStatus();if(Mr(Fd,'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return 0<=Object.values(zr).indexOf(e)?e:zr.UNKNOWN}(r.status);a(new Gr(i,r.message))}else a(new Gr(zr.UNKNOWN,"Server responded with status "+u.getStatus()))}else Mr(Fd,'RPC "'+t+'" failed'),a(new Gr(zr.UNAVAILABLE,"Connection failed."));break;default:jr('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{Mr(Fd,'RPC "'+t+'" completed.')}}));var c=o({},e);delete c.database;var l=JSON.stringify(c);Mr(Fd,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,15)}))},Bd.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},Bd.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=kr(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||0<=d().indexOf("Electron/")||function(){var t=d();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")}()||0<=d().indexOf("MSAppHost/")||function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))}Mr(Fd,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,l=new Ld({sendFn:function(t){c?Mr(Fd,"Not sending because WebChannel is closed:",t):(u||(Mr(Fd,"Opening WebChannel transport."),a.open(),u=!0),Mr(Fd,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}});return s(xr.EventType.OPEN,(function(){c||Mr(Fd,"WebChannel transport opened.")})),s(xr.EventType.CLOSE,(function(){c||(c=!0,Mr(Fd,"WebChannel transport closed"),l.callOnClose())})),s(xr.EventType.ERROR,(function(t){c||(c=!0,Mr(Fd,"WebChannel transport errored:",t),l.callOnClose(new Gr(zr.UNAVAILABLE,"The operation could not be completed")))})),s(xr.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];qr(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Mr(Fd,"WebChannel received error:",r);var i=r.status,o=function(t){var e=$l[t];if(void 0!==e)return nh(e)}(i),s=r.message;void 0===o&&(o=zr.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.callOnClose(new Gr(o,s)),a.close()}else Mr(Fd,"WebChannel received:",n),l.callOnMessage(n)}})),setTimeout((function(){l.callOnOpen()}),0),l},Bd.prototype.makeUrl=function(t){var e=Ud[t];return qr(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},Bd);function Bd(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}var Vd,Wd=(Object.defineProperty(Hd.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Hd.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Hd.prototype.loadConnection=function(t){return Promise.resolve(new qd(t))},Hd.prototype.newConnectivityMonitor=function(){return Pd.isAvailable()?new Pd:new xd},Hd.prototype.newSerializer=function(t){return new $h(t,{useProto3Json:!0})},Hd.prototype.formatJSON=function(t){return JSON.stringify(t)},Hd.prototype.atob=function(t){return atob(t)},Hd.prototype.btoa=function(t){return btoa(t)},Hd);function Hd(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}Br.setPlatform(new Wd),function(t){t.INTERNAL.registerComponent(new _("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new Kf(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(t){qr(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Nd)))}(Vd=e),Vd.registerVersion("@firebase/firestore","1.9.3")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}},"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}function jqr(){!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){var n=[],r=t.document,i=n.slice,o=n.concat,s=n.push,a=n.indexOf,u={},c=u.toString,l=u.hasOwnProperty,h={},p="1.12.4",f=function(t,e){return new f.fn.init(t,e)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,y=/^-ms-/,m=/-([\da-z])/gi,v=function(t,e){return e.toUpperCase()};function g(t){var e=!!t&&"length"in t&&t.length,n=f.type(t);return"function"!==n&&!f.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}f.fn=f.prototype={jquery:p,constructor:f,selector:"",length:0,toArray:function(){return i.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:i.call(this)},pushStack:function(t){var e=f.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return f.each(this,t)},map:function(t){return this.pushStack(f.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},f.extend=f.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||f.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(i=arguments[a]))for(r in i)t=s[r],s!==(n=i[r])&&(c&&n&&(f.isPlainObject(n)||(e=f.isArray(n)))?(e?(e=!1,o=t&&f.isArray(t)?t:[]):o=t&&f.isPlainObject(t)?t:{},s[r]=f.extend(c,o,n)):void 0!==n&&(s[r]=n));return s},f.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===f.type(t)},isArray:Array.isArray||function(t){return"array"===f.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!f.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==f.type(t)||t.nodeType||f.isWindow(t))return!1;try{if(t.constructor&&!l.call(t,"constructor")&&!l.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!h.ownFirst)for(e in t)return l.call(t,e);for(e in t);return void 0===e||l.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[c.call(t)]||"object":typeof t},globalEval:function(e){e&&f.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(y,"ms-").replace(m,v)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(g(t))for(n=t.length;n>r&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(d,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(g(Object(t))?f.merge(n,"string"==typeof t?[t]:t):s.call(n,t)),n},inArray:function(t,e,n){var r;if(e){if(a)return a.call(e,t,n);for(r=e.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;)t[i++]=e[r++];if(n!=n)for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;o>i;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,s=0,a=[];if(g(t))for(r=t.length;r>s;s++)null!=(i=e(t[s],s,n))&&a.push(i);else for(s in t)null!=(i=e(t[s],s,n))&&a.push(i);return o.apply([],a)},guid:1,proxy:function(t,e){var n,r,o;return"string"==typeof e&&(o=t[e],e=t,t=o),f.isFunction(t)?(n=i.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(i.call(arguments)))}).guid=t.guid=t.guid||f.guid++,r):void 0},now:function(){return+new Date},support:h}),"function"==typeof Symbol&&(f.fn[Symbol.iterator]=n[Symbol.iterator]),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var b=function(t){var e,n,r,i,o,s,a,u,c,l,h,p,f,d,y,m,v,g,b,w="sizzle"+1*new Date,_=t.document,E=0,T=0,S=ot(),I=ot(),C=ot(),k=function(t,e){return t===e&&(h=!0),0},A={}.hasOwnProperty,N=[],x=N.pop,D=N.push,R=N.push,P=N.slice,O=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U="\\["+M+"*("+F+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",j=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",q=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),V=new RegExp("^"+M+"*,"+M+"*"),W=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),H=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),z=new RegExp(j),G=new RegExp("^"+F+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),et=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},rt=function(){p()};try{R.apply(N=P.call(_.childNodes),_.childNodes)}catch(nt){R={apply:N.length?function(t,e){D.apply(t,P.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function it(t,e,r,i){var o,a,c,l,h,d,v,g,E=e&&e.ownerDocument,T=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==T&&9!==T&&11!==T)return r;if(!i&&((e?e.ownerDocument||e:_)!==f&&p(e),e=e||f,y)){if(11!==T&&(d=$.exec(t)))if(o=d[1]){if(9===T){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(E&&(c=E.getElementById(o))&&b(e,c)&&c.id===o)return r.push(c),r}else{if(d[2])return R.apply(r,e.getElementsByTagName(t)),r;if((o=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!C[t+" "]&&(!m||!m.test(t))){if(1!==T)E=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(Z,"\\$&"):e.setAttribute("id",l=w),a=(v=s(t)).length,h=G.test(l)?"#"+l:"[id='"+l+"']";a--;)v[a]=h+" "+yt(v[a]);g=v.join(","),E=J.test(t)&&ft(e.parentNode)||e}if(g)try{return R.apply(r,E.querySelectorAll(g)),r}catch(S){}finally{l===w&&e.removeAttribute("id")}}}return u(t.replace(B,"$1"),e,r,i)}function ot(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[w]=!0,t}function at(t){var e=f.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function lt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return st((function(e){return e=+e,st((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=it.support={},o=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},p=it.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:_;return s!==f&&9===s.nodeType&&s.documentElement?(d=(f=s).documentElement,y=!o(f),(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=at((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=at((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=X.test(f.getElementsByClassName),n.getById=at((function(t){return d.appendChild(t).id=w,!f.getElementsByName||!f.getElementsByName(w).length})),n.getById?(r.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var n=e.getElementById(t);return n?[n]:[]}},r.filter.ID=function(t){var e=t.replace(tt,et);return function(t){return t.getAttribute("id")===e}}):(delete r.find.ID,r.filter.ID=function(t){var e=t.replace(tt,et);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){return void 0!==e.getElementsByClassName&&y?e.getElementsByClassName(t):void 0},v=[],m=[],(n.qsa=X.test(f.querySelectorAll))&&(at((function(t){d.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+L+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")})),at((function(t){var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=X.test(g=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&at((function(t){n.disconnectedMatch=g.call(t,"div"),g.call(t,"[s!='']:x"),v.push("!=",j)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=X.test(d.compareDocumentPosition),b=e||X.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===f||t.ownerDocument===_&&b(_,t)?-1:e===f||e.ownerDocument===_&&b(_,e)?1:l?O(l,t)-O(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===f?-1:e===f?1:i?-1:o?1:l?O(l,t)-O(l,e):0;if(i===o)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ct(s[r],a[r]):s[r]===_?-1:a[r]===_?1:0},f):f},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&p(t),e=e.replace(H,"='$1']"),n.matchesSelector&&y&&!C[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=g.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return it(e,f,null,[t]).length>0},it.contains=function(t,e){return(t.ownerDocument||t)!==f&&p(t),b(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==f&&p(t);var i=r.attrHandle[e.toLowerCase()],o=i&&A.call(r.attrHandle,e.toLowerCase())?i(t,e,!y):void 0;return void 0!==o?o:n.attributes||!y?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},it.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(k),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=it.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=it.selectors={cacheLength:50,createPseudo:st,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(tt,et),t[3]=(t[3]||t[4]||t[5]||"").replace(tt,et),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&z.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(tt,et).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+M+")"+t+"("+M+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=it.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(q," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,p,f,d,y=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),g=!u&&!a,b=!1;if(m){if(o){for(;y;){for(p=e;p=p[y];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;d=y="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&g){for(b=(f=(c=(l=(h=(p=m)[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]||[])[0]===E&&c[1])&&c[2],p=f&&m.childNodes[f];p=++f&&p&&p[y]||(b=f=0)||d.pop();)if(1===p.nodeType&&++b&&p===e){l[t]=[E,f,b];break}}else if(g&&(b=f=(c=(l=(h=(p=e)[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]||[])[0]===E&&c[1]),!1===b)for(;(p=++f&&p&&p[y]||(b=f=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(g&&((l=(h=p[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]=[E,b]),p!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return i[w]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st((function(t,n){for(var r,o=i(t,e),s=o.length;s--;)t[r=O(t,o[s])]=!(n[r]=o[s])})):function(t){return i(t,0,n)}):i}},pseudos:{not:st((function(t){var e=[],n=[],r=a(t.replace(B,"$1"));return r[w]?st((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:st((function(t){return function(e){return it(t,e).length>0}})),contains:st((function(t){return t=t.replace(tt,et),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}})),lang:st((function(t){return G.test(t||"")||it.error("unsupported lang: "+t),t=t.replace(tt,et).toLowerCase(),function(e){var n;do{if(n=y?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt((function(){return[0]})),last:pt((function(t,e){return[e-1]})),eq:pt((function(t,e,n){return[0>n?n+e:n]})),even:pt((function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t})),odd:pt((function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t})),lt:pt((function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t})),gt:pt((function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=lt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ht(e);function dt(){}function yt(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function mt(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=T++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,c,l=[E,o];if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if((a=(u=(c=e[w]||(e[w]={}))[e.uniqueID]||(c[e.uniqueID]={}))[r])&&a[0]===E&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=t(e,n,s))return!0}}}function vt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function gt(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;u>a;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function bt(t,e,n,r,i,o){return r&&!r[w]&&(r=bt(r)),i&&!i[w]&&(i=bt(i,o)),st((function(o,s,a,u){var c,l,h,p=[],f=[],d=s.length,y=o||function(t,e,n){for(var r=0,i=e.length;i>r;r++)it(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!o&&e?y:gt(y,p,t,a,u),v=n?i||(o?t:d||r)?[]:s:m;if(n&&n(m,v,a,u),r)for(c=gt(v,f),r(c,[],a,u),l=c.length;l--;)(h=c[l])&&(v[f[l]]=!(m[f[l]]=h));if(o){if(i||t){if(i){for(c=[],l=v.length;l--;)(h=v[l])&&c.push(m[l]=h);i(null,v=[],c,u)}for(l=v.length;l--;)(h=v[l])&&(c=i?O(o,h):p[l])>-1&&(o[c]=!(s[c]=h))}}else v=gt(v===s?v.splice(d,v.length):v),i?i(null,s,v,u):R.apply(s,v)}))}function wt(t){for(var e,n,i,o=t.length,s=r.relative[t[0].type],a=s||r.relative[" "],u=s?1:0,l=mt((function(t){return t===e}),a,!0),h=mt((function(t){return O(e,t)>-1}),a,!0),p=[function(t,n,r){var i=!s&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];o>u;u++)if(n=r.relative[t[u].type])p=[mt(vt(p),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[w]){for(i=++u;o>i&&!r.relative[t[i].type];i++);return bt(u>1&&vt(p),u>1&&yt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(B,"$1"),n,i>u&&wt(t.slice(u,i)),o>i&&wt(t=t.slice(i)),o>i&&yt(t))}p.push(n)}return vt(p)}function _t(t,e){var n=e.length>0,i=t.length>0,o=function(o,s,a,u,l){var h,d,m,v=0,g="0",b=o&&[],w=[],_=c,T=o||i&&r.find.TAG("*",l),S=E+=null==_?1:Math.random()||.1,I=T.length;for(l&&(c=s===f||s||l);g!==I&&null!=(h=T[g]);g++){if(i&&h){for(d=0,s||h.ownerDocument===f||(p(h),a=!y);m=t[d++];)if(m(h,s||f,a)){u.push(h);break}l&&(E=S)}n&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=g,n&&g!==v){for(d=0;m=e[d++];)m(b,w,s,a);if(o){if(v>0)for(;g--;)b[g]||w[g]||(w[g]=x.call(u));w=gt(w)}R.apply(u,w),l&&!o&&w.length>0&&v+e.length>1&&it.uniqueSort(u)}return l&&(E=S,c=_),b};return n?st(o):o}return dt.prototype=r.filters=r.pseudos,r.setFilters=new dt,s=it.tokenize=function(t,e){var n,i,o,s,a,u,c,l=I[t+" "];if(l)return e?0:l.slice(0);for(a=t,u=[],c=r.preFilter;a;){for(s in n&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=W.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),a=a.slice(n.length)),r.filter)!(i=K[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?it.error(t):I(t,u).slice(0)},a=it.compile=function(t,e){var n,r=[],i=[],o=C[t+" "];if(!o){for(e||(e=s(t)),n=e.length;n--;)(o=wt(e[n]))[w]?r.push(o):i.push(o);(o=C(t,_t(i,r))).selector=t}return o},u=it.select=function(t,e,i,o){var u,c,l,h,p,f="function"==typeof t&&t,d=!o&&s(t=f.selector||t);if(i=i||[],1===d.length){if((c=d[0]=d[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&n.getById&&9===e.nodeType&&y&&r.relative[c[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(tt,et),e)||[])[0]))return i;f&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(u=K.needsContext.test(t)?0:c.length;u--&&!r.relative[h=(l=c[u]).type];)if((p=r.find[h])&&(o=p(l.matches[0].replace(tt,et),J.test(c[0].type)&&ft(e.parentNode)||e))){if(c.splice(u,1),!(t=o.length&&yt(c)))return R.apply(i,o),i;break}}return(f||a(t,d))(o,e,!y,i,!e||J.test(t)&&ft(e.parentNode)||e),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!h,p(),n.sortDetached=at((function(t){return 1&t.compareDocumentPosition(f.createElement("div"))})),at((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&at((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue})),at((function(t){return null==t.getAttribute("disabled")}))||ut(L,(function(t,e,n){var r;return n?void 0:!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),it}(t);f.find=b,f.expr=b.selectors,f.expr[":"]=f.expr.pseudos,f.uniqueSort=f.unique=b.uniqueSort,f.text=b.getText,f.isXMLDoc=b.isXML,f.contains=b.contains;var w=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&f(t).is(n))break;r.push(t)}return r},_=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},E=f.expr.match.needsContext,T=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function I(t,e,n){if(f.isFunction(e))return f.grep(t,(function(t,r){return!!e.call(t,r,t)!==n}));if(e.nodeType)return f.grep(t,(function(t){return t===e!==n}));if("string"==typeof e){if(S.test(e))return f.filter(e,t,n);e=f.filter(e,t)}return f.grep(t,(function(t){return f.inArray(t,e)>-1!==n}))}f.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?f.find.matchesSelector(r,t)?[r]:[]:f.find.matches(t,f.grep(e,(function(t){return 1===t.nodeType})))},f.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(f(t).filter((function(){for(e=0;i>e;e++)if(f.contains(r[e],this))return!0})));for(e=0;i>e;e++)f.find(t,r[e],n);return(n=this.pushStack(i>1?f.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&E.test(t)?f(t):t||[],!1).length}});var C,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||C,"string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:k.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(f.merge(this,f.parseHTML(i[1],(e=e instanceof f?e[0]:e)&&e.nodeType?e.ownerDocument||e:r,!0)),T.test(i[1])&&f.isPlainObject(e))for(i in e)f.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((o=r.getElementById(i[2]))&&o.parentNode){if(o.id!==i[2])return C.find(t);this.length=1,this[0]=o}return this.context=r,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):f.isFunction(t)?void 0!==n.ready?n.ready(t):t(f):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),f.makeArray(t,this))}).prototype=f.fn,C=f(r);var A=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function x(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}f.fn.extend({has:function(t){var e,n=f(t,this),r=n.length;return this.filter((function(){for(e=0;r>e;e++)if(f.contains(this,n[e]))return!0}))},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=E.test(t)||"string"!=typeof t?f(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&f.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?f.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?f.inArray(this[0],f(t)):f.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),f.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return w(t,"parentNode")},parentsUntil:function(t,e,n){return w(t,"parentNode",n)},next:function(t){return x(t,"nextSibling")},prev:function(t){return x(t,"previousSibling")},nextAll:function(t){return w(t,"nextSibling")},prevAll:function(t){return w(t,"previousSibling")},nextUntil:function(t,e,n){return w(t,"nextSibling",n)},prevUntil:function(t,e,n){return w(t,"previousSibling",n)},siblings:function(t){return _((t.parentNode||{}).firstChild,t)},children:function(t){return _(t.firstChild)},contents:function(t){return f.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:f.merge([],t.childNodes)}},(function(t,e){f.fn[t]=function(n,r){var i=f.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=f.filter(r,i)),this.length>1&&(N[t]||(i=f.uniqueSort(i)),A.test(t)&&(i=i.reverse())),this.pushStack(i)}}));var D,R,P=/\S+/g;function O(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",L),t.removeEventListener("load",L)):(r.detachEvent("onreadystatechange",L),t.detachEvent("onload",L))}function L(){(r.addEventListener||"load"===t.event.type||"complete"===r.readyState)&&(O(),f.ready())}for(R in f.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return f.each(t.match(P)||[],(function(t,n){e[n]=!0})),e}(t):f.extend({},t);var e,n,r,i,o=[],s=[],a=-1,u=function(){for(i=t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){f.each(n,(function(n,r){f.isFunction(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==f.type(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return f.each(arguments,(function(t,e){for(var n;(n=f.inArray(e,o,n))>-1;)o.splice(n,1),a>=n&&a--})),this},has:function(t){return t?f.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=!0,n||c.disable(),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},f.extend({Deferred:function(t){var e=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return f.Deferred((function(n){f.each(e,(function(e,o){var s=f.isFunction(t[e])&&t[e];i[o[1]]((function(){var t=s&&s.apply(this,arguments);t&&f.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,s?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?f.extend(t,r):r}},i={};return r.pipe=r.then,f.each(e,(function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add((function(){n=a}),e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith})),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,o=0,s=i.call(arguments),a=s.length,u=1!==a||t&&f.isFunction(t.promise)?a:0,c=1===u?t:f.Deferred(),l=function(t,n,r){return function(o){n[t]=this,r[t]=arguments.length>1?i.call(arguments):o,r===e?c.notifyWith(n,r):--u||c.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>o;o++)s[o]&&f.isFunction(s[o].promise)?s[o].promise().progress(l(o,n,e)).done(l(o,r,s)).fail(c.reject):--u;return u||c.resolveWith(r,s),c.promise()}}),f.fn.ready=function(t){return f.ready.promise().done(t),this},f.extend({isReady:!1,readyWait:1,holdReady:function(t){t?f.readyWait++:f.ready(!0)},ready:function(t){(!0===t?--f.readyWait:f.isReady)||(f.isReady=!0,!0!==t&&--f.readyWait>0||(D.resolveWith(r,[f]),f.fn.triggerHandler&&(f(r).triggerHandler("ready"),f(r).off("ready"))))}}),f.ready.promise=function(e){if(!D)if(D=f.Deferred(),"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll)t.setTimeout(f.ready);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",L),t.addEventListener("load",L);else{r.attachEvent("onreadystatechange",L),t.attachEvent("onload",L);var n=!1;try{n=null==t.frameElement&&r.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!f.isReady){try{n.doScroll("left")}catch(e){return t.setTimeout(r,50)}O(),f.ready()}}()}return D.promise(e)},f.ready.promise(),f(h))break;h.ownFirst="0"===R,h.inlineBlockNeedsLayout=!1,f((function(){var t,e,n,i;(n=r.getElementsByTagName("body")[0])&&n.style&&(e=r.createElement("div"),(i=r.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",h.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))})),function(){var t=r.createElement("div");h.deleteExpando=!0;try{delete t.test}catch(e){h.deleteExpando=!1}t=null}();var M=function(t){var e=f.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},F=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/([A-Z])/g;function j(t,e,n){if(void 0===n&&1===t.nodeType){var r="data-"+e.replace(U,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:F.test(n)?f.parseJSON(n):n)}catch(i){}f.data(t,e,n)}else n=void 0}return n}function q(t){var e;for(e in t)if(("data"!==e||!f.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function B(t,e,r,i){if(M(t)){var o,s,a=f.expando,u=t.nodeType,c=u?f.cache:t,l=u?t[a]:t[a]&&a;if(l&&c[l]&&(i||c[l].data)||void 0!==r||"string"!=typeof e)return l||(l=u?t[a]=n.pop()||f.guid++:a),c[l]||(c[l]=u?{}:{toJSON:f.noop}),"object"!=typeof e&&"function"!=typeof e||(i?c[l]=f.extend(c[l],e):c[l].data=f.extend(c[l].data,e)),s=c[l],i||(s.data||(s.data={}),s=s.data),void 0!==r&&(s[f.camelCase(e)]=r),"string"==typeof e?null==(o=s[e])&&(o=s[f.camelCase(e)]):o=s,o}}function V(t,e,n){if(M(t)){var r,i,o=t.nodeType,s=o?f.cache:t,a=o?t[f.expando]:f.expando;if(s[a]){if(e&&(r=n?s[a]:s[a].data)){i=(e=f.isArray(e)?e.concat(f.map(e,f.camelCase)):e in r?[e]:(e=f.camelCase(e))in r?[e]:e.split(" ")).length;for(;i--;)delete r[e[i]];if(n?!q(r):!f.isEmptyObject(r))return}(n||(delete s[a].data,q(s[a])))&&(o?f.cleanData([t],!0):h.deleteExpando||s!=s.window?delete s[a]:s[a]=void 0)}}}f.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?f.cache[t[f.expando]]:t[f.expando])&&!q(t)},data:function(t,e,n){return B(t,e,n)},removeData:function(t,e){return V(t,e)},_data:function(t,e,n){return B(t,e,n,!0)},_removeData:function(t,e){return V(t,e,!0)}}),f.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=f.data(o),1===o.nodeType&&!f._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&j(o,r=f.camelCase(r.slice(5)),i[r]);f._data(o,"parsedAttrs",!0)}return i}return"object"==typeof t?this.each((function(){f.data(this,t)})):arguments.length>1?this.each((function(){f.data(this,t,e)})):o?j(o,t,f.data(o,t)):void 0},removeData:function(t){return this.each((function(){f.removeData(this,t)}))}}),f.extend({queue:function(t,e,n){var r;return t?(r=f._data(t,e=(e||"fx")+"queue"),n&&(!r||f.isArray(n)?r=f._data(t,e,f.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){var n=f.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=f._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){f.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return f._data(t,n)||f._data(t,n,{empty:f.Callbacks("once memory").add((function(){f._removeData(t,e+"queue"),f._removeData(t,n)}))})}}),f.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?f.queue(this[0],t):void 0===e?this:this.each((function(){var n=f.queue(this,t,e);f._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&f.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){f.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=f.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=f._data(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}}),function(){var t;h.shrinkWrapBlocks=function(){return null!=t?t:(t=!1,(n=r.getElementsByTagName("body")[0])&&n.style?(e=r.createElement("div"),(i=r.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(r.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0);var e,n,i}}();var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i"),z=["Top","Right","Bottom","Left"],G=function(t,e){return"none"===f.css(t=e||t,"display")||!f.contains(t.ownerDocument,t)};function K(t,e,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return f.css(t,e,"")},u=a(),c=n&&n[3]||(f.cssNumber[e]?"":"px"),l=(f.cssNumber[e]||"px"!==c&&+u)&&H.exec(f.css(t,e));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do{f.style(t,e,(l/=o=o||".5")+c)}while(o!==(o=a()/u)&&1!==o&&--s)}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var Q=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===f.type(n))for(a in i=!0,n)Q(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,f.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(f(t),n)})),e))for(;u>a;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},Y=/^(?:checkbox|radio)$/i,X=/<([\w:-]+)/,$=/^$|\/(?:java|ecma)script/i,J=/^\s+/,Z="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function tt(t){var e=Z.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}!function(){var t=r.createElement("div"),e=r.createDocumentFragment(),n=r.createElement("input");t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h.leadingWhitespace=3===t.firstChild.nodeType,h.tbody=!t.getElementsByTagName("tbody").length,h.htmlSerialize=!!t.getElementsByTagName("link").length,h.html5Clone="<:nav></:nav>"!==r.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),h.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),(n=r.createElement("input")).setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),h.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,h.noCloneEvent=!!t.addEventListener,t[f.expando]=1,h.attributes=!t.getAttribute(f.expando)}();var et={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:h.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};function nt(t,e){var n,r,i=0,o=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(r=n[i]);i++)!e||f.nodeName(r,e)?o.push(r):f.merge(o,nt(r,e));return void 0===e||e&&f.nodeName(t,e)?f.merge([t],o):o}function rt(t,e){for(var n,r=0;null!=(n=t[r]);r++)f._data(n,"globalEval",!e||f._data(e[r],"globalEval"))}et.optgroup=et.option,et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td;var it=/<|&#?\w+;/,ot=/<tbody/i;function st(t){Y.test(t.type)&&(t.defaultChecked=t.checked)}function at(t,e,n,r,i){for(var o,s,a,u,c,l,p,d=t.length,y=tt(e),m=[],v=0;d>v;v++)if((s=t[v])||0===s)if("object"===f.type(s))f.merge(m,s.nodeType?[s]:s);else if(it.test(s)){for(u=u||y.appendChild(e.createElement("div")),c=(X.exec(s)||["",""])[1].toLowerCase(),u.innerHTML=(p=et[c]||et._default)[1]+f.htmlPrefilter(s)+p[2],o=p[0];o--;)u=u.lastChild;if(!h.leadingWhitespace&&J.test(s)&&m.push(e.createTextNode(J.exec(s)[0])),!h.tbody)for(o=(s="table"!==c||ot.test(s)?"<table>"!==p[1]||ot.test(s)?0:u:u.firstChild)&&s.childNodes.length;o--;)f.nodeName(l=s.childNodes[o],"tbody")&&!l.childNodes.length&&s.removeChild(l);for(f.merge(m,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=y.lastChild}else m.push(e.createTextNode(s));for(u&&y.removeChild(u),h.appendChecked||f.grep(nt(m,"input"),st),v=0;s=m[v++];)if(r&&f.inArray(s,r)>-1)i&&i.push(s);else if(a=f.contains(s.ownerDocument,s),u=nt(y.appendChild(s),"script"),a&&rt(u),n)for(o=0;s=u[o++];)$.test(s.type||"")&&n.push(s);return u=null,y}!function(){var e,n,i=r.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})(h[e]=(n="on"+e)in t)||(i.setAttribute(n,"t"),h[e]=!1===i.attributes[n].expando);i=null}();var ut=/^(?:input|select|textarea)$/i,ct=/^key/,lt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ht=/^(?:focusinfocus|focusoutblur)$/,pt=/^([^.]*)(?:\.(.+)|)/;function ft(){return!0}function dt(){return!1}function yt(){try{return r.activeElement}catch(t){}}function mt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)mt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=dt;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return f().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=f.guid++)),t.each((function(){f.event.add(this,e,i,r,n)}))}f.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,p,d,y,m,v=f._data(t);if(v){for(n.handler&&(n=(u=n).handler,i=u.selector),n.guid||(n.guid=f.guid++),(s=v.events)||(s=v.events={}),(l=v.handle)||((l=v.handle=function(t){return void 0===f||t&&f.event.triggered===t.type?void 0:f.event.dispatch.apply(l.elem,arguments)}).elem=t),a=(e=(e||"").match(P)||[""]).length;a--;)d=m=(o=pt.exec(e[a])||[])[1],y=(o[2]||"").split(".").sort(),d&&(c=f.event.special[d]||{},c=f.event.special[d=(i?c.delegateType:c.bindType)||d]||{},h=f.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&f.expr.match.needsContext.test(i),namespace:y.join(".")},u),(p=s[d])||((p=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,r,y,l)||(t.addEventListener?t.addEventListener(d,l,!1):t.attachEvent&&t.attachEvent("on"+d,l))),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,h):p.push(h),f.event.global[d]=!0);t=null}},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,p,d,y,m,v=f.hasData(t)&&f._data(t);if(v&&(l=v.events)){for(c=(e=(e||"").match(P)||[""]).length;c--;)if(d=m=(a=pt.exec(e[c])||[])[1],y=(a[2]||"").split(".").sort(),d){for(h=f.event.special[d]||{},p=l[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;o--;)s=p[o],!i&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(p.splice(o,1),s.selector&&p.delegateCount--,h.remove&&h.remove.call(t,s));u&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,y,v.handle)||f.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)f.event.remove(t,d+e[c],n,r,!0);f.isEmptyObject(l)&&(delete v.handle,f._removeData(t,"events"))}},trigger:function(e,n,i,o){var s,a,u,c,h,p,d,y=[i||r],m=l.call(e,"type")?e.type:e,v=l.call(e,"namespace")?e.namespace.split("."):[];if(u=p=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!ht.test(m+f.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),a=m.indexOf(":")<0&&"on"+m,(e=e[f.expando]?e:new f.Event(m,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:f.makeArray(n,[e]),h=f.event.special[m]||{},o||!h.trigger||!1!==h.trigger.apply(i,n))){if(!o&&!h.noBubble&&!f.isWindow(i)){for(ht.test((c=h.delegateType||m)+m)||(u=u.parentNode);u;u=u.parentNode)y.push(u),p=u;p===(i.ownerDocument||r)&&y.push(p.defaultView||p.parentWindow||t)}for(d=0;(u=y[d++])&&!e.isPropagationStopped();)e.type=d>1?c:h.bindType||m,(s=(f._data(u,"events")||{})[e.type]&&f._data(u,"handle"))&&s.apply(u,n),(s=a&&u[a])&&s.apply&&M(u)&&(e.result=s.apply(u,n),!1===e.result&&e.preventDefault());if(e.type=m,!o&&!e.isDefaultPrevented()&&(!h._default||!1===h._default.apply(y.pop(),n))&&M(i)&&a&&i[m]&&!f.isWindow(i)){(p=i[a])&&(i[a]=null),f.event.triggered=m;try{i[m]()}catch(g){}f.event.triggered=void 0,p&&(i[a]=p)}return e.result}},dispatch:function(t){t=f.event.fix(t);var e,n,r,o,s,a=[],u=i.call(arguments),c=(f._data(this,"events")||{})[t.type]||[],l=f.event.special[t.type]||{};if(u[0]=t,t.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,t)){for(a=f.event.handlers.call(this,t,c),e=0;(o=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,n=0;(s=o.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(s.namespace)||(t.handleObj=s,t.data=s.data,void 0!==(r=((f.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==t.type)){for(r=[],n=0;a>n;n++)void 0===r[i=(o=e[n]).selector+" "]&&(r[i]=o.needsContext?f(i,this).index(u)>-1:f.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[f.expando])return t;var e,n,i,o=t.type,s=t,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=lt.test(o)?this.mouseHooks:ct.test(o)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new f.Event(s),e=i.length;e--;)t[n=i[e]]=s[n];return t.target||(t.target=s.srcElement||r),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,s=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||r).body,t.pageX=e.clientX+((o=i.documentElement)&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==yt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===yt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return f.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return f.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var r=f.extend(new f.Event,n,{type:t,isSimulated:!0});f.event.trigger(r,null,e),r.isDefaultPrevented()&&n.preventDefault()}},f.removeEvent=r.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var r="on"+e;t.detachEvent&&(void 0===t[r]&&(t[r]=null),t.detachEvent(r,n))},f.Event=function(t,e){return this instanceof f.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?ft:dt):this.type=t,e&&f.extend(this,e),this.timeStamp=t&&t.timeStamp||f.now(),void(this[f.expando]=!0)):new f.Event(t,e)},f.Event.prototype={constructor:f.Event,isDefaultPrevented:dt,isPropagationStopped:dt,isImmediatePropagationStopped:dt,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=ft,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=ft,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=ft,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){f.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||f.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),h.submit||(f.event.special.submit={setup:function(){return!f.nodeName(this,"form")&&void f.event.add(this,"click._submit keypress._submit",(function(t){var e=t.target,n=f.nodeName(e,"input")||f.nodeName(e,"button")?f.prop(e,"form"):void 0;n&&!f._data(n,"submit")&&(f.event.add(n,"submit._submit",(function(t){t._submitBubble=!0})),f._data(n,"submit",!0))}))},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&f.event.simulate("submit",this.parentNode,t))},teardown:function(){return!f.nodeName(this,"form")&&void f.event.remove(this,"._submit")}}),h.change||(f.event.special.change={setup:function(){return ut.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",(function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)})),f.event.add(this,"click._change",(function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),f.event.simulate("change",this,t)}))),!1):void f.event.add(this,"beforeactivate._change",(function(t){var e=t.target;ut.test(e.nodeName)&&!f._data(e,"change")&&(f.event.add(e,"change._change",(function(t){!this.parentNode||t.isSimulated||t.isTrigger||f.event.simulate("change",this.parentNode,t)})),f._data(e,"change",!0))}))},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return f.event.remove(this,"._change"),!ut.test(this.nodeName)}}),h.focusin||f.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){f.event.simulate(e,t.target,f.event.fix(t))};f.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=f._data(r,e);i||r.addEventListener(t,n,!0),f._data(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=f._data(r,e)-1;i?f._data(r,e,i):(r.removeEventListener(t,n,!0),f._removeData(r,e))}}})),f.fn.extend({on:function(t,e,n,r){return mt(this,t,e,n,r)},one:function(t,e,n,r){return mt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,f(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=dt),this.each((function(){f.event.remove(this,t,n,e)}))},trigger:function(t,e){return this.each((function(){f.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];return n?f.event.trigger(t,e,n,!0):void 0}});var vt=/ jQuery\d+="(?:null|\d+)"/g,gt=new RegExp("<(?:"+Z+")[\\s/>]","i"),bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wt=/<script|<style|<link/i,_t=/checked\s*(?:[^=]|=\s*.checked.)/i,Et=/^true\/(.*)/,Tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,St=tt(r).appendChild(r.createElement("div"));function It(t,e){return f.nodeName(t,"table")&&f.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function Ct(t){return t.type=(null!==f.find.attr(t,"type"))+"/"+t.type,t}function kt(t){var e=Et.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function At(t,e){if(1===e.nodeType&&f.hasData(t)){var n,r,i,o=f._data(t),s=f._data(e,o),a=o.events;if(a)for(n in delete s.handle,s.events={},a)for(r=0,i=a[n].length;i>r;r++)f.event.add(e,n,a[n][r]);s.data&&(s.data=f.extend({},s.data))}}function Nt(t,e){var n,r,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!h.noCloneEvent&&e[f.expando]){for(r in(i=f._data(e)).events)f.removeEvent(e,r,i.handle);e.removeAttribute(f.expando)}"script"===n&&e.text!==t.text?(Ct(e).text=t.text,kt(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),h.html5Clone&&t.innerHTML&&!f.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Y.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function xt(t,e,n,r){e=o.apply([],e);var i,s,a,u,c,l,p=0,d=t.length,y=d-1,m=e[0],v=f.isFunction(m);if(v||d>1&&"string"==typeof m&&!h.checkClone&&_t.test(m))return t.each((function(i){var o=t.eq(i);v&&(e[0]=m.call(this,i,o.html())),xt(o,e,n,r)}));if(d&&(i=(l=at(e,t[0].ownerDocument,!1,t,r)).firstChild,1===l.childNodes.length&&(l=i),i||r)){for(a=(u=f.map(nt(l,"script"),Ct)).length;d>p;p++)s=l,p!==y&&(s=f.clone(s,!0,!0),a&&f.merge(u,nt(s,"script"))),n.call(t[p],s,p);if(a)for(c=u[u.length-1].ownerDocument,f.map(u,kt),p=0;a>p;p++)$.test((s=u[p]).type||"")&&!f._data(s,"globalEval")&&f.contains(c,s)&&(s.src?f._evalUrl&&f._evalUrl(s.src):f.globalEval((s.text||s.textContent||s.innerHTML||"").replace(Tt,"")));l=i=null}return t}function Dt(t,e,n){for(var r,i=e?f.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||f.cleanData(nt(r)),r.parentNode&&(n&&f.contains(r.ownerDocument,r)&&rt(nt(r,"script")),r.parentNode.removeChild(r));return t}f.extend({htmlPrefilter:function(t){return t.replace(bt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,s,a,u=f.contains(t.ownerDocument,t);if(h.html5Clone||f.isXMLDoc(t)||!gt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(St.innerHTML=t.outerHTML,St.removeChild(o=St.firstChild)),!(h.noCloneEvent&&h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||f.isXMLDoc(t)))for(r=nt(o),a=nt(t),s=0;null!=(i=a[s]);++s)r[s]&&Nt(i,r[s]);if(e)if(n)for(a=a||nt(t),r=r||nt(o),s=0;null!=(i=a[s]);s++)At(i,r[s]);else At(t,o);return(r=nt(o,"script")).length>0&&rt(r,!u&&nt(t,"script")),r=a=i=null,o},cleanData:function(t,e){for(var r,i,o,s,a=0,u=f.expando,c=f.cache,l=h.attributes,p=f.event.special;null!=(r=t[a]);a++)if((e||M(r))&&(s=(o=r[u])&&c[o])){if(s.events)for(i in s.events)p[i]?f.event.remove(r,i):f.removeEvent(r,i,s.handle);c[o]&&(delete c[o],l||void 0===r.removeAttribute?r[u]=void 0:r.removeAttribute(u),n.push(o))}}}),f.fn.extend({domManip:xt,detach:function(t){return Dt(this,t,!0)},remove:function(t){return Dt(this,t)},text:function(t){return Q(this,(function(t){return void 0===t?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(t))}),null,t,arguments.length)},append:function(){return xt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||It(this,t).appendChild(t)}))},prepend:function(){return xt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=It(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return xt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return xt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&f.cleanData(nt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&f.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return f.clone(this,t,e)}))},html:function(t){return Q(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(vt,""):void 0;if("string"==typeof t&&!wt.test(t)&&(h.htmlSerialize||!gt.test(t))&&(h.leadingWhitespace||!J.test(t))&&!et[(X.exec(t)||["",""])[1].toLowerCase()]){t=f.htmlPrefilter(t);try{for(;r>n;n++)1===(e=this[n]||{}).nodeType&&(f.cleanData(nt(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return xt(this,arguments,(function(e){var n=this.parentNode;f.inArray(this,t)<0&&(f.cleanData(nt(this)),n&&n.replaceChild(e,this))}),t)}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){f.fn[t]=function(t){for(var n,r=0,i=[],o=f(t),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),f(o[r])[e](n),s.apply(i,n.get());return this.pushStack(i)}}));var Rt,Pt={HTML:"block",BODY:"block"};function Ot(t,e){var n=f(e.createElement(t)).appendTo(e.body),r=f.css(n[0],"display");return n.detach(),r}function Lt(t){var e=r,n=Pt[t];return n||("none"!==(n=Ot(t,e))&&n||((e=((Rt=(Rt||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||Rt[0].contentDocument).document).write(),e.close(),n=Ot(t,e),Rt.detach()),Pt[t]=n),n}var Mt=/^margin/,Ft=new RegExp("^("+W+")(?!px)[a-z%]+$","i"),Ut=function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=s[o];return i},jt=r.documentElement;!function(){var e,n,i,o,s,a,u=r.createElement("div"),c=r.createElement("div");if(c.style){function l(){var l,h,p=r.documentElement;p.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",e=i=a=!1,n=s=!0,t.getComputedStyle&&(h=t.getComputedStyle(c),e="1%"!==(h||{}).top,a="2px"===(h||{}).marginLeft,i="4px"===(h||{width:"4px"}).width,c.style.marginRight="50%",n="4px"===(h||{marginRight:"4px"}).marginRight,(l=c.appendChild(r.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",c.style.width="1px",s=!parseFloat((t.getComputedStyle(l)||{}).marginRight),c.removeChild(l)),c.style.display="none",(o=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(l=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",o=0===l[0].offsetHeight)),p.removeChild(u)}c.style.cssText="float:left;opacity:.5",h.opacity="0.5"===c.style.opacity,h.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,(u=r.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),h.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,f.extend(h,{reliableHiddenOffsets:function(){return null==e&&l(),o},boxSizingReliable:function(){return null==e&&l(),i},pixelMarginRight:function(){return null==e&&l(),n},pixelPosition:function(){return null==e&&l(),e},reliableMarginRight:function(){return null==e&&l(),s},reliableMarginLeft:function(){return null==e&&l(),a}})}}();var qt,Bt,Vt=/^(top|right|bottom|left)$/;function Wt(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}t.getComputedStyle?(qt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Bt=function(t,e,n){var r,i,o,s,a=t.style;return""!==(s=(n=n||qt(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==s||f.contains(t.ownerDocument,t)||(s=f.style(t,e)),n&&!h.pixelMarginRight()&&Ft.test(s)&&Mt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0===s?s:s+""}):jt.currentStyle&&(qt=function(t){return t.currentStyle},Bt=function(t,e,n){var r,i,o,s,a=t.style;return null==(s=(n=n||qt(t))?n[e]:void 0)&&a&&a[e]&&(s=a[e]),Ft.test(s)&&!Vt.test(e)&&(r=a.left,(o=(i=t.runtimeStyle)&&i.left)&&(i.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=r,o&&(i.left=o)),void 0===s?s:s+""||"auto"});var Ht=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/i,Gt=/^(none|table(?!-c[ea]).+)/,Kt=new RegExp("^("+W+")(.*)$","i"),Qt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"],$t=r.createElement("div").style;function Jt(t){if(t in $t)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=Xt.length;n--;)if((t=Xt[n]+e)in $t)return t}function Zt(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)(r=t[s]).style&&(o[s]=f._data(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&G(r)&&(o[s]=f._data(r,"olddisplay",Lt(r.nodeName)))):(i=G(r),(n&&"none"!==n||!i)&&f._data(r,"olddisplay",i?n:f.css(r,"display"))));for(s=0;a>s;s++)(r=t[s]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function te(t,e,n){var r=Kt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function ee(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=f.css(t,n+z[o],!0,i)),r?("content"===n&&(s-=f.css(t,"padding"+z[o],!0,i)),"margin"!==n&&(s-=f.css(t,"border"+z[o]+"Width",!0,i))):(s+=f.css(t,"padding"+z[o],!0,i),"padding"!==n&&(s+=f.css(t,"border"+z[o]+"Width",!0,i)));return s}function ne(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=qt(t),s=h.boxSizing&&"border-box"===f.css(t,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=Bt(t,e,o))||null==i)&&(i=t.style[e]),Ft.test(i))return i;r=s&&(h.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+ee(t,e,n||(s?"border":"content"),r,o)+"px"}function re(t,e,n,r,i){return new re.prototype.init(t,e,n,r,i)}f.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Bt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:h.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=f.camelCase(e),u=t.style;if(e=f.cssProps[a]||(f.cssProps[a]=Jt(a)||a),s=f.cssHooks[e]||f.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e];if("string"==(o=typeof n)&&(i=H.exec(n))&&i[1]&&(n=K(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(f.cssNumber[a]?"":"px")),h.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,r)))))try{u[e]=n}catch(c){}}},css:function(t,e,n,r){var i,o,s,a=f.camelCase(e);return e=f.cssProps[a]||(f.cssProps[a]=Jt(a)||a),(s=f.cssHooks[e]||f.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=Bt(t,e,r)),"normal"===o&&e in Yt&&(o=Yt[e]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),f.each(["height","width"],(function(t,e){f.cssHooks[e]={get:function(t,n,r){return n?Gt.test(f.css(t,"display"))&&0===t.offsetWidth?Ut(t,Qt,(function(){return ne(t,e,r)})):ne(t,e,r):void 0},set:function(t,n,r){var i=r&&qt(t);return te(0,n,r?ee(t,e,r,h.boxSizing&&"border-box"===f.css(t,"boxSizing",!1,i),i):0)}}})),h.opacity||(f.cssHooks.opacity={get:function(t,e){return zt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,r=t.currentStyle,i=f.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===f.trim(o.replace(Ht,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||r&&!r.filter)||(n.filter=Ht.test(o)?o.replace(Ht,i):o+" "+i)}}),f.cssHooks.marginRight=Wt(h.reliableMarginRight,(function(t,e){return e?Ut(t,{display:"inline-block"},Bt,[t,"marginRight"]):void 0})),f.cssHooks.marginLeft=Wt(h.reliableMarginLeft,(function(t,e){return e?(parseFloat(Bt(t,"marginLeft"))||(f.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})):0))+"px":void 0})),f.each({margin:"",padding:"",border:"Width"},(function(t,e){f.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+z[r]+e]=o[r]||o[r-2]||o[0];return i}},Mt.test(t)||(f.cssHooks[t+e].set=te)})),f.fn.extend({css:function(t,e){return Q(this,(function(t,e,n){var r,i,o={},s=0;if(f.isArray(e)){for(r=qt(t),i=e.length;i>s;s++)o[e[s]]=f.css(t,e[s],!1,r);return o}return void 0!==n?f.style(t,e,n):f.css(t,e)}),t,e,arguments.length>1)},show:function(){return Zt(this,!0)},hide:function(){return Zt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){G(this)?f(this).show():f(this).hide()}))}}),f.Tween=re,(re.prototype={constructor:re,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||f.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(f.cssNumber[n]?"":"px")},cur:function(){var t=re.propHooks[this.prop];return t&&t.get?t.get(this):re.propHooks._default.get(this)},run:function(t){var e,n=re.propHooks[this.prop];return this.pos=e=this.options.duration?f.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):re.propHooks._default.set(this),this}}).init.prototype=re.prototype,(re.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=f.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){f.fx.step[t.prop]?f.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[f.cssProps[t.prop]]&&!f.cssHooks[t.prop]?t.elem[t.prop]=t.now:f.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=re.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},f.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},f.fx=re.prototype.init,f.fx.step={};var ie,oe,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ue(){return t.setTimeout((function(){ie=void 0})),ie=f.now()}function ce(t,e){var n,r={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)r["margin"+(n=z[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function le(t,e,n){for(var r,i=(he.tweeners[e]||[]).concat(he.tweeners["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function he(t,e,n){var r,i,o=0,s=he.prefilters.length,a=f.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=ie||ue(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,s=c.tweens.length;s>o;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),1>r&&s?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:f.extend({},e),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},n),originalProperties:e,originalOptions:n,startTime:ie||ue(),duration:n.duration,tweens:[],createTween:function(e,n){var r=f.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=f.camelCase(n)],f.isArray(o=t[n])&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=f.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);s>o;o++)if(r=he.prefilters[o].call(c,t,l,c.opts))return f.isFunction(r.stop)&&(f._queueHooks(c.elem,c.opts.queue).stop=f.proxy(r.stop,r)),r;return f.map(l,le,c),f.isFunction(c.opts.start)&&c.opts.start.call(t,c),f.fx.timer(f.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}f.Animation=f.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return K(n.elem,t,H.exec(e),n),n}]},tweener:function(t,e){f.isFunction(t)?(e=t,t=["*"]):t=t.match(P);for(var n,r=0,i=t.length;i>r;r++)(he.tweeners[n=t[r]]=he.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,l=this,p={},d=t.style,y=t.nodeType&&G(t),m=f._data(t,"fxshow");for(r in n.queue||(null==(a=f._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,l.always((function(){l.always((function(){a.unqueued--,f.queue(t,"fx").length||a.empty.fire()}))}))),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(c=f.css(t,"display"))?f._data(t,"olddisplay")||Lt(t.nodeName):c)&&"none"===f.css(t,"float")&&(h.inlineBlockNeedsLayout&&"inline"!==Lt(t.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.shrinkWrapBlocks()||l.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),e)if(se.exec(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;y=!0}p[r]=m&&m[r]||f.style(t,r)}else c=void 0;if(f.isEmptyObject(p))"inline"===("none"===c?Lt(t.nodeName):c)&&(d.display=c);else for(r in m?"hidden"in m&&(y=m.hidden):m=f._data(t,"fxshow",{}),o&&(m.hidden=!y),y?f(t).show():l.done((function(){f(t).hide()})),l.done((function(){var e;for(e in f._removeData(t,"fxshow"),p)f.style(t,e,p[e])})),p)s=le(y?m[r]:0,r,l),r in m||(m[r]=s.start,y&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),f.speed=function(t,e,n){var r=t&&"object"==typeof t?f.extend({},t):{complete:n||!n&&e||f.isFunction(t)&&t,duration:t,easing:n&&e||e&&!f.isFunction(e)&&e};return r.duration=f.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in f.fx.speeds?f.fx.speeds[r.duration]:f.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){f.isFunction(r.old)&&r.old.call(this),r.queue&&f.dequeue(this,r.queue)},r},f.fn.extend({fadeTo:function(t,e,n,r){return this.filter(G).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=f.isEmptyObject(t),o=f.speed(e,n,r),s=function(){var e=he(this,f.extend({},t),o);(i||f._data(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=f.timers,s=f._data(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ae.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||f.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=f._data(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=f.timers,s=r?r.length:0;for(n.finish=!0,f.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),f.each(["toggle","show","hide"],(function(t,e){var n=f.fn[e];f.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ce(e,!0),t,r,i)}})),f.each({slideDown:ce("show"),slideUp:ce("hide"),slideToggle:ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){f.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),f.timers=[],f.fx.tick=function(){var t,e=f.timers,n=0;for(ie=f.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||f.fx.stop(),ie=void 0},f.fx.timer=function(t){f.timers.push(t),t()?f.fx.start():f.timers.pop()},f.fx.interval=13,f.fx.start=function(){oe||(oe=t.setInterval(f.fx.tick,f.fx.interval))},f.fx.stop=function(){t.clearInterval(oe),oe=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(e,n){return e=f.fx&&f.fx.speeds[e]||e,this.queue(n=n||"fx",(function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}}))},function(){var t,e=r.createElement("input"),n=r.createElement("div"),i=r.createElement("select"),o=i.appendChild(r.createElement("option"));(n=r.createElement("div")).setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=n.getElementsByTagName("a")[0],e.setAttribute("type","checkbox"),n.appendChild(e),(t=n.getElementsByTagName("a")[0]).style.cssText="top:1px",h.getSetAttribute="t"!==n.className,h.style=/top/.test(t.getAttribute("style")),h.hrefNormalized="/a"===t.getAttribute("href"),h.checkOn=!!e.value,h.optSelected=o.selected,h.enctype=!!r.createElement("form").enctype,i.disabled=!0,h.optDisabled=!o.disabled,(e=r.createElement("input")).setAttribute("value",""),h.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),h.radioValue="t"===e.value}();var pe=/\r/g,fe=/[\x20\t\r\n\f]+/g;f.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=f.isFunction(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,f(this).val()):t)?i="":"number"==typeof i?i+="":f.isArray(i)&&(i=f.map(i,(function(t){return null==t?"":t+""}))),(e=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=f.valHooks[i.type]||f.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(pe,""):null==n?"":n:void 0}}),f.extend({valHooks:{option:{get:function(t){var e=f.find.attr(t,"value");return null!=e?e:f.trim(f.text(t)).replace(fe," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(((n=r[u]).selected||u===i)&&(h.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!f.nodeName(n.parentNode,"optgroup"))){if(e=f(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=f.makeArray(e),s=i.length;s--;)if(f.inArray(f.valHooks.option.get(r=i[s]),o)>-1)try{r.selected=n=!0}catch(a){}else r.selected=!1;return n||(t.selectedIndex=-1),i}}}}),f.each(["radio","checkbox"],(function(){f.valHooks[this]={set:function(t,e){return f.isArray(e)?t.checked=f.inArray(f(t).val(),e)>-1:void 0}},h.checkOn||(f.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var de,ye,me=f.expr.attrHandle,ve=/^(?:checked|selected)$/i,ge=h.getSetAttribute,be=h.input;f.fn.extend({attr:function(t,e){return Q(this,f.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){f.removeAttr(this,t)}))}}),f.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?f.prop(t,e,n):(1===o&&f.isXMLDoc(t)||(e=e.toLowerCase(),i=f.attrHooks[e]||(f.expr.match.bool.test(e)?ye:de)),void 0!==n?null===n?void f.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=f.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&f.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(P);if(o&&1===t.nodeType)for(;n=o[i++];)r=f.propFix[n]||n,f.expr.match.bool.test(n)?be&&ge||!ve.test(n)?t[r]=!1:t[f.camelCase("default-"+n)]=t[r]=!1:f.attr(t,n,""),t.removeAttribute(ge?n:r)}}),ye={set:function(t,e,n){return!1===e?f.removeAttr(t,n):be&&ge||!ve.test(n)?t.setAttribute(!ge&&f.propFix[n]||n,n):t[f.camelCase("default-"+n)]=t[n]=!0,n}},f.each(f.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=me[e]||f.find.attr;me[e]=be&&ge||!ve.test(e)?function(t,e,r){var i,o;return r||(o=me[e],me[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,me[e]=o),i}:function(t,e,n){return n?void 0:t[f.camelCase("default-"+e)]?e.toLowerCase():null}})),be&&ge||(f.attrHooks.value={set:function(t,e,n){return f.nodeName(t,"input")?void(t.defaultValue=e):de&&de.set(t,e,n)}}),ge||(de={set:function(t,e,n){var r=t.getAttributeNode(n);return r||t.setAttributeNode(r=t.ownerDocument.createAttribute(n)),r.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},me.id=me.name=me.coords=function(t,e,n){var r;return n?void 0:(r=t.getAttributeNode(e))&&""!==r.value?r.value:null},f.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:de.set},f.attrHooks.contenteditable={set:function(t,e,n){de.set(t,""!==e&&e,n)}},f.each(["width","height"],(function(t,e){f.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}}))),h.style||(f.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var we=/^(?:input|select|textarea|button|object)$/i,_e=/^(?:a|area)$/i;f.fn.extend({prop:function(t,e){return Q(this,f.prop,t,e,arguments.length>1)},removeProp:function(t){return t=f.propFix[t]||t,this.each((function(){try{this[t]=void 0,delete this[t]}catch(e){}}))}}),f.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&f.isXMLDoc(t)||(i=f.propHooks[e=f.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=f.find.attr(t,"tabindex");return e?parseInt(e,10):we.test(t.nodeName)||_e.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.hrefNormalized||f.each(["href","src"],(function(t,e){f.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),h.optSelected||(f.propHooks.selected={get:function(t){return null},set:function(t){}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){f.propFix[this.toLowerCase()]=this})),h.enctype||(f.propFix.enctype="encoding");var Ee=/[\t\r\n\f]/g;function Te(t){return f.attr(t,"class")||""}f.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(f.isFunction(t))return this.each((function(e){f(this).addClass(t.call(this,e,Te(this)))}));if("string"==typeof t&&t)for(e=t.match(P)||[];n=this[u++];)if(i=Te(n),r=1===n.nodeType&&(" "+i+" ").replace(Ee," ")){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=f.trim(r))&&f.attr(n,"class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(f.isFunction(t))return this.each((function(e){f(this).removeClass(t.call(this,e,Te(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(P)||[];n=this[u++];)if(i=Te(n),r=1===n.nodeType&&(" "+i+" ").replace(Ee," ")){for(s=0;o=e[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=f.trim(r))&&f.attr(n,"class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):f.isFunction(t)?this.each((function(n){f(this).toggleClass(t.call(this,n,Te(this),e),e)})):this.each((function(){var e,r,i,o;if("string"===n)for(r=0,i=f(this),o=t.match(P)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||((e=Te(this))&&f._data(this,"__className__",e),f.attr(this,"class",e||!1===t?"":f._data(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Te(n)+" ").replace(Ee," ").indexOf(e)>-1)return!0;return!1}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){f.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),f.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Se=t.location,Ie=f.now(),Ce=/\?/,ke=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;f.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,r=null,i=f.trim(e+"");return i&&!f.trim(i.replace(ke,(function(t,e,i,o){return n&&e&&(r=0),0===r?t:(n=i||e,r+=!o-!i,"")})))?Function("return "+i)():f.error("Invalid JSON: "+e)},f.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?n=(new t.DOMParser).parseFromString(e,"text/xml"):((n=new t.ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(e))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+e),n};var Ae=/#.*$/,Ne=/([?&])_=[^&]*/,xe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,De=/^(?:GET|HEAD)$/,Re=/^\/\//,Pe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Oe={},Le={},Me="*/".concat("*"),Fe=Se.href,Ue=Pe.exec(Fe.toLowerCase())||[];function je(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(P)||[];if(f.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function qe(t,e,n,r){var i={},o=t===Le;function s(a){var u;return i[a]=!0,f.each(t[a]||[],(function(t,a){var c=a(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Be(t,e){var n,r,i=f.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&f.extend(!0,t,n),t}function Ve(t){return t.style&&t.style.display||f.css(t,"display")}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fe,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ue[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Me,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,f.ajaxSettings),e):Be(f.ajaxSettings,t)},ajaxPrefilter:je(Oe),ajaxTransport:je(Le),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var r,i,o,s,a,u,c,l,h=f.ajaxSetup({},n=n||{}),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?f(p):f.event,y=f.Deferred(),m=f.Callbacks("once memory"),v=h.statusCode||{},g={},b={},w=0,_="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!l)for(l={};e=xe.exec(s);)l[e[1].toLowerCase()]=e[2];e=l[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,g[t]=e),this},overrideMimeType:function(t){return w||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)v[e]=[v[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||_;return c&&c.abort(e),S(0,e),this}};if(y.promise(E).complete=m.add,E.success=E.done,E.error=E.fail,h.url=((e||h.url||Fe)+"").replace(Ae,"").replace(Re,Ue[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=f.trim(h.dataType||"*").toLowerCase().match(P)||[""],null==h.crossDomain&&(r=Pe.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===Ue[1]&&r[2]===Ue[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Ue[3]||("http:"===Ue[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=f.param(h.data,h.traditional)),qe(Oe,h,n,E),2===w)return E;for(i in(u=f.event&&h.global)&&0==f.active++&&f.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!De.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Ce.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=Ne.test(o)?o.replace(Ne,"$1_="+Ie++):o+(Ce.test(o)?"&":"?")+"_="+Ie++)),h.ifModified&&(f.lastModified[o]&&E.setRequestHeader("If-Modified-Since",f.lastModified[o]),f.etag[o]&&E.setRequestHeader("If-None-Match",f.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Me+"; q=0.01":""):h.accepts["*"]),h.headers)E.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(!1===h.beforeSend.call(p,E,h)||2===w))return E.abort();for(i in _="abort",{success:1,error:1,complete:1})E[i](h[i]);if(c=qe(Le,h,n,E)){if(E.readyState=1,u&&d.trigger("ajaxSend",[E,h]),2===w)return E;h.async&&h.timeout>0&&(a=t.setTimeout((function(){E.abort("timeout")}),h.timeout));try{w=1,c.send(g,S)}catch(T){if(!(2>w))throw T;S(-1,T)}}else S(-1,"No Transport");function S(e,n,r,i){var l,g,b,_,T,S=n;2!==w&&(w=2,a&&t.clearTimeout(a),c=void 0,s=i||"",E.readyState=e>0?4:0,l=e>=200&&300>e||304===e,r&&(_=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){u.unshift(s);break}if(u[0]in n)o=u[0];else{for(s in n){if(!u[0]||t.converters[s+" "+u[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}(h,E,r)),_=function(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(h,_,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(f.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(f.etag[o]=T)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=_.state,g=_.data,l=!(b=_.error))):(b=S,!e&&S||(S="error",0>e&&(e=0))),E.status=e,E.statusText=(n||S)+"",l?y.resolveWith(p,[g,S,E]):y.rejectWith(p,[E,S,b]),E.statusCode(v),v=void 0,u&&d.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?g:b]),m.fireWith(p,[E,S]),u&&(d.trigger("ajaxComplete",[E,h]),--f.active||f.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return f.get(t,e,n,"json")},getScript:function(t,e){return f.get(t,void 0,e,"script")}}),f.each(["get","post"],(function(t,e){f[e]=function(t,n,r,i){return f.isFunction(n)&&(i=i||r,r=n,n=void 0),f.ajax(f.extend({url:t,type:e,dataType:i,data:n,success:r},f.isPlainObject(t)&&t))}})),f._evalUrl=function(t){return f.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},f.fn.extend({wrapAll:function(t){if(f.isFunction(t))return this.each((function(e){f(this).wrapAll(t.call(this,e))}));if(this[0]){var e=f(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t})).append(this)}return this},wrapInner:function(t){return f.isFunction(t)?this.each((function(e){f(this).wrapInner(t.call(this,e))})):this.each((function(){var e=f(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=f.isFunction(t);return this.each((function(n){f(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(){return this.parent().each((function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)})).end()}}),f.expr.filters.hidden=function(t){return h.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:function(t){if(!f.contains(t.ownerDocument||r,t))return!0;for(;t&&1===t.nodeType;){if("none"===Ve(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}(t)},f.expr.filters.visible=function(t){return!f.expr.filters.hidden(t)};var We=/%20/g,He=/\[\]$/,ze=/\r?\n/g,Ge=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;function Qe(t,e,n,r){var i;if(f.isArray(e))f.each(e,(function(e,i){n||He.test(t)?r(t,i):Qe(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==f.type(e))r(t,e);else for(i in e)Qe(t+"["+i+"]",e[i],n,r)}f.param=function(t,e){var n,r=[],i=function(t,e){e=f.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(t)||t.jquery&&!f.isPlainObject(t))f.each(t,(function(){i(this.name,this.value)}));else for(n in t)Qe(n,t[n],e,i);return r.join("&").replace(We,"+")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=f.prop(this,"elements");return t?f.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!f(this).is(":disabled")&&Ke.test(this.nodeName)&&!Ge.test(t)&&(this.checked||!Y.test(t))})).map((function(t,e){var n=f(this).val();return null==n?null:f.isArray(n)?f.map(n,(function(t){return{name:e.name,value:t.replace(ze,"\r\n")}})):{name:e.name,value:n.replace(ze,"\r\n")}})).get()}}),f.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return this.isLocal?Ze():r.documentMode>8?Je():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Je()||Ze()}:Je;var Ye=0,Xe={},$e=f.ajaxSettings.xhr();function Je(){try{return new t.XMLHttpRequest}catch(e){}}function Ze(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}t.attachEvent&&t.attachEvent("onunload",(function(){for(var t in Xe)Xe[t](void 0,!0)})),h.cors=!!$e&&"withCredentials"in $e,($e=h.ajax=!!$e)&&f.ajaxTransport((function(e){var n;if(!e.crossDomain||h.cors)return{send:function(r,i){var o,s=e.xhr(),a=++Ye;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)void 0!==r[o]&&s.setRequestHeader(o,r[o]+"");s.send(e.hasContent&&e.data||null),n=function(t,r){var o,u,c;if(n&&(r||4===s.readyState))if(delete Xe[a],n=void 0,s.onreadystatechange=f.noop,r)4!==s.readyState&&s.abort();else{c={},o=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{u=s.statusText}catch(l){u=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=c.text?200:404}c&&i(o,u,c,s.getAllResponseHeaders())},e.async?4===s.readyState?t.setTimeout(n):s.onreadystatechange=Xe[a]=n:n()},abort:function(){n&&n(void 0,!0)}}})),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return f.globalEval(t),t}}}),f.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)})),f.ajaxTransport("script",(function(t){if(t.crossDomain){var e,n=r.head||f("head")[0]||r.documentElement;return{send:function(i,o){(e=r.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}}));var tn=[],en=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||f.expando+"_"+Ie++;return this[t]=!0,t}}),f.ajaxPrefilter("json jsonp",(function(e,n,r){var i,o,s,a=!1!==e.jsonp&&(en.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=f.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+i):!1!==e.jsonp&&(e.url+=(Ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||f.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){s=arguments},r.always((function(){void 0===o?f(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,tn.push(i)),s&&f.isFunction(o)&&o(s[0]),s=o=void 0})),"script"):void 0})),f.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||r;var i=T.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=at([t],e,o),o&&o.length&&f(o).remove(),f.merge([],i.childNodes))};var nn=f.fn.load;function rn(t){return f.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}f.fn.load=function(t,e,n){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=f.trim(t.slice(a,t.length)),t=t.slice(0,a)),f.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&f.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?f("<div>").append(f.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){f.fn[e]=function(t){return this.on(e,t)}})),f.expr.filters.animated=function(t){return f.grep(f.timers,(function(e){return t===e.elem})).length},f.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=f.css(t,"position"),l=f(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=f.css(t,"top"),u=f.css(t,"left"),("absolute"===c||"fixed"===c)&&f.inArray("auto",[o,u])>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),f.isFunction(e)&&(e=e.call(t,n,f.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):l.css(h)}},f.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){f.offset.setOffset(this,t,e)}));var e,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?f.contains(e=o.documentElement,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=rn(o),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r:void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},r=this[0];return"fixed"===f.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),f.nodeName(t[0],"html")||(n=t.offset()),n.top+=f.css(t[0],"borderTopWidth",!0),n.left+=f.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-f.css(r,"marginTop",!0),left:e.left-n.left-f.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&!f.nodeName(t,"html")&&"static"===f.css(t,"position");)t=t.offsetParent;return t||jt}))}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n=/Y/.test(e);f.fn[t]=function(r){return Q(this,(function(t,r,i){var o=rn(t);return void 0===i?o?e in o?o[e]:o.document.documentElement[r]:t[r]:void(o?o.scrollTo(n?f(o).scrollLeft():i,n?i:f(o).scrollTop()):t[r]=i)}),t,r,arguments.length,null)}})),f.each(["top","left"],(function(t,e){f.cssHooks[e]=Wt(h.pixelPosition,(function(t,n){return n?(n=Bt(t,e),Ft.test(n)?f(t).position()[e]+"px":n):void 0}))})),f.each({Height:"height",Width:"width"},(function(t,e){f.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){f.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===i?"margin":"border");return Q(this,(function(e,n,r){var i;return f.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?f.css(e,n,s):f.style(e,n,r,s)}),e,o?r:void 0,o,null)}}))})),f.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),f.fn.size=function(){return this.length},f.fn.andSelf=f.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return f}));var on=t.jQuery,sn=t.$;return f.noConflict=function(e){return t.$===f&&(t.$=sn),e&&t.jQuery===f&&(t.jQuery=on),f},e||(t.jQuery=t.$=f),f}))}!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){"use strict";var n=[],r=t.document,i=Object.getPrototypeOf,o=n.slice,s=n.concat,a=n.push,u=n.indexOf,c={},l=c.toString,h=c.hasOwnProperty,p=h.toString,f=p.call(Object),d={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},m=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,nonce:!0,noModule:!0};function g(t,e,n){var i,o,s=(n=n||r).createElement("script");if(s.text=t,e)for(i in v)(o=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,o);n.head.appendChild(s).parentNode.removeChild(s)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[l.call(t)]||"object":typeof t}var w="3.4.1",_=function(t,e){return new _.fn.init(t,e)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function T(t){var e=!!t&&"length"in t&&t.length,n=b(t);return!y(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}_.fn=_.prototype={jquery:w,constructor:_,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=_.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return _.each(this,t)},map:function(t){return this.pushStack(_.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},_.extend=_.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||y(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(_.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||_.isPlainObject(n)?n:{},i=!1,s[e]=_.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},_.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==l.call(t)||(e=i(t))&&("function"!=typeof(n=h.call(e,"constructor")&&e.constructor)||p.call(n)!==f))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){g(t,{nonce:e&&e.nonce})},each:function(t,e){var n,r=0;if(T(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(E,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?_.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(T(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return s.apply([],a)},guid:1,support:d}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=n[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var S=function(t){var e,n,r,i,o,s,a,u,c,l,h,p,f,d,y,m,v,g,b,w="sizzle"+1*new Date,_=t.document,E=0,T=0,S=ut(),I=ut(),C=ut(),k=ut(),A=function(t,e){return t===e&&(h=!0),0},N={}.hasOwnProperty,x=[],D=x.pop,R=x.push,P=x.push,O=x.slice,L=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+F+"*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+F+"*\\]",q=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",B=new RegExp(F+"+","g"),V=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),W=new RegExp("^"+F+"*,"+F+"*"),H=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),z=new RegExp(F+"|>"),G=new RegExp(q),K=new RegExp("^"+U+"$"),Q={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),nt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){p()},st=wt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(x=O.call(_.childNodes),_.childNodes)}catch(e){P={apply:x.length?function(t,e){R.apply(t,O.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function at(t,e,r,i){var o,a,c,l,h,d,v,g=e&&e.ownerDocument,E=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==E&&9!==E&&11!==E)return r;if(!i&&((e?e.ownerDocument||e:_)!==f&&p(e),e=e||f,y)){if(11!==E&&(h=Z.exec(t)))if(o=h[1]){if(9===E){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(g&&(c=g.getElementById(o))&&b(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return P.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!k[t+" "]&&(!m||!m.test(t))&&(1!==E||"object"!==e.nodeName.toLowerCase())){if(v=t,g=e,1===E&&z.test(t)){for((l=e.getAttribute("id"))?l=l.replace(rt,it):e.setAttribute("id",l=w),a=(d=s(t)).length;a--;)d[a]="#"+l+" "+bt(d[a]);v=d.join(","),g=tt.test(t)&&vt(e.parentNode)||e}try{return P.apply(r,g.querySelectorAll(v)),r}catch(e){k(t,!0)}finally{l===w&&e.removeAttribute("id")}}}return u(t.replace(V,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function ct(t){return t[w]=!0,t}function lt(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function pt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function yt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct((function(e){return e=+e,ct((function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},o=at.isXML=function(t){var e=(t.ownerDocument||t).documentElement;return!Y.test(t.namespaceURI||e&&e.nodeName||"HTML")},p=at.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:_;return s!==f&&9===s.nodeType&&s.documentElement&&(d=(f=s).documentElement,y=!o(f),_!==f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.attributes=lt((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=lt((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=lt((function(t){return d.appendChild(t).id=w,!f.getElementsByName||!f.getElementsByName(w).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&y){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&y)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(lt((function(t){d.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+M+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")})),lt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(g=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&lt((function(t){n.disconnectedMatch=g.call(t,"*"),g.call(t,"[s!='']:x"),v.push("!=",q)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(d.compareDocumentPosition),b=e||J.test(d.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===f||t.ownerDocument===_&&b(_,t)?-1:e===f||e.ownerDocument===_&&b(_,e)?1:l?L(l,t)-L(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===f?-1:e===f?1:i?-1:o?1:l?L(l,t)-L(l,e):0;if(i===o)return pt(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?pt(s[r],a[r]):s[r]===_?-1:a[r]===_?1:0}),f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&p(t),n.matchesSelector&&y&&!k[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=g.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){k(e,!0)}return 0<at(e,f,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!==f&&p(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==f&&p(t);var i=r.attrHandle[e.toLowerCase()],o=i&&N.call(r.attrHandle,e.toLowerCase())?i(t,e,!y):void 0;return void 0!==o?o:n.attributes||!y?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},at.escape=function(t){return(t+"").replace(rt,it)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=at.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=at.selectors={cacheLength:50,createPseudo:ct,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=at.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&-1<i.indexOf(n):"$="===e?n&&i.slice(-n.length)===n:"~="===e?-1<(" "+i.replace(B," ")+" ").indexOf(n):"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,p,f,d,y=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),g=!u&&!a,b=!1;if(m){if(o){for(;y;){for(p=e;p=p[y];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;d=y="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&g){for(b=(f=(c=(l=(h=(p=m)[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]||[])[0]===E&&c[1])&&c[2],p=f&&m.childNodes[f];p=++f&&p&&p[y]||(b=f=0)||d.pop();)if(1===p.nodeType&&++b&&p===e){l[t]=[E,f,b];break}}else if(g&&(b=f=(c=(l=(h=(p=e)[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]||[])[0]===E&&c[1]),!1===b)for(;(p=++f&&p&&p[y]||(b=f=0)||d.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(g&&((l=(h=p[w]||(p[w]={}))[p.uniqueID]||(h[p.uniqueID]={}))[t]=[E,b]),p!==e)););return(b-=i)===r||b%r==0&&0<=b/r}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return i[w]?i(e):1<i.length?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){for(var r,o=i(t,e),s=o.length;s--;)t[r=L(t,o[s])]=!(n[r]=o[s])})):function(t){return i(t,0,n)}):i}},pseudos:{not:ct((function(t){var e=[],n=[],r=a(t.replace(V,"$1"));return r[w]?ct((function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return 0<at(t,e).length}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||i(e)).indexOf(t)}})),lang:ct((function(t){return K.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=y?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:yt(!1),disabled:yt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t})),gt:mt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=dt(e);function gt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function wt(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=T++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,u){var c,l,h,p=[E,a];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(l=(h=e[w]||(e[w]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===E&&c[1]===a)return p[2]=c[2];if((l[o]=p)[2]=t(e,n,u))return!0}return!1}}function _t(t){return 1<t.length?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Et(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function Tt(t,e,n,r,i,o){return r&&!r[w]&&(r=Tt(r)),i&&!i[w]&&(i=Tt(i,o)),ct((function(o,s,a,u){var c,l,h,p=[],f=[],d=s.length,y=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)at(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!o&&e?y:Et(y,p,t,a,u),v=n?i||(o?t:d||r)?[]:s:m;if(n&&n(m,v,a,u),r)for(c=Et(v,f),r(c,[],a,u),l=c.length;l--;)(h=c[l])&&(v[f[l]]=!(m[f[l]]=h));if(o){if(i||t){if(i){for(c=[],l=v.length;l--;)(h=v[l])&&c.push(m[l]=h);i(null,v=[],c,u)}for(l=v.length;l--;)(h=v[l])&&-1<(c=i?L(o,h):p[l])&&(o[c]=!(s[c]=h))}}else v=Et(v===s?v.splice(d,v.length):v),i?i(null,s,v,u):P.apply(s,v)}))}function St(t){for(var e,n,i,o=t.length,s=r.relative[t[0].type],a=s||r.relative[" "],u=s?1:0,l=wt((function(t){return t===e}),a,!0),h=wt((function(t){return-1<L(e,t)}),a,!0),p=[function(t,n,r){var i=!s&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])p=[wt(_t(p),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[w]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return Tt(1<u&&_t(p),1<u&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(V,"$1"),n,u<i&&St(t.slice(u,i)),i<o&&St(t=t.slice(i)),i<o&&bt(t))}p.push(n)}return _t(p)}return gt.prototype=r.filters=r.pseudos,r.setFilters=new gt,s=at.tokenize=function(t,e){var n,i,o,s,a,u,c,l=I[t+" "];if(l)return e?0:l.slice(0);for(a=t,u=[],c=r.preFilter;a;){for(s in n&&!(i=W.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=H.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),a=a.slice(n.length)),r.filter)!(i=Q[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):I(t,u).slice(0)},a=at.compile=function(t,e){var n,i,o,a,u,l,h=[],d=[],m=C[t+" "];if(!m){for(e||(e=s(t)),n=e.length;n--;)(m=St(e[n]))[w]?h.push(m):d.push(m);(m=C(t,(i=d,a=0<(o=h).length,u=0<i.length,l=function(t,e,n,s,l){var h,d,m,v=0,g="0",b=t&&[],w=[],_=c,T=t||u&&r.find.TAG("*",l),S=E+=null==_?1:Math.random()||.1,I=T.length;for(l&&(c=e===f||e||l);g!==I&&null!=(h=T[g]);g++){if(u&&h){for(d=0,e||h.ownerDocument===f||(p(h),n=!y);m=i[d++];)if(m(h,e||f,n)){s.push(h);break}l&&(E=S)}a&&((h=!m&&h)&&v--,t&&b.push(h))}if(v+=g,a&&g!==v){for(d=0;m=o[d++];)m(b,w,e,n);if(t){if(0<v)for(;g--;)b[g]||w[g]||(w[g]=D.call(s));w=Et(w)}P.apply(s,w),l&&!t&&0<w.length&&1<v+o.length&&at.uniqueSort(s)}return l&&(E=S,c=_),b},a?ct(l):l))).selector=t}return m},u=at.select=function(t,e,n,i){var o,u,c,l,h,p="function"==typeof t&&t,f=!i&&s(t=p.selector||t);if(n=n||[],1===f.length){if(2<(u=f[0]=f[0].slice(0)).length&&"ID"===(c=u[0]).type&&9===e.nodeType&&y&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=Q.needsContext.test(t)?0:u.length;o--&&!r.relative[l=(c=u[o]).type];)if((h=r.find[l])&&(i=h(c.matches[0].replace(et,nt),tt.test(u[0].type)&&vt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&bt(u)))return P.apply(n,i),n;break}}return(p||a(t,f))(i,e,!y,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=w.split("").sort(A).join("")===w,n.detectDuplicates=!!h,p(),n.sortDetached=lt((function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))})),lt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&lt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),lt((function(t){return null==t.getAttribute("disabled")}))||ht(M,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),at}(t);_.find=S,_.expr=S.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=S.uniqueSort,_.text=S.getText,_.isXMLDoc=S.isXML,_.contains=S.contains,_.escapeSelector=S.escape;var I=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&_(t).is(n))break;r.push(t)}return r},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},k=_.expr.match.needsContext;function A(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function x(t,e,n){return y(e)?_.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?_.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?_.grep(t,(function(t){return-1<u.call(e,t)!==n})):_.filter(e,t,n)}_.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?_.find.matchesSelector(r,t)?[r]:[]:_.find.matches(t,_.grep(e,(function(t){return 1===t.nodeType})))},_.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(_(t).filter((function(){for(e=0;e<r;e++)if(_.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)_.find(t,i[e],n);return 1<r?_.uniqueSort(n):n},filter:function(t){return this.pushStack(x(this,t||[],!1))},not:function(t){return this.pushStack(x(this,t||[],!0))},is:function(t){return!!x(this,"string"==typeof t&&k.test(t)?_(t):t||[],!1).length}});var D,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||D,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:R.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(_.merge(this,_.parseHTML(i[1],(e=e instanceof _?e[0]:e)&&e.nodeType?e.ownerDocument||e:r,!0)),N.test(i[1])&&_.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(_):_.makeArray(t,this)}).prototype=_.fn,D=_(r);var P=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}_.fn.extend({has:function(t){var e=_(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(_.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&_(t);if(!k.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&_.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?_.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(_(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),_.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return I(t,"parentNode")},parentsUntil:function(t,e,n){return I(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return I(t,"nextSibling")},prevAll:function(t){return I(t,"previousSibling")},nextUntil:function(t,e,n){return I(t,"nextSibling",n)},prevUntil:function(t,e,n){return I(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(A(t,"template")&&(t=t.content||t),_.merge([],t.childNodes))}},(function(t,e){_.fn[t]=function(n,r){var i=_.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=_.filter(r,i)),1<this.length&&(O[t]||_.uniqueSort(i),P.test(t)&&i.reverse()),this.pushStack(i)}}));var M=/[^\x20\t\r\n\f]+/g;function F(t){return t}function U(t){throw t}function j(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}_.Callbacks=function(t){var e;t="string"==typeof t?(e={},_.each(t.match(M)||[],(function(t,n){e[n]=!0})),e):_.extend({},t);var n,r,i,o,s=[],a=[],u=-1,c=function(){for(o=o||t.once,i=n=!0;a.length;u=-1)for(r=a.shift();++u<s.length;)!1===s[u].apply(r[0],r[1])&&t.stopOnFalse&&(u=s.length,r=!1);t.memory||(r=!1),n=!1,o&&(s=r?[]:"")},l={add:function(){return s&&(r&&!n&&(u=s.length-1,a.push(r)),function e(n){_.each(n,(function(n,r){y(r)?t.unique&&l.has(r)||s.push(r):r&&r.length&&"string"!==b(r)&&e(r)}))}(arguments),r&&!n&&c()),this},remove:function(){return _.each(arguments,(function(t,e){for(var n;-1<(n=_.inArray(e,s,n));)s.splice(n,1),n<=u&&u--})),this},has:function(t){return t?-1<_.inArray(t,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=r="",this},disabled:function(){return!s},lock:function(){return o=a=[],r||n||(s=r=""),this},locked:function(){return!!o},fireWith:function(t,e){return o||(e=[t,(e=e||[]).slice?e.slice():e],a.push(e),n||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},_.extend({Deferred:function(e){var n=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return _.Deferred((function(e){_.each(n,(function(n,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(e,r,i){var o=0;function s(e,n,r,i){return function(){var a=this,u=arguments,c=function(){var t,c;if(!(e<o)){if((t=r.apply(a,u))===n.promise())throw new TypeError("Thenable self-resolution");y(c=t&&("object"==typeof t||"function"==typeof t)&&t.then)?i?c.call(t,s(o,n,F,i),s(o,n,U,i)):(o++,c.call(t,s(o,n,F,i),s(o,n,U,i),s(o,n,F,n.notifyWith))):(r!==F&&(a=void 0,u=[t]),(i||n.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(c){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(c,l.stackTrace),o<=e+1&&(r!==U&&(a=void 0,u=[c]),n.rejectWith(a,u))}};e?l():(_.Deferred.getStackHook&&(l.stackTrace=_.Deferred.getStackHook()),t.setTimeout(l))}}return _.Deferred((function(t){n[0][3].add(s(0,t,y(i)?i:F,t.notifyWith)),n[1][3].add(s(0,t,y(e)?e:F)),n[2][3].add(s(0,t,y(r)?r:U))})).promise()},promise:function(t){return null!=t?_.extend(t,i):i}},o={};return _.each(n,(function(t,e){var s=e[2],a=e[5];i[e[1]]=s.add,a&&s.add((function(){r=a}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),s.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=o.call(arguments),s=_.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=1<arguments.length?o.call(arguments):n,--e||s.resolveWith(r,i)}};if(e<=1&&(j(t,s.done(a(n)).resolve,s.reject,!e),"pending"===s.state()||y(i[n]&&i[n].then)))return s.then();for(;n--;)j(i[n],a(n),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&q.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},_.readyException=function(e){t.setTimeout((function(){throw e}))};var B=_.Deferred();function V(){r.removeEventListener("DOMContentLoaded",V),t.removeEventListener("load",V),_.ready()}_.fn.ready=function(t){return B.then(t).catch((function(t){_.readyException(t)})),this},_.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--_.readyWait:_.isReady)||(_.isReady=!0)!==t&&0<--_.readyWait||B.resolveWith(r,[_])}}),_.ready.then=B.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?t.setTimeout(_.ready):(r.addEventListener("DOMContentLoaded",V),t.addEventListener("load",V));var W=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===b(n))for(a in i=!0,n)W(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,y(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(_(t),n)})),e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},H=/^-ms-/,z=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function K(t){return t.replace(H,"ms-").replace(z,G)}var Q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=_.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(M)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||_.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!_.isEmptyObject(e)}};var X=new Y,$=new Y,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function tt(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(t){}$.set(t,e,n)}else n=void 0;return n}_.extend({hasData:function(t){return $.hasData(t)||X.hasData(t)},data:function(t,e,n){return $.access(t,e,n)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),_.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=$.get(o),1===o.nodeType&&!X.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=K(r.slice(5)),tt(o,r,i[r]));X.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){$.set(this,t)})):W(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=$.get(o,t))?n:void 0!==(n=tt(o,t))?n:void 0;this.each((function(){$.set(this,t,e)}))}),null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each((function(){$.remove(this,t)}))}}),_.extend({queue:function(t,e,n){var r;if(t)return r=X.get(t,e=(e||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=X.access(t,e,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=_.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=_._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){_.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:_.Callbacks("once memory").add((function(){X.remove(t,[e+"queue",n])}))})}}),_.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?_.queue(this[0],t):void 0===e?this:this.each((function(){var n=_.queue(this,t,e);_._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&_.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){_.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=_.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=X.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nt=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],it=r.documentElement,ot=function(t){return _.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(ot=function(t){return _.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===_.css(t,"display")},ut=function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=s[o];return i};function ct(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return _.css(t,e,"")},u=a(),c=n&&n[3]||(_.cssNumber[e]?"":"px"),l=t.nodeType&&(_.cssNumber[e]||"px"!==c&&+u)&&nt.exec(_.css(t,e));if(l&&l[3]!==c){for(c=c||l[3],l=+(u/=2)||1;s--;)_.style(t,e,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;_.style(t,e,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var lt={};function ht(t,e){for(var n,r,i,o,s,a,u,c=[],l=0,h=t.length;l<h;l++)(r=t[l]).style&&(n=r.style.display,e?("none"===n&&(c[l]=X.get(r,"display")||null,c[l]||(r.style.display="")),""===r.style.display&&at(r)&&(c[l]=(u=s=o=void 0,s=(i=r).ownerDocument,(u=lt[a=i.nodeName])||(o=s.body.appendChild(s.createElement(a)),u=_.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),lt[a]=u)))):"none"!==n&&(c[l]="none",X.set(r,"display",n)));for(l=0;l<h;l++)null!=c[l]&&(t[l].style.display=c[l]);return t}_.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){at(this)?_(this).show():_(this).hide()}))}});var pt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i,yt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&A(t,e)?_.merge([t],n):n}function vt(t,e){for(var n=0,r=t.length;n<r;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td;var gt,bt,wt=/<|&#?\w+;/;function _t(t,e,n,r,i){for(var o,s,a,u,c,l,h=e.createDocumentFragment(),p=[],f=0,d=t.length;f<d;f++)if((o=t[f])||0===o)if("object"===b(o))_.merge(p,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(ft.exec(o)||["",""])[1].toLowerCase(),s.innerHTML=(u=yt[a]||yt._default)[1]+_.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;_.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(e.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(r&&-1<_.inArray(o,r))i&&i.push(o);else if(c=ot(o),s=mt(h.appendChild(o),"script"),c&&vt(s),n)for(l=0;o=s[l++];)dt.test(o.type||"")&&n.push(o);return h}gt=r.createDocumentFragment().appendChild(r.createElement("div")),(bt=r.createElement("input")).setAttribute("type","radio"),bt.setAttribute("checked","checked"),bt.setAttribute("name","t"),gt.appendChild(bt),d.checkClone=gt.cloneNode(!0).cloneNode(!0).lastChild.checked,gt.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!gt.cloneNode(!0).lastChild.defaultValue;var Et=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,St=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function Ct(){return!1}function kt(t,e){return t===function(){try{return r.activeElement}catch(t){}}()==("focus"===e)}function At(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)At(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return _().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=_.guid++)),t.each((function(){_.event.add(this,e,i,r,n)}))}function Nt(t,e,n){n?(X.set(t,e,!1),_.event.add(t,e,{namespace:!1,handler:function(t){var r,i,s=X.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(_.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=o.call(arguments),X.set(this,e,s),r=n(this,e),this[e](),s!==(i=X.get(this,e))||r?X.set(this,e,!1):i={},s!==i)return t.stopImmediatePropagation(),t.preventDefault(),i.value}else s.length&&(X.set(this,e,{value:_.event.trigger(_.extend(s[0],_.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,e)&&_.event.add(t,e,It)}_.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,p,f,d,y,m=X.get(t);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&_.find.matchesSelector(it,i),n.guid||(n.guid=_.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==_&&_.event.triggered!==e.type?_.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(M)||[""]).length;c--;)f=y=(a=St.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),f&&(h=_.event.special[f]||{},h=_.event.special[f=(i?h.delegateType:h.bindType)||f]||{},l=_.extend({type:f,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&_.expr.match.needsContext.test(i),namespace:d.join(".")},o),(p=u[f])||((p=u[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,d,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),_.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,p,f,d,y,m=X.hasData(t)&&X.get(t);if(m&&(u=m.events)){for(c=(e=(e||"").match(M)||[""]).length;c--;)if(f=y=(a=St.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),f){for(h=_.event.special[f]||{},p=u[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)l=p[o],!i&&y!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,h.remove&&h.remove.call(t,l));s&&!p.length&&(h.teardown&&!1!==h.teardown.call(t,d,m.handle)||_.removeEvent(t,f,m.handle),delete u[f])}else for(f in u)_.event.remove(t,f+e[c],n,r,!0);_.isEmptyObject(u)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=_.event.fix(t),u=new Array(arguments.length),c=(X.get(this,"events")||{})[a.type]||[],l=_.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){for(s=_.event.handlers.call(this,a,c),e=0;(i=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((_.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?-1<_(i,this).index(c):_.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(_.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[_.expando]?t:new _.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return pt.test(e.type)&&e.click&&A(e,"input")&&Nt(e,"click",It),!1},trigger:function(t){var e=this||t;return pt.test(e.type)&&e.click&&A(e,"input")&&Nt(e,"click"),!0},_default:function(t){var e=t.target;return pt.test(e.type)&&e.click&&A(e,"input")&&X.get(e,"click")||A(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},_.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},_.Event=function(t,e){if(!(this instanceof _.Event))return new _.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&_.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Et.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},(function(t,e){_.event.special[t]={setup:function(){return Nt(this,t,kt),!1},trigger:function(){return Nt(this,t),!0},delegateType:e}})),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){_.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||_.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),_.fn.extend({on:function(t,e,n,r){return At(this,t,e,n,r)},one:function(t,e,n,r){return At(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,_(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each((function(){_.event.remove(this,t,n,e)}))}});var xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Dt=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,Pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return A(t,"table")&&A(11!==e.nodeType?e:e.firstChild,"tr")&&_(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,i,o,s,a,u,c;if(1===e.nodeType){if(X.hasData(t)&&(o=X.access(t),s=X.set(e,o),c=o.events))for(i in delete s.handle,s.events={},c)for(n=0,r=c[i].length;n<r;n++)_.event.add(e,i,c[i][n]);$.hasData(t)&&(a=$.access(t),u=_.extend({},a),$.set(e,u))}}function Ut(t,e,n,r){e=s.apply([],e);var i,o,a,u,c,l,h=0,p=t.length,f=p-1,m=e[0],v=y(m);if(v||1<p&&"string"==typeof m&&!d.checkClone&&Rt.test(m))return t.each((function(i){var o=t.eq(i);v&&(e[0]=m.call(this,i,o.html())),Ut(o,e,n,r)}));if(p&&(o=(i=_t(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(a=_.map(mt(i,"script"),Lt)).length;h<p;h++)c=i,h!==f&&(c=_.clone(c,!0,!0),u&&_.merge(a,mt(c,"script"))),n.call(t[h],c,h);if(u)for(l=a[a.length-1].ownerDocument,_.map(a,Mt),h=0;h<u;h++)dt.test((c=a[h]).type||"")&&!X.access(c,"globalEval")&&_.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?_._evalUrl&&!c.noModule&&_._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")}):g(c.textContent.replace(Pt,""),c,l))}return t}function jt(t,e,n){for(var r,i=e?_.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||_.cleanData(mt(r)),r.parentNode&&(n&&ot(r)&&vt(mt(r,"script")),r.parentNode.removeChild(r));return t}_.extend({htmlPrefilter:function(t){return t.replace(xt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,s,a,u,c,l=t.cloneNode(!0),h=ot(t);if(!(d.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||_.isXMLDoc(t)))for(s=mt(l),r=0,i=(o=mt(t)).length;r<i;r++)a=o[r],"input"===(c=(u=s[r]).nodeName.toLowerCase())&&pt.test(a.type)?u.checked=a.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=a.defaultValue);if(e)if(n)for(o=o||mt(t),s=s||mt(l),r=0,i=o.length;r<i;r++)Ft(o[r],s[r]);else Ft(t,l);return 0<(s=mt(l,"script")).length&&vt(s,!h&&mt(t,"script")),l},cleanData:function(t){for(var e,n,r,i=_.event.special,o=0;void 0!==(n=t[o]);o++)if(Q(n)){if(e=n[X.expando]){if(e.events)for(r in e.events)i[r]?_.event.remove(n,r):_.removeEvent(n,r,e.handle);n[X.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),_.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return W(this,(function(t){return void 0===t?_.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ut(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)}))},prepend:function(){return Ut(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(_.cleanData(mt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return _.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!yt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=_.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(_.cleanData(mt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ut(this,arguments,(function(e){var n=this.parentNode;_.inArray(this,t)<0&&(_.cleanData(mt(this)),n&&n.replaceChild(e,this))}),t)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){_.fn[t]=function(t){for(var n,r=[],i=_(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),_(i[s])[e](n),a.apply(r,n.get());return this.pushStack(r)}}));var qt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Bt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Vt=new RegExp(rt.join("|"),"i");function Wt(t,e,n){var r,i,o,s,a=t.style;return(n=n||Bt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||ot(t)||(s=_.style(t,e)),!d.pixelBoxStyles()&&qt.test(s)&&Vt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(c).appendChild(l);var e=t.getComputedStyle(l);i="1%"!==e.top,u=12===n(e.marginLeft),l.style.right="60%",a=36===n(e.right),o=36===n(e.width),l.style.position="absolute",s=12===n(l.offsetWidth/3),it.removeChild(c),l=null}}function n(t){return Math.round(parseFloat(t))}var i,o,s,a,u,c=r.createElement("div"),l=r.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===l.style.backgroundClip,_.extend(d,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),s}}))}();var zt=["Webkit","Moz","ms"],Gt=r.createElement("div").style,Kt={};function Qt(t){return _.cssProps[t]||Kt[t]||(t in Gt?t:Kt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=zt.length;n--;)if((t=zt[n]+e)in Gt)return t}(t)||t)}var Yt=/^(none|table(?!-c[ea]).+)/,Xt=/^--/,$t={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"};function Zt(t,e,n){var r=nt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function te(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=_.css(t,n+rt[s],!0,i)),r?("content"===n&&(u-=_.css(t,"padding"+rt[s],!0,i)),"margin"!==n&&(u-=_.css(t,"border"+rt[s]+"Width",!0,i))):(u+=_.css(t,"padding"+rt[s],!0,i),"padding"!==n?u+=_.css(t,"border"+rt[s]+"Width",!0,i):a+=_.css(t,"border"+rt[s]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u}function ee(t,e,n){var r=Bt(t),i=(!d.boxSizingReliable()||n)&&"border-box"===_.css(t,"boxSizing",!1,r),o=i,s=Wt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(qt.test(s)){if(!n)return s;s="auto"}return(!d.boxSizingReliable()&&i||"auto"===s||!parseFloat(s)&&"inline"===_.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===_.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+te(t,e,n||(i?"border":"content"),o,r,s)+"px"}function ne(t,e,n,r,i){return new ne.prototype.init(t,e,n,r,i)}_.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=K(e),u=Xt.test(e),c=t.style;if(u||(e=Qt(a)),s=_.cssHooks[e]||_.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:c[e];"string"==(o=typeof n)&&(i=nt.exec(n))&&i[1]&&(n=ct(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(_.cssNumber[a]?"":"px")),d.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,s,a=K(e);return Xt.test(e)||(e=Qt(a)),(s=_.cssHooks[e]||_.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Wt(t,e,r)),"normal"===i&&e in Jt&&(i=Jt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),_.each(["height","width"],(function(t,e){_.cssHooks[e]={get:function(t,n,r){if(n)return!Yt.test(_.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,r):ut(t,$t,(function(){return ee(t,e,r)}))},set:function(t,n,r){var i,o=Bt(t),s=!d.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===_.css(t,"boxSizing",!1,o),u=r?te(t,e,r,a,o):0;return a&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-te(t,e,"border",!1,o)-.5)),u&&(i=nt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=_.css(t,e)),Zt(0,n,u)}}})),_.cssHooks.marginLeft=Ht(d.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),_.each({margin:"",padding:"",border:"Width"},(function(t,e){_.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+rt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(_.cssHooks[t+e].set=Zt)})),_.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Bt(t),i=e.length;s<i;s++)o[e[s]]=_.css(t,e[s],!1,r);return o}return void 0!==n?_.style(t,e,n):_.css(t,e)}),t,e,1<arguments.length)}}),((_.Tween=ne).prototype={constructor:ne,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||_.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(_.cssNumber[n]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,n=ne.propHooks[this.prop];return this.pos=e=this.options.duration?_.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ne.propHooks._default.set(this),this}}).init.prototype=ne.prototype,(ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=_.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){_.fx.step[t.prop]?_.fx.step[t.prop](t):1!==t.elem.nodeType||!_.cssHooks[t.prop]&&null==t.elem.style[Qt(t.prop)]?t.elem[t.prop]=t.now:_.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},_.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},_.fx=ne.prototype.init,_.fx.step={};var re,ie,oe,se,ae=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function ce(){ie&&(!1===r.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ce):t.setTimeout(ce,_.fx.interval),_.fx.tick())}function le(){return t.setTimeout((function(){re=void 0})),re=Date.now()}function he(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=rt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function pe(t,e,n){for(var r,i=(fe.tweeners[e]||[]).concat(fe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function fe(t,e,n){var r,i,o=0,s=fe.prefilters.length,a=_.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=re||le(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:_.extend({},e),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||le(),duration:n.duration,tweens:[],createTween:function(e,n){var r=_.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=_.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<s;o++)if(r=fe.prefilters[o].call(c,t,l,c.opts))return y(r.stop)&&(_._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return _.map(l,pe,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),_.fx.timer(_.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}_.Animation=_.extend(fe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ct(n.elem,t,nt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(M);for(var n,r=0,i=t.length;r<i;r++)(fe.tweeners[n=t[r]]=fe.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,l,h="width"in e||"height"in e,p=this,f={},d=t.style,y=t.nodeType&&at(t),m=X.get(t,"fxshow");for(r in n.queue||(null==(s=_._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,_.queue(t,"fx").length||s.empty.fire()}))}))),e)if(ae.test(i=e[r])){if(delete e[r],o=o||"toggle"===i,i===(y?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;y=!0}f[r]=m&&m[r]||_.style(t,r)}if((u=!_.isEmptyObject(e))||!_.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=m&&m.display)&&(c=X.get(t,"display")),"none"===(l=_.css(t,"display"))&&(c?l=c:(ht([t],!0),c=t.style.display||c,l=_.css(t,"display"),ht([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===_.css(t,"float")&&(u||(p.done((function(){d.display=c})),null==c&&(c="none"===(l=d.display)?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",p.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),u=!1,f)u||(m?"hidden"in m&&(y=m.hidden):m=X.access(t,"fxshow",{display:c}),o&&(m.hidden=!y),y&&ht([t],!0),p.done((function(){for(r in y||ht([t]),X.remove(t,"fxshow"),f)_.style(t,r,f[r])}))),u=pe(y?m[r]:0,r,p),r in m||(m[r]=u.start,y&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?fe.prefilters.unshift(t):fe.prefilters.push(t)}}),_.speed=function(t,e,n){var r=t&&"object"==typeof t?_.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in _.fx.speeds?_.fx.speeds[r.duration]:_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=_.isEmptyObject(t),o=_.speed(e,n,r),s=function(){var e=fe(this,_.extend({},t),o);(i||X.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=_.timers,s=X.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ue.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||_.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=X.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=_.timers,s=r?r.length:0;for(n.finish=!0,_.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),_.each(["toggle","show","hide"],(function(t,e){var n=_.fn[e];_.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(he(e,!0),t,r,i)}})),_.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){_.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),_.timers=[],_.fx.tick=function(){var t,e=0,n=_.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||_.fx.stop(),re=void 0},_.fx.timer=function(t){_.timers.push(t),_.fx.start()},_.fx.interval=13,_.fx.start=function(){ie||(ie=!0,ce())},_.fx.stop=function(){ie=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,n){return e=_.fx&&_.fx.speeds[e]||e,this.queue(n=n||"fx",(function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}}))},oe=r.createElement("input"),se=r.createElement("select").appendChild(r.createElement("option")),oe.type="checkbox",d.checkOn=""!==oe.value,d.optSelected=se.selected,(oe=r.createElement("input")).value="t",oe.type="radio",d.radioValue="t"===oe.value;var de,ye=_.expr.attrHandle;_.fn.extend({attr:function(t,e){return W(this,_.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each((function(){_.removeAttr(this,t)}))}}),_.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?_.prop(t,e,n):(1===o&&_.isXMLDoc(t)||(i=_.attrHooks[e.toLowerCase()]||(_.expr.match.bool.test(e)?de:void 0)),void 0!==n?null===n?void _.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=_.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!d.radioValue&&"radio"===e&&A(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(M);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),de={set:function(t,e,n){return!1===e?_.removeAttr(t,n):t.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=ye[e]||_.find.attr;ye[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=ye[s],ye[s]=i,i=null!=n(t,e,r)?s:null,ye[s]=o),i}}));var me=/^(?:input|select|textarea|button)$/i,ve=/^(?:a|area)$/i;function ge(t){return(t.match(M)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(M)||[]}_.fn.extend({prop:function(t,e){return W(this,_.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each((function(){delete this[_.propFix[t]||t]}))}}),_.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(t)||(i=_.propHooks[e=_.propFix[e]||e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=_.find.attr(t,"tabindex");return e?parseInt(e,10):me.test(t.nodeName)||ve.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(_.propHooks.selected={get:function(t){return null},set:function(t){}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){_.propFix[this.toLowerCase()]=this})),_.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(y(t))return this.each((function(e){_(this).addClass(t.call(this,e,be(this)))}));if((e=we(t)).length)for(;n=this[u++];)if(i=be(n),r=1===n.nodeType&&" "+ge(i)+" "){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=ge(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(y(t))return this.each((function(e){_(this).removeClass(t.call(this,e,be(this)))}));if(!arguments.length)return this.attr("class","");if((e=we(t)).length)for(;n=this[u++];)if(i=be(n),r=1===n.nodeType&&" "+ge(i)+" "){for(s=0;o=e[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=ge(r))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){_(this).toggleClass(t.call(this,n,be(this),e),e)})):this.each((function(){var e,i,o,s;if(r)for(i=0,o=_(this),s=we(t);e=s[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=be(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":X.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+ge(be(n))+" ").indexOf(e))return!0;return!1}});var _e=/\r/g;_.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,_(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=_.map(i,(function(t){return null==t?"":t+""}))),(e=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=_.valHooks[i.type]||_.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(_e,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(t){var e=_.find.attr(t,"value");return null!=e?e:ge(_.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(e=_(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=_.makeArray(e),s=i.length;s--;)((r=i[s]).selected=-1<_.inArray(_.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],(function(){_.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<_.inArray(_(t).val(),e)}},d.checkOn||(_.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),d.focusin="onfocusin"in t;var Ee=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};_.extend(_.event,{trigger:function(e,n,i,o){var s,a,u,c,l,p,f,d,v=[i||r],g=h.call(e,"type")?e.type:e,b=h.call(e,"namespace")?e.namespace.split("."):[];if(a=d=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!Ee.test(g+_.event.triggered)&&(-1<g.indexOf(".")&&(g=(b=g.split(".")).shift(),b.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:_.makeArray(n,[e]),f=_.event.special[g]||{},o||!f.trigger||!1!==f.trigger.apply(i,n))){if(!o&&!f.noBubble&&!m(i)){for(Ee.test((c=f.delegateType||g)+g)||(a=a.parentNode);a;a=a.parentNode)v.push(a),u=a;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||t)}for(s=0;(a=v[s++])&&!e.isPropagationStopped();)d=a,e.type=1<s?c:f.bindType||g,(p=(X.get(a,"events")||{})[e.type]&&X.get(a,"handle"))&&p.apply(a,n),(p=l&&a[l])&&p.apply&&Q(a)&&(e.result=p.apply(a,n),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(v.pop(),n)||!Q(i)||l&&y(i[g])&&!m(i)&&((u=i[l])&&(i[l]=null),_.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Te),i[g](),e.isPropagationStopped()&&d.removeEventListener(g,Te),_.event.triggered=void 0,u&&(i[l]=u)),e.result}},simulate:function(t,e,n){var r=_.extend(new _.Event,n,{type:t,isSimulated:!0});_.event.trigger(r,null,e)}}),_.fn.extend({trigger:function(t,e){return this.each((function(){_.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return _.event.trigger(t,e,n,!0)}}),d.focusin||_.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){_.event.simulate(e,t.target,_.event.fix(t))};_.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=X.access(r,e);i||r.addEventListener(t,n,!0),X.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=X.access(r,e)-1;i?X.access(r,e,i):(r.removeEventListener(t,n,!0),X.remove(r,e))}}}));var Se=t.location,Ie=Date.now(),Ce=/\?/;_.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),n};var ke=/\[\]$/,Ae=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,xe=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,r){var i;if(Array.isArray(e))_.each(e,(function(e,i){n||ke.test(t)?r(t,i):De(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==b(e))r(t,e);else for(i in e)De(t+"["+i+"]",e[i],n,r)}_.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!_.isPlainObject(t))_.each(t,(function(){i(this.name,this.value)}));else for(n in t)De(n,t[n],e,i);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=_.prop(this,"elements");return t?_.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!_(this).is(":disabled")&&xe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!pt.test(t))})).map((function(t,e){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,(function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}})):{name:e.name,value:n.replace(Ae,"\r\n")}})).get()}});var Re=/%20/g,Pe=/#.*$/,Oe=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Fe=/^\/\//,Ue={},je={},qe="*/".concat("*"),Be=r.createElement("a");function Ve(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(M)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function We(t,e,n,r){var i={},o=t===je;function s(a){var u;return i[a]=!0,_.each(t[a]||[],(function(t,a){var c=a(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function He(t,e){var n,r,i=_.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&_.extend(!0,t,r),t}Be.href=Se.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?He(He(t,_.ajaxSettings),e):He(_.ajaxSettings,t)},ajaxPrefilter:Ve(Ue),ajaxTransport:Ve(je),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var i,o,s,a,u,c,l,h,p,f,d=_.ajaxSetup({},n=n||{}),y=d.context||d,m=d.context&&(y.nodeType||y.jquery)?_(y):_.event,v=_.Deferred(),g=_.Callbacks("once memory"),b=d.statusCode||{},w={},E={},T="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=Le.exec(s);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=E[t.toLowerCase()]=E[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)S.always(t[S.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||T;return i&&i.abort(e),I(0,e),this}};if(v.promise(S),d.url=((e||d.url||Se.href)+"").replace(Fe,Se.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(M)||[""],null==d.crossDomain){c=r.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Be.protocol+"//"+Be.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=_.param(d.data,d.traditional)),We(Ue,d,n,S),l)return S;for(p in(h=_.event&&d.global)&&0==_.active++&&_.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Me.test(d.type),o=d.url.replace(Pe,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Re,"+")):(f=d.url.slice(o.length),d.data&&(d.processData||"string"==typeof d.data)&&(o+=(Ce.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(o=o.replace(Oe,"$1"),f=(Ce.test(o)?"&":"?")+"_="+Ie+++f),d.url=o+f),d.ifModified&&(_.lastModified[o]&&S.setRequestHeader("If-Modified-Since",_.lastModified[o]),_.etag[o]&&S.setRequestHeader("If-None-Match",_.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qe+"; q=0.01":""):d.accepts["*"]),d.headers)S.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(y,S,d)||l))return S.abort();if(T="abort",g.add(d.complete),S.done(d.success),S.fail(d.error),i=We(je,d,n,S)){if(S.readyState=1,h&&m.trigger("ajaxSend",[S,d]),l)return S;d.async&&0<d.timeout&&(u=t.setTimeout((function(){S.abort("timeout")}),d.timeout));try{l=!1,i.send(w,I)}catch(e){if(l)throw e;I(-1,e)}}else I(-1,"No Transport");function I(e,n,r,a){var c,p,f,w,E,T=n;l||(l=!0,u&&t.clearTimeout(u),i=void 0,s=a||"",S.readyState=0<e?4:0,c=200<=e&&e<300||304===e,r&&(w=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,S,r)),w=function(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,w,S,c),c?(d.ifModified&&((E=S.getResponseHeader("Last-Modified"))&&(_.lastModified[o]=E),(E=S.getResponseHeader("etag"))&&(_.etag[o]=E)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=w.state,p=w.data,c=!(f=w.error))):(f=T,!e&&T||(T="error",e<0&&(e=0))),S.status=e,S.statusText=(n||T)+"",c?v.resolveWith(y,[p,T,S]):v.rejectWith(y,[S,T,f]),S.statusCode(b),b=void 0,h&&m.trigger(c?"ajaxSuccess":"ajaxError",[S,d,c?p:f]),g.fireWith(y,[S,T]),h&&(m.trigger("ajaxComplete",[S,d]),--_.active||_.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return _.get(t,e,n,"json")},getScript:function(t,e){return _.get(t,void 0,e,"script")}}),_.each(["get","post"],(function(t,e){_[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),_.ajax(_.extend({url:t,type:e,dataType:i,data:n,success:r},_.isPlainObject(t)&&t))}})),_._evalUrl=function(t,e){return _.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){_.globalEval(t,e)}})},_.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=_(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){_(this).wrapInner(t.call(this,e))})):this.each((function(){var e=_(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){_(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){_(this).replaceWith(this.childNodes)})),this}}),_.expr.pseudos.hidden=function(t){return!_.expr.pseudos.visible(t)},_.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var ze={0:200,1223:204},Ge=_.ajaxSettings.xhr();d.cors=!!Ge&&"withCredentials"in Ge,d.ajax=Ge=!!Ge,_.ajaxTransport((function(e){var n,r;if(d.cors||Ge&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);n=function(t){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(ze[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout((function(){n&&r()}))},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}})),_.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return _.globalEval(t),t}}}),_.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),_.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,o){e=_("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),r.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ke,Qe=[],Ye=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qe.pop()||_.expando+"_"+Ie++;return this[t]=!0,t}}),_.ajaxPrefilter("json jsonp",(function(e,n,r){var i,o,s,a=!1!==e.jsonp&&(Ye.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ye.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ye,"$1"+i):!1!==e.jsonp&&(e.url+=(Ce.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||_.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){s=arguments},r.always((function(){void 0===o?_(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Qe.push(i)),s&&y(o)&&o(s[0]),s=o=void 0})),"script"})),d.createHTMLDocument=((Ke=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ke.childNodes.length),_.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(d.createHTMLDocument?((i=(e=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,e.head.appendChild(i)):e=r),s=!n&&[],(o=N.exec(t))?[e.createElement(o[1])]:(o=_t([t],e,s),s&&s.length&&_(s).remove(),_.merge([],o.childNodes)));var i,o,s},_.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return-1<a&&(r=ge(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<s.length&&_.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?_("<div>").append(_.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){_.fn[e]=function(t){return this.on(e,t)}})),_.expr.pseudos.animated=function(t){return _.grep(_.timers,(function(e){return t===e.elem})).length},_.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=_.css(t,"position"),l=_(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=_.css(t,"top"),u=_.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(o+u).indexOf("auto")?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,_.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):l.css(h)}},_.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){_.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?{top:(e=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===_.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===_.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=_(t).offset()).top+=_.css(t,"borderTopWidth",!0),i.left+=_.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-_.css(r,"marginTop",!0),left:e.left-i.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===_.css(t,"position");)t=t.offsetParent;return t||it}))}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;_.fn[t]=function(r){return W(this,(function(t,r,i){var o;if(m(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),_.each(["top","left"],(function(t,e){_.cssHooks[e]=Ht(d.pixelPosition,(function(t,n){if(n)return n=Wt(t,e),qt.test(n)?_(t).position()[e]+"px":n}))})),_.each({Height:"height",Width:"width"},(function(t,e){_.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){_.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return W(this,(function(e,n,i){var o;return m(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?_.css(e,n,a):_.style(e,n,i,a)}),e,s?i:void 0,s)}}))})),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){_.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}})),_.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),_.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),_.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=o.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||_.guid++,i},_.holdReady=function(t){t?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=A,_.isFunction=y,_.isWindow=m,_.camelCase=K,_.type=b,_.now=Date.now,_.isNumeric=function(t){var e=_.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return _}));var Xe=t.jQuery,$e=t.$;return _.noConflict=function(e){return t.$===_&&(t.$=$e),e&&t.jQuery===_&&(t.jQuery=Xe),_},e||(t.jQuery=t.$=_),_}));